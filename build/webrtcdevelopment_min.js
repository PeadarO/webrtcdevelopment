/* Generated on:Wed Oct 21 2020 17:02:44 GMT+0530 (India Standard Time) || version: 6.6.0 - Altanai (@altanai)  , License : MIT  */var webrtcdevlogs=[];function isJSON(A){if("string"!=typeof A)return!1;try{var t=JSON.parse(A);return"object"==typeof t}catch(A){return!1}}function toStr(A){try{return JSON.stringify(A,function(A,t){return t&&t.sdp?(log(t.sdp.type,"\t",t.sdp.sdp),""):t},"\t")}catch(t){return A}}function getArgsJson(A){var t="";for(i in A)A[i]&&(t+=toStr(A[i]));return t}var webrtcdevlogger={log:function(){console.log(arguments)},info:function(){console.info(arguments)},debug:function(){console.debug(arguments)},warn:function(){console.warn(arguments)},error:function(){console.error(arguments)}},webrtcdev=webrtcdevlogger,RTCMultiConnection=function(A,t){function r(A,t){function r(A){return!A.audio&&!A.video&&!A.screen&&A.data}function a(t,r){A.peersBackup[t]||(A.peersBackup[t]={userid:t,extra:{}}),A.peersBackup[t].extra=r}function s(t){if(t.remoteUserId==A.userid){if(A.peers[t.sender]&&A.peers[t.sender].extra!=t.message.extra&&(A.peers[t.sender].extra=t.extra,A.onExtraDataUpdated({userid:t.sender,extra:t.extra}),a(t.sender,t.extra)),t.message.streamSyncNeeded&&A.peers[t.sender]){var d=A.streamEvents[t.message.streamid];if(!d||!d.stream)return;var c=t.message.action;if("ended"===c||"inactive"===c||"stream-removed"===c)return A.peersBackup[d.userid]&&(d.extra=A.peersBackup[d.userid].extra),void A.onstreamended(d);var B="both"==t.message.type?null:t.message.type;return void("function"==typeof d.stream[c]&&d.stream[c](B))}if("dropPeerConnection"===t.message)return void A.deletePeer(t.sender);if(t.message.allParticipants)return-1===t.message.allParticipants.indexOf(t.sender)&&t.message.allParticipants.push(t.sender),void t.message.allParticipants.forEach(function(t){l[A.peers[t]?"renegotiatePeer":"createNewPeer"](t,{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:r(A.session)})});if(t.message.newParticipant)return t.message.newParticipant==A.userid?void 0:A.peers[t.message.newParticipant]?void 0:void l.createNewPeer(t.message.newParticipant,t.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:r(A.session)});if(t.message.readyForOffer&&(A.attachStreams.length&&(A.waitingForLocalMedia=!1),A.waitingForLocalMedia))return void setTimeout(function(){s(t)},1);if(t.message.newParticipationRequest&&t.sender!==A.userid){A.peers[t.sender]&&A.deletePeer(t.sender);var g={extra:t.extra||{},localPeerSdpConstraints:t.message.remotePeerSdpConstraints||{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:t.message.localPeerSdpConstraints||{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"==typeof t.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:t.message.isOneWay,isDataOnly:"undefined"==typeof t.message.isDataOnly?r(A.session):t.message.isDataOnly,dontGetRemoteStream:"undefined"==typeof t.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:t.message.isOneWay,dontAttachLocalStream:!!t.message.dontGetRemoteStream,connectionDescription:t,successCallback:function(){}};return void A.onNewParticipant(t.sender,g)}return t.message.changedUUID&&A.peers[t.message.oldUUID]&&(A.peers[t.message.newUUID]=A.peers[t.message.oldUUID],delete A.peers[t.message.oldUUID]),t.message.userLeft?(l.onUserLeft(t.sender),void(!t.message.autoCloseEntireSession||A.leave())):void l.addNegotiatedMessage(t.message,t.sender)}}webrtcdev.log(" >>>>  SocketConnection ",A);var d="";d+="?userid="+A.userid,d+="&sessionid="+A.sessionid,d+="&msgEvent="+A.socketMessageEvent,d+="&socketCustomEvent="+A.socketCustomEvent,d+="&autoCloseEntireSession="+!!A.autoCloseEntireSession,!0===A.session.broadcast&&(d+="&oneToMany=true"),d+="&maxParticipantsAllowed="+A.maxParticipantsAllowed,A.enableScalableBroadcast&&(d+="&enableScalableBroadcast=true",d+="&maxRelayLimitPerUser="+(A.maxRelayLimitPerUser||2)),d+="&extra="+JSON.stringify(A.extra||{}),A.socketCustomParameters&&(d+=A.socketCustomParameters);try{io.sockets={}}catch(A){}if(A.socketURL||(webrtcdev.log(" >>>>s  socket.io url is missing , using / "),A.socketURL="/"),"/"!=A.socketURL.substr(A.socketURL.length-1,1))throw"\"socketURL\" MUST end with a slash.";A.enableLogs&&("/"==A.socketURL?webrtcdev.info("socket.io url is: ",location.origin+"/"):webrtcdev.info("socket.io url is: ",A.socketURL));try{A.socket=io(A.socketURL+d,{transports:["websocket"],upgrade:!1})}catch(t){webrtcdev.error("socket.io signaller connection error ",t),A.socket=io.connect(A.socketURL+d,A.socketOptions)}var l=A.multiPeersHandler;A.socket.on("extra-data-updated",function(t,r){A.peers[t]&&(A.peers[t].extra=r,A.onExtraDataUpdated({userid:t,extra:r}),a(t,r))}),A.socket.on(A.socketMessageEvent,s);var c=!1;A.socket.resetProps=function(){c=!1},A.socket.on("connect",function(){c||(c=!0,A.enableLogs&&webrtcdev.info("[RTC header] socket.io connection is opened."),setTimeout(function(){A.socket.emit("extra-data-updated",A.extra)},1e3),t&&t(A.socket))}),A.socket.on("disconnect",function(t){webrtcdev.error("[RTC header] socket.io connection is disconneted ."),A.onSocketDisconnect(t)}),A.socket.on("error",function(t){webrtcdev.error("[RTC header] socket.io connection errorred."),A.onSocketError(t)}),A.socket.on("user-disconnected",function(t){webrtcdev.log("[RTC header] user-disconnected"),t===A.userid||(A.onUserStatusChanged({userid:t,status:"offline",extra:A.peers[t]?A.peers[t].extra||{}:{}}),A.deletePeer(t))}),A.socket.on("user-connected",function(t){webrtcdev.log("[RTC header] A user-connected connected to the session "),t===A.userid||A.onUserStatusChanged({userid:t,status:"online",extra:A.peers[t]?A.peers[t].extra||{}:{}})}),A.socket.on("closed-entire-session",function(t,r){A.leave(),A.onEntireSessionClosed({sessionid:t,userid:t,extra:r})}),A.socket.on("userid-already-taken",function(t,r){A.onUserIdAlreadyTaken(t,r)}),A.socket.on("logs",function(t){A.enableLogs&&webrtcdev.debug("server-logs",t)}),A.socket.on("number-of-broadcast-viewers-updated",function(t){A.onNumberOfBroadcastViewersUpdated(t)}),A.socket.on("set-isInitiator-true",function(t){t!=A.sessionid||(A.isInitiator=!0)})}function a(A){function t(){A.fbr=new FileBufferReader,A.fbr.onProgress=function(t){A.onFileProgress(t)},A.fbr.onBegin=function(t){A.onFileStart(t)},A.fbr.onEnd=function(t){A.onFileEnd(t)}}var r=this,a=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];A.peers={getLength:function(){var A=0;for(var t in this)-1==a.indexOf(t)&&A++;return A},selectFirst:function(){var A;for(var t in this)-1==a.indexOf(t)&&(A=this[t]);return A},getAllParticipants:function(A){var t=[];for(var r in this)-1==a.indexOf(r)&&r!=A&&t.push(r);return t},forEach:function(t){this.getAllParticipants().forEach(function(r){t(A.peers[r])})},send:function(t,a){var s=this;if(!u(t.size)&&!u(t.type)){if(A.enableFileSharing)return void r.shareFile(t,a);"string"!=typeof t&&(t=JSON.stringify(t))}if("text"!==t.type&&!(t instanceof ArrayBuffer)&&!(t instanceof DataView))return void k.send({text:t,channel:this,connection:A,remoteUserId:a});if("text"===t.type&&(t=JSON.stringify(t)),a){var d=A.peers[a];if(d)return d.channels.length?void d.channels.forEach(function(A){A.send(t)}):(A.peers[a].createDataChannel(),A.renegotiate(a),void setTimeout(function(){s.send(t,a)},3e3))}this.getAllParticipants().forEach(function(r){return s[r].channels.length?void s[r].channels.forEach(function(A){A.send(t)}):(A.peers[r].createDataChannel(),A.renegotiate(r),void setTimeout(function(){s[r].channels.forEach(function(A){A.send(t)})},3e3))})}},this.uuid=A.userid,this.getLocalConfig=function(a,s,d){return d||(d={}),{streamsToShare:d.streamsToShare||{},rtcMultiConnection:A,connectionDescription:d.connectionDescription,userid:s,localPeerSdpConstraints:d.localPeerSdpConstraints,remotePeerSdpConstraints:d.remotePeerSdpConstraints,dontGetRemoteStream:!!d.dontGetRemoteStream,dontAttachLocalStream:!!d.dontAttachLocalStream,renegotiatingPeer:!!d.renegotiatingPeer,peerRef:d.peerRef,channels:d.channels||[],onLocalSdp:function(A){r.onNegotiationNeeded(A,s)},onLocalCandidate:function(t){t=L.processCandidates(A,t),t&&r.onNegotiationNeeded(t,s)},remoteSdp:a,onDataChannelMessage:function(a){if(!A.fbr&&A.enableFileSharing&&t(),"string"==typeof a||!A.enableFileSharing)return void r.onDataChannelMessage(a,s);var d=this;return a instanceof ArrayBuffer||a instanceof DataView?void A.fbr.convertToObject(a,function(A){d.onDataChannelMessage(A)}):a.readyForNextChunk?void A.fbr.getNextChunk(a,function(t){A.peers[s].channels.forEach(function(A){A.send(t)})},s):a.chunkMissing?void A.fbr.chunkMissing(a):void A.fbr.addChunk(a,function(t){A.peers[s].peer.channel.send(t)})},onDataChannelError:function(A){r.onDataChannelError(A,s)},onDataChannelOpened:function(A){r.onDataChannelOpened(A,s)},onDataChannelClosed:function(A){r.onDataChannelClosed(A,s)},onRemoteStream:function(t){A.peers[s]&&A.peers[s].streams.push(t),r.onGettingRemoteMedia(t,s)},onRemoteStreamRemoved:function(A){r.onRemovingRemoteMedia(A,s)},onPeerStateChanged:function(A){r.onPeerStateChanged(A),"new"===A.iceConnectionState&&r.onNegotiationStarted(s,A),"connected"===A.iceConnectionState&&r.onNegotiationCompleted(s,A),-1!==A.iceConnectionState.search(/closed|failed/gi)&&(r.onUserLeft(s),r.disconnectWith(s))}}},this.createNewPeer=function(t,r){if(!(A.maxParticipantsAllowed<=A.getAllParticipants().length)){if(r=r||{},!A.isInitiator||!A.session.audio||"two-way"!==A.session.audio||r.streamsToShare||(r.isOneWay=!1,r.isDataOnly=!1,r.session=A.session),!r.isOneWay&&!r.isDataOnly)return r.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:r},t);r=A.setUserPreferences(r,t);var a=this.getLocalConfig(null,t,r);A.peers[t]=new U(a)}},this.createAnsweringPeer=function(t,r,a){a=A.setUserPreferences(a||{},r);var s=this.getLocalConfig(t,r,a);A.peers[r]=new U(s)},this.renegotiatePeer=function(t,r,a){if(!A.peers[t])return void(A.enableLogs&&webrtcdev.error("Peer ("+t+") does not exist. Renegotiation skipped."));r||(r={}),r.renegotiatingPeer=!0,r.peerRef=A.peers[t].peer,r.channels=A.peers[t].channels;var s=this.getLocalConfig(a,t,r);A.peers[t]=new U(s)},this.replaceTrack=function(t,r,a){if(!A.peers[r])throw"This peer ("+r+") does not exist.";var s=A.peers[r].peer;return!!s.getSenders&&"function"==typeof s.getSenders&&s.getSenders().length?void s.getSenders().forEach(function(s){a&&"video"===s.track.kind&&(A.peers[r].peer.lastVideoTrack=s.track,s.replaceTrack(t)),a||"audio"!==s.track.kind||(A.peers[r].peer.lastAudioTrack=s.track,s.replaceTrack(t))}):void(webrtcdev.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(r))},this.onNegotiationStarted=function(){},this.onNegotiationCompleted=function(){},this.onNegotiationNeeded=function(){},this.addNegotiatedMessage=function(t,a){if(webrtcdev.log("[RTC Header] addNegotiatedMessage",t),t.type&&t.sdp)return"answer"==t.type&&A.peers[a]&&A.peers[a].addRemoteSdp(t),"offer"==t.type&&(t.renegotiatingPeer?this.renegotiatePeer(a,null,t):this.createAnsweringPeer(t,a)),void webrtcdev.log("Remote peer's sdp:",t.sdp);if(t.candidate)return A.peers[a]&&A.peers[a].addRemoteCandidate(t),void webrtcdev.log("Remote peer's candidate pairs:",t.candidate);if(t.enableMedia){A.session=t.userPreferences.session||A.session,A.session.oneway&&A.attachStreams.length&&(A.attachStreams=[]),t.userPreferences.isDataOnly&&A.attachStreams.length&&(A.attachStreams.length=[]);var s={};A.attachStreams.forEach(function(A){s[A.streamid]={isAudio:!!A.isAudio,isVideo:!!A.isVideo,isScreen:!!A.isScreen}}),t.userPreferences.streamsToShare=s,r.onNegotiationNeeded({readyForOffer:!0,userPreferences:t.userPreferences},a)}t.readyForOffer&&A.onReadyForOffer(a,t.userPreferences)},this.onGettingRemoteMedia=function(){},this.onRemovingRemoteMedia=function(){},this.onGettingLocalMedia=function(){},this.onLocalMediaError=function(t,r){A.onMediaError(t,r)},this.shareFile=function(r,a){t(),A.fbr.readAsArrayBuffer(r,function(t){var r=A.getAllParticipants();a&&(r=[a]),r.forEach(function(r){A.fbr.getNextChunk(t,function(t){A.peers[r].channels.forEach(function(A){A.send(t)})},r)})},{userid:A.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15000:A.chunkSize||0})};var s;s=new b(A),this.onDataChannelMessage=function(t,r){s.receive(JSON.parse(t),r,A.peers[r]?A.peers[r].extra:{})},this.onDataChannelClosed=function(t,r){t.userid=r,t.extra=A.peers[r]?A.peers[r].extra:{},A.onclose(t)},this.onDataChannelError=function(t,r){t.userid=r,event.extra=A.peers[r]?A.peers[r].extra:{},A.onerror(t)},this.onDataChannelOpened=function(t,r){return A.peers[r].channels.length?void(A.peers[r].channels=[t]):void(A.peers[r].channels.push(t),A.onopen({userid:r,extra:A.peers[r]?A.peers[r].extra:{},channel:t}))},this.onPeerStateChanged=function(t){A.onPeerStateChanged(t)},this.getRemoteStreams=function(t){return t=t||A.peers.getAllParticipants()[0],A.peers[t]?A.peers[t].streams:[]}}function s(A,t,r){if("undefined"!=typeof CustomEvent){var a=new CustomEvent(t,{arguments:r,__exposedProps__:r});A.dispatchEvent(a)}}function d(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var A=window.crypto.getRandomValues(new Uint32Array(3)),t="",r=0,a=A.length;r<a;r++)t+=A[r].toString(36);return t}return(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"")}function l(A,t,r){if(webrtcdev.log("[RTC global] getRMCMediaElement"),!r.autoCreateMediaElement)return webrtcdev.log("[RTC global] getRMCMediaElement - not autoCreateMediaElement"),void t({});var a=!1;w(A,"video").length||A.isVideo||A.isScreen||(a=!0),"Firefox"===DetectRTC.browser.name&&(r.session.video||r.session.screen)&&(a=!1);var s=document.createElement(a?"audio":"video");if(s.srcObject=A,s.setAttribute("autoplay",!0),s.setAttribute("playsinline",!0),s.setAttribute("controls",!0),s.setAttribute("muted",!1),s.setAttribute("volume",1),"Firefox"===DetectRTC.browser.name){var d="ended";"oninactive"in s&&(d="inactive"),s.addEventListener(d,function(){if(currentUserMediaRequest.remove(A.idInstance),"local"===A.type){d="ended","oninactive"in A&&(d="inactive"),D.onSyncNeeded(A.streamid,d),r.attachStreams.forEach(function(t,a){A.streamid===t.streamid&&delete r.attachStreams[a]});var t=[];r.attachStreams.forEach(function(A){A&&t.push(A)}),r.attachStreams=t;var a=r.streamEvents[A.streamid];if(a)return void r.onstreamended(a);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var l=s.play();if("undefined"!=typeof l){var c=!1;setTimeout(function(){c||(c=!0,t(s))},1e3),l.then(function(){c||(c=!0,t(s))}).catch(function(){c||(c=!0,t(s))})}else t(s)}function c(A,t){window.removeEventListener(A,t),window.addEventListener(A,t,!1)}function B(A){var t=[];return A.forEach(function(A){A&&t.push(A)}),t}function g(A){return!A.audio&&!A.video&&!A.screen&&A.data}function u(A){return"undefined"==typeof A}function m(A){return"string"==typeof A}function p(A,t){return!(A.session.audio&&"two-way"===A.session.audio)&&(!("Firefox"!==DetectRTC.browser.name||!1===t)||!("Chrome"!==DetectRTC.browser.name||50>DetectRTC.browser.version)&&(!(!0!==typeof t)||!!("undefined"==typeof t&&A.session.audio&&A.session.screen&&!A.session.video)&&(t=!0,!0)))}function w(A,r){return A&&A.getTracks?A.getTracks().filter(function(A){return A.kind===(r||"audio")}):[]}function h(){var A=!1;try{if("undefined"==typeof RTCRtpTransceiver)return webrtcdev.error("[RTC global] RTCRtpTransceiver  not supported  "),!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return webrtcdev.error("[RTC global] RTCRtpTransceiver currentDirection not present  "),!1;var t=new RTCPeerConnection;try{t.addTransceiver("audio"),A=!0}catch(A){webrtcdev.error("[RTC global] RTCRtpTransceiver addTransceiver error ",A)}t.close()}catch(t){A=!1,webrtcdev.error("[RTC global] RTCRtpTransceiver error ",t)}return A&&C()}function C(){var A=!1;try{var t=new RTCPeerConnection({sdpSemantics:"unified-plan"});try{var r=t.getConfiguration();A=!("unified-plan"!=r.sdpSemantics)||"plan-b"!=r.sdpSemantics&&!1}catch(t){A=!1}}catch(t){A=!1}return A}function Q(A){var t={OfferToReceiveAudio:!!A.OfferToReceiveAudio,OfferToReceiveVideo:!!A.OfferToReceiveVideo};return t}function U(A){function t(t){t.binaryType="arraybuffer",t.onmessage=function(t){A.onDataChannelMessage(t.data)},t.onopen=function(){A.onDataChannelOpened(t)},t.onerror=function(t){A.onDataChannelError(t)},t.onclose=function(t){A.onDataChannelClosed(t)},t.internalSend=t.send,t.send=function(A){"open"!==t.readyState||t.internalSend(A)},c.channel=t}function r(t){webrtcdev.log("[RTC PC] createOfferOrAnswer ",t," , defaults.sdpConstraints ",S.sdpConstraints),c[t](S.sdpConstraints).then(function(t){"Safari"!==DetectRTC.browser.name&&(t.sdp=a.processSdp(t.sdp)),c.setLocalDescription(t).then(function(){return webrtcdev.log("[RTC PC] createOfferOrAnswer - connection ",a),webrtcdev.log("[RTC PC] createOfferOrAnswer - localSDP ",t.type,t.sdp),a.trickleIce?void(A.onLocalSdp({type:t.type,sdp:t.sdp,remotePeerSdpConstraints:A.remotePeerSdpConstraints||!1,renegotiatingPeer:!!A.renegotiatingPeer||!1,connectionDescription:s.connectionDescription,dontGetRemoteStream:!!A.dontGetRemoteStream,extra:a?a.extra:{},streamsToShare:C}),a.onSettingLocalDescription(s)):void webrtcdev.error("[RTC PC] not trickleICE ")},function(A){webrtcdev.error("[RTC PC] setLocalDescription error",A)})},function(A){webrtcdev.error("[RTC PC] setLocalDescription sdp-error",A)})}if(!RTCPeerConnection)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";webrtcdev.log(" [PeerInitiator] RTCPeerConnection - ",RTCPeerConnection);var a=A.rtcMultiConnection;this.extra=A.remoteSdp?A.remoteSdp.extra:a.extra,this.userid=A.userid,this.streams=[],this.channels=A.channels||[],this.connectionDescription=A.connectionDescription,this.addStream=function(A){a.addStream(A,s.userid)},this.removeStream=function(A){a.removeStream(A,s.userid)};var s=this;A.remoteSdp&&(this.connectionDescription=A.remoteSdp.connectionDescription);var d={};S.sdpConstraints=Q({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var l=!!A.renegotiatingPeer,c;A.remoteSdp&&(l=!!A.remoteSdp.renegotiatingPeer);var B=[];if(a.attachStreams.forEach(function(A){!A||B.push(A)}),!l){var g="all";!a.candidates.turn&&!a.candidates.relay||a.candidates.stun||a.candidates.reflexive||a.candidates.host||(g="relay");try{var u={iceServers:a.iceServers,iceTransportPolicy:a.iceTransportPolicy||g};"undefined"!=typeof a.iceCandidatePoolSize&&(u.iceCandidatePoolSize=a.iceCandidatePoolSize),"undefined"!=typeof a.bundlePolicy&&(u.bundlePolicy=a.bundlePolicy),"undefined"!=typeof a.rtcpMuxPolicy&&(u.rtcpMuxPolicy=a.rtcpMuxPolicy),!a.sdpSemantics||(u.sdpSemantics=a.sdpSemantics||"unified-plan"),a.iceServers&&a.iceServers.length||(u=null,a.optionalArgument=null),webrtcdev.log("[PeerInitiator] RTCPeerConnection params - ",u," connection.optionalArgument ",a.optionalArgument),c=new RTCPeerConnection(u,a.optionalArgument)}catch(A){webrtcdev.error("[RTC PC ] PeerInitiator -  error ",A," try making peerconnection without optional arguments , just with params like iceservers");try{var u={iceServers:a.iceServers};c=new RTCPeerConnection(u)}catch(A){c=new RTCPeerConnection,webrtcdev.error("[RTC PC ] PeerInitiator - error again ",A," create empty RTC Peerconnection without params or optional arguments  ")}}}else c=A.peerRef;!c.getRemoteStreams&&c.getReceivers&&(c.getRemoteStreams=function(){var A=new H;return c.getReceivers().forEach(function(t){A.addTrack(t.track),webrtcdev.log("[PeerInitiator] RTCPeerConnection - getReceivers and addTrack ")}),[A]}),webrtcdev.log("[PeerInitiator ] peer.getSenders ",c.getSenders()),!c.getLocalStreams&&c.getSenders&&(c.getLocalStreams=function(){var A=new H;return c.getSenders().forEach(function(t){A.addTrack(t.track),webrtcdev.log("[PeerInitiator] RTCPeerConnection - getSenders and addTrack ")}),[A]}),c.onicecandidate=function(t){if(webrtcdev.log("[PeerInitiator ] peer.onicecandidate  ",t),!t.candidate){if(!a.trickleIce){var r=c.localDescription;A.onLocalSdp({type:r.type,sdp:r.sdp,remotePeerSdpConstraints:A.remotePeerSdpConstraints||!1,renegotiatingPeer:!!A.renegotiatingPeer||!1,connectionDescription:s.connectionDescription,dontGetRemoteStream:!!A.dontGetRemoteStream,extra:a?a.extra:{},streamsToShare:C})}return void webrtcdev.log("[PeerInitiator ] peer.onicecandidate - end-of-candidate , return with local description ")}return a.trickleIce?void(A.onLocalCandidate({candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex}),webrtcdev.log("[PeerInitiator] onicecandidate - update local SDP with ",t.candidate.candidate)):void webrtcdev.error("[PeerInitiator] onicecandidate - trickleIce not set ")},B.forEach(function(t){return A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams remotePeerSdpConstraints.dontGetRemoteStream ",A.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream):A.dontAttachLocalStream?void webrtcdev.warn("[RTC PC ] PeerInitiator - localStreams dontAttachLocalStream",A.dontAttachLocalStream):void(t=a.beforeAddingStream(t,s),t&&(c.getLocalStreams().forEach(function(A){t&&A.id==t.id&&(t=null)}),t&&t.getTracks&&t.getTracks().forEach(function(A){try{c.addTrack(A,t)}catch(A){}})))}),c.oniceconnectionstatechange=c.onsignalingstatechange=function(){var t=s.extra;a.peers[s.userid]&&(t=a.peers[s.userid].extra||t),c&&(("failed"===c.iceConnectionState||"disconnected"===c.iceConnectionState||"closed"===c.iceConnectionState)&&webrtcdev.log("[RTC PC] ontrack event - oniceconnectionstatechange ",c.iceConnectionState),A.onPeerStateChanged({iceConnectionState:c.iceConnectionState,iceGatheringState:c.iceGatheringState,signalingState:c.signalingState,extra:t,userid:s.userid}),c&&c.iceConnectionState&&-1!==c.iceConnectionState.search(/closed|failed/gi)&&s.streams instanceof Array&&s.streams.forEach(function(A){var t=a.streamEvents[A.id]||{streamid:A.id,stream:A,type:"remote"};a.onstreamended(t)}))};var m={OfferToReceiveAudio:!!B.length,OfferToReceiveVideo:!!B.length};A.localPeerSdpConstraints&&(m=A.localPeerSdpConstraints),S.sdpConstraints=Q(m);var p={};c.ontrack=function(t){if(webrtcdev.log("[RTC PC] ontrack event - ",t),t&&"track"===t.type){if(t.stream=t.streams[t.streams.length-1],t.stream.id||(t.stream.id=t.track.id),p[t.stream.id]&&"Safari"!==DetectRTC.browser.name)return void(t.track&&(t.track.onended=function(){c&&c.onremovestream(t)}));p[t.stream.id]=t.stream.id;var r={};A.remoteSdp&&A.remoteSdp.streamsToShare?r=A.remoteSdp.streamsToShare:A.streamsToShare&&(r=A.streamsToShare);var a=r[t.stream.id];a?(t.stream.isAudio=a.isAudio,t.stream.isVideo=a.isVideo,t.stream.isScreen=a.isScreen):(t.stream.isVideo=!!w(t.stream,"video").length,t.stream.isAudio=!t.stream.isVideo,t.stream.isScreen=!1),t.stream.streamid=t.stream.id,d[t.stream.id]=t.stream,A.onRemoteStream(t.stream),t.stream.getTracks().forEach(function(A){A.onended=function(){c&&c.onremovestream(t)}}),t.stream.onremovetrack=function(){c&&c.onremovestream(t)}}},c.onremovestream=function(t){t.stream.streamid=t.stream.id,d[t.stream.id]&&delete d[t.stream.id],A.onRemoteStreamRemoved(t.stream)},"function"!=typeof c.removeStream&&(c.removeStream=function(A){A.getTracks().forEach(function(t){c.removeTrack(t,A)})}),this.addRemoteCandidate=function(A){webrtcdev.log("[RTC PC] addRemoteCandidate - remoteCandidate ",A);let t=new I(A);webrtcdev.log("[RTC PC] addRemoteCandidate - RTCIceCandidate ",t),c.addIceCandidate(t)},this.addRemoteSdp=function(A,t){t=t||function(){},"Safari"!==DetectRTC.browser.name&&(webrtcdev.log("[RTC PC] addRemoteSdp - modify the SDP before setting remote Description"),A.sdp=a.processSdp(A.sdp)),c.setRemoteDescription(new T(A)).then(t,function(r){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",r,"\n",A.sdp),t()}).catch(function(r){webrtcdev.error("[RTC PC] setRemoteDescription failed","\n",r,"\n",A.sdp),t()})};var h=!0;A.remoteSdp&&(h=!1),this.createDataChannel=function(){var A=c.createDataChannel("sctp",{});t(A)},!0!==a.session.data||l||(h?this.createDataChannel():c.ondatachannel=function(A){var r=A.channel;t(r)}),this.enableDisableVideoEncoding=function(A){var t;if(c.getSenders().forEach(function(A){t||"video"!==A.track.kind||(t=A)}),t&&t.getParameters){var r=t.getParameters();r.encodings[1]&&(r.encodings[1].active=!!A),r.encodings[2]&&(r.encodings[2].active=!!A),t.setParameters(r)}},A.remoteSdp&&(A.remoteSdp.remotePeerSdpConstraints&&(m=A.remoteSdp.remotePeerSdpConstraints),S.sdpConstraints=Q(m),this.addRemoteSdp(A.remoteSdp,function(){r("createAnswer")})),("two-way"==a.session.audio||"two-way"==a.session.video||"two-way"==a.session.screen)&&(S.sdpConstraints=Q({OfferToReceiveAudio:"two-way"==a.session.audio||A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==a.session.video||"two-way"==a.session.screen||A.remoteSdp&&A.remoteSdp.remotePeerSdpConstraints&&A.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var C={};c.getLocalStreams().forEach(function(A){C[A.streamid]={isAudio:!!A.isAudio,isVideo:!!A.isVideo,isScreen:!!A.isScreen}}),h&&r("createOffer"),c.nativeClose=c.close,c.close=function(){if(c){try{c.nativeClose!==c.close&&c.nativeClose()}catch(A){webrtcdev.error("[RTCPeerocnnection ] peer onclose error ",A)}c=null,s.peer=null}},this.peer=c}function E(A,t){A.mandatory&&A.mandatory.chromeMediaSource?t.isScreen=!0:A.mozMediaSource||A.mediaSource?t.isScreen=!0:A.video?t.isVideo=!0:A.audio&&(t.isAudio=!0)}function F(A){function t(t,a){E(A.localMediaConstraints,t);var s="ended";"oninactive"in t&&(s="inactive"),t.addEventListener(s,function(){delete currentUserMediaRequest.streams[r],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(A)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(A)],currentUserMediaRequest.queueRequests=B(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[r]={stream:t},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&F(currentUserMediaRequest.queueRequests.shift()),A.onGettingLocalMedia(t,a)}if(!0===currentUserMediaRequest.mutex)return void currentUserMediaRequest.queueRequests.push(A);currentUserMediaRequest.mutex=!0;var r=JSON.stringify(A.localMediaConstraints);if(currentUserMediaRequest.streams[r])t(currentUserMediaRequest.streams[r].stream,!0);else{if("undefined"==typeof navigator.mediaDevices){webrtcdev.log("[ getusermediahandler ] Capture undefined - localMediaConstraints : ",A.localMediaConstraints),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var a=function(){},s=function(){},l,c;navigator.mediaDevices={getUserMedia:function(A){return navigator.getUserMedia(A,function(A){A(stream),l=stream},function(A){s(A),c=A}),{then:function(A){return l?void A(l):(a=A,{then:function(A){return c?void A(c):void(s=A)}})}}}}}if(!0===A.localMediaConstraints.isScreen){if(webrtcdev.log("[ getusermediahandler ] Capture screen  - localMediaConstraints : ",A.localMediaConstraints),navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||d(),A.idInstance=r,t(A)}).catch(function(t){A.onLocalMediaError(t,A.localMediaConstraints)});else if(navigator.getDisplayMedia)navigator.getDisplayMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||d(),A.idInstance=r,t(A)}).catch(function(t){A.onLocalMediaError(t,A.localMediaConstraints)});else throw new Error("getDisplayMedia API is not availabe in this browser.");return}webrtcdev.log("[ getusermediahandler ] Capture Video camera  - localMediaConstraints : ",A.localMediaConstraints),navigator.mediaDevices.getUserMedia(A.localMediaConstraints).then(function(A){A.streamid=A.streamid||A.id||d(),A.idInstance=r,webrtcdev.log("[ getusermediahandler ] Local stream obtained with stream id ",A.streamid),t(A)}).catch(function(t){webrtcdev.error("[ getusermediahandler ] error in getting Local stream ",t),A.onLocalMediaError(t,A.localMediaConstraints)})}}function b(A){var t={};return{receive:function(r,a,s){var d=r.uuid;if(t[d]||(t[d]=[]),t[d].push(r.message),r.last){var l=t[d].join("");r.isobject&&(l=JSON.parse(l));var c=new Date().getTime(),B=c-r.sendingTime,g={data:l,userid:a,extra:s,latency:B};A.autoTranslateText?(g.original=g.data,A.Translator.TranslateText(g.data,function(t){g.data=t,A.onmessage(g)})):A.onmessage(g),delete t[d]}}}}(function(A){A&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(A.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var A={getContext:function(){return A},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return A},document.addEventListener=document.removeEventListener=A.addEventListener=A.removeEventListener=function(){},A.HTMLVideoElement=A.HTMLMediaElement=function(){}),"undefined"==typeof io&&(A.io=function(){return{on:function(A,t){t=t||function(){},"connect"===A&&t()},emit:function(A,t,r){r=r||function(){},("open-room"===A||"join-room"===A)&&r(!0,t.sessionid,null)}}}),"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"==typeof screen&&(A.screen={width:0,height:0}),"undefined"==typeof URL&&(A.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),A.window=global)})("undefined"==typeof global?null:global),"",function(){function A(){var A=u.appVersion,t=u.userAgent,r=u.appName,a=""+parseFloat(u.appVersion),s=parseInt(u.appVersion,10),d,l,c;if(C&&!Q&&-1!==t.indexOf("CriOS")&&(C=!1,Q=!0),w){r="Opera";try{a=u.userAgent.split("OPR/")[1].split(" ")[0],s=a.split(".")[0]}catch(A){a="0.0.0.0",s=0}}else U?(l=t.indexOf("rv:"),0<l?a=t.substring(l+3):(l=t.indexOf("MSIE"),a=t.substring(l+5)),r="IE"):Q?(l=t.indexOf("Chrome"),r="Chrome",a=t.substring(l+7)):C?(l=t.indexOf("Safari"),r="Safari",a=t.substring(l+7),-1!==(l=t.indexOf("Version"))&&(a=t.substring(l+8)),-1!==u.userAgent.indexOf("Version/")&&(a=u.userAgent.split("Version/")[1].split(" ")[0])):h?(l=t.indexOf("Firefox"),r="Firefox",a=t.substring(l+8)):(d=t.lastIndexOf(" ")+1)<(l=t.lastIndexOf("/"))&&(r=t.substring(d,l),a=t.substring(l+1),r.toLowerCase()===r.toUpperCase()&&(r=u.appName));return p&&(r="Edge",a=u.userAgent.split("Edge/")[1]),-1!==(c=a.search(/[; \)]/))&&(a=a.substring(0,c)),s=parseInt(""+a,10),isNaN(s)&&(a=""+parseFloat(u.appVersion),s=parseInt(u.appVersion,10)),{fullVersion:a,version:s,name:r,isPrivateBrowsing:!1}}function t(A,t){var r=0,a=!1,s=window.setInterval(function(){A()&&(window.clearInterval(s),t(a)),50<r++&&(window.clearInterval(s),a=!0,t(a))},10)}function r(A){var t=A.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var r=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(r&&10<=parseInt(r[1],10))}function a(){for(var A="-",t=u.appVersion,r=u.userAgent,a=A,s=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],d=0,l;l=s[d];d++)if(l.r.test(r)){a=l.s;break}var c=A;return /Windows/.test(a)&&(/Windows (.*)/.test(a)&&(c=/Windows (.*)/.exec(a)[1]),a="Windows"),"Mac OS X"===a?/Mac OS X (10[\.\_\d]+)/.test(r)&&(c=/Mac OS X (10[\.\_\d]+)/.exec(r)[1]):"Android"===a?/Android ([\.\_\d]+)/.test(r)&&(c=/Android ([\.\_\d]+)/.exec(r)[1]):"iOS"===a?/OS (\d+)_(\d+)_?(\d+)?/.test(r)&&(c=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),c=c[1]+"."+c[2]+"."+(0|c[3])):void 0,{osName:a,osVersion:c}}function s(A){A=(A||u.userAgent).toLowerCase();var t=A.match(/android\s([0-9\.]*)/);return!!t&&t[1]}function d(A,t){function r(t){if(!t)return void A();var r=R.exec(t);if(r){var a=r[1],d=t.match(I);void 0===s[a]&&A(a,d,!0),s[a]=!0}}function a(){var A=g.localDescription.sdp.split("\n");A.forEach(function(A){A&&0===A.indexOf("a=candidate:")&&r(A)})}if("undefined"!=typeof document&&"function"==typeof document.getElementById){var s={},d=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!d){var l=document.getElementById("iframe");if(!l)return;var c=l.contentWindow;d=c.RTCPeerConnection||c.mozRTCPeerConnection||c.webkitRTCPeerConnection}if(d){var B=null;"Chrome"===G.browser&&58>G.browser.version&&(B={optional:[{RtpDataChannels:!0}]});var g=new d({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},B);if(t&&(g.addStream?g.addStream(t):g.addTrack&&t.getTracks()[0]&&g.addTrack(t.getTracks()[0],t)),g.onicecandidate=function(A){A.candidate&&A.candidate.candidate?r(A.candidate.candidate):r()},!t)try{g.createDataChannel("sctp",{})}catch(A){}G.isPromisesSupported?g.createOffer().then(function(A){g.setLocalDescription(A).then(a)}):g.createOffer(function(A){g.setLocalDescription(A,a,function(){})},function(){})}}}function l(A){if(!O)return void(A&&A());if(!u.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(u.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!u.enumerateDevices&&u.enumerateDevices&&(u.enumerateDevices=u.enumerateDevices.bind(u)),!u.enumerateDevices)return void(A&&A());L=[],M=[],D=[],k=[],K=!1,_=!1,P=!1,V=!1,z=!1;var t={};u.enumerateDevices(function(r){r.forEach(function(A){var r={};for(var a in A)try{"function"!=typeof A[a]&&(r[a]=A[a])}catch(A){}t[r.deviceId+r.label+r.kind]||("audio"===r.kind&&(r.kind="audioinput"),"video"===r.kind&&(r.kind="videoinput"),!r.deviceId&&(r.deviceId=r.id),!r.id&&(r.id=r.deviceId),r.label?("videoinput"===r.kind&&!z&&(z=!0),"audioinput"===r.kind&&!V&&(V=!0)):(r.isCustomLabel=!0,r.label="videoinput"===r.kind?"Camera "+(k.length+1):"audioinput"===r.kind?"Microphone "+(M.length+1):"audiooutput"===r.kind?"Speaker "+(D.length+1):"Please invoke getUserMedia once.","undefined"!=typeof G&&G.browser.isChrome&&46<=G.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(r.label="HTTPs is required to get label of this "+r.kind+" device.")),"audioinput"===r.kind&&(K=!0,-1===M.indexOf(r)&&M.push(r)),"audiooutput"===r.kind&&(_=!0,-1===D.indexOf(r)&&D.push(r)),"videoinput"===r.kind&&(P=!0,-1===k.indexOf(r)&&k.push(r)),L.push(r),t[r.deviceId+r.label+r.kind]=r)}),"undefined"!=typeof G&&(G.MediaDevices=L,G.hasMicrophone=K,G.hasSpeakers=_,G.hasWebcam=P,G.isWebsiteHasWebcamPermissions=z,G.isWebsiteHasMicrophonePermissions=V,G.audioInputDevices=M,G.audioOutputDevices=D,G.videoInputDevices=k),A&&A()})}var c="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",B="object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&!process.browser;if(B){var g=process.versions.node.toString().replace("v","");c="Nodejs/"+g+" (NodeOS) AppleWebKit/"+g+" (KHTML, like Gecko) Nodejs/"+g+" Nodejs/"+g}(function(A){"undefined"!=typeof window||("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:c,getUserMedia:function(){}},A.window=global):"undefined"==typeof window,"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(A.screen={width:0,height:0}))})("undefined"==typeof global?window:global);var u=window.navigator;"undefined"==typeof u?u={getUserMedia:function(){},userAgent:c}:("undefined"!=typeof u.webkitGetUserMedia&&(u.getUserMedia=u.webkitGetUserMedia),"undefined"!=typeof u.mozGetUserMedia&&(u.getUserMedia=u.mozGetUserMedia));var m=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(u.userAgent||""),p=-1!==u.userAgent.indexOf("Edge")&&(!!u.msSaveOrOpenBlob||!!u.msSaveBlob),w=!!window.opera||0<=u.userAgent.indexOf(" OPR/"),h="undefined"!=typeof window.InstallTrigger,C=/^((?!chrome|android).)*safari/i.test(u.userAgent),Q=!!window.chrome&&!w,U="undefined"!=typeof document&&!!document.documentMode&&!p,E={Android:function(){return u.userAgent.match(/Android/i)},BlackBerry:function(){return u.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return u.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return u.userAgent.match(/Opera Mini/i)},Windows:function(){return u.userAgent.match(/IEMobile/i)},any:function(){return E.Android()||E.BlackBerry()||E.iOS()||E.Opera()||E.Windows()},getOsName:function(){var A="Unknown OS";return E.Android()&&(A="Android"),E.BlackBerry()&&(A="BlackBerry"),E.iOS()&&(A="iOS"),E.Opera()&&(A="Opera Mini"),E.Windows()&&(A="Windows"),A}},F="Unknown OS",b="Unknown OS Version",H=a();H&&H.osName&&"-"!=H.osName?(F=H.osName,b=H.osVersion):E.any()&&(F=E.getOsName(),"Android"==F&&(b=s()));var B="object"==typeof process&&"object"==typeof process.versions&&process.versions.node;"Unknown OS"===F&&B&&(F="Nodejs",b=process.versions.node.toString().replace("v",""));var S=!1,T=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(A){"undefined"==typeof document||"function"!=typeof document.createElement||(!S&&A in document.createElement("canvas")&&(S=!0),!T&&A in document.createElement("video")&&(T=!0))});var I=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,R=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,L=[],M=[],D=[],k=[];u.mediaDevices&&u.mediaDevices.enumerateDevices&&(u.enumerateDevices=function(A){var t=u.mediaDevices.enumerateDevices();t&&t.then?u.mediaDevices.enumerateDevices().then(A).catch(function(){A([])}):A([])});var O=!1;"undefined"!=typeof N&&"getSources"in N?O=!0:u.mediaDevices&&!!u.mediaDevices.enumerateDevices&&(O=!0);var K=!1,_=!1,P=!1,V=!1,z=!1,G=window.DetectRTC||{};G.browser=A(),function(A){var a;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){a=!1},function(){a=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var s;try{s=window.indexedDB.open("test"),s.onerror=function(){return!0}}catch(A){a=!0}"undefined"==typeof a&&t(function(){return"done"===s.readyState},function(A){A||(a=!s.result)})}else if(r(window.navigator.userAgent)){a=!1;try{window.indexedDB||(a=!0)}catch(A){a=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(A){a=!0}"undefined"==typeof a&&(a=!1,window.localStorage.removeItem("test"))}}catch(A){a=!1}t(function(){return"undefined"!=typeof a},function(){A(a)})}(function(A){G.browser.isPrivateBrowsing=!!A}),G.browser["is"+G.browser.name]=!0,G.osName=F,G.osVersion=b;var X="object"==typeof process&&"object"==typeof process.versions&&process.versions["node-webkit"],J=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(A){J||A in window&&(J=!0)}),G.isWebRTCSupported=J,G.isORTCSupported="undefined"!=typeof RTCIceGatherer;var Y=!1;if(G.browser.isChrome&&35<=G.browser.version?Y=!0:G.browser.isFirefox&&34<=G.browser.version?Y=!0:G.browser.isEdge&&17<=G.browser.version?Y=!0:"Android"===G.osName&&G.browser.isChrome&&(Y=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var W="undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);W&&(G.browser.isChrome||G.browser.isEdge||G.browser.isOpera)?Y=!1:G.browser.isFirefox&&(Y=!1)}G.isScreenCapturingSupported=Y;var q={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(A){q.isSupported||A in window&&(q.isSupported=!0,window[A]&&"createMediaStreamSource"in window[A].prototype&&(q.isCreateMediaStreamSourceSupported=!0))}),G.isAudioContextSupported=q.isSupported,G.isCreateMediaStreamSourceSupported=q.isCreateMediaStreamSourceSupported;var Z=!1;G.browser.isChrome&&31<G.browser.version&&(Z=!0),G.isRtpDataChannelsSupported=Z;var ee=!1;G.browser.isFirefox&&28<G.browser.version?ee=!0:G.browser.isChrome&&25<G.browser.version?ee=!0:G.browser.isOpera&&11<=G.browser.version&&(ee=!0),G.isSctpDataChannelsSupported=ee,G.isMobileDevice=m;var Ae=!1;u.getUserMedia?Ae=!0:u.mediaDevices&&u.mediaDevices.getUserMedia&&(Ae=!0),G.browser.isChrome&&46<=G.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(Ae="Requires HTTPs"),"Nodejs"===G.osName&&(Ae=!1),G.isGetUserMediaSupported=Ae,G.isCanvasSupportsStreamCapturing=S,G.isVideoSupportsStreamCapturing=T,"Chrome"==G.browser.name&&53<=G.browser.version&&(!G.isCanvasSupportsStreamCapturing&&(G.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),!G.isVideoSupportsStreamCapturing&&(G.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),G.DetectLocalIPAddress=function(A,t){if(G.isWebRTCSupported){var r=!0,a=!0;d(function(t){t?t.match(I)?(r=!1,A("Local: "+t,r,a)):t.match(/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/)?(a=!1,A("Public: "+t,r,a)):A("Public: "+t,r,a):A()},t)}},G.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,G.isWebSocketsBlocked=!G.isWebSocketsSupported,"Nodejs"===G.osName&&(G.isWebSocketsSupported=!0,G.isWebSocketsBlocked=!1),G.checkWebSocketsSupport=function(A){A=A||function(){};try{var t=new WebSocket("wss://echo.websocket.org:443/"),r;t.onopen=function(){G.isWebSocketsBlocked=!1,r=new Date().getTime(),t.send("ping")},t.onmessage=function(){G.WebsocketLatency=new Date().getTime()-r+"ms",A(),t.close(),t=null},t.onerror=function(){G.isWebSocketsBlocked=!0,A()}}catch(t){G.isWebSocketsBlocked=!0,A()}},G.load=function(A){A=A||function(){},l(A)},"function"==typeof l,G.MediaDevices="undefined"==typeof L?[]:L,G.hasMicrophone=K,G.hasSpeakers=_,G.hasWebcam=P,G.isWebsiteHasWebcamPermissions=z,G.isWebsiteHasMicrophonePermissions=V,G.audioInputDevices=M,G.audioOutputDevices=D,G.videoInputDevices=k;var te=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(te=!0),G.isSetSinkIdSupported=te;var ne=!1;G.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(ne=!0):G.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(ne=!0),G.isRTPSenderReplaceTracksSupported=ne;var re=!1;G.browser.isFirefox&&38<G.browser.version&&(re=!0),G.isRemoteStreamProcessingSupported=re;var ae=!1;"undefined"!=typeof N&&"applyConstraints"in N.prototype&&(ae=!0),G.isApplyConstraintsSupported=ae;var ie=!1;G.browser.isFirefox&&43<=G.browser.version&&(ie=!0),G.isMultiMonitorScreenCapturingSupported=ie,G.isPromisesSupported=!!("Promise"in window),G.version="1.3.9","undefined"==typeof G&&(window.DetectRTC={});var oe=window.MediaStream;"undefined"==typeof oe&&"undefined"!=typeof webkitMediaStream&&(oe=webkitMediaStream),G.MediaStream="undefined"!=typeof oe&&"function"==typeof oe&&Object.keys(oe.prototype),G.MediaStreamTrack="undefined"!=typeof N&&Object.keys(N.prototype);var se=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;G.RTCPeerConnection="undefined"!=typeof se&&Object.keys(se.prototype),window.DetectRTC=G,"undefined"!=typeof module&&(module.exports=G),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return G})}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(A,t,r){A.attachEvent&&A.attachEvent("on"+t,r)}),window.attachEventListener=function(A,t,r,a){A.addEventListener(t,r,a)};var H=window.MediaStream;"undefined"==typeof H&&"undefined"!=typeof webkitMediaStream&&(H=webkitMediaStream),"undefined"==typeof H||"stop"in H.prototype||(H.prototype.stop=function(){this.getTracks().forEach(function(A){A.stop()})}),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker";var S={},T=window.RTCSessionDescription||window.mozRTCSessionDescription,I=window.RTCIceCandidate||window.mozRTCIceCandidate,N=window.MediaStreamTrack,R=function(){function A(A,a){webrtcev.log("[RTC codec ] codecs ",a);var s=r(A);return s.videoCodecNumbers?"vp8"===a&&s.vp8LineNumber===s.videoCodecNumbers[0]?A:"vp9"===a&&s.vp9LineNumber===s.videoCodecNumbers[0]?A:"h264"===a&&s.h264LineNumber===s.videoCodecNumbers[0]?A:(A=t(A,a,s),A):A}function t(A,t,r,a){var s="";if("vp8"===t){if(!r.vp8LineNumber)return A;s=r.vp8LineNumber}if("vp9"===t){if(!r.vp9LineNumber)return A;s=r.vp9LineNumber}if("h264"===t){if(!r.h264LineNumber)return A;s=r.h264LineNumber}var d=r.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",l=[s];return a&&(l=[]),r.videoCodecNumbers.forEach(function(A){A===s||l.push(A)}),d+=l.join(" "),A=A.replace(r.videoCodecNumbersOriginal,d),A}function r(A){var t={};return A.split("\n").forEach(function(A){0===A.indexOf("m=video")&&(t.videoCodecNumbers=[],A.split("SAVPF")[1].split(" ").forEach(function(r){r=r.trim(),r&&r.length&&(t.videoCodecNumbers.push(r),t.videoCodecNumbersOriginal=A)})),-1===A.indexOf("VP8/90000")||t.vp8LineNumber||(t.vp8LineNumber=A.replace("a=rtpmap:","").split(" ")[0]),-1===A.indexOf("VP9/90000")||t.vp9LineNumber||(t.vp9LineNumber=A.replace("a=rtpmap:","").split(" ")[0]),-1===A.indexOf("H264/90000")||t.h264LineNumber||(t.h264LineNumber=A.replace("a=rtpmap:","").split(" ")[0])}),webrtcdev.log("[RTC Codec ] splitLines - array SDP  ",t),t}function a(A,t,r){return(console.log("[RTC Codec ] setBAS - sdp before  ",A),!t)?A:"undefined"!=typeof isFirefox&&isFirefox?A:(r&&(t.screen?300>t.screen&&webrtcdev.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):webrtcdev.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),t.screen&&r&&(A=A.replace(/b=AS([^\r\n]+\r\n)/g,""),A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n")),(t.audio||t.video)&&(A=A.replace(/b=AS([^\r\n]+\r\n)/g,"")),t.audio&&(A=A.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+t.audio+"\r\n")),t.screen?A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n"):t.video&&(A=A.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.video+"\r\n")),webrtc.log("[RTC Codechandler] setBAS - sdp after  ",A),A)}function s(A,t,r){return d(A,0,-1,t,r)}function d(A,t,r,a,s){for(var d=-1===r?A.length:r,l=t;l<d;++l)if(0===A[l].indexOf(a)&&(!s||-1!==A[l].toLowerCase().indexOf(s.toLowerCase())))return l;return null}function l(A){var t=A.match(/a=rtpmap:(\d+) \w+\/\d+/);return t&&2===t.length?t[1]:null}function c(A,t){t=t||{};var r=t.min,a=t.max,d=A.split("\r\n"),c=s(d,"a=rtpmap","VP8/90000"),B;if(c&&(B=l(d[c])),!B)return A;var g=s(d,"a=rtpmap","rtx/90000"),u;if(g&&(u=l(d[g])),!g)return A;var m=s(d,"a=fmtp:"+u.toString());if(null!==m){var p="\r\n";p+="a=fmtp:"+B+" x-google-min-bitrate="+(r||"228")+"; x-google-max-bitrate="+(a||"228"),d[m]=d[m].concat(p),A=d.join("\r\n")}return A}function B(A,t){t=t||{};var r=A.split("\r\n"),a=s(r,"a=rtpmap","opus/48000"),d;if(a&&(d=l(r[a])),!d)return A;var c=s(r,"a=fmtp:"+d.toString());if(null===c)return A;var B="";return B+="; stereo="+("undefined"==typeof t.stereo?"1":t.stereo),B+="; sprop-stereo="+("undefined"==typeof t["sprop-stereo"]?"1":t["sprop-stereo"]),"undefined"!=typeof t.maxaveragebitrate&&(B+="; maxaveragebitrate="+(t.maxaveragebitrate||1048576)),"undefined"!=typeof t.maxplaybackrate&&(B+="; maxplaybackrate="+(t.maxplaybackrate||1048576)),"undefined"!=typeof t.cbr&&(B+="; cbr="+("undefined"==typeof t.cbr?"1":t.cbr)),"undefined"!=typeof t.useinbandfec&&(B+="; useinbandfec="+t.useinbandfec),"undefined"!=typeof t.usedtx&&(B+="; usedtx="+t.usedtx),"undefined"!=typeof t.maxptime&&(B+="\r\na=maxptime:"+t.maxptime),r[c]=r[c].concat(B),A=r.join("\r\n"),A}return{removeVPX:function(A){var a=r(A);return A=t(A,"vp9",a,!0),A=t(A,"vp8",a,!0),A},disableNACK:function(A){if(!A||"string"!=typeof A)throw"Invalid arguments.";return A=A.replace("a=rtcp-fb:126 nack\r\n",""),A=A.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),A=A.replace("a=rtcp-fb:97 nack\r\n",""),A=A.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n"),A},prioritize:function(A,t){if(t&&t.getSenders&&t.getSenders().length){if(!A||"string"!=typeof A)throw"Invalid arguments.";t.getSenders().forEach(function(t){for(var r=t.getParameters(),a=0;a<r.codecs.length;a++)if(r.codecs[a].mimeType==A){r.codecs.unshift(r.codecs.splice(a,1));break}t.setParameters(r)})}},removeNonG722:function(A){return A.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")},setApplicationSpecificBandwidth:function(A,t,r){return a(A,t,r)},setVideoBitrates:function(A,t){return c(A,t)},setOpusAttributes:function(A,t){return B(A,t)},preferVP9:function(t){return A(t,"vp9")},preferCodec:A,forceStereoAudio:function(A){for(var t=A.split("\r\n"),r=null,a=0;a<t.length;a++)if(-1!==t[a].search("opus/48000")){var s=extractSdp(t[a],/:(\d+) opus\/48000/i);break}for(var a=0;a<t.length;a++)if(-1!==t[a].search("a=fmtp")){var d=extractSdp(t[a],/a=fmtp:(\d+)/);if(d===s){r=a;break}}return null===r?A:(t[r]=t[r].concat("; stereo=1; sprop-stereo=1"),A=t.join("\r\n"),A)}}}();window.BandwidthHandler=R;var L=function(){return{processCandidates:function(A,t){var r=t.candidate,a=A.candidates,s=a.stun,d=a.turn;if((u(a.reflexive)||(s=a.reflexive),u(a.relay)||(d=a.relay),a.host||!r.match(/typ host/g))&&(d||!r.match(/typ relay/g))&&(s||!r.match(/typ srflx/g))){var l=A.iceProtocols;if(l.udp||!r.match(/ udp /g))return l.tcp||!r.match(/ tcp /g)?(webrtcdev.debug("Your candidate pairs:",r),{candidate:r,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex}):void 0}}}}(),M=function(){return{getIceServers:function(){return[{urls:["stun:stun.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}}}();window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(A){this.mutex=!1;var t=this.streams[A];if(t){t=t.stream;var r=t.currentUserMediaRequestOptions;this.queueRequests.indexOf(r)&&(delete this.queueRequests[this.queueRequests.indexOf(r)],this.queueRequests=B(this.queueRequests)),this.streams[A].stream=null,delete this.streams[A]}}};var D=function(){function A(A){return A?"string"==typeof A||"undefined"==typeof A?A:A.audio&&A.video?null:A.audio?"audio":A.video?"video":void 0:void 0}function t(t,a,d){function l(){if(d.streamEvents[t.streamid].mediaElement){var A=d.streamEvents[t.streamid].mediaElement;A.volume=0,r(200,5,function(){try{A.volume+=.2}catch(t){A.volume=1}})}}if(t&&t.addEventListener){if("undefined"==typeof a||!0==a){var c="ended";"oninactive"in t&&(c="inactive"),t.addEventListener(c,function(){D.onSyncNeeded(this.streamid,c)},!1)}t.mute=function(r,l){r=A(r),"undefined"!=typeof l&&(a=l),("undefined"==typeof r||"audio"==r)&&w(t,"audio").forEach(function(A){A.enabled=!1,d.streamEvents[t.streamid].isAudioMuted=!0}),("undefined"==typeof r||"video"==r)&&w(t,"video").forEach(function(A){A.enabled=!1}),("undefined"==typeof a||!0==a)&&D.onSyncNeeded(t.streamid,"mute",r),d.streamEvents[t.streamid].muteType=r||"both",s(t,"mute",r)},t.unmute=function(r,c){r=A(r),"undefined"!=typeof c&&(a=c),l(),("undefined"==typeof r||"audio"==r)&&w(t,"audio").forEach(function(A){A.enabled=!0,d.streamEvents[t.streamid].isAudioMuted=!1}),("undefined"==typeof r||"video"==r)&&(w(t,"video").forEach(function(A){A.enabled=!0}),"undefined"!=typeof r&&"video"==r&&d.streamEvents[t.streamid].isAudioMuted&&function A(r){r||(r=0),r++,100>r&&d.streamEvents[t.streamid].isAudioMuted&&(t.mute("audio"),setTimeout(function(){A(r)},50))}()),("undefined"==typeof a||!0==a)&&D.onSyncNeeded(t.streamid,"unmute",r),d.streamEvents[t.streamid].unmuteType=r||"both",s(t,"unmute",r)}}}function r(A,t,a,s){s=(s||0)+1;s>=t||setTimeout(function(){a(),r(A,t,a,s)},A)}return{setHandlers:t,onSyncNeeded:function(){}}}(),k={send:function(A){function t(A,d){var l={type:"text",uuid:u,sendingTime:p};A&&(d=A,l.packets=parseInt(d.length/c)),d.length>c?l.message=d.slice(0,c):(l.message=d,l.last=!0,l.isobject=g),a.send(l,s),B=d.slice(l.message.length),B.length&&setTimeout(function(){t(null,B)},r.chunkInterval||100)}var r=A.connection,a=A.channel,s=A.remoteUserId,l=A.text,c=r.chunkSize||1e3,B="",g=!1;m(l)||(g=!0,l=JSON.stringify(l));var u=d(),p=new Date().getTime();t(l)}},O=function(){return{handle:function(A){function t(A,t){if(-1!==A.position){var r=+A.position.toFixed(2).split(".")[1]||100;t.innerHTML=r+"%"}}var r={};A.onFileStart=function(t){var a=document.createElement("div");return a.title=t.name,a.innerHTML="<label>0%</label> <progress></progress>",t.remoteUserId&&(a.innerHTML+=" (Sharing with:"+t.remoteUserId+")"),A.filesContainer||(A.filesContainer=document.body||document.documentElement),A.filesContainer.insertBefore(a,A.filesContainer.firstChild),t.remoteUserId?void(!r[t.uuid]&&(r[t.uuid]={}),r[t.uuid][t.remoteUserId]={div:a,progress:a.querySelector("progress"),label:a.querySelector("label")},r[t.uuid][t.remoteUserId].progress.max=t.maxChunks):(r[t.uuid]={div:a,progress:a.querySelector("progress"),label:a.querySelector("label")},void(r[t.uuid].progress.max=t.maxChunks))},A.onFileProgress=function(A){var a=r[A.uuid];!a||A.remoteUserId&&(a=r[A.uuid][A.remoteUserId],!a)||(a.progress.value=A.currentPosition||A.maxChunks||a.progress.max,t(a.progress,a.label))},A.onFileEnd=function(A){var t=r[A.uuid];if(!t)return void console.error("No such progress-helper element exist.",A);if(!(A.remoteUserId&&(t=r[A.uuid][A.remoteUserId],!t))){var a=t.div;a.innerHTML=-1==A.type.indexOf("image")?"<a href=\""+A.url+"\" download=\""+A.name+"\">Download <strong style=\"color:red;\">"+A.name+"</strong> </a><br /><iframe src=\""+A.url+"\" title=\""+A.name+"\" style=\"width: 80%;border: 0;height: inherit;margin-top:1em;\"></iframe>":"<a href=\""+A.url+"\" download=\""+A.name+"\">Download <strong style=\"color:red;\">"+A.name+"</strong> </a><br /><img src=\""+A.url+"\" title=\""+A.name+"\" style=\"max-width: 80%;\">"}}}}}();(function(B){function u(A){if(B.socketAutoReConnect=!0,B.socket)return void(A&&A(B.socket));if("undefined"==typeof r)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else if("undefined"!=typeof PubNubConnection)window.SocketConnection=PubNubConnection;else throw"SocketConnection.js seems missed.";new r(B,function(){A&&A(B.socket)})}function m(A,t){B.socket.emit("join-room",{sessionid:B.sessionid,session:B.session,mediaConstraints:B.mediaConstraints,sdpConstraints:B.sdpConstraints,streams:Q(),extra:B.extra,password:"undefined"!=typeof B.password&&"object"!=typeof B.password?B.password:""},function(r,a){if(!0===r){if(B.enableLogs&&webrtcdev.log("isRoomJoined: ",r," roomid: ",B.sessionid),!!B.peers[B.sessionid])return;S.onNegotiationNeeded(A)}!1===r&&(B.enableLogs&&webrtcdev.warn("isRoomJoined: ",a," roomid: ",B.sessionid),setTimeout(function(){m(A,t)},3e3)),t(r,B.sessionid,a)})}function C(A){webrtcdev.log("Sending open-room signal to Signaller"),B.waitingForLocalMedia=!1,B.socket.emit("open-room",{sessionid:B.sessionid,session:B.session,mediaConstraints:B.mediaConstraints,sdpConstraints:B.sdpConstraints,streams:Q(),extra:B.extra,identifier:B.publicRoomIdentifier,password:"undefined"!=typeof B.password&&"object"!=typeof B.password?B.password:""},function(t,r){!0===t&&(webrtcdev.log("[RTCMultiConn] isRoomOpened: ",t," roomid: ",B.sessionid),A(t,B.sessionid)),!1===t&&(webrtcdev.error("[RTCMultiConn] isRoomOpened: ",r," roomid: ",B.sessionid),A(t,B.sessionid,r))})}function Q(){try{return B.streamEvents.selectAll("local").map(function(A){return{streamid:A.streamid,tracks:A.stream.getTracks().length}})}catch(A){return[]}}function U(A,t){if(B.dontCaptureUserMedia)return webrtcdev.error(" Join with dontcapturemedia"),void t();if(A.isDataOnly)return webrtcdev.error(" Join with isDataOnly"),void t();var r={};A.localPeerSdpConstraints.OfferToReceiveAudio&&(r.audio=B.mediaConstraints.audio),A.localPeerSdpConstraints.OfferToReceiveVideo&&(r.video=B.mediaConstraints.video);var a=A.session||B.session;return a.oneway&&"two-way"!==a.audio&&"two-way"!==a.video&&"two-way"!==a.screen?void t():void(a.oneway&&a.audio&&"two-way"===a.audio&&(a={audio:!0}),(a.audio||a.video||a.screen)&&(a.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(B)}).then(function(A){A.isScreen=!0,S.onGettingLocalMedia(A),(a.audio||a.video)&&!p(B)?B.invokeGetUserMedia(null,t):t(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):B.invokeGetUserMedia({audio:p(B),video:!0,isScreen:!0},(a.audio||a.video)&&!p(B)?B.invokeGetUserMedia(null,t):t):(a.audio||a.video)&&t()))}function E(A,t){return A?void(t.audio&&w(A,"audio").forEach(function(A){A.applyConstraints(t.audio)}),t.video&&w(A,"video").forEach(function(A){A.applyConstraints(t.video)})):void(!B.enableLogs||webrtcdev.error("No stream to applyConstraints."))}function b(A,t,r){return t?void S.replaceTrack(A,t,r):void B.peers.getAllParticipants().forEach(function(t){S.replaceTrack(A,t,r)})}t=t||{useDefaultDevices:!0},B.channel=B.sessionid=(A||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"",B.socketURL=B.socketURL||"/",webrtcdev.log("[RTCMultiConnection] connection channel ",B.channel);var S=new a(B),T={};S.onGettingLocalMedia=function(A,t){if(webrtcdev.log("[RTC ] onGettingLocalMedia"),t=t||function(){},T[A.streamid])return void t();T[A.streamid]=!0;try{A.type="local"}catch(A){webrtcdev.errro("[RTC] onGettingLocalMedia- eeror in setting Remote stream type ",A)}B.setStreamEndHandler(A),l(A,function(r){r.id=A.streamid,r.muted=!0,r.volume=0,-1===B.attachStreams.indexOf(A)&&B.attachStreams.push(A),"undefined"!=typeof D&&D.setHandlers(A,!0,B),B.streamEvents[A.streamid]={stream:A,type:"local",mediaElement:r,userid:B.userid,extra:B.extra,streamid:A.streamid,isAudioMuted:!0};try{B.onstream(B.streamEvents[A.streamid])}catch(A){webrtcdev.error("[RTC ]  onGettingLocalMedia ",A)}t()},B)},S.onGettingRemoteMedia=function(A,t){webrtcdev.log("[RTC ] onGettingRemoteMedia");try{A.type="remote"}catch(A){webrtcdev.error("[RTC ] onGettingRemoteMedia error in setting Remote stream type ",A)}B.setStreamEndHandler(A,"remote-stream"),l(A,function(r){r.id=A.streamid,"undefined"!=typeof D&&D.setHandlers(A,!1,B),B.streamEvents[A.streamid]={stream:A,type:"remote",userid:t,extra:B.peers[t]?B.peers[t].extra:{},mediaElement:r,streamid:A.streamid};try{B.onstream(B.streamEvents[A.streamid])}catch(A){webrtcdev.error("[RTC ] onGettingRemoteMedia ",A)}},B)},S.onRemovingRemoteMedia=function(A,t){var r=B.streamEvents[A.streamid];r||(r={stream:A,type:"remote",userid:t,extra:B.peers[t]?B.peers[t].extra:{},streamid:A.streamid,mediaElement:B.streamEvents[A.streamid]?B.streamEvents[A.streamid].mediaElement:null}),B.peersBackup[r.userid]&&(r.extra=B.peersBackup[r.userid].extra),B.onstreamended(r),delete B.streamEvents[A.streamid]},S.onNegotiationNeeded=function(A,t,r){r=r||function(){},t=t||A.remoteUserId,A=A||"";var a={remoteUserId:t,message:A,sender:B.userid};A.remoteUserId&&A.message&&A.sender&&(a=A),u(function(){B.socket.emit(B.socketMessageEvent,a,r)})},S.onUserLeft=function(A){B.deletePeer(A)},S.disconnectWith=function(A,t){B.socket&&B.socket.emit("disconnect-with",A,t||function(){}),B.deletePeer(A)},B.socketOptions={transport:"websocket"},B.openOrJoin=function(A,t){t=t||function(){},B.checkPresence(A,function(A,r){if(A){B.sessionid=r;var a=!1,s=!1,d=!!B.session.oneway,l=g(B.session);s={OfferToReceiveAudio:B.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:B.sdpConstraints.mandatory.OfferToReceiveVideo},a={OfferToReceiveAudio:d?!!B.session.audio:B.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:d?!!B.session.video||!!B.session.screen:B.sdpConstraints.mandatory.OfferToReceiveVideo};var c={remoteUserId:B.sessionid,message:{newParticipationRequest:!0,isOneWay:d,isDataOnly:l,localPeerSdpConstraints:a,remotePeerSdpConstraints:s},sender:B.userid};return void U(c.message,function(){m(c,t)})}return B.waitingForLocalMedia=!0,B.isInitiator=!0,B.sessionid=r||B.sessionid,g(B.session)?void C(t):void C(t)})},B.waitingForLocalMedia=!1,B.open=function(A,t){t=t||function(){},B.waitingForLocalMedia=!0,B.isInitiator=!0,B.sessionid=A||B.sessionid,u(function(){return g(B.session)?void C(t):void(B.session.screen?B.captureUserMedia(function(){C(t)}):C(t))})},B.peersBackup={},B.deletePeer=function(A){if(A&&B.peers[A]){var t={userid:A,extra:B.peers[A]?B.peers[A].extra:{}};if(B.peersBackup[t.userid]&&(t.extra=B.peersBackup[t.userid].extra),B.onleave(t),!!B.peers[A]){B.peers[A].streams.forEach(function(A){A.stop()});var r=B.peers[A].peer;if(r&&"closed"!==r.iceConnectionState)try{r.close()}catch(A){}B.peers[A]&&(B.peers[A].peer=null,delete B.peers[A])}}},B.rejoin=function(A){if(!B.isInitiator&&A&&Object.keys(A).length){var t={};B.peers[A.remoteUserId]&&(t=B.peers[A.remoteUserId].extra,B.deletePeer(A.remoteUserId)),A&&A.remoteUserId&&(B.join(A.remoteUserId),B.onReConnecting({userid:A.remoteUserId,extra:t}))}},B.join=function(A,t){B.sessionid=!!A&&(A.sessionid||A.remoteUserId||A)||B.sessionid,B.sessionid+="";var r=!1,a=!1,s=!1,d=!1;if(A&&A.session||!A||"string"==typeof A){var l=A?A.session||B.session:B.session;s=!!l.oneway,d=g(l),a={OfferToReceiveAudio:B.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:B.sdpConstraints.mandatory.OfferToReceiveVideo},r={OfferToReceiveAudio:s?!!B.session.audio:B.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!B.session.video||!!B.session.screen:B.sdpConstraints.mandatory.OfferToReceiveVideo}}t=t||{};var c=function(){};"function"==typeof t&&(c=t,t={}),"undefined"!=typeof t.localPeerSdpConstraints&&(r=t.localPeerSdpConstraints),"undefined"!=typeof t.remotePeerSdpConstraints&&(a=t.remotePeerSdpConstraints),"undefined"!=typeof t.isOneWay&&(s=t.isOneWay),"undefined"!=typeof t.isDataOnly&&(d=t.isDataOnly);var p={remoteUserId:B.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:r,remotePeerSdpConstraints:a},sender:B.userid};return U(p.message,function(){u(function(){m(p,c)})}),p},B.publicRoomIdentifier="",B.getUserMedia=B.captureUserMedia=function(A,t){A=A||function(){};var r=t||B.session;return B.dontCaptureUserMedia||g(r)?(webrtcdev.error("[RTCConn] dont capture media flag is on or connection is Data only "),void A()):void((r.audio||r.video||r.screen)&&(r.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(B)}).then(function(a){if(a.isScreen=!0,S.onGettingLocalMedia(a),(r.audio||r.video)&&!p(B)){var d={};for(var l in r)"screen"!=l&&(d[l]=r[l]);return void B.invokeGetUserMedia(t,A,d)}A(a)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):B.invokeGetUserMedia({audio:p(B),video:!0,isScreen:!0},function(a){if((r.audio||r.video)&&!p(B)){var d={};for(var l in r)"screen"!=l&&(d[l]=r[l]);return void B.invokeGetUserMedia(t,A,d)}A(a)}):(r.audio||r.video)&&B.invokeGetUserMedia(t,A,r)))},B.onbeforeunload=function(A,t){B.closeBeforeUnload&&(B.peers.getAllParticipants().forEach(function(A){S.onNegotiationNeeded({userLeft:!0},A),B.peers[A]&&B.peers[A].peer&&B.peers[A].peer.close(),delete B.peers[A]}),!t&&B.closeSocket(),B.isInitiator=!1)},window.ignoreBeforeUnload?B.closeBeforeUnload=!1:(B.closeBeforeUnload=!0,window.addEventListener("beforeunload",B.onbeforeunload,!1)),B.userid=d(),B.changeUserId=function(A,t){t=t||function(){},B.userid=A||d(),B.socket.emit("changed-uuid",B.userid,t)},B.extra={},B.attachStreams=[],B.session={audio:!0,video:!0},B.enableFileSharing=!1,B.bandwidth={screen:!1,audio:!1,video:!1},B.codecs={audio:"opus",video:"vp9"},B.processSdp=function(A){return(webrtcdev.log("[RtcConn ] processSdp - connection.codecs.video ",B.codecs.video),h())?(webrtcdev.log("[RtcConn ] processSdp - As UnifiedPlanSupportedDefault is supported , avoid processing SDP "),A):"Safari"===DetectRTC.browser.name?A:("VP8"===B.codecs.video.toUpperCase()&&(A=R.preferCodec(A,"vp8")),"VP9"===B.codecs.video.toUpperCase()&&(A=R.preferCodec(A,"vp9")),"H264"===B.codecs.video.toUpperCase()&&(A=R.preferCodec(A,"h264")),"G722"===B.codecs.audio&&(A=R.removeNonG722(A)),"Firefox"===DetectRTC.browser.name)?A:((B.bandwidth.video||B.bandwidth.screen)&&(A=R.setApplicationSpecificBandwidth(A,B.bandwidth,!!B.session.screen)),B.bandwidth.video&&(A=R.setVideoBitrates(A,{min:1024*(8*B.bandwidth.video),max:1024*(8*B.bandwidth.video)})),B.bandwidth.audio&&(A=R.setOpusAttributes(A,{maxaveragebitrate:1024*(8*B.bandwidth.audio),maxplaybackrate:1024*(8*B.bandwidth.audio),stereo:1,maxptime:3})),webrtcdev.log("[RtcConn ] processSdp final - ",A),A)},"undefined"!=typeof R&&(B.BandwidthHandler=B.CodecsHandler=R),B.mediaConstraints={audio:{mandatory:{},optional:B.bandwidth.audio?[{bandwidth:1024*(8*B.bandwidth.audio)||1048576}]:[]},video:{mandatory:{},optional:B.bandwidth.video?[{bandwidth:1024*(8*B.bandwidth.video)||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(B.mediaConstraints={audio:!0,video:!0}),t.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var A,t;if(DetectRTC.MediaDevices.forEach(function(r){"audioinput"===r.kind&&!1!==B.mediaConstraints.audio&&(A=r),"videoinput"===r.kind&&!1!==B.mediaConstraints.video&&(t=r)}),A){if("Firefox"===DetectRTC.browser.name)return void(!0===B.mediaConstraints.audio?B.mediaConstraints.audio={deviceId:A.id}:B.mediaConstraints.audio.deviceId=A.id);!0==B.mediaConstraints.audio&&(B.mediaConstraints.audio={mandatory:{},optional:[]}),B.mediaConstraints.audio.optional||(B.mediaConstraints.audio.optional=[]);var r=[{sourceId:A.id}];B.mediaConstraints.audio.optional=r.concat(B.mediaConstraints.audio.optional)}if(t){if("Firefox"===DetectRTC.browser.name)return void(!0===B.mediaConstraints.video?B.mediaConstraints.video={deviceId:t.id}:B.mediaConstraints.video.deviceId=t.id);!0==B.mediaConstraints.video&&(B.mediaConstraints.video={mandatory:{},optional:[]}),B.mediaConstraints.video.optional||(B.mediaConstraints.video.optional=[]);var r=[{sourceId:t.id}];B.mediaConstraints.video.optional=r.concat(B.mediaConstraints.video.optional)}}),B.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},B.sdpSemantics=null,B.iceCandidatePoolSize=null,B.bundlePolicy=null,B.rtcpMuxPolicy=null,B.iceTransportPolicy=null,B.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},B.iceServers=M.getIceServers(B),B.candidates={host:!0,stun:!0,turn:!0},B.iceProtocols={tcp:!0,udp:!0},B.onopen=function(A){webrtcdev.info("Data connection has been opened between you & ",A.userid)},B.onclose=function(A){webrtcdev.warn("Data connection has been closed between you & ",A.userid)},B.onerror=function(A){webrtcdev.error(A.userid,"data-error",A)},B.onmessage=function(A){webrtcdev.debug("data-message",A.userid,A.data)},B.send=function(A,t){B.peers.send(A,t)},B.close=B.disconnect=B.leave=function(){B.onbeforeunload(!1,!0)},B.closeEntireSession=function(A){A=A||function(){},B.socket.emit("close-entire-session",function t(){return B.getAllParticipants().length?void setTimeout(t,100):void(B.onEntireSessionClosed({sessionid:B.sessionid,userid:B.userid,extra:B.extra}),B.changeUserId(null,function(){B.close(),A()}))})},B.onEntireSessionClosed=function(A){B.enableLogs&&webrtcdev.info("Entire session is closed: ",A.sessionid,A.extra)},B.onstream=function(){webrtcdev.warn("[RTC] onstream")},B.onstreamended=function(){webrtcdev.warn("[RTC] onstreamended")},B.direction="many-to-many",B.removeStream=function(A,t){var r;return B.attachStreams.forEach(function(t){t.id===A&&(r=t)}),r?void(B.peers.getAllParticipants().forEach(function(A){if(!(t&&A!==t)){var a=B.peers[A];try{a.peer.removeStream(r)}catch(A){}}}),B.renegotiate()):void webrtcdev.warn("No such stream exist.",A)},B.addStream=function(A,t){function r(r){A.streamCallback&&A.streamCallback(r),B.renegotiate(t)}return!A.getTracks?g(A)?void B.renegotiate(t):void((A.audio||A.video||A.screen)&&(A.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(B)}).then(function(t){t.isScreen=!0,S.onGettingLocalMedia(t),(A.audio||A.video)&&!p(B)?B.invokeGetUserMedia(null,function(A){r(A)}):r(t)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):B.invokeGetUserMedia({audio:p(B),video:!0,isScreen:!0},function(t){(A.audio||A.video)&&!p(B)?B.invokeGetUserMedia(null,function(A){r(A)}):r(t)}):(A.audio||A.video)&&B.invokeGetUserMedia(null,r))):(-1===B.attachStreams.indexOf(A)&&(!A.streamid&&(A.streamid=A.id),B.attachStreams.push(A)),void B.renegotiate(t))},B.invokeGetUserMedia=function(A,t,r){r||(r=B.session),A||(A=B.mediaConstraints),webrtcdev.log(" [RTC MultiCon] invokeGetUserMedia ============= ",r.audio,r.video,A),A.isScreen?F({onGettingLocalMedia:function(r){var a=A.video;a&&(a.mediaSource||a.mozMediaSource?r.isScreen=!0:a.mandatory&&a.mandatory.chromeMediaSource&&(r.isScreen=!0)),r.isScreen||(r.isVideo=!!w(r,"video").length,r.isAudio=!r.isVideo&&w(r,"audio").length),S.onGettingLocalMedia(r,function(){"function"==typeof t&&t(r)})},onLocalMediaError:function(A,t){S.onLocalMediaError(A,t)},localMediaConstraints:A}):F({onGettingLocalMedia:function(r){var a=A.video;a&&(a.mediaSource||a.mozMediaSource?r.isScreen=!0:a.mandatory&&a.mandatory.chromeMediaSource&&(r.isScreen=!0)),r.isScreen||(r.isVideo=!!w(r,"video").length,r.isAudio=!r.isVideo&&w(r,"audio").length),S.onGettingLocalMedia(r,function(){"function"==typeof t&&t(r)})},onLocalMediaError:function(A,t){S.onLocalMediaError(A,t)},localMediaConstraints:{audio:!!r.audio&&A.audio,video:!!r.video&&A.video}})},B.applyConstraints=function(A,t){if(!N||!N.prototype.applyConstraints)return void alert("track.applyConstraints is NOT supported in your browser.");if(t){var r;return B.streamEvents[t]&&(r=B.streamEvents[t].stream),void E(r,A)}B.attachStreams.forEach(function(t){E(t,A)})},B.replaceTrack=function(A,t,r){function a(a){B.replaceTrack(a,t,r||A.video||A.screen)}if(A=A||{},!RTCPeerConnection.prototype.getSenders)return void B.addStream(A);if(A instanceof N)return void b(A,t,r);if(A instanceof H)return w(A,"video").length&&b(w(A,"video")[0],t,!0),void(w(A,"audio").length&&b(w(A,"audio")[0],t,!1));if(g(A)){throw"connection.replaceTrack requires audio and/or video and/or screen."}(A.audio||A.video||A.screen)&&(A.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(B)}).then(function(t){t.isScreen=!0,S.onGettingLocalMedia(t),(A.audio||A.video)&&!p(B)?B.invokeGetUserMedia(null,a):a(t)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):B.invokeGetUserMedia({audio:p(B),video:!0,isScreen:!0},(A.audio||A.video)&&!p(B)?B.invokeGetUserMedia(null,a):a):(A.audio||A.video)&&B.invokeGetUserMedia(null,a))},B.resetTrack=function(A,t){A||(A=B.getAllParticipants()),"string"==typeof A&&(A=[A]),A.forEach(function(A){var r=B.peers[A].peer;("undefined"==typeof t||!0===t)&&r.lastVideoTrack&&B.replaceTrack(r.lastVideoTrack,A,!0),("undefined"==typeof t||!1===t)&&r.lastAudioTrack&&B.replaceTrack(r.lastAudioTrack,A,!1)})},B.renegotiate=function(A){return A?void S.renegotiatePeer(A):void B.peers.getAllParticipants().forEach(function(A){S.renegotiatePeer(A)})},B.setStreamEndHandler=function(A,t){if(A&&A.addEventListener&&(t=!!t,!A.alreadySetEndHandler)){A.alreadySetEndHandler=!0;var r="ended";"oninactive"in A&&(r="inactive"),A.addEventListener(r,function(){if(A.idInstance&&currentUserMediaRequest.remove(A.idInstance),!t){var r=[];B.attachStreams.forEach(function(t){t.id!=A.id&&r.push(t)}),B.attachStreams=r}var a=B.streamEvents[A.streamid];if(a||(a={stream:A,streamid:A.streamid,type:t?"remote":"local",userid:B.userid,extra:B.extra,mediaElement:B.streamEvents[A.streamid]?B.streamEvents[A.streamid].mediaElement:null}),t&&B.peers[a.userid]){var s=B.peers[a.userid].peer,r=[];s.getRemoteStreams().forEach(function(t){t.id!=A.id&&r.push(t)}),B.peers[a.userid].streams=r}a.userid===B.userid&&"remote"===a.type||(B.peersBackup[a.userid]&&(a.extra=B.peersBackup[a.userid].extra),B.onstreamended(a),delete B.streamEvents[A.streamid])},!1)}},B.onMediaError=function(A,t){!B.enableLogs||webrtcdev.error(A,t)},B.autoCloseEntireSession=!1,B.filesContainer=B.videosContainer=document.body||document.documentElement,B.isInitiator=!1,B.shareFile=S.shareFile,"undefined"!=typeof O&&O.handle(B),"undefined"!=typeof TranslationHandler&&TranslationHandler.handle(B),B.token=d,B.onNewParticipant=function(A,t){B.acceptParticipationRequest(A,t)},B.acceptParticipationRequest=function(A,t){t.successCallback&&(t.successCallback(),delete t.successCallback),S.createNewPeer(A,t)},"undefined"!=typeof D&&(B.StreamsHandler=D),B.onleave=function(){},B.invokeSelectFileDialog=function(A){var t=new FileSelector;t.accept="*.*",t.selectSingleFile(A)},B.onmute=function(A){if(A&&A.mediaElement){if("both"===A.muteType||"video"===A.muteType){A.mediaElement.src=null;var t=A.mediaElement.pause();"undefined"==typeof t?A.mediaElement.poster=A.snapshot||"muted.png":t.then(function(){A.mediaElement.poster=A.snapshot||"muted.png"})}else"audio"===A.muteType&&(A.mediaElement.muted=!0);webrtcdev.log("[RtcConn] onmute")}},B.onunmute=function(A){A&&A.mediaElement&&A.stream&&("both"===A.unmuteType||"video"===A.unmuteType?(A.mediaElement.poster=null,A.mediaElement.srcObject=A.stream,A.mediaElement.play()):"audio"===A.unmuteType&&(A.mediaElement.muted=!1),webrtcdev.log("[RtcConn] onunmute"))},B.onExtraDataUpdated=function(A){A.status="online",B.onUserStatusChanged(A,!0)},B.getAllParticipants=function(A){return B.peers.getAllParticipants(A)},"undefined"!=typeof D&&(D.onSyncNeeded=function(A,t,r){B.peers.getAllParticipants().forEach(function(a){S.onNegotiationNeeded({streamid:A,action:t,streamSyncNeeded:!0,type:r||"both"},a)})}),B.connectSocket=function(A){u(A)},B.closeSocket=function(){try{io.sockets={}}catch(A){}B.socket&&("function"==typeof B.socket.disconnect&&B.socket.disconnect(),"function"==typeof B.socket.resetProps&&B.socket.resetProps(),B.socket=null)},B.getSocket=function(A){return!A&&B.enableLogs&&webrtcdev.warn("getSocket.callback paramter is required."),A=A||function(){},B.socket?A(B.socket):u(function(){A(B.socket)}),B.socket},B.getRemoteStreams=S.getRemoteStreams;var I=["selectFirst","selectAll","forEach"];B.streamEvents={selectFirst:function(A){return B.streamEvents.selectAll(A)[0]},selectAll:function(A){A||(A={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==A&&(A={local:!0}),"remote"==A&&(A={remote:!0}),"screen"==A&&(A={isScreen:!0}),"audio"==A&&(A={isAudio:!0}),"video"==A&&(A={isVideo:!0});var t=[];return Object.keys(B.streamEvents).forEach(function(r){var a=B.streamEvents[r];if(-1===I.indexOf(r)){var s=!0;A.local&&"local"===a.type&&(s=!1),A.remote&&"remote"===a.type&&(s=!1),A.isScreen&&a.stream.isScreen&&(s=!1),A.isVideo&&a.stream.isVideo&&(s=!1),A.isAudio&&a.stream.isAudio&&(s=!1),A.userid&&a.userid===A.userid&&(s=!1),!1==s&&t.push(a)}}),t}},B.socketMessageEvent="@@socketMessageEvent",B.socketCustomEvent="@@socketCustomEvent",B.DetectRTC=DetectRTC,B.setCustomSocketEvent=function(A){A&&(B.socketCustomEvent=A);B.socket&&B.socket.emit("set-custom-socket-event-listener",B.socketCustomEvent)},B.getNumberOfBroadcastViewers=function(A,t){B.socket&&A&&t&&B.socket.emit("get-number-of-users-in-specific-broadcast",A,t)},B.onNumberOfBroadcastViewersUpdated=function(A){B.enableLogs&&B.isInitiator&&webrtcdev.info("Number of broadcast (",A.broadcastId,") viewers",A.numberOfBroadcastViewers)},B.onUserStatusChanged=function(A,t){!B.enableLogs||t||webrtcdev.info(A.userid,A.status)},B.getUserMediaHandler=F,B.multiPeersHandler=S,B.enableLogs=!0,B.setCustomSocketHandler=function(A){"undefined"!=typeof r&&(r=A)},B.chunkSize=40000,B.maxParticipantsAllowed=1e3,B.disconnectWith=S.disconnectWith,B.checkPresence=function(A,t){return A=A||B.sessionid,"SSEConnection"===r.name?void SSEConnection.checkPresence(A,function(A,r,a){return B.socket?void t(A,r):(A||(B.userid=r),void B.connectSocket(function(){t(A,r,a)}))}):B.socket?void B.socket.emit("check-presence",A+"",function(A,r,a){B.enableLogs&&webrtcdev.log("checkPresence.isRoomExist: ",A," roomid: ",r),t(A,r,a)}):void B.connectSocket(function(){B.checkPresence(A,t)})},B.onReadyForOffer=function(A,t){B.multiPeersHandler.createNewPeer(A,t)},B.setUserPreferences=function(A){return B.dontAttachStream&&(A.dontAttachLocalStream=!0),B.dontGetRemoteStream&&(A.dontGetRemoteStream=!0),A},B.updateExtraData=function(){B.socket.emit("extra-data-updated",B.extra)},B.enableScalableBroadcast=!1,B.maxRelayLimitPerUser=3,B.dontCaptureUserMedia=!1,B.dontAttachStream=!1,B.dontGetRemoteStream=!1,B.onReConnecting=function(A){B.enableLogs&&webrtcdev.info("ReConnecting with",A.userid,"...")},B.beforeAddingStream=function(A){return A},B.beforeRemovingStream=function(A){return A},B.modifyScreenConstraints=function(A){return A},B.onPeerStateChanged=function(A){B.enableLogs&&-1!==A.iceConnectionState.search(/closed|failed/gi)&&webrtcdev.error("Peer connection is closed between you & ",A.userid,A.extra,"state:",A.iceConnectionState)},B.isOnline=!0,c("online",function(){B.isOnline=!0}),c("offline",function(){B.isOnline=!1}),B.isLowBandwidth=!1,B.getExtraData=function(A,t){if(!A)throw"remoteUserId is required.";return"function"==typeof t?void B.socket.emit("get-remote-user-extra-data",A,function(A,r,a){t(A,r,a)}):B.peers[A]?B.peers[A].extra:B.peersBackup[A]?B.peersBackup[A].extra:{}},!t.autoOpenOrJoin||B.openOrJoin(B.sessionid),B.onUserIdAlreadyTaken=function(A){B.close(),B.closeSocket(),B.isInitiator=!1,B.userid=B.token(),B.join(B.sessionid),webrtcdev.warn("Userid already taken.",A,"Your new userid:",B.userid)},B.trickleIce=!0,B.version="6.6.0",B.onSettingLocalDescription=function(A){webrtcdev.info("Set local description for remote user",A.userid)},B.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},B.autoCreateMediaElement=!1,B.password=null,B.setPassword=function(A,t){t=t||function(){},B.socket?B.socket.emit("set-password",A,t):(B.password=A,t(!0,B.sessionid,null))},B.onSocketDisconnect=function(){webrtcdev.warn("socket.io connection is closed")},B.onSocketError=function(){webrtcdev.warn("socket.io connection is failed")},B.errors={ROOM_NOT_AVAILABLE:"Session id not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"session permission denied",ROOM_FULL:"session capacity is full",DID_NOT_JOIN_ANY_ROOM:"Did not join any session yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};"undefined"!=typeof module&&(module.exports=exports=RTCMultiConnection),"function"==typeof define&&define.amd&&define("RTCMultiConnection",[],function(){return RTCMultiConnection}),function(A,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.html2canvas=t():A.html2canvas=t()}(this,function(){var A=Math.ceil,t=Math.PI,r=Math.floor,a=Math.abs,s=Math.round,d=Math.sqrt,l=Math.max,B=Math.min;return function(A){function t(a){if(r[a])return r[a].exports;var s=r[a]={i:a,l:!1,exports:{}};return A[a].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var r={};return t.m=A,t.c=r,t.d=function(A,r,a){t.o(A,r)||Object.defineProperty(A,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(A){var r=A&&A.__esModule?function(){return A["default"]}:function(){return A};return t.d(r,"a",r),r},t.o=function(A,t){return Object.prototype.hasOwnProperty.call(A,t)},t.p="",t(t.s=27)}([function(A,t){"";function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),c=function(A){var t=A.match(/^#([a-f0-9]{3})$/i);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},u=function(A){var t=A.match(/^#([a-f0-9]{6})$/i);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},m=function(A){var t=A.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/);return!!t&&[+t[1],+t[2],+t[3],null]},p=function(A){var t=A.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/);return!!(t&&4<t.length)&&[+t[1],+t[2],+t[3],+t[4]]},w=function(A){return[B(A[0],255),B(A[1],255),B(A[2],255),3<A.length?A[3]:null]},h=function(A){var t=Q[A.toLowerCase()];return!!t&&t},C=function(){function A(t){s(this,A);var l=Array.isArray(t)?w(t):c(t)||m(t)||p(t)||h(t)||u(t)||[0,0,0,null],B=d(l,4),C=B[0],r=B[1],g=B[2],Q=B[3];this.r=C,this.g=r,this.b=g,this.a=Q}return l(A,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),A}();t.default=C;var Q={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},U=t.TRANSPARENT=new C([0,0,0,0])},function(A,t){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),s=t.LENGTH_TYPE={PX:0,PERCENTAGE:1},d=function(){function A(t){r(this,A),this.type="%"===t.substr(t.length-1)?s.PERCENTAGE:s.PX;var a=parseFloat(t);isNaN(a)&&console.error("Invalid value given for Length: \""+t+"\""),this.value=isNaN(a)?0:a}return a(A,[{key:"isPercentage",value:function(){return this.type===s.PERCENTAGE}},{key:"getAbsoluteValue",value:function(A){return this.isPercentage()?A*(this.value/100):this.value}}],[{key:"create",value:function(t){return new A(t)}}]),A}();t.default=d;var l=function A(t){var r=t.parent;return r?A(r):parseFloat(t.style.font.fontSize)},c=t.calculateLengthFromValueWithUnit=function(A,t,r){switch(r){case"px":case"%":return new d(t+r);case"em":case"rem":var a=new d(t);return a.value*="em"===r?parseFloat(A.style.font.fontSize):l(A),a;default:return new d("0");}}},function(A,t,r){"";function a(A){return A&&A.__esModule?A:{default:A}}function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseBoundCurves=t.calculatePaddingBoxPath=t.calculateBorderBoxPath=t.parsePathForBorder=t.parseDocumentSize=t.calculateContentBox=t.calculatePaddingBox=t.parseBounds=t.Bounds=void 0;var c=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),g=r(7),u=a(g),m=r(32),p=a(m),w=0,h=1,C=2,Q=3,U=0,E=1,F=t.Bounds=function(){function A(t,r,a,d){s(this,A),this.left=t,this.top=r,this.width=a,this.height=d}return c(A,null,[{key:"fromClientRect",value:function(t,r,a){return new A(t.left+r,t.top+a,t.width,t.height)}}]),A}(),b=t.parseBounds=function(A,t,r){return F.fromClientRect(A.getBoundingClientRect(),t,r)},H=t.calculatePaddingBox=function(A,t){return new F(A.left+t[Q].borderWidth,A.top+t[w].borderWidth,A.width-(t[h].borderWidth+t[Q].borderWidth),A.height-(t[w].borderWidth+t[C].borderWidth))},S=t.calculateContentBox=function(A,t,r){var a=t[w].value,s=t[h].value,d=t[C].value,l=t[Q].value;return new F(A.left+l+r[Q].borderWidth,A.top+a+r[w].borderWidth,A.width-(r[h].borderWidth+r[Q].borderWidth+l+s),A.height-(r[w].borderWidth+r[C].borderWidth+a+d))},T=t.parseDocumentSize=function(A){var t=A.body,r=A.documentElement;if(!t||!r)throw new Error("Unable to get document size");var a=l(l(t.scrollWidth,r.scrollWidth),l(t.offsetWidth,r.offsetWidth),l(t.clientWidth,r.clientWidth)),s=l(l(t.scrollHeight,r.scrollHeight),l(t.offsetHeight,r.offsetHeight),l(t.clientHeight,r.clientHeight));return new F(0,0,a,s)},I=t.parsePathForBorder=function(A,t){switch(t){case w:return N(A.topLeftOuter,A.topLeftInner,A.topRightOuter,A.topRightInner);case h:return N(A.topRightOuter,A.topRightInner,A.bottomRightOuter,A.bottomRightInner);case C:return N(A.bottomRightOuter,A.bottomRightInner,A.bottomLeftOuter,A.bottomLeftInner);case Q:default:return N(A.bottomLeftOuter,A.bottomLeftInner,A.topLeftOuter,A.topLeftInner);}},N=function(A,t,r,a){var s=[];return A instanceof p.default?s.push(A.subdivide(.5,!1)):s.push(A),r instanceof p.default?s.push(r.subdivide(.5,!0)):s.push(r),a instanceof p.default?s.push(a.subdivide(.5,!0).reverse()):s.push(a),t instanceof p.default?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},R=t.calculateBorderBoxPath=function(A){return[A.topLeftOuter,A.topRightOuter,A.bottomRightOuter,A.bottomLeftOuter]},L=t.calculatePaddingBoxPath=function(A){return[A.topLeftInner,A.topRightInner,A.bottomRightInner,A.bottomLeftInner]},M=t.parseBoundCurves=function(A,t,r){var a=r[D.TOP_LEFT][U].getAbsoluteValue(A.width),s=r[D.TOP_LEFT][E].getAbsoluteValue(A.height),d=r[D.TOP_RIGHT][U].getAbsoluteValue(A.width),c=r[D.TOP_RIGHT][E].getAbsoluteValue(A.height),g=r[D.BOTTOM_RIGHT][U].getAbsoluteValue(A.width),m=r[D.BOTTOM_RIGHT][E].getAbsoluteValue(A.height),p=r[D.BOTTOM_LEFT][U].getAbsoluteValue(A.width),F=r[D.BOTTOM_LEFT][E].getAbsoluteValue(A.height),b=[];b.push((a+d)/A.width),b.push((p+g)/A.width),b.push((s+F)/A.height),b.push((c+m)/A.height);var H=l.apply(Math,b);1<H&&(a/=H,s/=H,d/=H,c/=H,g/=H,m/=H,p/=H,F/=H);var S=A.width-d,T=A.height-m,I=A.width-g,N=A.height-F;return{topLeftOuter:0<a||0<s?k(A.left,A.top,a,s,D.TOP_LEFT):new u.default(A.left,A.top),topLeftInner:0<a||0<s?k(A.left+t[Q].borderWidth,A.top+t[w].borderWidth,l(0,a-t[Q].borderWidth),l(0,s-t[w].borderWidth),D.TOP_LEFT):new u.default(A.left+t[Q].borderWidth,A.top+t[w].borderWidth),topRightOuter:0<d||0<c?k(A.left+S,A.top,d,c,D.TOP_RIGHT):new u.default(A.left+A.width,A.top),topRightInner:0<d||0<c?k(A.left+B(S,A.width+t[Q].borderWidth),A.top+t[w].borderWidth,S>A.width+t[Q].borderWidth?0:d-t[Q].borderWidth,c-t[w].borderWidth,D.TOP_RIGHT):new u.default(A.left+A.width-t[h].borderWidth,A.top+t[w].borderWidth),bottomRightOuter:0<g||0<m?k(A.left+I,A.top+T,g,m,D.BOTTOM_RIGHT):new u.default(A.left+A.width,A.top+A.height),bottomRightInner:0<g||0<m?k(A.left+B(I,A.width-t[Q].borderWidth),A.top+B(T,A.height+t[w].borderWidth),l(0,g-t[h].borderWidth),m-t[C].borderWidth,D.BOTTOM_RIGHT):new u.default(A.left+A.width-t[h].borderWidth,A.top+A.height-t[C].borderWidth),bottomLeftOuter:0<p||0<F?k(A.left,A.top+N,p,F,D.BOTTOM_LEFT):new u.default(A.left,A.top+A.height),bottomLeftInner:0<p||0<F?k(A.left+t[Q].borderWidth,A.top+N,l(0,p-t[Q].borderWidth),F-t[C].borderWidth,D.BOTTOM_LEFT):new u.default(A.left+t[Q].borderWidth,A.top+A.height-t[C].borderWidth)}},D={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},k=function(A,t,r,a,s){var l=4*((d(2)-1)/3),c=r*l,B=a*l,g=A+r,m=t+a;switch(s){case D.TOP_LEFT:return new p.default(new u.default(A,m),new u.default(A,m-B),new u.default(g-c,t),new u.default(g,t));case D.TOP_RIGHT:return new p.default(new u.default(A,t),new u.default(A+c,t),new u.default(g,m-B),new u.default(g,m));case D.BOTTOM_RIGHT:return new p.default(new u.default(g,t),new u.default(g,t+B),new u.default(A+c,m),new u.default(A,m));case D.BOTTOM_LEFT:default:return new p.default(new u.default(g,m),new u.default(g-c,m),new u.default(A,t+B),new u.default(A,t));}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.contains=function(A,t){return 0!=(A&t)},a=t.distance=function(A,t){return d(A*A+t*t)},s=t.copyCSSStyles=function(A,t){for(var r=A.length-1,a;0<=r;r--)a=A.item(r),"content"!==a&&t.style.setProperty(a,A.getPropertyValue(a));return t},l=t.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(A,t,r){"";function a(A){return A&&A.__esModule?A:{default:A}}function d(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseBackgroundImage=t.parseBackground=t.calculateBackgroundRepeatPath=t.calculateBackgroundPosition=t.calculateBackgroungPositioningArea=t.calculateBackgroungPaintingArea=t.calculateGradientBackgroundSize=t.calculateBackgroundSize=t.BACKGROUND_ORIGIN=t.BACKGROUND_CLIP=t.BACKGROUND_SIZE=t.BACKGROUND_REPEAT=void 0;var l=r(0),c=a(l),B=r(1),g=a(B),u=r(31),m=a(u),p=r(7),w=a(p),h=r(2),C=r(17),Q=t.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},U=t.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},E=t.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},F=t.BACKGROUND_ORIGIN=E,b="auto",H=function A(t){d(this,A);"contain"===t?this.size=U.CONTAIN:"cover"===t?this.size=U.COVER:"auto"===t?this.size=U.AUTO:this.value=new g.default(t)},S=t.calculateBackgroundSize=function(A,t,r){var a=0,s=0,d=A.size;if(d[0].size===U.CONTAIN||d[0].size===U.COVER){var l=r.width/r.height,c=t.width/t.height;return l<c==(d[0].size===U.COVER)?new m.default(r.height*c,r.height):new m.default(r.width,r.width/c)}return d[0].value&&(a=d[0].value.getAbsoluteValue(r.width)),d[0].size===U.AUTO&&d[1].size===U.AUTO?s=t.height:d[1].size===U.AUTO?s=a/t.width*t.height:d[1].value&&(s=d[1].value.getAbsoluteValue(r.height)),d[0].size===U.AUTO&&(a=s/t.height*t.width),new m.default(a,s)},T=t.calculateGradientBackgroundSize=function(A,t){var r=A.size,a=r[0].value?r[0].value.getAbsoluteValue(t.width):t.width,s=r[1].value?r[1].value.getAbsoluteValue(t.height):r[0].value?a:t.height;return new m.default(a,s)},I=new H(b),N=t.calculateBackgroungPaintingArea=function(A,t){switch(t){case E.BORDER_BOX:return(0,h.calculateBorderBoxPath)(A);case E.PADDING_BOX:default:return(0,h.calculatePaddingBoxPath)(A);}},R=t.calculateBackgroungPositioningArea=function(A,t,r,a){var s=(0,h.calculatePaddingBox)(t,a);switch(A){case F.BORDER_BOX:return t;case F.CONTENT_BOX:var d=r[C.PADDING_SIDES.LEFT].getAbsoluteValue(t.width),l=r[C.PADDING_SIDES.RIGHT].getAbsoluteValue(t.width),c=r[C.PADDING_SIDES.TOP].getAbsoluteValue(t.width),B=r[C.PADDING_SIDES.BOTTOM].getAbsoluteValue(t.width);return new h.Bounds(s.left+d,s.top+c,s.width-d-l,s.height-c-B);case F.PADDING_BOX:default:return s;}},L=t.calculateBackgroundPosition=function(A,t,r){return new w.default(A[0].getAbsoluteValue(r.width-t.width),A[1].getAbsoluteValue(r.height-t.height))},M=t.calculateBackgroundRepeatPath=function(A,t,r,a,d){var l=A.repeat;return l===Q.REPEAT_X?[new w.default(s(d.left),s(a.top+t.y)),new w.default(s(d.left+d.width),s(a.top+t.y)),new w.default(s(d.left+d.width),s(r.height+a.top+t.y)),new w.default(s(d.left),s(r.height+a.top+t.y))]:l===Q.REPEAT_Y?[new w.default(s(a.left+t.x),s(d.top)),new w.default(s(a.left+t.x+r.width),s(d.top)),new w.default(s(a.left+t.x+r.width),s(d.height+d.top)),new w.default(s(a.left+t.x),s(d.height+d.top))]:l===Q.NO_REPEAT?[new w.default(s(a.left+t.x),s(a.top+t.y)),new w.default(s(a.left+t.x+r.width),s(a.top+t.y)),new w.default(s(a.left+t.x+r.width),s(a.top+t.y+r.height)),new w.default(s(a.left+t.x),s(a.top+t.y+r.height))]:[new w.default(s(d.left),s(d.top)),new w.default(s(d.left+d.width),s(d.top)),new w.default(s(d.left+d.width),s(d.height+d.top)),new w.default(s(d.left),s(d.height+d.top))]},D=t.parseBackground=function(A,t){return{backgroundColor:new c.default(A.backgroundColor),backgroundImage:_(A,t),backgroundClip:k(A.backgroundClip),backgroundOrigin:O(A.backgroundOrigin)}},k=function(A){return"padding-box"===A?E.PADDING_BOX:"content-box"===A?E.CONTENT_BOX:E.BORDER_BOX},O=function(A){return"padding-box"===A?F.PADDING_BOX:"content-box"===A?F.CONTENT_BOX:F.BORDER_BOX},K=function(A){switch(A.trim()){case"no-repeat":return Q.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return Q.REPEAT_X;case"repeat-y":case"no-repeat repeat":return Q.REPEAT_Y;case"repeat":return Q.REPEAT;}return console.error("Invalid background-repeat value \""+A+"\""),Q.REPEAT},_=function(A,t){var r=z(A.backgroundImage).map(function(A){if("url"===A.method){var r=t.loadImage(A.args[0]);A.args=r?[r]:[]}return A}),a=A.backgroundPosition.split(","),s=A.backgroundRepeat.split(","),d=A.backgroundSize.split(",");return r.map(function(A,t){var r=(d[t]||b).trim().split(" ").map(P),l=(a[t]||b).trim().split(" ").map(V);return{source:A,repeat:K("string"==typeof s[t]?s[t]:s[0]),size:2>r.length?[r[0],I]:[r[0],r[1]],position:2>l.length?[l[0],l[0]]:[l[0],l[1]]}})},P=function(A){return"auto"===A?I:new H(A)},V=function(A){return"bottom"===A||"right"===A?new g.default("100%"):"left"===A||"top"===A?new g.default("0%"):"auto"===A?new g.default("0"):new g.default(A)},z=t.parseBackgroundImage=function(A){var t=[],r=[],a="",s=null,d="",l=0,c=0,B=function(){var A="";if(a){"\""===d.substr(0,1)&&(d=d.substr(1,d.length-2)),d&&r.push(d.trim());var s=a.indexOf("-",1)+1;"-"===a.substr(0,1)&&0<s&&(A=a.substr(0,s).toLowerCase(),a=a.substr(s)),a=a.toLowerCase(),"none"!==a&&t.push({prefix:A,method:a,args:r})}r=[],a=d=""};return A.split("").forEach(function(A){if(!(0===l&&/^\s$/.test(A))){switch(A){case"\"":s?s===A&&(s=null):s=A;break;case"(":if(s)break;else{if(0===l)return void(l=1);c++}break;case")":if(s)break;else if(1===l){if(0===c)return l=0,void B();c--}break;case",":if(s)break;else{if(0===l)return void B();if(1===l&&0===c&&!a.match(/^url$/i))return r.push(d.trim()),void(d="")}}0===l?a+=A:d+=A}}),B(),t}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=r(0),l=function(A){return A&&A.__esModule?A:{default:A}}(d),c=r(3),B=r(4),g=r(12),u=r(33),m=r(34),p=r(35),w=r(36),h=r(37),C=r(38),Q=r(8),U=r(39),E=r(40),F=r(18),b=r(17),H=r(19),S=r(11),T=r(41),I=r(20),N=r(42),R=r(43),L=r(44),M=r(45),D=r(2),k=r(21),O=r(14),K=["INPUT","TEXTAREA","SELECT"],_=function(){function A(t,r,s,d){var c=this;a(this,A),this.parent=r,this.tagName=t.tagName,this.index=d,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var _=t.ownerDocument.defaultView,V=_.pageXOffset,z=_.pageYOffset,G=_.getComputedStyle(t,null),X=(0,m.parseDisplay)(G.display),J="radio"===t.type||"checkbox"===t.type,Y=(0,H.parsePosition)(G.position);if(this.style={background:J?k.INPUT_BACKGROUND:(0,B.parseBackground)(G,s),border:J?k.INPUT_BORDERS:(0,g.parseBorder)(G),borderRadius:(t instanceof _.HTMLInputElement||t instanceof HTMLInputElement)&&J?(0,k.getInputBorderRadius)(t):(0,u.parseBorderRadius)(G),color:J?k.INPUT_COLOR:new l.default(G.color),display:X,float:(0,p.parseCSSFloat)(G.float),font:(0,w.parseFont)(G),letterSpacing:(0,h.parseLetterSpacing)(G.letterSpacing),listStyle:X===m.DISPLAY.LIST_ITEM?(0,Q.parseListStyle)(G):null,lineBreak:(0,C.parseLineBreak)(G.lineBreak),margin:(0,U.parseMargin)(G),opacity:parseFloat(G.opacity),overflow:-1===K.indexOf(t.tagName)?(0,E.parseOverflow)(G.overflow):E.OVERFLOW.HIDDEN,overflowWrap:(0,F.parseOverflowWrap)(G.overflowWrap?G.overflowWrap:G.wordWrap),padding:(0,b.parsePadding)(G),position:Y,textDecoration:(0,S.parseTextDecoration)(G),textShadow:(0,T.parseTextShadow)(G.textShadow),textTransform:(0,I.parseTextTransform)(G.textTransform),transform:(0,N.parseTransform)(G),visibility:(0,R.parseVisibility)(G.visibility),wordBreak:(0,L.parseWordBreak)(G.wordBreak),zIndex:(0,M.parseZIndex)(Y===H.POSITION.STATIC?"auto":G.zIndex)},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),X===m.DISPLAY.LIST_ITEM){var W=(0,O.getListOwner)(this);if(W){var q=W.listItems.length;W.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===q?"number"==typeof W.listStart?W.listStart:1:W.listItems[q-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",function(){c.bounds=(0,D.parseBounds)(t,V,z),c.curvedBounds=(0,D.parseBoundCurves)(c.bounds,c.style.border,c.style.borderRadius)}),this.image=P(t,s),this.bounds=J?(0,k.reformatInputBounds)((0,D.parseBounds)(t,V,z)):(0,D.parseBounds)(t,V,z),this.curvedBounds=(0,D.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius),this.name=""+t.tagName.toLowerCase()+(t.id?"#"+t.id:"")+t.className.toString().split(" ").map(function(A){return A.length?"."+A:""}).join("")}return s(A,[{key:"getClipPaths",value:function(){var A=this.parent?this.parent.getClipPaths():[],t=this.style.overflow!==E.OVERFLOW.VISIBLE;return t?A.concat([(0,D.calculatePaddingBoxPath)(this.curvedBounds)]):A}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,c.contains)(this.style.display,m.DISPLAY.NONE)&&0<this.style.opacity&&this.style.visibility===R.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==H.POSITION.STATIC&&this.style.position!==H.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==H.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==p.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,c.contains)(this.style.display,m.DISPLAY.INLINE)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_BLOCK)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_FLEX)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_GRID)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_LIST_ITEM)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,c.contains)(this.style.display,m.DISPLAY.INLINE_BLOCK)||(0,c.contains)(this.style.display,m.DISPLAY.INLINE_TABLE)}}]),A}();t.default=_;var P=function(A,t){if(A instanceof A.ownerDocument.defaultView.SVGSVGElement||A instanceof SVGSVGElement){var r=new XMLSerializer;return t.loadImage("data:image/svg+xml,"+encodeURIComponent(r.serializeToString(A)))}switch(A.tagName){case"IMG":var a=A;return t.loadImage(a.currentSrc||a.src);case"CANVAS":return t.loadCanvas(A);case"IFRAME":var s=A.getAttribute("data-html2canvas-internal-iframe-key");if(s)return s;}return null}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(5);t.default=function A(t,r){a(this,A),this.type=s.PATH.VECTOR,this.x=t,this.y=r,isNaN(t)&&console.error("Invalid x value given for Vector"),isNaN(r)&&console.error("Invalid y value given for Vector")}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseListStyle=t.parseListStyleType=t.LIST_STYLE_TYPE=t.LIST_STYLE_POSITION=void 0;var a=r(4),s=t.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},d=t.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},l=t.parseListStyleType=function(A){switch(A){case"disc":return d.DISC;case"circle":return d.CIRCLE;case"square":return d.SQUARE;case"decimal":return d.DECIMAL;case"cjk-decimal":return d.CJK_DECIMAL;case"decimal-leading-zero":return d.DECIMAL_LEADING_ZERO;case"lower-roman":return d.LOWER_ROMAN;case"upper-roman":return d.UPPER_ROMAN;case"lower-greek":return d.LOWER_GREEK;case"lower-alpha":return d.LOWER_ALPHA;case"upper-alpha":return d.UPPER_ALPHA;case"arabic-indic":return d.ARABIC_INDIC;case"armenian":return d.ARMENIAN;case"bengali":return d.BENGALI;case"cambodian":return d.CAMBODIAN;case"cjk-earthly-branch":return d.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return d.CJK_HEAVENLY_STEM;case"cjk-ideographic":return d.CJK_IDEOGRAPHIC;case"devanagari":return d.DEVANAGARI;case"ethiopic-numeric":return d.ETHIOPIC_NUMERIC;case"georgian":return d.GEORGIAN;case"gujarati":return d.GUJARATI;case"gurmukhi":return d.GURMUKHI;case"hebrew":return d.HEBREW;case"hiragana":return d.HIRAGANA;case"hiragana-iroha":return d.HIRAGANA_IROHA;case"japanese-formal":return d.JAPANESE_FORMAL;case"japanese-informal":return d.JAPANESE_INFORMAL;case"kannada":return d.KANNADA;case"katakana":return d.KATAKANA;case"katakana-iroha":return d.KATAKANA_IROHA;case"khmer":return d.KHMER;case"korean-hangul-formal":return d.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return d.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return d.KOREAN_HANJA_INFORMAL;case"lao":return d.LAO;case"lower-armenian":return d.LOWER_ARMENIAN;case"malayalam":return d.MALAYALAM;case"mongolian":return d.MONGOLIAN;case"myanmar":return d.MYANMAR;case"oriya":return d.ORIYA;case"persian":return d.PERSIAN;case"simp-chinese-formal":return d.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return d.SIMP_CHINESE_INFORMAL;case"tamil":return d.TAMIL;case"telugu":return d.TELUGU;case"thai":return d.THAI;case"tibetan":return d.TIBETAN;case"trad-chinese-formal":return d.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return d.TRAD_CHINESE_INFORMAL;case"upper-armenian":return d.UPPER_ARMENIAN;case"disclosure-open":return d.DISCLOSURE_OPEN;case"disclosure-closed":return d.DISCLOSURE_CLOSED;case"none":default:return d.NONE;}},c=t.parseListStyle=function(A){var t=(0,a.parseBackgroundImage)(A.getPropertyValue("list-style-image"));return{listStyleType:l(A.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:B(A.getPropertyValue("list-style-position"))}},B=function(A){switch(A){case"inside":return s.INSIDE;case"outside":default:return s.OUTSIDE;}}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}function s(A,t,r){return 0<A.length?t+r.toUpperCase():A}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),l=r(20),c=r(22),B=function(){function A(t,r,s){a(this,A),this.text=t,this.parent=r,this.bounds=s}return d(A,null,[{key:"fromTextNode",value:function(t,r){var a=g(t.data,r.style.textTransform);return new A(a,r,(0,c.parseTextBounds)(a,r,t))}}]),A}();t.default=B;var g=function(A,t){return t===l.TEXT_TRANSFORM.LOWERCASE?A.toLowerCase():t===l.TEXT_TRANSFORM.CAPITALIZE?A.replace(/(^|\s|:|-|\(|\))([a-z])/g,s):t===l.TEXT_TRANSFORM.UPPERCASE?A.toUpperCase():A}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0});var a=r(23),d=function(A){if(A.createRange){var t=A.createRange();if(t.getBoundingClientRect){var r=A.createElement("boundtest");r.style.height="123px",r.style.display="block",A.body.appendChild(r),t.selectNode(r);var a=t.getBoundingClientRect(),d=s(a.height);if(A.body.removeChild(r),123===d)return!0}}return!1},l=function(A,t){var r=new Image,a=A.createElement("canvas"),s=a.getContext("2d");return new Promise(function(A){r.src=t;var d=function(){try{s.drawImage(r,0,0),a.toDataURL()}catch(t){return A(!1)}return A(!0)};r.onload=d,r.onerror=function(){return A(!1)},!0===r.complete&&setTimeout(function(){d()},500)})},c=function(){return"undefined"!=typeof new Image().crossOrigin},B=function(){return"string"==typeof new XMLHttpRequest().responseType},g=function(A){var t=new Image,r=A.createElement("canvas"),a=r.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),r.toDataURL()}catch(A){return!1}return!0},u=function(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]},m=function(A){var t=A.createElement("canvas"),r=100;t.width=r,t.height=r;var s=t.getContext("2d");s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,r,r);var d=new Image,l=t.toDataURL();d.src=l;var c=(0,a.createForeignObjectSVG)(r,r,0,0,d);return s.fillStyle="red",s.fillRect(0,0,r,r),(0,a.loadSerializedSVG)(c).then(function(t){s.drawImage(t,0,0);var d=s.getImageData(0,0,r,r).data;s.fillStyle="red",s.fillRect(0,0,r,r);var c=A.createElement("div");return c.style.backgroundImage="url("+l+")",c.style.height=r+"px",u(d)?(0,a.loadSerializedSVG)((0,a.createForeignObjectSVG)(r,r,0,0,c)):Promise.reject(!1)}).then(function(A){return s.drawImage(A,0,0),u(s.getImageData(0,0,r,r).data)}).catch(function(){return!1})},p={get SUPPORT_RANGE_BOUNDS(){'';var A=d(document);return Object.defineProperty(p,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_SVG_DRAWING(){'';var A=g(document);return Object.defineProperty(p,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_BASE64_DRAWING(){'';return function(A){var t=l(document,A);return Object.defineProperty(p,"SUPPORT_BASE64_DRAWING",{value:function(){return t}}),t}},get SUPPORT_FOREIGNOBJECT_DRAWING(){'';var A="function"==typeof Array.from&&"function"==typeof window.fetch?m(document):Promise.resolve(!1);return Object.defineProperty(p,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){'';var A=c();return Object.defineProperty(p,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){'';var A=B();return Object.defineProperty(p,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){'';var A=("withCredentials"in new XMLHttpRequest);return Object.defineProperty(p,"SUPPORT_CORS_XHR",{value:A}),A}};t.default=p},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextDecoration=t.TEXT_DECORATION_LINE=t.TEXT_DECORATION=t.TEXT_DECORATION_STYLE=void 0;var a=r(0),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=t.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},l=t.TEXT_DECORATION={NONE:null},c=t.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},B=function(A){return"underline"===A?c.UNDERLINE:"overline"===A?c.OVERLINE:"line-through"===A?c.LINE_THROUGH:c.BLINK},g=function(A){return"none"===A?null:A.split(" ").map(B)},u=function(A){return"double"===A?d.DOUBLE:"dotted"===A?d.DOTTED:"dashed"===A?d.DASHED:"wavy"===A?d.WAVY:d.SOLID},m=t.parseTextDecoration=function(A){var t=g(A.textDecorationLine?A.textDecorationLine:A.textDecoration);if(null===t)return l.NONE;var r=A.textDecorationColor?new s.default(A.textDecorationColor):null,a=u(A.textDecorationStyle);return{textDecorationLine:t,textDecorationColor:r,textDecorationStyle:a}}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorder=t.BORDER_SIDES=t.BORDER_STYLE=void 0;var a=r(0),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=t.BORDER_STYLE={NONE:0,SOLID:1},l=t.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},c=Object.keys(l).map(function(A){return A.toLowerCase()}),B=function(A){return"none"===A?d.NONE:d.SOLID},g=t.parseBorder=function(A){return c.map(function(t){var r=new s.default(A.getPropertyValue("border-"+t+"-color")),a=B(A.getPropertyValue("border-"+t+"-style")),d=parseFloat(A.getPropertyValue("border-"+t+"-width"));return{borderColor:r,borderStyle:a,borderWidth:isNaN(d)?0:d}})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});for(var r=t.toCodePoints=function(A){for(var t=[],r=0,a=A.length;r<a;){var s=A.charCodeAt(r++);if(55296<=s&&56319>=s&&r<a){var d=A.charCodeAt(r++);56320==(64512&d)?t.push(((1023&s)<<10)+(1023&d)+65536):(t.push(s),r--)}else t.push(s)}return t},a=t.fromCodePoint=function(){var A=String.fromCodePoint;if(A)return A.apply(String,arguments);var t=arguments.length;if(!t)return"";for(var r=[],a=-1,s="";++a<t;){var d=arguments.length<=a?void 0:arguments[a];65535>=d?r.push(d):(d-=65536,r.push((d>>10)+55296,d%1024+56320)),(a+1===t||16384<r.length)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),l=0;l<s.length;l++)d[s.charCodeAt(l)]=l;var c=t.decode=function(A){var t=.75*A.length,r=A.length,a=0,s,l,c,B,g;"="===A[A.length-1]&&(t--,"="===A[A.length-2]&&t--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint8Array.prototype.slice?new ArrayBuffer(t):Array(t),m=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<r;s+=4)l=d[A.charCodeAt(s)],c=d[A.charCodeAt(s+1)],B=d[A.charCodeAt(s+2)],g=d[A.charCodeAt(s+3)],m[a++]=l<<2|c>>4,m[a++]=(15&c)<<4|B>>2,m[a++]=(3&B)<<6|63&g;return u},B=t.polyUint16Array=function(A){for(var t=A.length,r=[],a=0;a<t;a+=2)r.push(A[a+1]<<8|A[a]);return r},g=t.polyUint32Array=function(A){for(var t=A.length,r=[],a=0;a<t;a+=4)r.push(A[a+3]<<24|A[a+2]<<16|A[a+1]<<8|A[a]);return r}},function(A,t,s){"";function d(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCounterText=t.inlineListItemElement=t.getListOwner=void 0;var l=s(3),c=s(6),B=d(c),g=s(9),u=d(g),m=s(8),p=s(24),w=["OL","UL","MENU"],h=t.getListOwner=function(A){var t=A.parent;if(!t)return null;do{var r=-1!==w.indexOf(t.tagName);if(r)return t;t=t.parent}while(t);return A.parent},C=t.inlineListItemElement=function(A,t,r){var a=t.style.listStyle;if(a){var s=A.ownerDocument.defaultView.getComputedStyle(A,null),d=A.ownerDocument.createElement("html2canvaswrapper");switch((0,l.copyCSSStyles)(s,d),d.style.position="absolute",d.style.bottom="auto",d.style.display="block",d.style.letterSpacing="normal",a.listStylePosition){case m.LIST_STYLE_POSITION.OUTSIDE:d.style.left="auto",d.style.right=A.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7+"px",d.style.textAlign="right";break;case m.LIST_STYLE_POSITION.INSIDE:d.style.left=t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width)+"px",d.style.right="auto",d.style.textAlign="left";}var c=void 0,g=t.style.margin[0].getAbsoluteValue(t.bounds.width),p=a.listStyleImage;if(!p)"number"==typeof t.listIndex&&(c=A.ownerDocument.createTextNode(_(t.listIndex,a.listStyleType,!0)),d.appendChild(c),d.style.top=t.bounds.top-g+"px");else if("url"===p.method){var w=A.ownerDocument.createElement("img");w.src=p.args[0],d.style.top=t.bounds.top-g+"px",d.style.width="auto",d.style.height="auto",d.appendChild(w)}else{var h=.5*parseFloat(t.style.font.fontSize);d.style.top=t.bounds.top-g+t.bounds.height-1.5*h+"px",d.style.width=h+"px",d.style.height=h+"px",d.style.backgroundImage=s.listStyleImage}var C=A.ownerDocument.body;C.appendChild(d),c?(t.childNodes.push(u.default.fromTextNode(c,t)),C.removeChild(d)):t.childNodes.push(new B.default(d,t,r,0))}},Q={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},U={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},E={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},F={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},b=function(A,t,r,a,s,d){return A<t||A>r?_(A,s,0<d.length):a.integers.reduce(function(t,r,s){for(;A>=r;)A-=r,t+=a.values[s];return t},"")+d},H=function(A,t,r,a){var s="";do r||A--,s=a(A)+s,A/=t;while(A*t>=t);return s},S=function(A,t,s,d,l){var c=s-t+1;return(0>A?"-":"")+(H(a(A),c,d,function(A){return(0,p.fromCodePoint)(r(A%c)+t)})+l)},T=function(A,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:". ",d=t.length;return H(a(A),d,!1,function(A){return t[r(A%d)]})+s},I=1,N=2,R=4,L=8,M=function(A,t,s,d,c,B){if(-9999>A||9999<A)return _(A,m.LIST_STYLE_TYPE.CJK_DECIMAL,0<c.length);var g=a(A),u=c;if(0===g)return t[0]+u;for(var p=0,w;0<g&&4>=p;p++)w=g%10,0===w&&(0,l.contains)(B,I)&&""!==u?u=t[w]+u:1<w||1===w&&0===p||1===w&&1===p&&(0,l.contains)(B,N)||1===w&&1===p&&(0,l.contains)(B,R)&&100<A||1===w&&1<p&&(0,l.contains)(B,L)?u=t[w]+(0<p?s[p-1]:"")+u:1===w&&0<p&&(u=s[p-1]+u),g=r(g/10);return(0>A?d:"")+u},D="\u5341\u767E\u5343\u842C",k="\u62FE\u4F70\u4EDF\u842C",O="\u30DE\u30A4\u30CA\u30B9",K="\uB9C8\uC774\uB108\uC2A4 ",_=t.createCounterText=function(A,t,r){var a=r?". ":"",s=r?"\u3001":"",d=r?", ":"";switch(t){case m.LIST_STYLE_TYPE.DISC:return"\u2022";case m.LIST_STYLE_TYPE.CIRCLE:return"\u25E6";case m.LIST_STYLE_TYPE.SQUARE:return"\u25FE";case m.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var l=S(A,48,57,!0,a);return 4>l.length?"0"+l:l;case m.LIST_STYLE_TYPE.CJK_DECIMAL:return T(A,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",s);case m.LIST_STYLE_TYPE.LOWER_ROMAN:return b(A,1,3999,Q,m.LIST_STYLE_TYPE.DECIMAL,a).toLowerCase();case m.LIST_STYLE_TYPE.UPPER_ROMAN:return b(A,1,3999,Q,m.LIST_STYLE_TYPE.DECIMAL,a);case m.LIST_STYLE_TYPE.LOWER_GREEK:return S(A,945,969,!1,a);case m.LIST_STYLE_TYPE.LOWER_ALPHA:return S(A,97,122,!1,a);case m.LIST_STYLE_TYPE.UPPER_ALPHA:return S(A,65,90,!1,a);case m.LIST_STYLE_TYPE.ARABIC_INDIC:return S(A,1632,1641,!0,a);case m.LIST_STYLE_TYPE.ARMENIAN:case m.LIST_STYLE_TYPE.UPPER_ARMENIAN:return b(A,1,9999,U,m.LIST_STYLE_TYPE.DECIMAL,a);case m.LIST_STYLE_TYPE.LOWER_ARMENIAN:return b(A,1,9999,U,m.LIST_STYLE_TYPE.DECIMAL,a).toLowerCase();case m.LIST_STYLE_TYPE.BENGALI:return S(A,2534,2543,!0,a);case m.LIST_STYLE_TYPE.CAMBODIAN:case m.LIST_STYLE_TYPE.KHMER:return S(A,6112,6121,!0,a);case m.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return T(A,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",s);case m.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return T(A,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",s);case m.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case m.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return M(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",D,"\u8CA0",s,N|R|L);case m.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return M(A,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",k,"\u8CA0",s,I|N|R|L);case m.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return M(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",D,"\u8D1F",s,N|R|L);case m.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return M(A,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",k,"\u8D1F",s,I|N|R|L);case m.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return M(A,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",O,s,0);case m.LIST_STYLE_TYPE.JAPANESE_FORMAL:return M(A,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",O,s,I|N|R);case m.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return M(A,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",K,d,I|N|R);case m.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return M(A,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",K,d,0);case m.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return M(A,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",K,d,I|N|R);case m.LIST_STYLE_TYPE.DEVANAGARI:return S(A,2406,2415,!0,a);case m.LIST_STYLE_TYPE.GEORGIAN:return b(A,1,19999,F,m.LIST_STYLE_TYPE.DECIMAL,a);case m.LIST_STYLE_TYPE.GUJARATI:return S(A,2790,2799,!0,a);case m.LIST_STYLE_TYPE.GURMUKHI:return S(A,2662,2671,!0,a);case m.LIST_STYLE_TYPE.HEBREW:return b(A,1,10999,E,m.LIST_STYLE_TYPE.DECIMAL,a);case m.LIST_STYLE_TYPE.HIRAGANA:return T(A,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case m.LIST_STYLE_TYPE.HIRAGANA_IROHA:return T(A,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case m.LIST_STYLE_TYPE.KANNADA:return S(A,3302,3311,!0,a);case m.LIST_STYLE_TYPE.KATAKANA:return T(A,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",s);case m.LIST_STYLE_TYPE.KATAKANA_IROHA:return T(A,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",s);case m.LIST_STYLE_TYPE.LAO:return S(A,3792,3801,!0,a);case m.LIST_STYLE_TYPE.MONGOLIAN:return S(A,6160,6169,!0,a);case m.LIST_STYLE_TYPE.MYANMAR:return S(A,4160,4169,!0,a);case m.LIST_STYLE_TYPE.ORIYA:return S(A,2918,2927,!0,a);case m.LIST_STYLE_TYPE.PERSIAN:return S(A,1776,1785,!0,a);case m.LIST_STYLE_TYPE.TAMIL:return S(A,3046,3055,!0,a);case m.LIST_STYLE_TYPE.TELUGU:return S(A,3174,3183,!0,a);case m.LIST_STYLE_TYPE.THAI:return S(A,3664,3673,!0,a);case m.LIST_STYLE_TYPE.TIBETAN:return S(A,3872,3881,!0,a);case m.LIST_STYLE_TYPE.DECIMAL:default:return S(A,48,57,!0,a);}}},function(a,d,c){"";function B(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(d,"__esModule",{value:!0});var g=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),u=c(5),m=c(11),p=function(A,t){var r=l.apply(null,A.colorStops.map(function(A){return A.stop})),a=1/l(1,r);A.colorStops.forEach(function(A){t.addColorStop(a*A.stop,A.color.toString())})},w=function(){function a(A){B(this,a),this.canvas=A?A:document.createElement("canvas")}return g(a,[{key:"render",value:function(A){this.ctx=this.canvas.getContext("2d"),this.options=A,this.canvas.width=r(A.width*A.scale),this.canvas.height=r(A.height*A.scale),this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-A.x,-A.y),this.ctx.textBaseline="bottom",A.logger.log("Canvas renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+this.options.scale)}},{key:"clip",value:function(A,t){var r=this;A.length&&(this.ctx.save(),A.forEach(function(A){r.path(A),r.ctx.clip()})),t(),A.length&&this.ctx.restore()}},{key:"drawImage",value:function(A,t,r){this.ctx.drawImage(A,t.left,t.top,t.width,t.height,r.left,r.top,r.width,r.height)}},{key:"drawShape",value:function(A,t){this.path(A),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(A){this.ctx.fillStyle=A.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(A){var r=this;this.ctx.beginPath(),Array.isArray(A)?A.forEach(function(A,t){var a=A.type===u.PATH.VECTOR?A:A.start;0===t?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),A.type===u.PATH.BEZIER_CURVE&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)}):this.ctx.arc(A.x+A.radius,A.y+A.radius,A.radius,0,2*t,!0),this.ctx.closePath()}},{key:"rectangle",value:function(A,t,r,a,s){this.ctx.fillStyle=s.toString(),this.ctx.fillRect(A,t,r,a)}},{key:"renderLinearGradient",value:function(A,t){var r=this.ctx.createLinearGradient(A.left+t.direction.x1,A.top+t.direction.y1,A.left+t.direction.x0,A.top+t.direction.y0);p(t,r),this.ctx.fillStyle=r,this.ctx.fillRect(A.left,A.top,A.width,A.height)}},{key:"renderRadialGradient",value:function(A,t){var r=this,a=A.left+t.center.x,s=A.top+t.center.y,d=this.ctx.createRadialGradient(a,s,0,a,s,t.radius.x);if(d)if(p(t,d),this.ctx.fillStyle=d,t.radius.x!==t.radius.y){var l=A.left+.5*A.width,c=A.top+.5*A.height,B=t.radius.y/t.radius.x,g=1/B;this.transform(l,c,[1,0,0,B,0,0],function(){return r.ctx.fillRect(A.left,g*(A.top-c)+c,A.width,A.height*g)})}else this.ctx.fillRect(A.left,A.top,A.width,A.height)}},{key:"renderRepeat",value:function(A,t,r,a,s){this.path(A),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,r),"repeat"),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)}},{key:"renderTextNode",value:function(t,r,a,d,l){var c=this;this.ctx.font=[a.fontStyle,a.fontVariant,a.fontWeight,a.fontSize,a.fontFamily].join(" "),t.forEach(function(t){if(c.ctx.fillStyle=r.toString(),l&&t.text.trim().length?l.slice(0).reverse().forEach(function(A){c.ctx.shadowColor=A.color.toString(),c.ctx.shadowOffsetX=A.offsetX*c.options.scale,c.ctx.shadowOffsetY=A.offsetY*c.options.scale,c.ctx.shadowBlur=A.blur,c.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}):c.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==d){var B=d.textDecorationColor||r;d.textDecorationLine.forEach(function(r){switch(r){case m.TEXT_DECORATION_LINE.UNDERLINE:var d=c.options.fontMetrics.getMetrics(a),l=d.baseline;c.rectangle(t.bounds.left,s(t.bounds.top+l),t.bounds.width,1,B);break;case m.TEXT_DECORATION_LINE.OVERLINE:c.rectangle(t.bounds.left,s(t.bounds.top),t.bounds.width,1,B);break;case m.TEXT_DECORATION_LINE.LINE_THROUGH:var g=c.options.fontMetrics.getMetrics(a),u=g.middle;c.rectangle(t.bounds.left,A(t.bounds.top+u),t.bounds.width,1,B);}})}})}},{key:"resizeImage",value:function(A,t){if(A.width===t.width&&A.height===t.height)return A;var r=this.canvas.ownerDocument.createElement("canvas");r.width=t.width,r.height=t.height;var a=r.getContext("2d");return a.drawImage(A,0,0,A.width,A.height,0,0,t.width,t.height),r}},{key:"setOpacity",value:function(A){this.ctx.globalAlpha=A}},{key:"transform",value:function(A,t,r,a){this.ctx.save(),this.ctx.translate(A,t),this.ctx.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.ctx.translate(-A,-t),a(),this.ctx.restore()}}]),a}();d.default=w},function(A,t){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),s=function(){function A(t,a,s){r(this,A),this.enabled="undefined"!=typeof window&&t,this.start=s?s:Date.now(),this.id=a}return a(A,[{key:"child",value:function(t){return new A(this.enabled,t,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var A=arguments.length,t=Array(A),r=0;r<A;r++)t[r]=arguments[r];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var A=arguments.length,t=Array(A),r=0;r<A;r++)t[r]=arguments[r];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}}]),A}();t.default=s},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadding=t.PADDING_SIDES=void 0;var a=r(1),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=t.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},l=["top","right","bottom","left"],c=t.parsePadding=function(A){return l.map(function(t){return new s.default(A.getPropertyValue("padding-"+t))})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1},a=t.parseOverflowWrap=function(A){switch(A){case"break-word":return r.BREAK_WORD;case"normal":default:return r.NORMAL;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},a=t.parsePosition=function(A){return"relative"===A?r.RELATIVE:"absolute"===A?r.ABSOLUTE:"fixed"===A?r.FIXED:"sticky"===A?r.STICKY:r.STATIC}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},a=t.parseTextTransform=function(A){return"uppercase"===A?r.UPPERCASE:"lowercase"===A?r.LOWERCASE:"capitalize"===A?r.CAPITALIZE:r.NONE}},function(A,t,r){"";function a(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.reformatInputBounds=t.inlineSelectElement=t.inlineTextAreaElement=t.inlineInputElement=t.getInputBorderRadius=t.INPUT_BACKGROUND=t.INPUT_BORDERS=t.INPUT_COLOR=void 0;var s=r(9),d=a(s),l=r(4),c=r(12),g=r(50),u=a(g),m=r(7),p=a(m),w=r(0),h=a(w),C=r(1),Q=a(C),U=r(2),E=r(22),F=r(3),b=t.INPUT_COLOR=new h.default([42,42,42]),H=new h.default([165,165,165]),S=new h.default([222,222,222]),T={borderWidth:1,borderColor:H,borderStyle:c.BORDER_STYLE.SOLID},I=t.INPUT_BORDERS=[T,T,T,T],N=t.INPUT_BACKGROUND={backgroundColor:S,backgroundImage:[],backgroundClip:l.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:l.BACKGROUND_ORIGIN.PADDING_BOX},R=new Q.default("50%"),L=[R,R],M=[L,L,L,L],D=new Q.default("3px"),k=[D,D],O=[k,k,k,k],K=t.getInputBorderRadius=function(A){return"radio"===A.type?M:O},_=t.inlineInputElement=function(A,t){if(!("radio"===A.type||"checkbox"===A.type))G(X(A),A,t,!1);else if(A.checked){var r=B(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===A.type?[new p.default(t.bounds.left+.39363*r,t.bounds.top+.79*r),new p.default(t.bounds.left+.16*r,t.bounds.top+.5549*r),new p.default(t.bounds.left+.27347*r,t.bounds.top+.44071*r),new p.default(t.bounds.left+.39694*r,t.bounds.top+.5649*r),new p.default(t.bounds.left+.72983*r,t.bounds.top+.23*r),new p.default(t.bounds.left+.84*r,t.bounds.top+.34085*r),new p.default(t.bounds.left+.39363*r,t.bounds.top+.79*r)]:new u.default(t.bounds.left+r/4,t.bounds.top+r/4,r/4))}},P=t.inlineTextAreaElement=function(A,t){G(A.value,A,t,!0)},V=t.inlineSelectElement=function(A,t){var r=A.options[A.selectedIndex||0];G(r?r.text||"":"",A,t,!1)},z=t.reformatInputBounds=function(A){return A.width>A.height?(A.left+=(A.width-A.height)/2,A.width=A.height):A.width<A.height&&(A.top+=(A.height-A.width)/2,A.height=A.width),A},G=function(A,t,r,a){var s=t.ownerDocument.body;if(0<A.length&&s){var l=t.ownerDocument.createElement("html2canvaswrapper");(0,F.copyCSSStyles)(t.ownerDocument.defaultView.getComputedStyle(t,null),l),l.style.position="absolute",l.style.left=r.bounds.left+"px",l.style.top=r.bounds.top+"px",a||(l.style.whiteSpace="nowrap");var c=t.ownerDocument.createTextNode(A);l.appendChild(c),s.appendChild(l),r.childNodes.push(d.default.fromTextNode(c,r)),s.removeChild(l)}},X=function(A){var t="password"===A.type?Array(A.value.length+1).join("\u2022"):A.value;return 0===t.length?A.placeholder||"":t}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextBounds=t.TextBounds=void 0;var s=r(2),d=r(11),l=r(10),c=function(A){return A&&A.__esModule?A:{default:A}}(l),B=r(24),g=t.TextBounds=function A(t,r){a(this,A),this.text=t,this.bounds=r},u=t.parseTextBounds=function(A,t,r){for(var a=0!==t.style.letterSpacing,s=a?(0,B.toCodePoints)(A).map(function(A){return(0,B.fromCodePoint)(A)}):(0,B.breakWords)(A,t),l=s.length,u=r.parentNode?r.parentNode.ownerDocument.defaultView:null,w=u?u.pageXOffset:0,h=u?u.pageYOffset:0,C=[],Q=0,U=0,E;U<l;U++){if(E=s[U],!(t.style.textDecoration!==d.TEXT_DECORATION.NONE||0<E.trim().length))c.default.SUPPORT_RANGE_BOUNDS||(r=r.splitText(E.length));else if(c.default.SUPPORT_RANGE_BOUNDS)C.push(new g(E,p(r,Q,E.length,w,h)));else{var F=r.splitText(E.length);C.push(new g(E,m(r,w,h))),r=F}Q+=E.length}return C},m=function(A,t,r){var a=A.ownerDocument.createElement("html2canvaswrapper");a.appendChild(A.cloneNode(!0));var d=A.parentNode;if(d){d.replaceChild(a,A);var l=(0,s.parseBounds)(a,t,r);return a.firstChild&&d.replaceChild(a.firstChild,a),l}return new s.Bounds(0,0,0,0)},p=function(A,t,r,a,d){var l=A.ownerDocument.createRange();return l.setStart(A,t),l.setEnd(A,t+r),s.Bounds.fromClientRect(l.getBoundingClientRect(),a,d)}},function(A,t){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=function(){function A(t){a(this,A),this.element=t}return s(A,[{key:"render",value:function(A){var t=this;this.options=A,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=r(A.width)*A.scale,this.canvas.height=r(A.height)*A.scale,this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px",A.logger.log("ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale);var a=c(l(A.windowWidth,A.width)*A.scale,l(A.windowHeight,A.height)*A.scale,A.scrollX*A.scale,A.scrollY*A.scale,this.element);return B(a).then(function(r){return A.backgroundColor&&(t.ctx.fillStyle=A.backgroundColor.toString(),t.ctx.fillRect(0,0,A.width*A.scale,A.height*A.scale)),t.ctx.drawImage(r,-A.x*A.scale,-A.y*A.scale),t.canvas})}}]),A}();t.default=d;var c=t.createForeignObjectSVG=function(A,t,r,a,s){var d=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return d.setAttributeNS(null,"width",A),d.setAttributeNS(null,"height",t),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r),l.setAttributeNS(null,"y",a),l.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(l),l.appendChild(s),d},B=t.loadSerializedSVG=function(A){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.breakWords=t.fromCodePoint=t.toCodePoints=void 0;var a=r(46);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return a.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return a.fromCodePoint}});var s=r(18),d=t.breakWords=function(A,t){for(var r=(0,a.LineBreaker)(A,{lineBreak:t.style.lineBreak,wordBreak:t.style.overflowWrap===s.OVERFLOW_WRAP.BREAK_WORD?"break-word":t.style.wordBreak}),d=[],l=void 0;!(l=r.next()).done;)d.push(l.value.slice());return d}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FontMetrics=void 0;var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=r(3),l="Hidden Text",c=t.FontMetrics=function(){function A(t){a(this,A),this._data={},this._document=t}return s(A,[{key:"_parseMetrics",value:function(A){var t=this._document.createElement("div"),r=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;if(!s)throw new Error("No document found for font metrics");t.style.visibility="hidden",t.style.fontFamily=A.fontFamily,t.style.fontSize=A.fontSize,t.style.margin="0",t.style.padding="0",s.appendChild(t),r.src=d.SMALL_IMAGE,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",a.style.fontFamily=A.fontFamily,a.style.fontSize=A.fontSize,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(l)),t.appendChild(a),t.appendChild(r);var c=r.offsetTop-a.offsetTop+2;t.removeChild(a),t.appendChild(this._document.createTextNode(l)),t.style.lineHeight="normal",r.style.verticalAlign="super";var B=r.offsetTop-t.offsetTop+2;return s.removeChild(t),{baseline:c,middle:B}}},{key:"getMetrics",value:function(A){var t=A.fontFamily+" "+A.fontSize;return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(A)),this._data[t]}}]),A}()},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.Proxy=void 0;var a=r(10),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=t.Proxy=function(A,t){if(!t.proxy)return Promise.reject("No proxy defined");var r=t.proxy;return new Promise(function(a,d){var l=s.default.SUPPORT_CORS_XHR&&s.default.SUPPORT_RESPONSE_TYPE?"blob":"text",c=s.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(c.onload=function(){if(!(c instanceof XMLHttpRequest))a(c.responseText);else if(200!==c.status)d("Failed to proxy resource "+A.substring(0,256)+" with status code "+c.status);else if("text"===l)a(c.response);else{var t=new FileReader;t.addEventListener("load",function(){return a(t.result)},!1),t.addEventListener("error",function(A){return d(A)},!1),t.readAsDataURL(c.response)}},c.onerror=d,c.open("GET",r+"?url="+encodeURIComponent(A)+"&responseType="+l),"text"!=l&&c instanceof XMLHttpRequest&&(c.responseType=l),t.imageTimeout){var B=t.imageTimeout;c.timeout=B,c.ontimeout=function(){return d("Timed out ("+B+"ms) proxying "+A.substring(0,256))}}c.send()})}},function(A,t,r){"";function a(A){return A&&A.__esModule?A:{default:A}}var s=Object.assign||function(A){for(var t=1,r;t<arguments.length;t++)for(var a in r=arguments[t],r)Object.prototype.hasOwnProperty.call(r,a)&&(A[a]=r[a]);return A},d=r(15),l=a(d),c=r(16),B=a(c),g=r(28),u=function(A,t){var r=t||{},a=new B.default("boolean"!=typeof r.logging||r.logging);a.log("html2canvas 1.0.0-alpha.12"),"function"==typeof r.onrendered&&a.error("onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value");var d=A.ownerDocument;if(!d)return Promise.reject("Provided element is not within a Document");var c=d.defaultView,u={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:c.devicePixelRatio||1,target:new l.default(r.canvas),useCORS:!1,windowWidth:c.innerWidth,windowHeight:c.innerHeight,scrollX:c.pageXOffset,scrollY:c.pageYOffset},m=(0,g.renderElement)(A,s({},u,r),a);return m.catch(function(A){throw a.error(A),A})};u.CanvasRenderer=l.default,A.exports=u},function(t,r,a){"";function s(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(r,"__esModule",{value:!0}),r.renderElement=void 0;var d=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(16),c=s(l),B=a(29),g=a(51),u=s(g),m=a(23),p=s(m),w=a(10),h=s(w),C=a(2),Q=a(54),U=a(25),E=a(0),F=s(E),b=r.renderElement=function t(r,a,s){var l=r.ownerDocument,c=new C.Bounds(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),g=l.documentElement?new F.default(getComputedStyle(l.documentElement).backgroundColor):E.TRANSPARENT,m=l.body?new F.default(getComputedStyle(l.body).backgroundColor):E.TRANSPARENT,w=r===l.documentElement?g.isTransparent()?m.isTransparent()?a.backgroundColor?new F.default(a.backgroundColor):null:m:g:a.backgroundColor?new F.default(a.backgroundColor):null;return(a.foreignObjectRendering?h.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(g){return g?function(t){return s.log("Document cloned, using foreignObject rendering"),t.inlineFonts(l).then(function(){return t.resourceLoader.ready()}).then(function(){var d=new p.default(t.documentElement),c=l.defaultView,B=c.pageXOffset,g=c.pageYOffset,u="HTML"===r.tagName||"BODY"===r.tagName,m=u?(0,C.parseDocumentSize)(l):(0,C.parseBounds)(r,B,g),h=m.width,Q=m.height,U=m.left,E=m.top;return d.render({backgroundColor:w,logger:s,scale:a.scale,x:"number"==typeof a.x?a.x:U,y:"number"==typeof a.y?a.y:E,width:"number"==typeof a.width?a.width:A(h),height:"number"==typeof a.height?a.height:A(Q),windowWidth:a.windowWidth,windowHeight:a.windowHeight,scrollX:a.scrollX,scrollY:a.scrollY})})}(new Q.DocumentCloner(r,a,s,!0,t)):(0,Q.cloneWindow)(l,c,r,a,s,t).then(function(t){var r=d(t,3),c=r[0],g=r[1],m=r[2];s.log("Document cloned, using computed rendering");var p=(0,B.NodeParser)(g,m,s),h=g.ownerDocument;return w===p.container.style.background.backgroundColor&&(p.container.style.background.backgroundColor=E.TRANSPARENT),m.ready().then(function(t){var r=new U.FontMetrics(h);s.log("Starting renderer");var d=h.defaultView,B=d.pageXOffset,m=d.pageYOffset,Q="HTML"===g.tagName||"BODY"===g.tagName,E=Q?(0,C.parseDocumentSize)(l):(0,C.parseBounds)(g,B,m),F=E.width,b=E.height,H=E.left,S=E.top,T={backgroundColor:w,fontMetrics:r,imageStore:t,logger:s,scale:a.scale,x:"number"==typeof a.x?a.x:H,y:"number"==typeof a.y?a.y:S,width:"number"==typeof a.width?a.width:A(F),height:"number"==typeof a.height?a.height:A(b)};if(Array.isArray(a.target))return Promise.all(a.target.map(function(A){var t=new u.default(A,T);return t.render(p)}));var I=new u.default(a.target,T),N=I.render(p);return!0===a.removeContainer&&(c.parentNode?c.parentNode.removeChild(c):s.log("Cannot detach cloned iframe as it is not in the DOM anymore")),N})})})}},function(A,t,r){"";function a(A){return A&&A.__esModule?A:{default:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeParser=void 0;var s=r(30),d=a(s),l=r(6),c=a(l),B=r(9),g=a(B),u=r(21),m=r(14),p=r(8),w=t.NodeParser=function(A,t,r){r.log("Starting node parsing");var a=0,s=new c.default(A,null,t,a++),l=new d.default(s,null,!0);return C(A,s,l,t,a),r.log("Finished parsing node tree"),l},h=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],C=function A(t,r,a,s,l){if(5e4<l)throw new Error("Recursion error while parsing node tree");for(var B=t.firstChild,w;B;B=w){w=B.nextSibling;var C=B.ownerDocument.defaultView;if(B instanceof C.Text||B instanceof Text||C.parent&&B instanceof C.parent.Text)0<B.data.trim().length&&r.childNodes.push(g.default.fromTextNode(B,r));else if(B instanceof C.HTMLElement||B instanceof HTMLElement||C.parent&&B instanceof C.parent.HTMLElement){if(-1===h.indexOf(B.nodeName)){var E=new c.default(B,r,s,l++);if(E.isVisible()){"INPUT"===B.tagName?(0,u.inlineInputElement)(B,E):"TEXTAREA"===B.tagName?(0,u.inlineTextAreaElement)(B,E):"SELECT"===B.tagName?(0,u.inlineSelectElement)(B,E):E.style.listStyle&&E.style.listStyle.listStyleType!==p.LIST_STYLE_TYPE.NONE&&(0,m.inlineListItemElement)(B,E,s);var F="TEXTAREA"!==B.tagName,b=Q(E,B);if(b||U(E)){var H=b||E.isPositioned()?a.getRealParentStackingContext():a,S=new d.default(E,H,b);H.contexts.push(S),F&&A(B,E,S,s,l)}else a.children.push(E),F&&A(B,E,a,s,l)}}}else if(B instanceof C.SVGSVGElement||B instanceof SVGSVGElement||C.parent&&B instanceof C.parent.SVGSVGElement){var T=new c.default(B,r,s,l++),I=Q(T,B);if(I||U(T)){var N=I||T.isPositioned()?a.getRealParentStackingContext():a,R=new d.default(T,N,I);N.contexts.push(R)}else a.children.push(T)}}},Q=function(A,t){return A.isRootElement()||A.isPositionedWithZIndex()||1>A.style.opacity||A.isTransformed()||E(A,t)},U=function(A){return A.isPositioned()||A.isFloating()},E=function(A,t){return"BODY"===t.nodeName&&A.parent instanceof c.default&&A.parent.style.background.backgroundColor.isTransparent()}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=r(6),l=function(A){return A&&A.__esModule?A:{default:A}}(d),c=r(19),B=function(){function A(t,r,s){a(this,A),this.container=t,this.parent=r,this.contexts=[],this.children=[],this.treatAsRealStackingContext=s}return s(A,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),A}();t.default=B},function(A,t){"";function r(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function A(t,a){r(this,A),this.width=t,this.height=a}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=r(5),l=r(7),c=function(A){return A&&A.__esModule?A:{default:A}}(l),B=function(A,r,a){return new c.default(A.x+(r.x-A.x)*a,A.y+(r.y-A.y)*a)},g=function(){function A(t,r,s,l){a(this,A),this.type=d.PATH.BEZIER_CURVE,this.start=t,this.startControl=r,this.endControl=s,this.end=l}return s(A,[{key:"subdivide",value:function(r,t){var a=B(this.start,this.startControl,r),s=B(this.startControl,this.endControl,r),d=B(this.endControl,this.end,r),l=B(a,s,r),c=B(s,d,r),g=B(l,c,r);return t?new A(this.start,a,l,g):new A(g,c,d,this.end)}},{key:"reverse",value:function(){return new A(this.end,this.endControl,this.startControl,this.start)}}]),A}();t.default=g},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorderRadius=void 0;var a=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(1),d=function(A){return A&&A.__esModule?A:{default:A}}(s),l=["top-left","top-right","bottom-right","bottom-left"],c=t.parseBorderRadius=function(A){return l.map(function(t){var r=A.getPropertyValue("border-"+t+"-radius"),s=r.split(" ").map(d.default.create),l=a(s,2),c=l[0],B=l[1];return"undefined"==typeof B?[c,c]:[c,B]})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:131072,TABLE_COLUMN:262144,TABLE_CAPTION:524288,RUBY_BASE:1048576,RUBY_TEXT:2097152,RUBY_BASE_CONTAINER:4194304,RUBY_TEXT_CONTAINER:8388608,CONTENTS:16777216,INLINE_BLOCK:33554432,INLINE_LIST_ITEM:67108864,INLINE_TABLE:134217728,INLINE_FLEX:268435456,INLINE_GRID:536870912},a=function(A){return"block"===A?r.BLOCK:"inline"===A?r.INLINE:"run-in"===A?r.RUN_IN:"flow"===A?r.FLOW:"flow-root"===A?r.FLOW_ROOT:"table"===A?r.TABLE:"flex"===A?r.FLEX:"grid"===A?r.GRID:"ruby"===A?r.RUBY:"subgrid"===A?r.SUBGRID:"list-item"===A?r.LIST_ITEM:"table-row-group"===A?r.TABLE_ROW_GROUP:"table-header-group"===A?r.TABLE_HEADER_GROUP:"table-footer-group"===A?r.TABLE_FOOTER_GROUP:"table-row"===A?r.TABLE_ROW:"table-cell"===A?r.TABLE_CELL:"table-column-group"===A?r.TABLE_COLUMN_GROUP:"table-column"===A?r.TABLE_COLUMN:"table-caption"===A?r.TABLE_CAPTION:"ruby-base"===A?r.RUBY_BASE:"ruby-text"===A?r.RUBY_TEXT:"ruby-base-container"===A?r.RUBY_BASE_CONTAINER:"ruby-text-container"===A?r.RUBY_TEXT_CONTAINER:"contents"===A?r.CONTENTS:"inline-block"===A?r.INLINE_BLOCK:"inline-list-item"===A?r.INLINE_LIST_ITEM:"inline-table"===A?r.INLINE_TABLE:"inline-flex"===A?r.INLINE_FLEX:"inline-grid"===A?r.INLINE_GRID:r.NONE},s=function(A,t){return A|a(t)},d=t.parseDisplay=function(A){return A.split(" ").reduce(s,0)}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},a=t.parseCSSFloat=function(A){return"left"===A?r.LEFT:"right"===A?r.RIGHT:"inline-start"===A?r.INLINE_START:"inline-end"===A?r.INLINE_END:r.NONE}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=function(A){switch(A){case"normal":return 400;case"bold":return 700;}var t=parseInt(A,10);return isNaN(t)?400:t},a=t.parseFont=function(A){var t=A.fontFamily,a=A.fontSize,s=A.fontStyle,d=A.fontVariant,l=r(A.fontWeight);return{fontFamily:t,fontSize:a,fontStyle:s,fontVariant:d,fontWeight:l}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseLetterSpacing=function(A){if("normal"===A)return 0;var t=parseFloat(A);return isNaN(t)?0:t}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.LINE_BREAK={NORMAL:"normal",STRICT:"strict"},a=t.parseLineBreak=function(A){switch(A){case"strict":return r.STRICT;case"normal":default:return r.NORMAL;}}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMargin=void 0;var a=r(1),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=["top","right","bottom","left"],l=t.parseMargin=function(A){return d.map(function(t){return new s.default(A.getPropertyValue("margin-"+t))})}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},a=t.parseOverflow=function(A){switch(A){case"hidden":return r.HIDDEN;case"scroll":return r.SCROLL;case"auto":return r.AUTO;case"visible":default:return r.VISIBLE;}}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextShadow=void 0;var a=r(0),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=t.parseTextShadow=function(A){if("none"===A||"string"!=typeof A)return null;for(var t="",r=!1,a=[],d=[],l=0,B=null,g=function(){t.length&&(r?a.push(parseFloat(t)):B=new s.default(t)),r=!1,t=""},u=function(){a.length&&null!==B&&d.push({color:B,offsetX:a[0]||0,offsetY:a[1]||0,blur:a[2]||0}),a.splice(0,a.length),B=null},m=0,p;m<A.length;m++)p=A[m],"("===p?(t+=p,l++):")"===p?(t+=p,l--):","===p?0===l?(g(),u()):t+=p:" "===p?0===l?g():t+=p:(0===t.length&&/^([+-]|\d|\.)$/i.test(p)&&(r=!0),t+=p);return g(),u(),0===d.length?null:d}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransform=void 0;var a=r(1),s=function(A){return A&&A.__esModule?A:{default:A}}(a),d=function(A){return parseFloat(A.trim())},l=t.parseTransform=function(A){var t=B(A.transform||A.webkitTransform||A.mozTransform||A.msTransform||A.oTransform);return null===t?null:{transform:t,transformOrigin:c(A.transformOrigin||A.webkitTransformOrigin||A.mozTransformOrigin||A.msTransformOrigin||A.oTransformOrigin)}},c=function(A){if("string"!=typeof A){var t=new s.default("0");return[t,t]}var r=A.split(" ").map(s.default.create);return[r[0],r[1]]},B=function(A){if("none"===A||"string"!=typeof A)return null;var t=A.match(/(matrix|matrix3d)\((.+)\)/);if(t){if("matrix"===t[1]){var r=t[2].split(",").map(d);return[r[0],r[1],r[2],r[3],r[4],r[5]]}var a=t[2].split(",").map(d);return[a[0],a[1],a[4],a[5],a[12],a[13]]}return null}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2},a=t.parseVisibility=function(A){switch(A){case"hidden":return r.HIDDEN;case"collapse":return r.COLLAPSE;case"visible":default:return r.VISIBLE;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});var r=t.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"},a=t.parseWordBreak=function(A){switch(A){case"break-all":return r.BREAK_ALL;case"keep-all":return r.KEEP_ALL;case"normal":default:return r.NORMAL;}}},function(A,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseZIndex=function(A){var t="auto"===A;return{auto:t,order:t?0:parseInt(A,10)}}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0});var a=r(13);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return a.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return a.fromCodePoint}});var s=r(47);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return s.LineBreaker}})},function(A,t,r){"";function a(A){if(Array.isArray(A)){for(var t=0,r=Array(A.length);t<A.length;t++)r[t]=A[t];return r}return Array.from(A)}function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var d=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),l=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=r(48),B=r(49),g=function(A){return A&&A.__esModule?A:{default:A}}(B),u=r(13),m=t.LETTER_NUMBER_MODIFIER=50,p=1,w=2,h=3,C=4,Q=5,U=7,E=8,F=9,H=10,b=11,S=12,T=13,I=14,N=15,R=16,L=17,M=18,D=19,k=20,O=21,K=22,_=23,P=24,V=25,z=26,G=27,X=28,J=29,Y=30,W=31,q=32,Z=33,ee=34,Ae=35,te=36,ne=37,re=38,ae=39,ie=40,oe=41,se=42,de=43,le=t.classes={BK:p,CR:w,LF:h,CM:C,NL:Q,SG:6,WJ:U,ZW:E,GL:F,SP:H,ZWJ:b,B2:S,BA:T,BB:I,HY:N,CB:R,CL:L,CP:M,EX:D,IN:k,NS:O,OP:K,QU:_,IS:P,NU:V,PO:z,PR:G,SY:X,AI:J,AL:Y,CJ:W,EB:q,EM:Z,H2:ee,H3:Ae,HL:te,ID:ne,JL:re,JV:ae,JT:ie,RI:oe,SA:se,XX:de},ce=t.BREAK_MANDATORY="!",Be=t.BREAK_NOT_ALLOWED="\xD7",ge=t.BREAK_ALLOWED="\xF7",ue=t.UnicodeTrie=(0,c.createTrieFromBase64)(g.default),me=[Y,te],pe=[p,w,h,Q],we=[H,E],he=[G,z],fe=pe.concat(we),Ce=[re,ae,ie,ee,Ae],Qe=[N,T],Ue=t.codePointsToCharacterClasses=function(A){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"strict",r=[],a=[],s=[];return A.forEach(function(A,d){var l=ue.get(A);if(l>m?(s.push(!0),l-=m):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(A))return a.push(d),r.push(R);if(l===C||l===b){if(0===d)return a.push(d),r.push(Y);var c=r[d-1];return-1===fe.indexOf(c)?(a.push(a[d-1]),r.push(c)):(a.push(d),r.push(Y))}return a.push(d),l===W?r.push("strict"===t?O:ne):l===se?r.push(Y):l===J?r.push(Y):l===de?131072<=A&&196605>=A||196608<=A&&262141>=A?r.push(ne):r.push(Y):void r.push(l)}),[a,r,s]},Ee=function(A,t,r,a){var s=a[r];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var d=r;d<=a.length;){d++;var l=a[d];if(l===t)return!0;if(l!==H)break}if(s===H)for(var c=r;0<c;){c--;var B=a[c];if(Array.isArray(A)?-1!==A.indexOf(B):A===B)for(var g=r;g<=a.length;){g++;var u=a[g];if(u===t)return!0;if(u!==H)break}if(B!==H)break}return!1},Fe=function(A,t){for(var r=A;0<=r;){var a=t[r];if(a===H)r--;else return a}return 0},be=function(A,t,r,a,s){if(0===r[a])return Be;var d=a-1;if(Array.isArray(s)&&!0===s[d])return Be;var l=d-1,c=d+1,B=t[d],g=0<=l?t[l]:0,u=t[c];if(B===w&&u===h)return Be;if(-1!==pe.indexOf(B))return ce;if(-1!==pe.indexOf(u))return Be;if(-1!==we.indexOf(u))return Be;if(Fe(d,t)===E)return ge;if(ue.get(A[d])===b&&(u===ne||u===q||u===Z))return Be;if(B===U||u===U)return Be;if(B===F)return Be;if(-1===[H,T,N].indexOf(B)&&u===F)return Be;if(-1!==[L,M,D,P,X].indexOf(u))return Be;if(Fe(d,t)===K)return Be;if(Ee(_,K,d,t))return Be;if(Ee([L,M],O,d,t))return Be;if(Ee(S,S,d,t))return Be;if(B===H)return ge;if(B===_||u===_)return Be;if(u===R||B===R)return ge;if(-1!==[T,N,O].indexOf(u)||B===I)return Be;if(g===te&&-1!==Qe.indexOf(B))return Be;if(B===X&&u===te)return Be;if(u===k&&-1!==me.concat(k,D,V,ne,q,Z).indexOf(B))return Be;if(-1!==me.indexOf(u)&&B===V||-1!==me.indexOf(B)&&u===V)return Be;if(B===G&&-1!==[ne,q,Z].indexOf(u)||-1!==[ne,q,Z].indexOf(B)&&u===z)return Be;if(-1!==me.indexOf(B)&&-1!==he.indexOf(u)||-1!==he.indexOf(B)&&-1!==me.indexOf(u))return Be;if(-1!==[G,z].indexOf(B)&&(u===V||-1!==[K,N].indexOf(u)&&t[c+1]===V)||-1!==[K,N].indexOf(B)&&u===V||B===V&&-1!==[V,X,P].indexOf(u))return Be;if(-1!==[V,X,P,L,M].indexOf(u))for(var m=d,p;0<=m;){if(p=t[m],p===V)return Be;if(-1!==[X,P].indexOf(p))m--;else break}if(-1!==[G,z].indexOf(u))for(var C=-1===[L,M].indexOf(B)?d:l,Q;0<=C;){if(Q=t[C],Q===V)return Be;if(-1!==[X,P].indexOf(Q))C--;else break}if(re===B&&-1!==[re,ae,ee,Ae].indexOf(u)||-1!==[ae,ee].indexOf(B)&&-1!==[ae,ie].indexOf(u)||-1!==[ie,Ae].indexOf(B)&&u===ie)return Be;if(-1!==Ce.indexOf(B)&&-1!==[k,z].indexOf(u)||-1!==Ce.indexOf(u)&&B===G)return Be;if(-1!==me.indexOf(B)&&-1!==me.indexOf(u))return Be;if(B===P&&-1!==me.indexOf(u))return Be;if(-1!==me.concat(V).indexOf(B)&&u===K||-1!==me.concat(V).indexOf(u)&&B===M)return Be;if(B===oe&&u===oe){for(var J=r[d],Y=1;0<J&&(J--,t[J]===oe);)Y++;if(0!=Y%2)return Be}return B===q&&u===Z?Be:ge},ve=t.lineBreakAtIndex=function(A,t){if(0===t)return Be;if(t>=A.length)return ce;var r=Ue(A),a=l(r,2),s=a[0],d=a[1];return be(A,d,s,t)},ye=function(A,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Ue(A,t.lineBreak),a=l(r,3),s=a[0],d=a[1],c=a[2];("break-all"===t.wordBreak||"break-word"===t.wordBreak)&&(d=d.map(function(A){return-1===[V,Y,se].indexOf(A)?A:ne}));var B="keep-all"===t.wordBreak?c.map(function(t,r){return t&&19968<=A[r]&&40959>=A[r]}):null;return[s,d,B]},He=t.inlineBreakOpportunities=function(A,t){var r=(0,u.toCodePoints)(A),a=Be,s=ye(r,t),d=l(s,3),c=d[0],B=d[1],g=d[2];return r.forEach(function(A,t){a+=(0,u.fromCodePoint)(A)+(t>=r.length-1?ce:be(r,B,c,t+1,g))}),a},Se=function(){function A(t,r,a,d){s(this,A),this._codePoints=t,this.required=r===ce,this.start=a,this.end=d}return d(A,[{key:"slice",value:function(){return u.fromCodePoint.apply(void 0,a(this._codePoints.slice(this.start,this.end)))}}]),A}(),Te=t.LineBreaker=function(A,t){var r=(0,u.toCodePoints)(A),a=ye(r,t),s=l(a,3),d=s[0],c=s[1],B=s[2],g=r.length,m=0,p=0;return{next:function(){if(p>=g)return{done:!0};for(var A=Be;p<g&&(A=be(r,c,d,++p,B))===Be;);if(A!==Be||p===g){var t=new Se(r,A,m,p);return m=p,{value:t,done:!1}}return{done:!0}}}}},function(t,r,a){"";function s(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Trie=r.createTrieFromBase64=r.UTRIE2_INDEX_2_MASK=r.UTRIE2_INDEX_2_BLOCK_LENGTH=r.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=r.UTRIE2_INDEX_1_OFFSET=r.UTRIE2_UTF8_2B_INDEX_2_LENGTH=r.UTRIE2_UTF8_2B_INDEX_2_OFFSET=r.UTRIE2_INDEX_2_BMP_LENGTH=r.UTRIE2_LSCP_INDEX_2_LENGTH=r.UTRIE2_DATA_MASK=r.UTRIE2_DATA_BLOCK_LENGTH=r.UTRIE2_LSCP_INDEX_2_OFFSET=r.UTRIE2_SHIFT_1_2=r.UTRIE2_INDEX_SHIFT=r.UTRIE2_SHIFT_1=r.UTRIE2_SHIFT_2=void 0;var d=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),l=a(13),c=r.UTRIE2_SHIFT_2=5,B=r.UTRIE2_SHIFT_1=11,g=r.UTRIE2_INDEX_SHIFT=2,u=r.UTRIE2_SHIFT_1_2=B-c,m=r.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>c,p=r.UTRIE2_DATA_BLOCK_LENGTH=1<<c,w=r.UTRIE2_DATA_MASK=p-1,h=r.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>c,C=r.UTRIE2_INDEX_2_BMP_LENGTH=m+h,Q=r.UTRIE2_UTF8_2B_INDEX_2_OFFSET=C,U=r.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,E=r.UTRIE2_INDEX_1_OFFSET=Q+U,F=r.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>B,b=r.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<u,H=r.UTRIE2_INDEX_2_MASK=b-1,S=r.createTrieFromBase64=function(t){var r=(0,l.decode)(t),a=Array.isArray(r)?(0,l.polyUint32Array)(r):new Uint32Array(r),s=Array.isArray(r)?(0,l.polyUint16Array)(r):new Uint16Array(r),d=24,c=s.slice(d/2,a[4]/2),B=2===a[5]?s.slice((d+a[4])/2):a.slice(A((d+a[4])/4));return new T(a[0],a[1],a[2],a[3],c,B)},T=r.Trie=function(){function A(t,r,a,d,l,c){s(this,A),this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=d,this.index=l,this.data=c}return d(A,[{key:"get",value:function(A){var t;if(0<=A){if(55296>A||56319<A&&65535>=A)return t=this.index[A>>c],t=(t<<g)+(A&w),this.data[t];if(65535>=A)return t=this.index[m+(A-55296>>c)],t=(t<<g)+(A&w),this.data[t];if(A<this.highStart)return t=E-F+(A>>B),t=this.index[t],t+=A>>c&H,t=this.index[t],t=(t<<g)+(A&w),this.data[t];if(1114111>=A)return this.data[this.highValueIndex]}return this.errorValue}}]),A}()},function(A){"";A.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(5);t.default=function A(t,r,d){a(this,A),this.type=s.PATH.CIRCLE,this.x=t,this.y=r,this.radius=d,isNaN(t)&&console.error("Invalid x value given for Circle"),isNaN(r)&&console.error("Invalid y value given for Circle"),isNaN(d)&&console.error("Invalid radius value given for Circle")}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),c=r(2),B=r(25),g=r(52),u=r(9),m=function(A){return A&&A.__esModule?A:{default:A}}(u),p=r(4),w=r(12),h=function(){function A(t,r){a(this,A),this.target=t,this.options=r,t.render(r)}return l(A,[{key:"renderNode",value:function(A){A.isVisible()&&(this.renderNodeBackgroundAndBorders(A),this.renderNodeContent(A))}},{key:"renderNodeContent",value:function(A){var t=this,r=function(){if(A.childNodes.length&&A.childNodes.forEach(function(r){if(r instanceof m.default){var a=r.parent.style;t.target.renderTextNode(r.bounds,a.color,a.font,a.textDecoration,a.textShadow)}else t.target.drawShape(r,A.style.color)}),A.image){var r=t.options.imageStore.get(A.image);if(r){var a=(0,c.calculateContentBox)(A.bounds,A.style.padding,A.style.border),s="number"==typeof r.width&&0<r.width?r.width:a.width,d="number"==typeof r.height&&0<r.height?r.height:a.height;0<s&&0<d&&t.target.clip([(0,c.calculatePaddingBoxPath)(A.curvedBounds)],function(){t.target.drawImage(r,new c.Bounds(0,0,s,d),a)})}}},a=A.getClipPaths();a.length?this.target.clip(a,r):r()}},{key:"renderNodeBackgroundAndBorders",value:function(A){var t=this,r=!A.style.background.backgroundColor.isTransparent()||A.style.background.backgroundImage.length,a=A.style.border.some(function(A){return A.borderStyle!==w.BORDER_STYLE.NONE&&!A.borderColor.isTransparent()}),s=function(){var a=(0,p.calculateBackgroungPaintingArea)(A.curvedBounds,A.style.background.backgroundClip);r&&t.target.clip([a],function(){A.style.background.backgroundColor.isTransparent()||t.target.fill(A.style.background.backgroundColor),t.renderBackgroundImage(A)}),A.style.border.forEach(function(r,a){r.borderStyle===w.BORDER_STYLE.NONE||r.borderColor.isTransparent()||t.renderBorder(r,a,A.curvedBounds)})};if(r||a){var d=A.parent?A.parent.getClipPaths():[];d.length?this.target.clip(d,s):s()}}},{key:"renderBackgroundImage",value:function(A){var t=this;A.style.background.backgroundImage.slice(0).reverse().forEach(function(r){"url"===r.source.method&&r.source.args.length?t.renderBackgroundRepeat(A,r):/gradient/i.test(r.source.method)&&t.renderBackgroundGradient(A,r)})}},{key:"renderBackgroundRepeat",value:function(A,t){var r=this.options.imageStore.get(t.source.args[0]);if(r){var a=(0,p.calculateBackgroungPositioningArea)(A.style.background.backgroundOrigin,A.bounds,A.style.padding,A.style.border),d=(0,p.calculateBackgroundSize)(t,r,a),l=(0,p.calculateBackgroundPosition)(t.position,d,a),c=(0,p.calculateBackgroundRepeatPath)(t,l,d,a,A.bounds),B=s(a.left+l.x),g=s(a.top+l.y);this.target.renderRepeat(c,r,d,B,g)}}},{key:"renderBackgroundGradient",value:function(A,t){var r=(0,p.calculateBackgroungPositioningArea)(A.style.background.backgroundOrigin,A.bounds,A.style.padding,A.style.border),a=(0,p.calculateGradientBackgroundSize)(t,r),d=(0,p.calculateBackgroundPosition)(t.position,a,r),l=new c.Bounds(s(r.left+d.x),s(r.top+d.y),a.width,a.height),B=(0,g.parseGradient)(A,t.source,l);if(B)switch(B.type){case g.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(l,B);break;case g.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(l,B);}}},{key:"renderBorder",value:function(A,t,r){this.target.drawShape((0,c.parsePathForBorder)(r,t),A.borderColor)}},{key:"renderStack",value:function(A){var t=this;if(A.container.isVisible()){var r=A.getOpacity();r!==this._opacity&&(this.target.setOpacity(A.getOpacity()),this._opacity=r);var a=A.container.style.transform;null===a?this.renderStackContent(A):this.target.transform(A.container.bounds.left+a.transformOrigin[0].value,A.container.bounds.top+a.transformOrigin[1].value,a.transform,function(){return t.renderStackContent(A)})}}},{key:"renderStackContent",value:function(A){var t=Q(A),r=d(t,5),a=r[0],s=r[1],l=r[2],c=r[3],B=r[4],g=C(A),u=d(g,2),m=u[0],p=u[1];this.renderNodeBackgroundAndBorders(A.container),a.sort(U).forEach(this.renderStack,this),this.renderNodeContent(A.container),p.forEach(this.renderNode,this),c.forEach(this.renderStack,this),B.forEach(this.renderStack,this),m.forEach(this.renderNode,this),s.forEach(this.renderStack,this),l.sort(U).forEach(this.renderStack,this)}},{key:"render",value:function(A){var t=this;this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(A);var r=this.target.getTarget();return r.then(function(A){return t.options.logger.log("Render completed"),A})}}]),A}();t.default=h;var C=function(A){for(var t=[],r=[],a=A.children.length,s=0,d;s<a;s++)d=A.children[s],d.isInlineLevel()?t.push(d):r.push(d);return[t,r]},Q=function(A){for(var t=[],r=[],a=[],s=[],d=[],l=A.contexts.length,c=0,B;c<l;c++)B=A.contexts[c],B.container.isPositioned()||1>B.container.style.opacity||B.container.isTransformed()?0>B.container.style.zIndex.order?t.push(B):0<B.container.style.zIndex.order?a.push(B):r.push(B):B.container.isFloating()?s.push(B):d.push(B);return[t,r,a,s,d]},U=function(A,t){if(A.container.style.zIndex.order>t.container.style.zIndex.order)return 1;return A.container.style.zIndex.order<t.container.style.zIndex.order?-1:A.container.index>t.container.index?1:-1}},function(A,r,s){"";function d(A){return A&&A.__esModule?A:{default:A}}function c(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.transformWebkitRadialGradientArgs=r.parseGradient=r.RadialGradient=r.LinearGradient=r.RADIAL_GRADIENT_SHAPE=r.GRADIENT_TYPE=void 0;var g=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=s(6),m=d(u),p=s(53),w=s(0),h=d(w),C=s(1),Q=d(C),U=s(3),E=r.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},F=r.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},b={left:new Q.default("0%"),top:new Q.default("0%"),center:new Q.default("50%"),right:new Q.default("100%"),bottom:new Q.default("100%")},H=r.LinearGradient=function A(t,r){c(this,A),this.type=E.LINEAR_GRADIENT,this.colorStops=t,this.direction=r},S=r.RadialGradient=function A(t,r,a,s){c(this,A),this.type=E.RADIAL_GRADIENT,this.colorStops=t,this.shape=r,this.center=a,this.radius=s},T=r.parseGradient=function(A,t,r){var a=t.args,s=t.method,d=t.prefix;if("linear-gradient"===s)return N(a,r,!!d);return"gradient"===s&&"linear"===a[0]?N(["to bottom"].concat(P(a.slice(3))),r,!!d):"radial-gradient"===s?R(A,"-webkit-"===d?_(a):a,r):"gradient"===s&&"radial"===a[0]?R(A,P(_(a.slice(1))),r):void 0},I=function(A,t,r){for(var a=[],s=t;s<A.length;s++){var d=A[s],l=/(px)|%|( 0)$/i.test(d),c=d.lastIndexOf(" "),B=new h.default(l?d.substring(0,c):d),g=l?new Q.default(d.substring(c+1)):s===t?new Q.default("0%"):s===A.length-1?new Q.default("100%"):null;a.push({color:B,stop:g})}for(var u=a.map(function(A){var t=A.color,a=A.stop,s=0===r?0:a?a.getAbsoluteValue(r)/r:null;return{color:t,stop:s}}),m=u[0].stop,p=0;p<u.length;p++)if(null!==m){var w=u[p].stop;if(null===w){for(var C=p;null===u[C].stop;)C++;for(var U=C-p+1,E=u[C].stop,F=(E-m)/U;p<C;p++)m=u[p].stop=m+F}else m=w}return u},N=function(A,r,s){var d=(0,p.parseAngle)(A[0]),l=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i.test(A[0]),c=l||null!==d||/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i.test(A[0]),g=c?null===d?l?D(A[0],r):k(A[0],r):L(s?d-.5*t:d,r):L(Math.PI,r),u=c?1:0,m=B((0,U.distance)(a(g.x0)+a(g.x1),a(g.y0)+a(g.y1)),2*r.width,2*r.height);return new H(I(A,u,m),g)},R=function(A,t,r){var a=t[0].match(/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i),s=a&&("circle"===a[1]||a[3]!==void 0&&a[5]===void 0)?F.CIRCLE:F.ELLIPSE,d={},l={};a&&(a[3]!==void 0&&(d.x=(0,C.calculateLengthFromValueWithUnit)(A,a[3],a[4]).getAbsoluteValue(r.width)),a[5]!==void 0&&(d.y=(0,C.calculateLengthFromValueWithUnit)(A,a[5],a[6]).getAbsoluteValue(r.height)),a[7]?l.x=b[a[7].toLowerCase()]:a[8]!==void 0&&(l.x=(0,C.calculateLengthFromValueWithUnit)(A,a[8],a[9])),a[10]?l.y=b[a[10].toLowerCase()]:a[11]!==void 0&&(l.y=(0,C.calculateLengthFromValueWithUnit)(A,a[11],a[12])));var c={x:l.x===void 0?r.width/2:l.x.getAbsoluteValue(r.width),y:l.y===void 0?r.height/2:l.y.getAbsoluteValue(r.height)},g=K(a&&a[2]||"farthest-corner",s,c,d,r);return new S(I(t,a?1:0,B(g.x,g.y)),s,c,g)},L=function(A,t){var r=Math.cos,s=Math.sin,d=t.width,l=t.height,c=a(d*s(A))+a(l*r(A)),B=c/2,g=.5*d+s(A)*B,u=.5*l-r(A)*B;return{x0:g,x1:d-g,y0:u,y1:l-u}},M=function(A){return Math.acos(A.width/2/((0,U.distance)(A.width,A.height)/2))},D=function(A,r){switch(A){case"bottom":case"to top":return L(0,r);case"left":case"to right":return L(t/2,r);case"right":case"to left":return L(3*t/2,r);case"top right":case"right top":case"to bottom left":case"to left bottom":return L(t+M(r),r);case"top left":case"left top":case"to bottom right":case"to right bottom":return L(t-M(r),r);case"bottom left":case"left bottom":case"to top right":case"to right top":return L(M(r),r);case"bottom right":case"right bottom":case"to top left":case"to left top":return L(2*t-M(r),r);case"top":case"to bottom":default:return L(Math.PI,r);}},k=function(A,r){var a=A.split(" ").map(parseFloat),s=g(a,2),d=s[0],l=s[1],c=d/100*r.width/(l/100*r.height);return L(Math.atan(isNaN(c)?1:c)+t/2,r)},O=function(A,t,r,a){var s=[{x:0,y:0},{x:0,y:A.height},{x:A.width,y:0},{x:A.width,y:A.height}];return s.reduce(function(A,s){var l=(0,U.distance)(t-s.x,r-s.y);return(a?l<A.optimumDistance:l>A.optimumDistance)?{optimumCorner:s,optimumDistance:l}:A},{optimumDistance:a?1/0:-Infinity,optimumCorner:null}).optimumCorner},K=function(A,t,r,s,d){var g=r.x,u=r.y,m=0,p=0;switch(A){case"closest-side":t===F.CIRCLE?m=p=B(a(g),a(g-d.width),a(u),a(u-d.height)):t===F.ELLIPSE&&(m=B(a(g),a(g-d.width)),p=B(a(u),a(u-d.height)));break;case"closest-corner":if(t===F.CIRCLE)m=p=B((0,U.distance)(g,u),(0,U.distance)(g,u-d.height),(0,U.distance)(g-d.width,u),(0,U.distance)(g-d.width,u-d.height));else if(t===F.ELLIPSE){var w=B(a(u),a(u-d.height))/B(a(g),a(g-d.width)),c=O(d,g,u,!0);m=(0,U.distance)(c.x-g,(c.y-u)/w),p=w*m}break;case"farthest-side":t===F.CIRCLE?m=p=l(a(g),a(g-d.width),a(u),a(u-d.height)):t===F.ELLIPSE&&(m=l(a(g),a(g-d.width)),p=l(a(u),a(u-d.height)));break;case"farthest-corner":if(t===F.CIRCLE)m=p=l((0,U.distance)(g,u),(0,U.distance)(g,u-d.height),(0,U.distance)(g-d.width,u),(0,U.distance)(g-d.width,u-d.height));else if(t===F.ELLIPSE){var h=l(a(u),a(u-d.height))/l(a(g),a(g-d.width)),C=O(d,g,u,!1);m=(0,U.distance)(C.x-g,(C.y-u)/h),p=h*m}break;default:m=s.x||0,p=s.y===void 0?m:s.y;}return{x:m,y:p}},_=r.transformWebkitRadialGradientArgs=function(A){var t="",r="",a="",s="",d=0,l=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,c=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,B=A[d].match(l);B&&d++;var g=A[d].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);g&&(t=g[1]||"",a=g[2]||"","contain"===a?a="closest-side":"cover"===a&&(a="farthest-corner"),d++);var u=A[d].match(c);u&&d++;var m=A[d].match(l);m&&d++;var p=A[d].match(c);p&&d++;var w=m||B;w&&w[1]&&(s=w[1]+(/^\d+$/.test(w[1])?"px":""),w[2]&&(s+=" "+w[2]+(/^\d+$/.test(w[2])?"px":"")));var h=p||u;return h&&(r=h[0],!h[1]&&(r+="px")),!s||t||r||a||(r=s,s=""),s&&(s="at "+s),[[t,a,r,s].filter(function(A){return!!A}).join(" ")].concat(A.slice(d))},P=function(A){return A.map(function(A){return A.match(/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i)}).map(function(t,r){if(!t)return A[r];switch(t[1]){case"from":return t[4]+" 0%";case"to":return t[4]+" 100%";case"color-stop":return"%"===t[3]?t[4]+" "+t[2]:t[4]+" "+100*parseFloat(t[2])+"%";}})}},function(A,r){"";Object.defineProperty(r,"__esModule",{value:!0});r.parseAngle=function(A){var r=A.match(/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i);if(r){var a=parseFloat(r[1]);switch(r[2].toLowerCase()){case"deg":return t*a/180;case"grad":return t/200*a;case"rad":return a;case"turn":return 2*t*a;}}return null}},function(t,r,a){"";function s(A){return A&&A.__esModule?A:{default:A}}function d(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.cloneWindow=r.DocumentCloner=void 0;var l=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),B=a(2),g=a(26),u=a(55),m=s(u),p=a(3),w=a(4),h=a(15),C=s(h),Q=a(56),U="data-html2canvas-ignore",E=r.DocumentCloner=function(){function A(t,r,a,s,l){d(this,A),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=s,this.inlineImages=s,this.logger=a,this.options=r,this.renderer=l,this.resourceLoader=new m.default(r,a,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return c(A,[{key:"inlineAllImages",value:function(A){var t=this;if(this.inlineImages&&A){var r=A.style;Promise.all((0,w.parseBackgroundImage)(r.backgroundImage).map(function(A){return"url"===A.method?t.resourceLoader.inlineImage(A.args[0]).then(function(A){return A&&"string"==typeof A.src?"url(\""+A.src+"\")":"none"}).catch(function(A){t.logger.log("Unable to load image",A)}):Promise.resolve(""+A.prefix+A.method+"("+A.args.join(",")+")")})).then(function(A){1<A.length&&(r.backgroundColor=""),r.backgroundImage=A.join(",")}),A instanceof HTMLImageElement&&this.resourceLoader.inlineImage(A.src).then(function(t){if(t&&A instanceof HTMLImageElement&&A.parentNode){var r=A.parentNode,a=(0,p.copyCSSStyles)(A.style,t.cloneNode(!1));r.replaceChild(a,A)}}).catch(function(A){t.logger.log("Unable to load image",A)})}}},{key:"inlineFonts",value:function(A){var t=this;return Promise.all(Array.from(A.styleSheets).map(function(r){return r.href?fetch(r.href).then(function(A){return A.text()}).then(function(A){return b(A,r.href)}).catch(function(A){return t.logger.log("Unable to load stylesheet",A),[]}):F(r,A)})).then(function(A){return A.reduce(function(A,t){return A.concat(t)},[])}).then(function(A){return Promise.all(A.map(function(A){return fetch(A.formats[0].src).then(function(A){return A.blob()}).then(function(A){return new Promise(function(t,r){var a=new FileReader;a.onerror=r,a.onload=function(){var A=a.result;t(A)},a.readAsDataURL(A)})}).then(function(t){return A.fontFace.setProperty("src","url(\""+t+"\")"),"@font-face {"+A.fontFace.cssText+" "})}))}).then(function(r){var a=A.createElement("style");a.textContent=r.join("\n"),t.documentElement.appendChild(a)})}},{key:"createElementClone",value:function(A){var t=this;if(this.copyStyles&&A instanceof HTMLCanvasElement){var r=A.ownerDocument.createElement("img");try{return r.src=A.toDataURL(),r}catch(A){this.logger.log("Unable to clone canvas contents, canvas is tainted")}}if(A instanceof HTMLIFrameElement){var a=A.cloneNode(!1),s=K();a.setAttribute("data-html2canvas-internal-iframe-key",s);var d=(0,B.parseBounds)(A,0,0),l=d.width,c=d.height;return this.resourceLoader.cache[s]=_(A,this.options).then(function(A){return t.renderer(A,{async:t.options.async,allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new C.default,width:l,height:c,x:0,y:0,windowWidth:A.ownerDocument.defaultView.innerWidth,windowHeight:A.ownerDocument.defaultView.innerHeight,scrollX:A.ownerDocument.defaultView.pageXOffset,scrollY:A.ownerDocument.defaultView.pageYOffset},t.logger.child(s))}).then(function(t){return new Promise(function(r,s){var d=document.createElement("img");d.onload=function(){return r(t)},d.onerror=s,d.src=t.toDataURL(),a.parentNode&&a.parentNode.replaceChild((0,p.copyCSSStyles)(A.ownerDocument.defaultView.getComputedStyle(A),d),a)})}),a}if(A instanceof HTMLStyleElement&&A.sheet&&A.sheet.cssRules){var g=[].slice.call(A.sheet.cssRules,0).reduce(function(A,r){try{return r&&r.cssText?A+r.cssText:A}catch(a){return t.logger.log("Unable to access cssText property",r.name),A}},""),u=A.cloneNode(!1);return u.textContent=g,u}return A.cloneNode(!1)}},{key:"cloneNode",value:function(A){var t=A.nodeType===Node.TEXT_NODE?document.createTextNode(A.nodeValue):this.createElementClone(A),r=A.ownerDocument.defaultView,a=A instanceof r.HTMLElement?r.getComputedStyle(A):null,s=A instanceof r.HTMLElement?r.getComputedStyle(A,":before"):null,d=A instanceof r.HTMLElement?r.getComputedStyle(A,":after"):null;this.referenceElement===A&&t instanceof r.HTMLElement&&(this.clonedReferenceElement=t),t instanceof r.HTMLBodyElement&&D(t);for(var l=(0,Q.parseCounterReset)(a,this.pseudoContentData),c=(0,Q.resolvePseudoContent)(A,s,this.pseudoContentData),B=A.firstChild;B;B=B.nextSibling)B.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===B.nodeName||B.hasAttribute(U)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(B))||(!this.copyStyles||"STYLE"!==B.nodeName)&&t.appendChild(this.cloneNode(B));var g=(0,Q.resolvePseudoContent)(A,d,this.pseudoContentData);if((0,Q.popCounters)(l,this.pseudoContentData),A instanceof r.HTMLElement&&t instanceof r.HTMLElement)switch(s&&this.inlineAllImages(T(A,t,s,c,I)),d&&this.inlineAllImages(T(A,t,d,g,N)),a&&this.copyStyles&&!(A instanceof HTMLIFrameElement)&&(0,p.copyCSSStyles)(a,t),this.inlineAllImages(t),(0!==A.scrollTop||0!==A.scrollLeft)&&this.scrolledElements.push([t,A.scrollLeft,A.scrollTop]),A.nodeName){case"CANVAS":this.copyStyles||S(A,t);break;case"TEXTAREA":case"SELECT":t.value=A.value;}return t}}]),A}(),F=function(A,t){return(A.cssRules?Array.from(A.cssRules):[]).filter(function(A){return A.type===CSSRule.FONT_FACE_RULE}).map(function(A){for(var r=(0,w.parseBackgroundImage)(A.style.getPropertyValue("src")),s=[],d=0;d<r.length;d++)if("url"===r[d].method&&r[d+1]&&"format"===r[d+1].method){var l=t.createElement("a");l.href=r[d].args[0],t.body&&t.body.appendChild(l);var a={src:l.href,format:r[d+1].args[0]};s.push(a)}return{formats:s.filter(function(A){return /^woff/i.test(A.format)}),fontFace:A.style}}).filter(function(A){return A.formats.length})},b=function(A,t){var r=document.implementation.createHTMLDocument(""),a=document.createElement("base");a.href=t;var s=document.createElement("style");return s.textContent=A,r.head&&r.head.appendChild(a),r.body&&r.body.appendChild(s),s.sheet?F(s.sheet,r):[]},H=function(A,t,r){A.defaultView&&(t!==A.defaultView.pageXOffset||r!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(t,r)},S=function(A,t){try{if(t){t.width=A.width,t.height=A.height;var r=A.getContext("2d"),a=t.getContext("2d");r?a.putImageData(r.getImageData(0,0,A.width,A.height),0,0):a.drawImage(A,0,0)}}catch(A){}},T=function(A,t,r,a,s){if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var d=t.ownerDocument.createElement("html2canvaspseudoelement");if((0,p.copyCSSStyles)(r,d),a)for(var l=a.length,c=0,B;c<l;c++)switch(B=a[c],B.type){case Q.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var g=t.ownerDocument.createElement("img");g.src=(0,w.parseBackgroundImage)("url("+B.value+")")[0].args[0],g.style.opacity="1",d.appendChild(g);break;case Q.PSEUDO_CONTENT_ITEM_TYPE.TEXT:d.appendChild(t.ownerDocument.createTextNode(B.value));}return d.className=R+" "+L,t.className+=s===I?" "+R:" "+L,s===I?t.insertBefore(d,t.firstChild):t.appendChild(d),d}},I=":before",N=":after",R="___html2canvas___pseudoelement_before",L="___html2canvas___pseudoelement_after",M="{\n    content: \"\" !important;\n    display: none !important;\n}",D=function(A){k(A,"."+R+I+M+"\n         ."+L+N+M)},k=function(A,t){var r=A.ownerDocument.createElement("style");r.innerHTML=t,A.appendChild(r)},O=function(A){var t=l(A,3),r=t[0],a=t[1],s=t[2];r.scrollLeft=a,r.scrollTop=s},K=function(){return A(Date.now()+1e7*Math.random()).toString(16)},_=function(A,t){try{return Promise.resolve(A.contentWindow.document.documentElement)}catch(r){return t.proxy?(0,g.Proxy)(A.src,t).then(function(A){var t=A.match(/^data:text\/(.+);(base64)?,(.*)$/i);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()}).then(function(t){return P(A.ownerDocument,(0,B.parseBounds)(A,0,0)).then(function(A){var r=A.contentWindow,a=r.document;a.open(),a.write(t);var s=V(A).then(function(){return a.documentElement});return a.close(),s})}):Promise.reject()}},P=function(A,t){var r=A.createElement("iframe");return(r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(U,"true"),!A.body)?Promise.reject("Body element not found in Document that is getting rendered"):(A.body.appendChild(r),Promise.resolve(r))},V=function(A){var t=A.contentWindow,r=t.document;return new Promise(function(a){t.onload=A.onload=r.onreadystatechange=function(){var t=setInterval(function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(t),a(A))},50)}})},z=r.cloneWindow=function(A,t,r,a,s,d){var l=new E(r,a,s,!1,d),c=A.defaultView.pageXOffset,B=A.defaultView.pageYOffset;return P(A,t).then(function(s){var d=s.contentWindow,g=d.document,u=V(s).then(function(){l.scrolledElements.forEach(O),d.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(d.scrollY!==t.top||d.scrollX!==t.left)&&(g.documentElement.style.top=-t.top+"px",g.documentElement.style.left=-t.left+"px",g.documentElement.style.position="absolute");var c=Promise.resolve([s,l.clonedReferenceElement,l.resourceLoader]),B=a.onclone;return l.clonedReferenceElement instanceof d.HTMLElement||l.clonedReferenceElement instanceof A.defaultView.HTMLElement||l.clonedReferenceElement instanceof HTMLElement?"function"==typeof B?Promise.resolve().then(function(){return B(g)}).then(function(){return c}):c:Promise.reject("Error finding the "+r.nodeName+" in the cloned document")});return g.open(),g.write(G(document.doctype)+"<html></html>"),H(r.ownerDocument,c,B),g.replaceChild(g.adoptNode(l.documentElement),g.documentElement),g.close(),u})},G=function(A){var t="";return A&&(t+="<!DOCTYPE ",A.name&&(t+=A.name),A.internalSubset&&(t+=A.internalSubset),A.publicId&&(t+="\""+A.publicId+"\""),A.systemId&&(t+="\""+A.systemId+"\""),t+=">"),t}},function(A,t,r){"";function a(A,t){if(!(A instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStore=void 0;var s=function(){function A(A,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(A,a.key,a)}return function(t,r,a){return r&&A(t.prototype,r),a&&A(t,a),t}}(),d=r(10),l=function(A){return A&&A.__esModule?A:{default:A}}(d),c=r(26),B=function(){function A(t,r,s){a(this,A),this.options=t,this._window=s,this.origin=this.getOrigin(s.location.href),this.cache={},this.logger=r,this._index=0}return s(A,[{key:"loadImage",value:function(A){var t=this;if(this.hasResourceInCache(A))return A;if(p(A))return this.cache[A]=h(A,this.options.imageTimeout||0),A;if(!w(A)||l.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||u(A)||this.isSameOrigin(A))return this.addImage(A,A,!1);if(!this.isSameOrigin(A)){if("string"==typeof this.options.proxy)return this.cache[A]=(0,c.Proxy)(A,this.options).then(function(A){return h(A,t.options.imageTimeout||0)}),A;if(!0===this.options.useCORS&&l.default.SUPPORT_CORS_IMAGES)return this.addImage(A,A,!0)}}}},{key:"inlineImage",value:function(A){var t=this;return u(A)?h(A,this.options.imageTimeout||0):this.hasResourceInCache(A)?this.cache[A]:this.isSameOrigin(A)||"string"!=typeof this.options.proxy?this.xhrImage(A):this.cache[A]=(0,c.Proxy)(A,this.options).then(function(A){return h(A,t.options.imageTimeout||0)})}},{key:"xhrImage",value:function(A){var t=this;return this.cache[A]=new Promise(function(r,a){var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(4===s.readyState)if(200!==s.status)a("Failed to fetch image "+A.substring(0,256)+" with status code "+s.status);else{var t=new FileReader;t.addEventListener("load",function(){var A=t.result;r(A)},!1),t.addEventListener("error",function(A){return a(A)},!1),t.readAsDataURL(s.response)}},s.responseType="blob",t.options.imageTimeout){var d=t.options.imageTimeout;s.timeout=d,s.ontimeout=function(){return a("Timed out ("+d+"ms) fetching "+A.substring(0,256))}}s.open("GET",A,!0),s.send()}).then(function(A){return h(A,t.options.imageTimeout||0)}),this.cache[A]}},{key:"loadCanvas",value:function(A){var t=this._index++ +"";return this.cache[t]=Promise.resolve(A),t}},{key:"hasResourceInCache",value:function(A){return"undefined"!=typeof this.cache[A]}},{key:"addImage",value:function(A,t,r){var a=this;this.logger.log("Added image "+A.substring(0,256));var s=function(A){return new Promise(function(s,d){var l=new Image;if(l.onload=function(){return s(l)},(!A||r)&&(l.crossOrigin="anonymous"),l.onerror=d,l.src=t,!0===l.complete&&setTimeout(function(){s(l)},500),a.options.imageTimeout){var c=a.options.imageTimeout;setTimeout(function(){return d("Timed out ("+c+"ms) fetching "+t.substring(0,256))},c)}})};return this.cache[A]=m(t)&&!w(t)?l.default.SUPPORT_BASE64_DRAWING(t).then(s):s(!0),A}},{key:"isSameOrigin",value:function(A){return this.getOrigin(A)===this.origin}},{key:"getOrigin",value:function(A){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=A,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var A=this,t=Object.keys(this.cache),r=t.map(function(t){return A.cache[t].catch(function(t){return A.logger.log("Unable to load image",t),null})});return Promise.all(r).then(function(r){return A.logger.log("Finished loading "+r.length+" images",r),new g(t,r)})}}]),A}();t.default=B;var g=t.ResourceStore=function(){function A(t,r){a(this,A),this._keys=t,this._resources=r}return s(A,[{key:"get",value:function(A){var t=this._keys.indexOf(A);return-1===t?null:this._resources[t]}}]),A}(),u=function(A){return /^data:image\/.*/i.test(A)},m=function(A){return /^data:image\/.*;base64,/i.test(A)},p=function(A){return"blob"===A.substr(0,4)},w=function(A){return"svg"===A.substr(-3).toLowerCase()||/^data:image\/svg\+xml/i.test(A)},h=function(A,t){return new Promise(function(r,a){var s=new Image;s.onload=function(){return r(s)},s.onerror=a,s.src=A,!0===s.complete&&setTimeout(function(){r(s)},500),t&&setTimeout(function(){return a("Timed out ("+t+"ms) loading image")},t)})}},function(A,t,r){"";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContent=t.resolvePseudoContent=t.popCounters=t.parseCounterReset=t.TOKEN_TYPE=t.PSEUDO_CONTENT_ITEM_TYPE=void 0;var a=function(){function A(A,t){var r=[],a=!0,s=!1,d=void 0;try{for(var l=A[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(r.push(c.value),!(t&&r.length===t));a=!0);}catch(A){s=!0,d=A}finally{try{!a&&l["return"]&&l["return"]()}finally{if(s)throw d}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return A(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(14),d=r(8),l=t.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},B=t.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},g=t.parseCounterReset=function(A,t){if(!A||!A.counterReset||"none"===A.counterReset)return[];for(var r=[],s=A.counterReset.split(/\s*,\s*/),d=s.length,l=0;l<d;l++){var c=s[l].split(/\s+/),B=a(c,2),g=B[0],u=B[1];r.push(g);var m=t.counters[g];m||(m=t.counters[g]=[]),m.push(parseInt(u||0,10))}return r},u=t.popCounters=function(A,t){for(var r=A.length,a=0;a<r;a++)t.counters[A[a]].pop()},m=t.resolvePseudoContent=function(A,t,r){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var d=p(t.content),c=d.length,g=[],u="",m=t.counterIncrement;if(m&&"none"!==m){var w=m.split(/\s+/),Q=a(w,2),U=Q[0],E=Q[1],F=r.counters[U];F&&(F[F.length-1]+=void 0===E?1:parseInt(E,10))}for(var b=0,H;b<c;b++)switch(H=d[b],H.type){case B.STRING:u+=H.value||"";break;case B.ATTRIBUTE:A instanceof HTMLElement&&H.value&&(u+=A.getAttribute(H.value)||"");break;case B.COUNTER:var S=r.counters[H.name||""];S&&(u+=C([S[S.length-1]],"",H.format));break;case B.COUNTERS:var T=r.counters[H.name||""];T&&(u+=C(T,H.glue,H.format));break;case B.OPENQUOTE:u+=h(t,!0,r.quoteDepth),r.quoteDepth++;break;case B.CLOSEQUOTE:r.quoteDepth--,u+=h(t,!1,r.quoteDepth);break;case B.URL:u&&(g.push({type:l.TEXT,value:u}),u=""),g.push({type:l.IMAGE,value:H.value||""});}return u&&g.push({type:l.TEXT,value:u}),g},p=t.parseContent=function(A,t){if(t&&t[A])return t[A];for(var r=[],a=A.length,s=!1,d=!1,l=!1,g="",u="",m=[],p=0,h;p<a;p++){switch(h=A.charAt(p),h){case"'":case"\"":d?g+=h:(s=!s,!l&&!s&&(r.push({type:B.STRING,value:g}),g=""));break;case"\\":d?(g+=h,d=!1):d=!0;break;case"(":s?g+=h:(l=!0,u=g,g="",m=[]);break;case")":if(s)g+=h;else if(l){switch(g&&m.push(g),u){case"attr":0<m.length&&r.push({type:B.ATTRIBUTE,value:m[0]});break;case"counter":if(0<m.length){var C={type:B.COUNTER,name:m[0]};1<m.length&&(C.format=m[1]),r.push(C)}break;case"counters":if(0<m.length){var Q={type:B.COUNTERS,name:m[0]};1<m.length&&(Q.glue=m[1]),2<m.length&&(Q.format=m[2]),r.push(Q)}break;case"url":0<m.length&&r.push({type:B.URL,value:m[0]});}l=!1,g=""}break;case",":s?g+=h:l&&(m.push(g),g="");break;case" ":case"\t":s?g+=h:g&&(w(r,g),g="");break;default:g+=h;}"\\"!==h&&(d=!1)}return g&&w(r,g),t&&(t[A]=r),r},w=function(A,t){"open-quote"===t?A.push({type:B.OPENQUOTE}):"close-quote"===t?A.push({type:B.CLOSEQUOTE}):void 0},h=function(A,t,r){var a=A.quotes?A.quotes.split(/\s+/):["'\"'","'\"'"],s=2*r;return s>=a.length&&(s=a.length-2),t||++s,a[s].replace(/^["']|["']$/g,"")},C=function(A,t,r){for(var a=A.length,l="",c=0;c<a;c++)0<c&&(l+=t||""),l+=(0,s.createCounterText)(A[c],(0,d.parseListStyleType)(r||"decimal"),!1);return l}}])});var webrtcdevcon=function(){var et=Math.pow,At=Math.log,tt=Math.ceil,nt=Math.floor,rt=String.fromCharCode,at=Math.round,it=Math.sqrt,ot=Math.min;function A(A,r){return A?"<video src=\""+A+"\" autoplay></vide>":"<img src=\""+r+"\">"}function t(A="",r,a=document.createElement("template"),t="length"){return a.innerHTML=A.trim(),r=[...a.content.childNodes],1<r[t]?r:r[0]||""}function r(A){if(0==A)return"0 Bytes";var t=parseInt(nt(At(A)/At(1024)));return at(A/et(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}function a(A){var t=document.createElement("script");t.src=A,t.async=!0,document.documentElement.appendChild(t)}async function s(){let A=null;try{if(A=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),0<A.getVideoTracks().length)return webrtcdev.log("--------------------------------- Video Permission obtained "),void(Ht=!0)}catch(A){webrtcdev.error(A.name+": "+A.message)}Ht=!1}async function d(){let A=null;try{if(A=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),0<A.getAudioTracks().length)return webrtcdev.log("--------------------------------- Audio Permission obtained "),void(yt=!0)}catch(A){webrtcdev.error(A.name+": "+A.message)}yt=!1}function l(A){try{return document.getElementById(A)}catch(A){return webrtcdev.error(A),""}}function c(A){try{if(document.getElementsByName(A))return document.getElementsByName(A)[0]}catch(A){return webrtcdev.error(A),""}}function B(A){if(!A)return void webrtcdev.error("show elem undefined");try{webrtcdev.log(" [init] show elem",A," , type ",typeof A," , nodetype ",A.nodeType),"object"==typeof A&&A.nodeType!==void 0?(A.removeAttribute("hidden"),A.setAttribute("style","display:block!important")):l(A)?(A=l(A),A.removeAttribute("hidden"),A.setAttribute("style","display:block")):c(A)?(A=c(A),A[0].removeAttribute("hidden"),A[0].setAttribute("style","display:block")):webrtcdev.warn("elem not found ",A)}catch(A){webrtcdev.error("showeleem",A)}}function g(A){try{"object"==typeof A&&A.nodeType!==void 0?(A.setAttribute("hidden",!0),A.setAttribute("style","display:none!important")):l(A)&&(l(A).setAttribute("hidden",!0),l(A).setAttribute("style","display:none"))}catch(t){webrtcdev.error(A,t)}}function u(A){return!!l(A)}function m(A){let t=$t;switch(webrtcdev.log("[webcallviewmanager] - updateWebCallView with ",A.userid," peerinfo",A," peerinfo role ",A.role," | myrole :",t),t){case"inspector":for(var r=0,a=0;a<Nt.length;a++)webrtcdev.log(" [webcallviewmanager] Remote Video index array ",a," || ",Nt[a],document.getElementsByName(Nt[a]),document.getElementsByName(Nt[a]).src),Nt[a].src&&r++;let s=document.createElement("video");Nt[r]=s,document.getElementById(nn.videoContainer).appendChild(s);let d=Nt[r];for(let r in webrtcdev.log(" [webcallviewmanager] updateWebCallView role-inspector , attaching stream",d,A.stream),dA(d,A.stream).then(()=>{d.hidden&&(removid.hidden=!1),d.id=A.videoContainer,d.className=nn.videoClass,nn.userDisplay&&A.name&&te(d,A),nn.userMetaDisplay&&A.userid&&ne(d,A);var t=document.getElementsByName(Tt)[0];for(a in t&&(t.hidden=!0),nn.videoarr){var r=document.getElementsByName(nn.videoarr[a])[0];r&&r.setAttribute("style","display:none")}}),document.getElementsByClassName("timeBox"))document.getElementsByClassName("timeBox")[r].hidden=!0;break;case"participant":case"host":case"guest":webrtcdev.info("[webcallviewdevmanager] updateWebCallView - role - ",A.role," peerinfo type - ",A.type," peerinfo Vid - ",A.vid),"local"==A.type&&-1<A.vid.indexOf("videolocal")?p(A):"remote"==A.type&&-1<A.vid.indexOf("videoremote")?h(A).then(()=>{qn("join",Ct,dt)}):webrtcdev.error("[webcallviewdevmanager] updateWebCallView-  PeerInfo vid did not match either case ",A.vid);break;default:webrtcdev.error("[webcallviewdevmanager] updateWebCallView- No role found to update webcall view ",t);}}function p(A){if(Tt&&document.getElementsByName(Tt)[0]){let t=document.getElementsByName(Tt)[0];dA(t,A.stream).then(()=>{webrtcdev.log("[webcallviewdevmanager] updateWaitingWebCallView - Done attaching local stream to element",t),t.muted=!0,t.className=tn.videoClass,tn.userDisplay&&A.name&&te(t,A),tn.userMetaDisplay&&A.userid&&ne(t,A)})}else alert(" Please Add a video container in config for single video"),webrtcdev.error("[webcallviewdevmanager] updateWaitingWebCallView - No local video container in localobj -> ",tn)}function w(A){return webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video reattachMediaStream / attachMediaStream"),new Promise(function(t){if(!Ht&&!yt)t();else if(Tt&&It){let t=document.getElementsByName(Tt)[0],r=document.getElementsByName(It)[0];if(0>=r.played.length){let a;t.srcObject?0<t.played.length?(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is playing, just reattach stream to add in session"),a=lA(r,t)):(webrtcdev.log("[webcallviewdevmanager] updateLocalWebCallView - local video is not playing, use webcallpeers for stream to add in session"),a=dA(r,A.stream)):a=Promise.resolve("done"),a.then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateLocalWebCallView - Done attaching local stream to local element"),tn.userDisplay&&A.name&&te(r,A),tn.userMetaDisplay&&A.userid&&ne(r,A),r.id=A.videoContainer,r.className=nn.videoClass,r.muted=!0,attachControlButtons(r,A)})}else webrtcdev.info("[webcallviewdevmanager] updateLocalWebCallView - not updating self video as it is already playing ",r.played.length)}else webrtcdev.error("[webcallviewdevmanager] updateLocalWebCallView - Local video container not defined "),t()})}function h(A){return webrtcdev.log("[webcallviewdevmanager] incomingVideo ",bt),webrtcdev.log("[webcallviewdevmanager] remoteVideos ",Nt),webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView - remote video attachMediaStream"),new Promise(function(t){if(!bt&&!Ft)webrtcdev.log("[webcallviewdevmanager] updateRemoteWebCalView - session without incoming video ",bt),t();else if(0>=Nt.length)webrtcdev.error("[webcallviewdevmanager] updateRemoteWebCalView - remote Video containers not defined  , lwngth - ",Nt.length,Nt),t();else{let r=U(A,Nt);Q(A,Nt,r).then(A=>{webrtcdev.log("[ webcallviewdevmanager ] updateRemoteWebCalView video -",A),dA(A,A.stream)}).then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateRemoteWebCalView - Done attaching remote stream to remote element"),B(Nt[r].video),nn.userDisplay&&A.name&&te(Nt[r].video,A),nn.userMetaDisplay&&A.userid&&ne(Nt[r].video,peerInfo),Nt[r].video.id=A.videoContainer,Nt[r].video.className=nn.videoClass,attachControlButtons(Nt[r].video,A),t()})}})}function C(A){if(webrtcdev.warn("[webcallviewmanager] destroyWebCallView peerInfo",A),A.videoContainer&&document.getElementById(A.videoContainer)){let t=document.getElementById(A.videoContainer);for(v in t||webrtcdev.warn("[webcallviewmanager] destroywebcallview - video not found for the peer who left"),cA(t),Nt)if(Nt[v].userid==A.userid){Nt[v]=Nt[v].video.getAttribute("name");break}webrtcdev.warn("[webcallviewmanager] destroywebcallview - remoteVideos after destroy webcallview and dettach stream ",Nt),t.setAttribute("hidden",!0)}if(kt.active&&"single"!=kt.props.fileList){let t=document.getElementById("fileListingRow");if(2<=t.childElementCount){webrtcdev.warn("[webcallviewmanager] destroywebcallview - more than 1 file listing rows present, remove the ones for peers that are no longer in session  ");let r=t.childNodes;for(x in r){if(!r[x].id)break;let a=r[x].id.split("widget-filelisting-box");if(A.userid==a[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",a[1]," need to be removed  "),t.removeChild(r[x]);break}}}let r=l("fileSharingRow");if(2<=r.childElementCount){webrtcdev.warn("[webcallviewmanager] destroyWebCallView - more than 1 file listing rows present , remove the ones for peers that are no longer in session  ");let t=r.childNodes;for(x in t){if(!t[x].id)break;let a=t[x].id.split("widget-filesharing-box");if(A.userid==a[1]){webrtcdev.warn("[webcallviewmanager] destroywebcallview - File list boxes belonging to userid ",a[1]," need to be removed  "),r.removeChild(t[x]);break}}}}let t="";for(i in lt)"remote"==lt[i].type&&(t+=lt[i].userid);webrtcdev.log("Active Remote Peers  ",t)}function Q(A,t,r){try{if("unlimited"==nn.maxAllowed){webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remote video is unlimited , creating video for remoteVideos array ");let a=document.createElement("video");t[r]={userid:A.userid,stream:A.stream,video:a},document.getElementById(nn.dynamicVideos.videoContainer).appendChild(a)}else{if(webrtcdev.log("[webcallviewmanager] updateRemoteVideos - Max-capacity is limited to size -",nn.maxAllowed),webrtcdev.log("[webcallviewmanager] updateRemoteVideos - remoteVideos -",t),r>t.length)return void webrtcdev.error("[webcallviewmanager] current index is larger than remote video length ");let a=document.getElementsByName(t[r]);webrtcdev.log("[webcallviewmanager] updateRemoteVideos - update remote video : ",a),a&&0<=a.length?a[0]&&(t[r]={userid:A.userid,stream:A.stream,video:a[0]},webrtcdev.log("[webcallviewmanager] updateRemoteVideos - RemoteVideos["+r+"] updated ",t[r],A.stream)):t[r].userid==A.userid&&""==t[r].stream?(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder already exists with '' stream just overwrite the stream "),t[r].stream=A.stream):(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder doesnt exist just overwrite the last remote with the video "),t[t.length-1]={userid:A.userid,stream:A.stream,video:a[0]},webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - RemoteVideos["+t.length-1+"] updated ",t[r]))}webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remoteVideos after updating ",t[r])}catch(A){webrtcdev.error("[webcallviewmanager ] updateRemoteVideos - ",A)}finally{return Promise.resolve(t[r])}}function U(A,t){let r=0;for(r in t)if(t[r].userid==A.userid)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video dom exist already for the userid ",A.userid," checking for srcobject on ",t[r]),t[r].video.id==A.videoContainer?t[r].video.srcObject&&t[r].video.srcObject.active?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a playing video ",t[r]),r):""==t[r].stream?(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video but without active stream",t[r]),r):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Peer already has a video reuse that ",t[r]),r):(webrtcdev.info("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video doesnt have an id yet "),r);for(r in r=0,t)if(!t[r].stream&&!t[r].video){let A=document.getElementsByName(t[r])[0];if(!A)webrtcdev.error("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video ",t[r]," is undefined , check if named video containers actually exist , skip to next ");else{if(!A.srcObject)return webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - Remote Video is not appended by json  ",A," thus can be empty"),r;webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex -  Remote video is played or srcObject exists ",A,"cannot be empty , continue to next iteration ")}}else webrtcdev.log("[webcallviewdevmanager] findEmptyRemoteVideoIndex - This Remote video space ",t[r],"is waiting for a diff peer video , skip to next ");return webrtcdev.log("[webcallviewmanager] findEmptyRemoteVideoIndex - Last element is empty video ",t[r],"index ",r),r}function E(A){const t=document.createElement("span");t.setAttribute("data-provides","fileinput"),t.className=A.button.class,t.innerHTML=A.button.html,t.onclick=function(){const A=new FileSelector;A.selectSingleFile(function(A){CA(A)})};const r=document.createElement("li");r.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(r)}function F(A){let t=document.getElementById(A.button.id);t.onclick=function(){const A=new FileSelector;A.selectSingleFile(function(A){CA(A)})}}function b(A,t,r,a,s,d,l,c){try{if(!t)return void webrtcdev.error(" [filehsraingJs] Progress helpler cannot be added for one peer as its absent");if(!t.fileList.container||!document.getElementById(t.fileList.container))return void webrtcdev.error("[filehsraingJs dommodifier] Progress helpler cannot be added , missing fileListcontainer ");webrtcdev.log("[filehsraingJs dommodifier] progress helper attributes  attributes : uuid -",A,"peerinfo - ",t,"filename - ",r,"file size - ",a,"progress helper class - ",d,"file to - ",c,"file from - ",l);let B=A+"_"+l+"_"+c;webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - progressid ",B);let g=document.createElement("ul");if(g.id=B,g.title=r+" size - "+s.size+" type - "+s.type+" last modified on -"+s.lastModifiedDate,g.setAttribute("type","progressbar"),g.setAttribute("class","row"),Rt){const A=document.createElement("li");A.innerHTML=r+"size - "+s.size+" type - "+s.type+" last modified on -"+s.lastModifiedDate+" from :"+l+" --> to :"+c+"</br>",g.appendChild(A)}let u=document.createElement("li");u.setAttribute("class",d),u.innerHTML="<label>0%</label><progress></progress>",g.appendChild(u),Nn[B]={div:u,progress:u.querySelector("progress"),label:u.querySelector("label")},Nn[B].progress.max=a;let m=document.createElement("li");m.id="stopuploadButton"+B,m.innerHTML="<i class=\"fa fa-trash-o\"></i>",m.onclick=function(A){webrtcdev.log("[filehsraingJs dommodifier]  addProgressHelper - remove progressid ",B," dom : ",document.getElementById(B)),M(B),QA(B,r,s,c,l),A.target.remove(),D(B),ut==r?ut==r&&(ut=""):(st.send({type:"shareFileStopUpload",_element:B,_filename:r}),ut=r)},g.appendChild(m),parentDom=document.getElementById(t.fileList.container),parentDom.insertBefore(g,parentDom.firstChild)}catch(A){webrtcdev.error("[filehsraingJs dommodifier]  problem in addProgressHelper  ",A)}}function H(A,t){if(-1!=A.position){const r=+A.position.toFixed(2).split(".")[1]||100;t.innerHTML=r+"%"}}function S(A,r,a,s,d){let l;const c=r.fileShare.container,B=r.fileList.container;try{if(!kt.active)return;webrtcdev.log("[filesharing dommodifierjs] displayList - uuid: ",A," peerinfo :",r,"file url : ",a," file name : ",s," file type :",d);let t=null;"sessionRecording"==d&&(s=s.videoname+"_"+s.audioname,t=s);let c=document.querySelectorAll("ul[id^=\""+A+"\"]");if(0<c.length)for(x in c)webrtcdev.log("[filesharing dommodifier js] displayList remove progress bar index - ",x," file dom - ",c[x]),"object"==typeof c[x]&&("progressbar"==c[x].type||-1<c[x].indexOf("progressbar"))?r.fileList.container&&document.getElementById(r.fileList.container)?(l=document.getElementById(r.fileList.container),webrtcdev.log("[filehsraingJs dommodifier]  displayList, set up parent dom ",l),l.removeChild(c[x])):(webrtcdev.log("[filesharing dommodifier js] displayList, Not sure what does this do ",c[x]),l=c[x].parentNode.parentNode):webrtcdev.warn("[filesharing dommodifier js] displayList - cannot remove since , elem is not of type progressbar  ",c[x]);else l=document.getElementById(B)||document.body,webrtcdev.warn("[ filesharing dommodifier js] displayList , progress bar area doesnt exist, set parent dom to ",B,document.getElementById(B)," or to document body")}catch(A){webrtcdev.error("[filesharing dommodifier] displaylist exception ",A)}webrtcdev.log("[filesharing dommodifier] displayList set up parent dom  ",l);let u=document.createElement("ul");u.id=s+A,u.type=r.type,u.innerHTML="",u.className="row";let m=document.createElement("li");m.innerHTML=s,m.title=d+" shared by "+r.name,m.className="filenameClass",m.id="name"+s+A;let p=document.createElement("li");if(p.id="downloadButton"+s+A,p.title="Download",!kt.filelist.downloadicon)p.innerHTML="<i class=\"fa fa-download\"></i>";else if(t(kt.filelist.downloadicon)instanceof HTMLElement)p.innerHTML=kt.filelist.downloadicon;else{let A=document.createElement("img");A.src=kt.filelist.downloadicon,p.appendChild(A)}p.onclick=function(){webrtcdev.log("[filesharing dommodifier js] download  filename ",s),k(A,c,a,s,d)};let w=document.createElement("li");if(w.id="saveButton"+s+A,w.title="Save",w.setAttribute("data-toggle","modal"),w.setAttribute("data-target","#saveModal"),kt.filelist.saveicon){let A=document.createElement("img");A.src=kt.filelist.saveicon,w.appendChild(A)}else w.innerHTML="<i class=\"fa fa-floppy-o\"></i>";w.onclick=function(){W(d)};let h=document.createElement("li");if(h.id="showButton"+s+A,h.title="Show",!kt.filelist.showicon)h.innerHTML="<i class=\"fa fa-eye-slash\"></i>";else if(t(kt.filelist.showicon)instanceof HTMLElement)h.innerHTML=kt.filelist.showicon;else{let A=document.createElement("img");A.src=kt.filelist.showicon,h.appendChild(A)}let C=0;Bt=s,ct="",h.onclick=function(){C++,R(A,c,a,s,d,h,C)};let Q=document.createElement("li");Q.id="removeButton"+s+A,Q.title="Remove",kt.filelist.trashicon?t(kt.filelist.trashicon)instanceof HTMLElement?Q.innerHTML=kt.filelist.trashicon:Q.appendChild(kt.filelist.trashicon):Q.innerHTML="<i class=\"fa fa-trash-o\"></i>",Q.onclick=function(){if(gt!=s){const t=s+A;M(c,s),st.send({type:"shareFileRemove",_element:t,_filename:s}),D(t),gt=s,webrtcdev.log("[filesharing dommodifier js] filedom to be hidden : ",u),u.setAttribute("style","display:none!important")}else gt==s&&(gt="")},r.userid!=dt&&g(Q),"inspector"==$t&&((!0).hidden=!0,h.hidden=!0,w.hidden=!0,u.appendChild(m),Q.hidden=!0),u.appendChild(m),u.appendChild(p),u.appendChild(h),u.appendChild(w),!0&&u.appendChild(Q),webrtcdev.log("[filesharing dom modifier JS ] filedom ",u," | parentdom ",l),l?l.appendChild(u):webrtcdev.error("[filesharing dom modifier JS ] filedom's parent dom not found ")}function T(A,t,r){webrtcdev.log(" [filehsaring domodifier]  - getFileElementDisplayByType ","file type :",A,"file url : ",t,", file name : ",r);let a;if(-1<A.indexOf("msword")||-1<A.indexOf("officedocument")){let A=document.createElement("div");A.className="alert alert-warning",A.innerHTML="Microsoft and Libra word file cannot be opened in browser. Click bottom DOWNLOAD in UF box . File shows up below the UF box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",a=A}else if(-1<A.indexOf("image")){let A=document.createElement("img");A.src=t,A.title=r,A.id="display"+r,a=A}else if("sessionRecording"==A){let A=A.videoname+"_"+A.audioname;const r=document.createElement("div");r.setAttribute("background-color","black"),r.id="display"+A,r.title=A;let s=document.createElement("video");s.src=t.videofileurl,s.setAttribute("type","audvideo/webm"),s.setAttribute("name","videofile"),s.controls="controls",s.title=A.videoname+".webm";let d=document.createElement("audio");d.src=t.audiofileurl,d.setAttribute("type","audio/wav"),d.controls="controls",d.title=A.videoname+".wav",r.appendChild(s),r.appendChild(d),a=r,s.play(),d.play()}else if(-1<A.indexOf("videoScreenRecording")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoScreenRecording  fileurl ",t);let A=document.createElement("video");A.src=t,A.setAttribute("controls","controls"),A.style.width="100%",A.title=r,A.id="display"+r,a=A}else if(-1<A.indexOf("video")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoRecording ",t);let A=document.createElement("video");A.src=t,A.setAttribute("controls","controls"),A.style.width="100%",A.title=r,A.id="display"+r,a=A}else if(-1<A.indexOf("audio")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - audio ",t);let A=document.createElement("audio");A.src=t,A.controls="controls",A.title=r,A.id="display"+r,a=A}else{webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - iframe ",t);let A=document.createElement("iframe");A.style.width="100%",A.src=t,A.className="viewerIframeClass",A.title=r,A.id="display"+r,a=A}return a}function I(A,t,r,a,s){webrtcdev.log("[filehsaring dommodifier] displayFile  - uuid: ",A," peerinfo :",t," , file url : ",r," ,  file name : ",a," ,  file type :",s);try{if(!t||!t.fileShare)return;let A=document.getElementById(t.fileShare.container),d=T(s,r,a);if(A)L(t.fileShare.container,r,a,s);else if("inspector"==$t)for(j in lt){const A=++j,t=document.getElementById(lt[A].fileShare.container);if(t){L(lt[A].fileShare.container,r,a,s);break}}else document.body.appendChild(d);window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileListed"}}))}catch(A){webrtcdev.error("[filehsaring dommodifier] displayFile has a problem ",A)}}function N(A){const t=document.getElementById(A);for(let r in lt)if(t.getAttribute("lastClickedBy")===lt[r].userid)return void t.setAttribute("lastClickedBy","");""==t.getAttribute("lastClickedBy")&&(t.setAttribute("lastClickedBy",st.userid),st.send({type:"buttonclick",buttonName:A}))}function R(A,t,r,a,s,d,l){webrtcdev.log(" [filehsaring js]  - show/hide elementDisplay ",t),webrtcdev.log(" [filehsaring js]  - show/hide button ",a," || ",l),1==l%2?(L(t,r,a,s),d.innerHTML="<i class=\"fa fa-eye-slash\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to show the file")):0==l%2&&(M(t,a),d.innerHTML="<i class=\"fa fa-eye\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to hide the file "))}function L(A,t,r,a){webrtcdev.log("[filehsaring js]  showFile container - ",A,document.getElementById(A));const s=T(a,t,r);webrtcdev.log("[filehsaring js]  showFile  filedom - ",s),u(A)?(document.getElementById(A).innerHTML="",B(A),document.getElementById(A).appendChild(s)):webrtcdev.warn(" [filehsaring js] cant show file as parent DOM fir fileDisplay container doesnt exist ")}function M(A){webrtcdev.log("[filehsaring js]  hidefile ",A),u(A)?(document.getElementById(A).innerHTML="",g(A),webrtcdev.log("[filehsaring js] hidefile done")):webrtcdev.warn(" [filehsaring js]  file is not displayed to hide  ")}function D(A){webrtcdev.log("[filehsaring js]  removeFile ",A),document.getElementById(A).remove()}function k(A,t,r,s,d){if(webrtcdev.log(" downloadButton _filename ",s,"  filetype ",d),"sessionRecording"==d){const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=r.audiofileurl,A.download=peerinfo.filearray[0]+".wav",A.click(),window.URL.revokeObjectURL(r.audiofileurl);const t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=r.videofileurl,t.download=peerinfo.filearray[1]+".webm",t.click(),window.URL.revokeObjectURL(r.videofileurl)}else{const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=r,A.download=s,A.click(),window.URL.revokeObjectURL(r)}}function O(A,r,a){try{if(webrtcdev.log(" [ filehsreing js ]  createFileSharingBox ",A,r),document.getElementById(A.fileShare.outerbox))return;const s=document.createElement("div");s.className="single"==a?"col-md-12 fileviewing-box":"col-md-6 fileviewing-box",s.id=A.fileShare.outerbox;let d=document.createElement("p"),l,c;if(d.id=A.fileShare.container+"controlBar","single"!=a&&d.appendChild(document.createTextNode(A.name)),"none"!=kt.fileshare.minicon){if(l=document.createElement("span"),!kt.fileshare.minicon){"<i class=\"fa fa-minus-square\"></i>".innerHTML="<i class=\"fa fa-minus-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default minicon ","<i class=\"fa fa-minus-square\"></i>")}else if(t(kt.fileshare.minicon)instanceof HTMLElement)l.innerHTML=kt.fileshare.minicon;else{let A=kt.fileshare.minicon;webrtcdev.log(" [fileShare JS ] creating custom minicon",A);let t=document.createElement("img");t.src=A,l.appendChild(t)}l.id=A.fileShare.minButton,l.title="Minimize",l.style.display="none",l.setAttribute("lastClickedBy",""),l.onclick=function(){X(A.userid,l.id,A.fileShare.outerbox),g(l),B(c),l.setAttribute("lastClickedBy",A.userid)},d.appendChild(l)}else webrtcdev.warn(" [fileShare JS ] minicon is none");if("none"!=kt.fileshare.maxicon){if(c=document.createElement("span"),!kt.fileshare.maxicon){c.innerHTML="<i class=\"fa fa-external-link-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default maxicon","<i class=\"fa fa-external-link-square\"></i>")}else if(t(kt.fileshare.maxicon)instanceof HTMLElement)c.innerHTML=kt.fileshare.maxicon;else{let A=kt.fileshare.maxicon;webrtcdev.log(" [fileShare JS ] creating custom maxicon",A);let t=document.createElement("img");t.src=A,c.appendChild(t)}c.id=A.fileShare.maxButton,c.title="Maximize",c.style.display="block",c.setAttribute("lastClickedBy",""),c.onclick=function(){for(x in Y(A.userid,c.id,A.fileShare.outerbox),lt)lt[x].fileShare.outerbox!=A.fileShare.outerbox&&J(lt[x].userid,c.id,lt[x].fileShare.outerbox);g(c),B(l),c.setAttribute("lastClickedBy",A.userid)},d.appendChild(c)}else webrtcdev.warn(" [fileShare JS ] maxicon is none");let u=document.createElement("span");if(!kt.fileshare.closeicon)u.innerHTML="<i class=\"fa fa-times-circle\"></i>";else if(t(kt.fileshare.closeicon)instanceof HTMLElement)u.innerHTML=kt.fileshare.closeicon;else{let A=document.createElement("img");A.src=kt.fileshare.closeicon,u.appendChild(A)}u.id=A.fileShare.closeButton,u.title="Close",u.setAttribute("lastClickedBy",""),u.onclick=function(){G(A.userid,u.id,A.fileShare.container)},d.appendChild(u);let m=0;let p=document.createElement("span");if(!kt.fileshare.rotateicon)p.innerHTML="<i class=\"fa fa-mail-forward\"></i>";else if(t(kt.fileshare.rotateicon)instanceof HTMLElement)p.innerHTML=kt.fileshare.rotateicon;else{let A=document.createElement("img");A.src=kt.fileshare.rotateicon,p.appendChild(A)}p.id=A.fileShare.rotateButton,p.title="Rotate",p.onclick=function(){let t=document.getElementById(A.fileShare.container),r=t.firstChild;webrtcdev.log(" [filehsraing ] rotateButton dom ",r,r.nodeName,"dom parent ",t),m=(m+90)%360,r.setAttribute("angle",m),r?"VIDEO"==r.nodeName?K(r,t):"IMG"==r.nodeName?P(r,t):"IFRAME"==r.nodeName?_(r,t):r.setAttribute("orientation",""):webrtcdev.error(" [filehsraing ] rotateButton  , dom doesnt exist")},d.appendChild(p);let w=document.createElement("div");if(w.className="filesharingWidget-"+a,w.id=A.fileShare.container,Rt){let A=document.createElement("span");A.innerHTML="<br/>"+w.id+"<br/>",s.appendChild(A)}s.appendChild(d),s.appendChild(w),r.appendChild(s)}catch(A){webrtcdev.error(" createFileSharingBox ",A)}}function K(A,t){const r=A.getAttribute("angle")||0;A.videoWidth>A.videoHeight?(A.setAttribute("style","height:"+t.clientWidth+"px;margin-left: 0px"),orientation="landscape"):orientation="portrait",A.setAttribute("orientation",orientation),A.className="col rotate"+r+A.getAttribute("orientation")}function _(A,t){const r=A.getAttribute("angle")||0;A.setAttribute("style","height:"+t.clientWidth+"px !important;width:100%"),A.setAttribute("orientation","portrait"),A.className="col rotate"+r+A.getAttribute("orientation")}function P(A){let t;const r=A.getAttribute("angle")||0;t=A.width>A.height?"landscape":"portrait",A.setAttribute("orientation",t),A.className="col rotate"+r+A.getAttribute("orientation")}function V(A,t,r){try{if(l(A.fileList.outerbox))return;const a=document.createElement("div");a.className="single"==r?"col-sm-12 filesharing-box":"col-sm-6 filesharing-box",a.id=A.fileList.outerbox;let s=document.createElement("div");s.id="widget-filelisting-container-header",s.setAttribute("style","background-color:"+A.color),"single"!=r&&s.appendChild(document.createTextNode(A.name+"     "));let d,c;"none"!=kt.filelist.minicon&&(d=document.createElement("span"),d.innerHTML="<i class=\"fa fa-minus\" ></i>",d.id=A.fileShare.minButton,d.setAttribute("lastClickedBy",""),d.onclick=function(){J(A.userid,d.id,A.fileList.container),g(d),B(c)},s.appendChild(d)),"none"!=kt.filelist.maxicon&&(c=document.createElement("span"),c.innerHTML="<i class=\"fa fa-plus\" ></i>",c.id=A.fileShare.maxButton,c.setAttribute("lastClickedBy",""),c.onclick=function(){Y(A.userid,c.id,A.fileList.container),g(c),B(d)},s.appendChild(c),g(c));const u=document.createElement("div");u.id=A.fileList.container;let m=document.createElement("div");if(Rt){let A=document.createElement("span");A.innerHTML=u.id,a.appendChild(A)}a.appendChild(s),a.appendChild(u),a.appendChild(m),t.appendChild(a)}catch(A){webrtcdev.error("[filesharing dom modifier] createFileListingBox ",A)}}function z(A){if(webrtcdev.log("[filesharing dommodifier] createFileSharingDiv for - ",A),"inspector"!=A.role||"inspector"==$t){if(!l(A.fileShare.outerbox)){let t=l(kt.fileShareContainer);O(A,t,kt.props.fileShare)}if(!l(A.fileList.outerbox)){let t=l(kt.fileListContainer);V(A,t,kt.props.fileList)}}}function G(A,t,r){l(r).innerHTML=""}function X(){for(x in lt)B(lt[x].fileShare.outerbox),document.getElementById(lt[x].fileShare.outerbox).className="col-md-6 fileviewing-box"}function J(A,t,r){g(r)}function Y(A,t,r){B(r)}function W(A){webrtcdev.log(" create Modal popup for filetype ",A);const t=l("mainDiv");l("saveModal")&&t.removeChild(document.getElementById("saveModal"));const r=document.createElement("div");r.className="modal fade",r.setAttribute("role","dialog"),r.id="saveModal";const a=document.createElement("div");a.className="modal-dialog";const s=document.createElement("div");s.className="modal-content";const d=document.createElement("div");d.className="modal-header";const c=document.createElement("button");c.className="close",c.setAttribute("data-dismiss","modal"),c.innerHTML="&times;";const B=document.createElement("h4");B.className="modal-title",B.innerHTML="Save File",B.setAttribute("float","left"),d.appendChild(B),d.appendChild(c);const g=document.createElement("div");g.className="modal-body",g.innerHTML="";const u=document.createElement("div");let m;switch(A){case"blobcanvas":B.innerHTML="Save Drawing",m=document.createElement("div"),m.innerHTML="Right Click on Save, pop up window gives following info: Right Click on Draw image, Click Save As when window opens up.",u.appendChild(m);break;case"application/pdf":B.innerHTML="Save PDF",m=document.createElement("div"),m.innerHTML="Click DOWNLOAD on top of the doc . Click SAVE AS when window opens up";const t=document.createElement("img");t.src="images/savefile.PNG",u.appendChild(m),u.appendChild(t);break;case"image/jpeg":case"image/png":case"video/mov":case"video/webm":case"imagesnapshot":B.innerHTML="Save Picture / Video",m=document.createElement("div"),m.innerHTML="Right Click on the FILE . Click SAVE AS when window opens up",u.appendChild(m);break;case"audio/mp3":B.innerHTML="Save Music File",m=document.createElement("div"),m.innerHTML="Right Click on the FILE (play display line). Click SAVE AS when window opens up",u.appendChild(m);break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"video/x-ms-wmv":B.innerHTML="Save Microsoft Office / Libra / Open Office Documents",m=document.createElement("div"),m.innerHTML="Click bottom DOWNLOAD in Uploaded Files box . File shows up below the Uploaded Files box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",u.appendChild(m);break;case"sessionRecording":B.innerHTML="Save Session Recording",m=document.createElement("div"),m.innerHTML="Extract the video and audio recording from the dowloaded compresed file and play together ",u.appendChild(m);break;default:m=document.createElement("div"),m.innerHTML="Document is Unrecognizable, cannot be saved, but can be shared with Remote. Use/Click Screen Share for Remote to view your screen. Then open the document on your screen.",u.appendChild(m);}g.appendChild(u),s.appendChild(d),s.appendChild(g),a.appendChild(s),r.appendChild(a),t.appendChild(r)}function q(A,t,r){let a=document.createElement("span");return a.id=t+"fullscreeButton",a.setAttribute("title","Full Screen"),a.className=A.max.button.class_off,a.innerHTML=A.max.button.html_off,a.onclick=function(){if(a.className==A.max.button.class_off){let t=document.getElementById(r.videoContainer);t.webkitEnterFullScreen(),a.className=A.max.button.class_on,a.innerHTML=A.max.button.html_on}else a.className=A.max.button.class_off,a.innerHTML=A.max.button.html_off},a}function Z(A,t,r){var a=document.createElement("span");a.id=t+"minmizevideoButton",a.setAttribute("title","Minimize Video"),a.className=A.min.button.class_off,a.innerHTML=A.min.button.html_off;var s=document.getElementById(r.videoContainer);return a.onclick=function(){a.className==A.min.button.class_off?(g(s),a.className=A.min.button.class_on,a.innerHTML=A.min.button.html_on):(B(s),a.className=A.min.button.class_off,a.innerHTML=A.min.button.html_off)},webrtcdev.log("[_media_dommodifier ] createMinimizeVideoButton - button",a," vid ",s),a}function ee(A,t,r){let a=document.createElement("span");return a.id=t+"audioButton",a.setAttribute("data-val","mute"),a.setAttribute("title","Toggle Audio"),a.className=A.audio.button.class_on,a.innerHTML=A.audio.button.html_on,a.onclick=function(){if(a.className==A.audio.button.class_on){try{r.stream.mute({audio:!0})}catch(A){r.stream.getAudioTracks()[0].enabled=!1}a.className=A.audio.button.class_off,a.innerHTML=A.audio.button.html_off}else{try{r.stream.unmute({audio:!0})}catch(A){r.stream.getAudioTracks()[0].enabled=!0}st.streamEvents.selectFirst("local").mediaElement.muted=!0,a.className=A.audio.button.class_on,a.innerHTML=A.audio.button.html_on}N(a.id)},a}function Ae(A,t,r){let a=document.createElement("span");return a.id=t+"videoButton",a.setAttribute("title","Toggle Video"),a.setAttribute("data-container","body"),a.className=A.video.button.class_on,a.innerHTML=A.video.button.html_on,a.onclick=function(){if(a.className==A.video.button.class_on){try{r.stream.mute({video:!0})}catch(A){r.stream.getVideoTracks()[0].enabled=!1}a.innerHTML=A.video.button.html_off,a.className=A.video.button.class_off}else{try{r.stream.unmute({video:!0})}catch(A){r.stream.getVideoTracks()[0].enabled=!0}a.innerHTML=A.video.button.html_on,a.className=A.video.button.class_on}N(a.id)},a}function te(A,t){if(webrtcdev.log("[media_dommanager] attachUserDetails - ",t.userid,":",t.type," to video DOM ",A),0<A.parentNode.querySelectorAll(".videoHeaderClass").length)if(webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present ",A.parentNode.querySelectorAll(".videoHeaderClass")),0<A.parentNode.querySelectorAll("videoheaders"+t.userid).length)return void webrtcdev.warn("[media_dommanager] user's video header already present ","videoheaders"+t.userid);else{webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present for diff user , overwrite with ","videoheaders"+t.userid);let r=A.parentNode.querySelectorAll(".videoHeaderClass")[0];r.remove()}let r=document.createElement("div");r.className="videoHeaderClass",r.innerHTML=t.name,r.id="videoheaders"+t.userid,A.parentNode.insertBefore(r,A.parentNode.firstChild)}function ne(A,t){webrtcdev.log("[media_dommanager] attachMetaUserDetails - ",t.userid,":",t.type);let r=document.createElement("span");r.setAttribute("style","background-color:"+t.color),r.innerHTML=t.userid+":"+t.type+"<br/>",A.parentNode.insertBefore(r,A.parentNode.firstChild)}function re(A,t){var r=document.createElement("div");return r.id=A+"snapshotButton",r.setAttribute("title","Snapshot"),r.className=xt.button.class_on,r.innerHTML=xt.button.html_on,r.onclick=function(){Ze(t,function(A){let t="snapshot"+new Date().getTime();var r;r=dt?zn(dt):zn(st.userid),r.filearray.push(t),kt.active?($e(A,"imagesnapshot",t),S(r.uuid,r,A,t,"imagesnapshot"),I(r.uuid,r,A,t,"imagesnapshot")):I(r.uuid,r,A,t,"imagesnapshot")})},r}function ae(A,t,r){let a=document.createElement("div");return a.id=t+"recordButton",a.setAttribute("title","Record"),a.className=A.button.class_off,a.innerHTML=A.button.html_off,a.onclick=function(){a.className==A.button.class_on?(a.className=A.button.class_off,a.innerHTML=A.button.html_off,gA(r)):a.className==A.button.class_off&&(a.className=A.button.class_on,a.innerHTML=A.button.html_on,BA(r))},a}function ie(A,t){if(A&&"undefined"!=A)if(document.getElementById("alertBox")){var r=document.createElement("div");r.className="warning"==t?"alert alert-warning fade in":"crtical"==t?"alert alert-crtical":"alert alert-success fade in",r.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+A,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").appendChild(r),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(A)}function oe(A){if(A&&"undefined"!=A&&Rt)if(document.getElementById("alertBox")){var t=document.createElement("div");t.className="alert alert-warning fade in",t.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+A,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").innerHTML="",document.getElementById("alertBox").appendChild(t),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(A)}function se(){if(typeof Notification!=null)try{Notification.requestPermission().then(function(A){webrtcdev.log("[notify.js] notification requestPermission ",A)})}catch(A){webrtcdev.error("[notify.js] notification requestPermission ",A)}}function de(A){webrtcdev.log("[screenshare dommodifier] create ScreenshareButton ",A),dn=document.createElement("span"),dn.className=A.button.shareButton.class_off,dn.innerHTML=A.button.shareButton.html_off,dn.id="screenShareButton",dn.onclick=function(){if(dn.className==A.button.shareButton.class_off){let t=new Date().getUTCMilliseconds();gn="screenshare_"+Ct+"_"+t,Re(gn),dn.className=A.button.shareButton.class_on,dn.innerHTML=A.button.shareButton.html_on}else dn.className==A.button.shareButton.class_on?(dn.className=A.button.shareButton.class_off,dn.innerHTML=A.button.shareButton.html_off,Me()):webrtcdev.log("[screenshare js] createScreenshareButton , classname is neither on nor off",dn.className)};let t=document.createElement("li");return t.appendChild(dn),l("topIconHolder_ul").appendChild(t),dn}function le(A){webrtcdev.log("[screenshare dommodifier] assignScreenShareButton",A);let t=l(A.id);return t.onclick=function(){if(t.className==A.class_off){let r=new Date().getUTCMilliseconds();gn="screenshare_"+Ct+"_"+r,Re(gn),t.className=A.class_on,t.innerHTML=A.html_on}else t.className==A.class_on?(t.className=A.class_off,t.innerHTML=A.html_off,Me()):webrtcdev.warn("[screenshare js] createScreenshareButton,classname neither on nor off",A.className)},t}function ce(A,t){if(!l("alertBox"))alert(A);else if(l("alertBox").innerHTML="","screenshareBegin"==t){let A=document.createElement("div");ke(),A.className="alert alert-info",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>You have begun sharing screen , waiting for peer to view",l("alertBox").appendChild(A),setTimeout(function(){let A=document.createElement("div");ke(),A.className="alert alert-danger",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>Peer was not able to view screen , please retry",l("alertBox").appendChild(A)},2e4)}else if("screclass_offenshareStartedViewing"==t);else if("screenshareError"==t){let A=document.createElement("div");ke(),A.className="alert alert-danger",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>There was a error while sharing screen , please contact support ",l("alertBox").appendChild(A)}else;}function Be(A){let t=document.getElementById(A.button.id);t.onclick=function(){t.className==A.button.class_on?(t.className=A.button.class_off,t.innerHTML=A.button.html_off,uA()):t.className==A.button.class_off&&(t.className=A.button.class_on,t.innerHTML=A.button.html_on,mA())}}function ge(){var A=document.createElement("span");A.className=Ot.button.class_off,A.innerHTML=Ot.button.html_off,A.onclick=function(){if(A.className==Ot.button.class_off){var t=document.body;recorder=Ge(t,{type:"canvas",showMousePointer:!0});var r=document.createElement("canvas");r.id="screenrecordCanvas",r.setAttribute("style","z-index:-1");var a=r.getContext("2d");r.style.top=0,r.style.left=0,(document.body||document.documentElement).appendChild(r);var s=!1,d=!1;(function A(){return s?void html2canvas(elementToShare,{grabMouse:!0,onrendered:function(t){a.clearRect(0,0,r.width,r.height),a.drawImage(t,0,0,r.width,r.height);d||setTimeout(A,1)}}):setTimeout(A,500)})(),recorder=Ge(r,{type:"canvas"}),A.className=Ot.button.class_on,A.innerHTML=Ot.button.html_on,recorder.startRecording(),d=!1,s=!0,setTimeout(function(){A.disabled=!1},500)}else A.className==Ot.button.class_on&&(A.className=Ot.button.class_off,A.innerHTML=Ot.button.html_off,isStoppedRecoridng=!0,recorder.stopRecording(function(){var A=document.getElementById("screenrecordCanvas");A.parentNode.removeChild(A);var t=recorder.getBlob(),r=document.createElement("video");r.src=Cn.createObjectURL(t),r.setAttribute("style","height: 100%; position: absolute; top:0;"),document.body.appendChild(r),r.controls=!0,r.play()}))};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function ue(A){if(webrtcdev.log("[chat dom modifier] create Chat Box ",A),!A)return;let t=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","text"),r.className="form-control chatInputClass",r.id="chatInput",r.onkeypress=function(A){13==A.keyCode&&(eA(r.value),r.value="")};let a=document.createElement("span");a.className="btn btn-primary",a.innerHTML="Enter",a.onclick=function(){let A=document.getElementById("chatInput");eA(A.value),A.value=""};let s=document.createElement("div");s.className="whoTypingClass",s.id="whoTyping",t.appendChild(r),t.appendChild(a),t.appendChild(s),document.getElementById(A.container.id).appendChild(t);let d=document.createElement("div");d.className="chatMessagesClass",d.setAttribute("contenteditable",!0),d.id=A.chatBox.id,document.getElementById(A.container.id).appendChild(d)}function me(A){webrtcdev.warn("[chatdommodifier ]  assignChatBox ");var t=document.getElementById(A.inputBox.text_id);if(!t||null==t)return void webrtcdev.warn("[chatdommodifier ]  chatobj.inputBox.text_id not defined - ",A.inputBox.text_id);if(t.onkeypress=function(A){if(13==A.keyCode){var r=zn(dt);eA(t.value,r),t.value=""}},document.getElementById(A.inputBox.sendbutton_id)){let t=document.getElementById(A.inputBox.sendbutton_id);t.onclick=function(){var t=zn(dt),r=document.getElementById(A.inputBox.text_id);eA(r.value,t),r.value=""}}if(document.getElementById(A.inputBox.minbutton_id)){var r=document.getElementById(A.inputBox.minbutton_id);r.onclick=function(){document.getElementById(A.container.id).hidden?B(A.container.id):g(A.container.id)}}}function pe(A){document.getElementById(A.button.id)?document.getElementById(A.button.id).click():webrtcdev.error("[draw dom modifier] Received sync board event but no button id found")}function we(A){let t=document.createElement("span");t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=()=>{if(t.className==A.button.class_off){t.className=A.button.class_on,t.innerHTML=A.button.html_on,B(A.drawCanvasContainer);let r={event:"open",from:"remote",board:A.drawCanvasContainer,button:A.button};st.send({type:"canvas",board:r}),vA(A)}else t.className==A.button.class_on&&(t.className=A.button.class_off,t.innerHTML=A.button.html_off,g(A.drawCanvasContainer))};var r=document.createElement("li");r.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(r)}function he(A){webrtcdev.log("[draw] dom modifier] drawCanvasobj ",A);let t=document.getElementById(A.button.id);t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=function(){t.className==A.button.class_off?(B(A.drawCanvasContainer),webrtcdev.log("[draw dom modifier] Draw Board Opened "),t.className=A.button.class_on,t.innerHTML=A.button.html_on,FA()):t.className==A.button.class_on&&(webrtcdev.log("[draw dom modifier] Draw Board Closed "),g(A.drawCanvasContainer),t.className=A.button.class_off,t.innerHTML=A.button.html_off,bA())}}function fe(A){if(A.container.minbutton_id&&l(A.container.minbutton_id)){var t=l(A.container.minbutton_id);t.onclick=function(){l(A.container.id).hidden=!l(A.container.id).hidden}}}function Ce(){webrtcdev.log("[timerjs] startForwardTimer");var A=Pn,t=_n,r=parseInt(A.innerHTML,10),a=parseInt(t.innerHTML,10);Ue(A,r,t,a)}function Qe(){webrtcdev.log("[timerjs] startBackwardTimer",Kn,_n,Pn);let A=Pn,t=_n,r=parseInt(A.innerHTML,10),a=parseInt(t.innerHTML,10);Ee(A,r,t,a)}function Ue(A,t,r,a){setInterval(function(){t++,Pn.innerHTML=t,60==t&&(t=0,a++,_n.innerHTML=a)},1e3)}function Ee(A,t,r,a){var s=setInterval(function(){t--,Pn.innerHTML=t,0==t&&(t=60,a--,_n.innerHTML=a,0>a&&clearInterval(s))},1e3)}function Fe(){if(Lt.span.currentTimeZone&&c(Lt.span.currentTimeZone)){let A=c(Lt.span.currentTimeZone);A.innerHTML=JA()}else webrtcdev.error(" [timer js ] timerobj.span.currentTimeZone DOM doesnt exist ")}function be(A){if(0>=Lt.span.remoteTimeZone.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");if(l("remoteTimeZone_"+A.userid))return void webrtcdev.warn("[timer js] showRemoteTimeZone - remoteTimeZone_"+A.userid," already exists , do not append Time zone");for(x in Lt.span.remoteTimeZone){let t=x+1;if(t>lt.length)return;let r;Lt.span.remoteTimeZone[x]?(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone",Lt.span.remoteTimeZone[x]," exist for remote"),r=c(Lt.span.remoteTimeZone[x])):(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone getting created for local and remotes"),r=document.createElement("li")),r.id="remoteTimeZone_"+A.userid,r.innerHTML=A.zone+" , "}}function ve(){try{if(Lt.span.currentTime&&c(Lt.span.currentTime)){let A=c(Lt.span.currentTime);A.innerHTML=new Date().toLocaleTimeString();setTimeout(ve,1e3)}else webrtcdev.error("[timer js ] startTime - No place for timerobj.span.currentTime_id")}catch(A){webrtcdev.error("[timer js ]",A)}}function ye(A){let t=document.createElement("ul");t.id="remoteTimerArea_"+A;let r=zn(A);if(l(r.videoContainer)){let A=l(r.videoContainer).parentNode;return A.appendChild(t),t}return null}function He(A){if(0>=Lt.span.remoteTime.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");let t={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:A.zone},r;if(Lt.span.remoteTime[x])webrtcdev.info(" [timer js] startPeersTime - timerobj.span.remoteTime dom ",Lt.span.remoteTime[x]," exist for remotes"),r=c(Lt.span.remoteTime[x]),r.id="remoteTime_"+A.userid,r.innerHTML=new Date().toLocaleString("en-US",t);else{if(webrtcdev.info(" timerobj.span.remoteTime - timerobj.span.remoteTime dom  ",Lt.span.remoteTime[x]," does not exist, creating it"),l("remoteTimeDate_"+A.userid))return;r=document.createElement("span"),r.id="remoteTime_"+A.userid,r.innerHTML=new Date().toLocaleString("en-US",t);var a;a=l("remoteTimerArea_"+A.userid)?l("remoteTimerArea_"+A.userid):ye(A.userid),a.appendChild(r)}}function Se(){getWebrtcdevStats.then(A=>{st.send({type:"stats",message:A})})}function Te(A,t){webrtcdev.info("[stats] getWebrtcdevStats - remote userid ",A,t)}function Ie(){webrtcdev.info("[stats] codec Audio ",st.codecs.audio),webrtcdev.info("[stats] Codec Video ",st.codecs.video)}function Ne(A,t){return localStorage.setItem("screenRoomid ",A),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - screenRoomid : ",A),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare  with sessionnobj : ",t," config ",Ut),ln=new RTCMultiConnection,ln.channel=A,ln.socketURL=t.signaller,ln.iceServers=t.turn.iceServers,ln.candidates={host:!0,stun:!0,turn:!0},ln.session={screen:!0,oneway:!0},ln.direction="one-way",ln.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},ln.mediaConstraints={audio:!1,video:{frameRate:20,height:240,width:320}},ln.dontCaptureUserMedia=!1,ln.dontGetRemoteStream=!1,ln.dontAttachStream=!1,ln.codecs={audio:"opus",video:"VP9"},ln.onMediaError=function(A,t){webrtcdev.error("[screenshareJS] onMediaError in _screenshare :",A,t),oe(A.name)},ln.onstream=function(t){if(webrtcdev.log("[screenshareJS] onstream in _screenshare :",t),Rt){let t=document.createElement("span");t.innerHTML="<br/>"+A+"<br/>",l(jt.screenshareContainer).appendChild(t)}if("remote"==t.type&&"local"!=t.type){oe("started streaming remote's screen"),webrtcdev.log("[screensharejs] on stream remote "),t.stream.streamid?(webrtcdev.log("[screensharejs] remote screen event.stream.streamId "+t.stream.streamId),Bn=t.stream.streamid):t.streamid&&(webrtcdev.log("[screensharejs] remote screen event.streamid "+t.streamid),Bn=t.streamid);let r=document.getElementById(jt.screenshareContainer).querySelectorAll("video");for(x in r)r[x].playing||(r[x].hidden=!0);let a=document.createElement("video");a.muted=!0,a.id="video_"+A;let s=t.stream;dA(a,s).then(()=>{l(jt.screenshareContainer).appendChild(a)}),B(jt.screenshareContainer),st.send({type:"screenshare",screenid:A,message:"screenshareStartedViewing"})}else oe("started streaming local screen"),webrtcdev.log("[screenshareJS] onstream local , send message to remote to connect to scr room"),st.send({type:"screenshare",screenid:A,screenStreamid:Bn,message:"startscreenshare"});window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareStarted"}}))},ln.onstreamended=function(A){A&&webrtcdev.log("[screenshare JS] onstreamended -",A);let t=jt.button.shareButton.id;t&&document.getElementById(t)&&(document.getElementById(t).className=jt.button.shareButton.class_off,document.getElementById(t).innerHTML=jt.button.shareButton.html_off),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareEnded"}}))},ln.onopen=function(){webrtcdev.log("[screensharejs] scrConn onopen - ",ln.connectionType)},ln.onerror=function(A){webrtcdev.error("[screensharejs] scrConn error - ",A)},ln.onEntireSessionClosed=function(A){webrtcdev.log("[screensharejs] scrConn onEntireSessionClosed - ",A)},ln.socketMessageEvent="scrRTCMultiConnection-Message",ln.socketCustomEvent="scrRTCMultiConnection-Custom-Message",ln.enableFileSharing=!1,ln}function Re(A){return webrtcdev.log("[screenshareJS] webrtcdevSharescreen, preparing screen-share by initiating ScrConn , scrroomid - ",A),webrtcdev.log("[screenshareJS] webrtcdevSharescreen, sessionobj - ",An),new Promise(t=>{ln=Ne(A,An),t(A)}).then(function(A){socket?(webrtcdev.log("[screenshare JS] open-channel-screenshare on - ",socket.io.uri),socket.emit("open-channel-screenshare",{channel:A,sender:dt,maxAllowed:100}),ie("Making a new session for screenshare"+A)):webrtcdev.error("[screenshare JS] parent socket doesnt exist "),socket.on("open-channel-screenshare-resp",function(t){webrtcdev.log("[screenshare JS] open-channel-screenshare-response -",t),t.status&&t.channel==A&&ln.open(A,function(){webrtcdev.log("[screenshare JS] webrtcdevSharescreen, opened up room for screen share ")})})})}function Le(A,t){return webrtcdev.log("[screenshareJS] connectScrWebRTC, first preparing screenshare by initiating ScrConn , scrroomid - ",t),webrtcdev.log("[screenshareJS] webrtcdevSharescreen, sessionobj - ",An),new Promise(A=>{Ne(t,An),A(t)}).then(function(t){webrtcdev.log("[screenshare JS] connectScrWebRTC -> ",A,t),"join"==A?(ln.join(t),ie("Connected with existing Screenshare channel "+t)):(ie("Connection type not found for Screenshare "),webrtcdev.error("[screenshare JS] connectScrWebRTC - Connection type not found for Screenshare "))})}function Me(){try{st.send({type:"screenshare",message:"stoppedscreenshare"}),ln.closeEntireSession(),webrtcdev.log("[screenshare JS] Sender stopped: screenRoomid ",gn,"| Screen stopped ",ln,"| container ",l(jt.screenshareContainer)),cn&&(cn.stop(),cn=null);let A=ln.streamEvents.selectFirst();A&&(webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - stoppping the stream"),A.stream.getTracks().forEach(A=>A.stop())),De()}catch(A){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",A)}}function De(A){try{ln.onstreamended(),ln.removeStream(A),ln.close(),ln=null;let t=document.getElementById(jt.screenshareContainer).querySelectorAll("video");for(x in t)t[x].playing||(t[x].hidden=!0);jt.screenshareContainer&&l(jt.screenshareContainer)&&(l(jt.screenshareContainer).innerHTML="")}catch(A){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",A)}}function ke(){l("alertBox").hidden=!1,l("alertBox").innerHTML=""}function Oe(A){if(!A)throw"MediaStream is mandatory.";this.start=function(r){var a=un?window.StereoRecorder:window.MediaRecorderWrapper;-1!=this.mimeType.indexOf("video")&&(a=un?window.WhammyRecorder:window.MediaRecorderWrapper),"image/gif"===this.mimeType&&(a=window.GifRecorder),t=new a(A),t.ondataavailable=this.ondataavailable,t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,t=xe(t,this),t.start(r)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(A){webrtcdev.log("ondataavailable..",A)},this.onstop=function(A){webrtcdev.warn("stopped..",A)};var t}function a(A,t){var r=window.MediaStreamRecorderScriptsDir,s=document.createElement("script");s.src=r+A,s.onload=t||function(){},document.documentElement.appendChild(s)}function xe(A,r){for(var a in r=Ke(r),r)"function"!=typeof r[a]&&(A[a]=r[a]);return A}function Ke(A){var t={};for(var r in A)if(-1!=r.indexOf("-")){var a=r.split("-"),s=a[0]+a[1].split("")[0].toUpperCase()+a[1].substr(1);t[s]=A[r]}else t[r]=A[r];return t}function _e(A,t){function a(A,t){for(var r=A.length+t.length,a=new Float32Array(r),s=0,d=0;d<r;)a[d++]=A[s],a[d++]=t[s],s++;return a}function s(A,t){for(var r=new Float32Array(t),a=0,s=A.length,d=0,l;d<s;d++)l=A[d],r.set(l,a),a+=l.length;return r}function d(A,t,r){for(var a=r.length,s=0;s<a;s++)A.setUint8(t+s,r.charCodeAt(s))}var l=[],c=[],B=!1,g=0,u=44100,m=t.mono?1:2,p,w,h,C,Q;this.record=function(){B=!0,l.length=c.length=0,g=0},this.requestData=function(){if(0==g)return void(E=!1);E=!0;var A=l.slice(0),B=c.slice(0),p=g;l.length=c.length=[],g=0,E=!1;var w=s(A,p),h=s(A,p);if(2===m)var C=a(w,h);else var C=w;var Q=new ArrayBuffer(44+2*C.length),U=new DataView(Q);d(U,0,"RIFF"),U.setUint32(4,44+2*C.length,!0),d(U,8,"WAVE"),d(U,12,"fmt "),U.setUint32(16,16,!0),U.setUint16(20,1,!0),U.setUint16(22,m,!0),U.setUint32(24,u,!0),U.setUint32(28,4*u,!0),U.setUint16(32,2*m,!0),U.setUint16(34,16,!0),d(U,36,"data"),U.setUint32(40,2*C.length,!0);for(var F=C.length,b=44,H=0;H<F;H++)U.setInt16(b,C[H]*(32767*1),!0),b+=2;var S=new Blob([U],{type:"audio/wav"});webrtcdev.debug("audio recorded blob size:",r(S.size)),t.ondataavailable(S)},this.stop=function(){B=!1,this.requestData()};var C=mn.AudioContext;mn.AudioContextConstructor||(mn.AudioContextConstructor=new C);var Q=mn.AudioContextConstructor;mn.VolumeGainNode||(mn.VolumeGainNode=Q.createGain());var w=mn.VolumeGainNode;mn.AudioInput||(mn.AudioInput=Q.createMediaStreamSource(A));var h=mn.AudioInput;h.connect(w);var U=t.bufferSize||2048;if(0==t.bufferSize&&(U=0),Q.createJavaScriptNode)p=Q.createJavaScriptNode(U,m,m);else if(Q.createScriptProcessor)p=Q.createScriptProcessor(U,m,m);else throw"WebAudio API has no support on this browser.";U=p.bufferSize,webrtcdev.debug("using audio buffer-size:",U);var E=!1;window.scriptprocessornode=p,1==m&&webrtcdev.debug("It seems mono audio. All right-channels are skipped."),p.onaudioprocess=function(A){if(B&&!E){var t=A.inputBuffer.getChannelData(0);if(l.push(new Float32Array(t)),2==m){var r=A.inputBuffer.getChannelData(1);c.push(new Float32Array(r))}g+=U}},w.connect(p),p.connect(Q.destination)}function Pe(A,t){function a(){if(!g){if(l)return setTimeout(a,100);var A=new Date().getTime()-h;return A?void(h=new Date().getTime(),m.drawImage(w,0,0,u.width,u.height),!g&&c.push({duration:A,image:u.toDataURL("image/webp")}),!B&&!s(c[c.length-1])&&(B=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(a,10)):a()}}function s(A,t,r){var a=document.createElement("canvas");a.width=u.width,a.height=u.height;var s=a.getContext("2d"),d={r:0,g:0,b:0},l=it(et(255,2)+et(255,2)+et(255,2)),c=t&&0<=t&&1>=t?t:0,B=r&&0<=r&&1>=r?r:0,g=new Image,m,p,w;g.src=A.image,s.drawImage(g,0,0,u.width,u.height);var h=s.getImageData(0,0,u.width,u.height);m=0,p=h.data.length,w=h.data.length/4;for(var C=0;C<p;C+=4){var Q={r:h.data[C],g:h.data[C+1],b:h.data[C+2]},U=it(et(Q.r-d.r,2)+et(Q.g-d.g,2)+et(Q.b-d.b,2));U<=l*c&&m++}return!(w-m<=w*B)}function d(A,t,r,a){var s=document.createElement("canvas");s.width=u.width,s.height=u.height;for(var d=s.getContext("2d"),l=[],c=t&&0<t&&t<=A.length?t:A.length,B={r:0,g:0,b:0},g=it(et(255,2)+et(255,2)+et(255,2)),m=r&&0<=r&&1>=r?r:0,p=a&&0<=a&&1>=a?a:0,w=!1,h=0;h<c;h++){var C,Q,U;if(!w){var E=new Image;E.src=A[h].image,d.drawImage(E,0,0,u.width,u.height);var F=d.getImageData(0,0,u.width,u.height);C=0,Q=F.data.length,U=F.data.length/4;for(var b=0;b<Q;b+=4){var H={r:F.data[b],g:F.data[b+1],b:F.data[b+2]},S=it(et(H.r-B.r,2)+et(H.g-B.g,2)+et(H.b-B.b,2));S<=g*m&&C++}}!w&&U-C<=U*p||(-1===t&&(w=!0),l.push(A[h]))}return l=l.concat(A.slice(c)),0>=l.length&&l.push(A[A.length-1]),l}this.record=function(){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(!this.width&&(this.width=w.videoWidth||320),!this.height&&(this.height=w.videoHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),u.width=this.canvas.width,u.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?w=this.video.cloneNode():(w=document.createElement("video"),w.src=Cn.createObjectURL(A),w.width=this.video.width,w.height=this.video.height),w.muted=!0,w.play(),h=new Date().getTime(),C=new pn.Video,webrtcdev.log("canvas resolutions",u.width,"*",u.height),webrtcdev.log("video width/height",w.width||u.width,"*",w.height||u.height),a()},this.clearOldRecordedFrames=function(){c=[]};var l=!1;this.requestData=function(){if(!c.length)return void(l=!1);l=!0;var A=c.slice(0);c=[],C.frames=d(A,-1);var a=C.compile();t.ondataavailable(a),webrtcdev.debug("video recorded blob size:",r(a.size)),l=!1};var c=[],B=!1,g=!1;this.stop=function(){g=!0,this.requestData()};var u=document.createElement("canvas"),m=u.getContext("2d"),p=this,w,h,C}function Ve(A){this.start=function(a){for(var s in a=a||1e3,t=new Pe(A,this),this)"function"!=typeof this[s]&&(t[s]=this[s]);t.record(),r=setInterval(function(){t.requestData()},a)},this.stop=function(){t&&(t.stop(),clearTimeout(r))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.ondataavailable=function(){};var t,r}function ze(A){function t(){Date.now();var A=new Blob([new Uint8Array(g.stream().bin)],{type:"image/gif"});r.ondataavailable(A),g.stream().bin=[]}if(!window.GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(A){function r(A){l=wn(r),typeof B===void 0&&(B=A);90>A-B||(s.drawImage(d,0,0,m,p),g.addFrame(s),B=A)}A=A||1e3;var m=this.videoWidth||320,p=this.videoHeight||240;a.width=d.width=m,a.height=d.height=p,g=new GIFEncoder,g.setRepeat(0),g.setDelay(this.frameRate||200),g.setQuality(this.quality||1),g.start(),c=Date.now(),l=wn(r),u=setTimeout(t,A)};this.stop=function(){l&&(hn(l),clearTimeout(u),t())},this.ondataavailable=function(){},this.onstop=function(){};var r=this,a=document.createElement("canvas"),s=a.getContext("2d"),d=document.createElement("video");d.muted=!0,d.autoplay=!0,d.src=Cn.createObjectURL(A),d.play();var l=null,c,B,g,u}function r(A){if(0===A)return"0 Bytes";var t=parseInt(nt(At(A)/At(1000)),10);return(A/et(1000,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function Ge(A,t){function a(){return(t.disableLogs||webrtcdev.debug("started recording "+t.type+" stream."),h)?(h.clearRecordedData(),h.resume(),m.recordingDuration&&u(),m):(s(function(){m.recordingDuration&&u()}),m)}function s(r){r&&(t.initCallback=function(){r(),r=t.initCallback=null});var a=new Je(A,t);h=new a(A,t),h.record(),t.disableLogs||webrtcdev.debug("Initialized recorderType:",h.constructor.name,"for output-type:",t.type)}function d(A){function a(a){for(var d in h)m&&(m[d]=h[d]),s&&(s[d]=h[d]);var l=h.blob;if(!l)if(a)h.blob=l=a;else throw"Recording failed.";if(A){var c=Cn.createObjectURL(l);A(c)}l&&!t.disableLogs&&webrtcdev.debug(l.type,"->",r(l.size)),t.autoWriteToDisk&&g(function(A){var r={};r[t.type+"Blob"]=A,vn.Store(r)})}if(!h)return webrtcdev.warn(p);var s=this;t.disableLogs||webrtcdev.warn("Stopped recording "+t.type+" stream."),"gif"===t.type?(h.stop(),a()):h.stop(a)}function l(){return h?void(h.pause(),!t.disableLogs&&webrtcdev.debug("Paused recording.")):webrtcdev.warn(p)}function c(){return h?void(h.resume(),!t.disableLogs&&webrtcdev.debug("Resumed recording.")):webrtcdev.warn(p)}function B(A){postMessage(new FileReaderSync().readAsDataURL(A))}function g(A,r){function a(A){var t=Cn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),r=new Worker(t);return Cn.revokeObjectURL(t),r}if(!A)throw"Pass a callback function over getDataURL.";var s=r?r.blob:(h||{}).blob;if(!s)return t.disableLogs||webrtcdev.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){g(A,r)},1e3);if("undefined"!=typeof Worker&&!navigator.mozGetUserMedia){var d=a(B);d.onmessage=function(t){A(t.data)},d.postMessage(s)}else{var l=new FileReader;l.readAsDataURL(s),l.onload=function(t){A(t.target.result)}}}function u(){setTimeout(function(){d(m.onRecordingStopped)},m.recordingDuration)}if(!A)throw"MediaStream is mandatory.";t=t||{type:"video"},t=new Xe(A,t);var m=this,p="It seems that \"startRecording\" is not invoked for "+t.type+" recorder.",w={startRecording:a,stopRecording:d,pauseRecording:l,resumeRecording:c,initRecorder:s,setRecordingDuration:function(A,t){if("undefined"==typeof A)throw"milliseconds is required.";if("number"!=typeof A)throw"milliseconds must be a number.";return m.recordingDuration=A,m.onRecordingStopped=t||function(){},{onRecordingStopped:function(A){m.onRecordingStopped=A}}},clearRecordedData:function(){return h?void(h.clearRecordedData(),!t.disableLogs&&webrtcdev.debug("Cleared old recorded data.")):webrtcdev.warn(p)},getBlob:function(){return h?h.blob:webrtcdev.warn(p)},getDataURL:g,toURL:function(){return h?Cn.createObjectURL(h.blob):webrtcdev.warn(p)},save:function(A){return h?void We(h.blob,A):webrtcdev.warn(p)},getFromDisk:function(A){return h?void Ge.getFromDisk(t.type,A):webrtcdev.warn(p)},setAdvertisementArray:function(A){t.advertisement=[];for(var r=A.length,a=0;a<r;a++)t.advertisement.push({duration:a,image:A[a]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,view:null},h;if(!this)return m=w,w;for(var C in w)this[C]=w[C];return m=this,w}function Xe(A,t){return t.recorderType&&!t.type&&(t.recorderType===Ve||t.recorderType===qe?t.type="video":t.recorderType===ze?t.type="gif":t.recorderType===_e?t.type="audio":t.recorderType===Oe&&(A.getAudioTracks().length&&A.getVideoTracks().length?t.type="video":A.getAudioTracks().length&&!A.getVideoTracks().length?t.type="audio":!A.getAudioTracks().length&&A.getVideoTracks().length&&(t.type="audio"))),"undefined"!=typeof Oe&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(!t.mimeType&&(t.mimeType="video/webm"),!t.type&&(t.type=t.mimeType.split("/")[0]),!t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),!t.type&&(t.type="audio")),t}function Je(A,t){var r;return(En||Qn||Un)&&(r=_e),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!En&&(r=Oe),"video"===t.type&&(En||Un)&&(r=Ve),"gif"===t.type&&(r=ze),"canvas"===t.type&&(r=qe),je()&&r!==qe&&r!==ze&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&A.getVideoTracks().length&&(r=Oe),t.recorderType&&(r=t.recorderType),t.disableLogs||!r||!r.name||webrtcdev.debug("Using recorderType:",r.name||r.constructor.name),r}function Ye(A){this.addStream=function(t){t&&(A=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t=this.mediaType,r=this.mimeType||{audio:null,video:null,gif:null},a;if("function"!=typeof t.audio&&je()&&A.getAudioTracks&&!A.getAudioTracks().length&&(t.audio=!1),"function"!=typeof t.video&&je()&&A.getVideoTracks&&!A.getVideoTracks().length&&(t.video=!1),!t.audio&&!t.video)throw"MediaStream must have either audio or video tracks.";if(!t.audio||(a=null,"function"==typeof t.audio&&(a=t.audio),this.audioRecorder=new Ge(A,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:a,mimeType:r.audio}),!t.video&&this.audioRecorder.startRecording()),!!t.video){a=null,"function"==typeof t.video&&(a=t.video);var s=A;if(je()&&!!t.audio&&"function"==typeof t.audio){var d=A.getVideoTracks()[0];navigator.mozGetUserMedia?(s=new Fn,s.addTrack(d),a&&a===Ve&&(a=Oe)):s=new Fn([d])}this.videoRecorder=new Ge(s,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:a,mimeType:r.video}),t.audio||this.videoRecorder.startRecording()}if(!!t.audio&&!!t.video){var l=this;je()?(l.audioRecorder=null,l.videoRecorder.startRecording()):l.videoRecorder.initRecorder(function(){l.audioRecorder.initRecorder(function(){l.videoRecorder.startRecording(),l.audioRecorder.startRecording()})})}!t.gif||(a=null,"function"==typeof t.gif&&(a=t.gif),this.gifRecorder=new Ge(A,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:a,mimeType:r.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(A){A=A||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(t){A(t,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(t){A(t,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(t){A(t,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(A){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),A&&A(t),t},this.getDataURL=function(A){function t(A,t){if("undefined"!=typeof Worker){var a=r(function(A){postMessage(new FileReaderSync().readAsDataURL(A))});a.onmessage=function(A){t(A.data)},a.postMessage(A)}else{var s=new FileReader;s.readAsDataURL(A),s.onload=function(A){t(A.target.result)}}}function r(A){var t=Cn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),r=new Worker(t),a;if("undefined"!=typeof Cn)a=Cn;else if("undefined"!=typeof webkitURL)a=webkitURL;else throw"Neither URL nor webkitURL detected.";return a.revokeObjectURL(t),r}this.getBlob(function(r){r.audio&&r.video?t(r.audio,function(a){t(r.video,function(t){A({audio:a,video:t})})}):r.audio?t(r.audio,function(t){A({audio:t})}):r.video&&t(r.video,function(t){A({video:t})})})},this.writeToDisk=function(){Ge.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(A){A=A||{audio:!0,video:!0,gif:!0},!!A.audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof A.audio?A.audio:""),!!A.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof A.video?A.video:""),!!A.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof A.gif?A.gif:"")}}function r(A){if(0===A)return"0 Bytes";var t=parseInt(nt(At(A)/At(1000)),10);return(A/et(1000,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function We(A,t){if(!A)throw"Blob object is required.";if(!A.type)try{A.type="video/webm"}catch(A){}var r=(A.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var a=t.split(".");t=a[0],r=a[1]}var s=(t||at(9999999999*Math.random())+888888888)+"."+r;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(A,s);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(A,s);var d=document.createElement("a");d.href=Cn.createObjectURL(A),d.target="_blank",d.download=s,!navigator.mozGetUserMedia||(d.onclick=function(){(document.body||document.documentElement).removeChild(d)},(document.body||document.documentElement).appendChild(d));var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});d.dispatchEvent(l),navigator.mozGetUserMedia||Cn.revokeObjectURL(d.href)}function je(){var A=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),t=!!window.chrome&&!A,r="undefined"!=typeof window.InstallTrigger;if(r)return!0;var a=navigator.appVersion,s=navigator.userAgent,d=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10),c,B;return(t||A)&&(c=s.indexOf("Chrome"),d=s.substring(c+7)),-1!==(B=d.indexOf(";"))&&(d=d.substring(0,B)),-1!==(B=d.indexOf(" "))&&(d=d.substring(0,B)),l=parseInt(""+d,10),isNaN(l)&&(d=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10)),49<=l}function Oe(A,t){function r(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}var a=this;if(t=t||{mimeType:"video/webm"},"audio"===t.type){if(A.getVideoTracks().length&&A.getAudioTracks().length){var s;navigator.mozGetUserMedia?(s=new Fn,s.addTrack(A.getAudioTracks()[0])):s=new Fn(A.getAudioTracks()),A=s}t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=En?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&!!navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}this.record=function(){a.blob=null;var r=t;t.disableLogs||webrtcdev.log("Passing following config over MediaRecorder API.",r),d&&(d=null),En&&!je()&&(r="video/vp8");try{d=new MediaRecorder(A,r)}catch(t){d=new MediaRecorder(A)}"canRecordMimeType"in d&&!1===d.canRecordMimeType(t.mimeType)&&!t.disableLogs&&webrtcdev.warn("MediaRecorder API seems unable to record mimeType:",t.mimeType),d.ignoreMutedMedia=t.ignoreMutedMedia||!1,d.ondataavailable=function(A){a.dontFireOnDataAvailableEvent||!A.data||!A.data.size||100>A.data.size||a.blob||(a.blob=t.getNativeBlob?A.data:new Blob([A.data],{type:t.mimeType||"video/webm"}),a.recordingCallback&&(a.recordingCallback(a.blob),a.recordingCallback=null))},d.onerror=function(A){t.disableLogs||("InvalidState"===A.name?webrtcdev.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===A.name?webrtcdev.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===A.name?webrtcdev.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===A.name?webrtcdev.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===A.name?webrtcdev.error("The UA cannot provide the codec or recording option that has been requested.",A):webrtcdev.error("MediaRecorder Error",A)),"inactive"!==d.state&&"stopped"!==d.state&&d.stop()},d.start(36e5),t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback()},this.stop=function(A){d&&(this.recordingCallback=function(t){d=null,A&&A(t)},"recording"===d.state&&d.stop())},this.pause=function(){d&&("recording"!==d.state||d.pause())},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var A=t.disableLogs;return t.disableLogs=!0,this.record(),void(t.disableLogs=A)}d&&("paused"!==d.state||d.resume())},this.clearRecordedData=function(){d&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var a=this,d;(function A(){return d?!1===r()?(t.disableLogs||webrtcdev.log("MediaStream seems stopped."),void a.stop()):void setTimeout(A,1e3):void 0})()}function _e(A,t){function r(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}function a(A,t){function r(A,t){function r(A,t){for(var r=new Float64Array(t),a=0,s=A.length,d=0,l;d<s;d++)l=A[d],r.set(l,a),a+=l.length;return r}function a(A,t){for(var r=A.length+t.length,a=new Float64Array(r),s=0,d=0;d<r;)a[d++]=A[s],a[d++]=t[s],s++;return a}function s(A,t,r){for(var a=r.length,s=0;s<a;s++)A.setUint8(t+s,r.charCodeAt(s))}var d=A.numberOfAudioChannels,l=A.leftBuffers.slice(0),c=A.rightBuffers.slice(0),B=A.sampleRate,g=A.internalInterleavedLength;2===d&&(l=r(l,g),c=r(c,g)),1===d&&(l=r(l,g));var u;2===d&&(u=a(l,c)),1===d&&(u=l);var m=u.length,p=new ArrayBuffer(44+2*m),w=new DataView(p);s(w,0,"RIFF"),w.setUint32(4,44+2*m,!0),s(w,8,"WAVE"),s(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,d,!0),w.setUint32(24,B,!0),w.setUint32(28,2*B,!0),w.setUint16(32,2*d,!0),w.setUint16(34,16,!0),s(w,36,"data"),w.setUint32(40,2*m,!0);for(var h=44,C=0;C<m;C++)w.setInt16(h,u[C]*(32767*1),!0),h+=2;return t?t({buffer:p,view:w}):void postMessage({buffer:p,view:w})}if(!En)return void r(A,function(A){t(A.buffer,A.view)});var a=s(r);a.onmessage=function(A){t(A.data.buffer,A.data.view),Cn.revokeObjectURL(a.workerURL)},a.postMessage(A)}function s(A){var t=Cn.createObjectURL(new Blob([A.toString(),";this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),r=new Worker(t);return r.workerURL=t,r}function d(A){if(!E){if(!1===r()&&(!t.disableLogs&&webrtcdev.log("MediaStream seems stopped."),p.disconnect(),g=!1),!g)return void h.disconnect();F||(F=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var a=A.inputBuffer.getChannelData(0);if(c.push(new Float32Array(a)),2===m){var s=A.inputBuffer.getChannelData(1);B.push(new Float32Array(s))}u+=Q}}if(!A.getAudioTracks().length)throw"Your stream has no audio tracks.";t=t||{};var l=this,c=[],B=[],g=!1,u=0,m=2,p;!0===t.leftChannel&&(m=1),1===t.numberOfAudioChannels&&(m=1),t.disableLogs||webrtcdev.debug("StereoAudioRecorder is set to record number of channels: ",m),this.record=function(){if(!1===r())throw"Please make sure MediaStream is active.";c.length=B.length=0,u=0,h&&h.connect(p),F=E=!1,g=!0},this.stop=function(A){g=!1,a({sampleRate:U,numberOfAudioChannels:m,internalInterleavedLength:u,leftBuffers:c,rightBuffers:1===m?[]:B},function(t,r){l.blob=new Blob([r],{type:"audio/wav"}),l.buffer=new ArrayBuffer(r.buffer.byteLength),l.view=r,l.sampleRate=U,l.bufferSize=Q,l.length=u,A&&A(),F=!1})},bn.AudioContextConstructor||(bn.AudioContextConstructor=new bn.AudioContext);var w=bn.AudioContextConstructor,h=w.createMediaStreamSource(A),C=[0,256,512,1024,2048,4096,8192,16384],Q="undefined"==typeof t.bufferSize?4096:t.bufferSize;if(-1!==C.indexOf(Q)||t.disableLogs||webrtcdev.warn("Legal values for buffer-size are "+JSON.stringify(C,null,"\t")),w.createJavaScriptNode)p=w.createJavaScriptNode(Q,m,m);else if(w.createScriptProcessor)p=w.createScriptProcessor(Q,m,m);else throw"WebAudio API has no support on this browser.";h.connect(p),t.bufferSize||(Q=p.bufferSize);var U="undefined"==typeof t.sampleRate?w.sampleRate||44100:t.sampleRate;(22050>U||96e3<U)&&!t.disableLogs&&webrtcdev.warn("sample-rate must be under range 22050 and 96000."),t.disableLogs||(webrtcdev.log("sample-rate",U),webrtcdev.log("buffer-size",Q));var E=!1;this.pause=function(){E=!0},this.resume=function(){if(!1===r())throw"Please make sure MediaStream is active.";return g?void(E=!1):(t.disableLogs||webrtcdev.info("Seems recording has been restarted."),void this.record())},this.clearRecordedData=function(){this.pause(),c.length=B.length=0,u=0};var F=!1;p.onaudioprocess=d,p.connect(w.destination)}function qe(A,t){function r(){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=A.width,t.height=A.height,r.drawImage(A,0,0),t}function a(){if(m)return p=new Date().getTime(),setTimeout(a,500);if("canvas"===A.nodeName.toLowerCase()){var s=new Date().getTime()-p;return p=new Date().getTime(),w.frames.push({image:r(),duration:s}),void(u&&setTimeout(a,t.frameInterval))}html2canvas(A,{grabMouse:"undefined"==typeof t.showMousePointer||t.showMousePointer,onrendered:function(A){var r=new Date().getTime()-p;return r?void(p=new Date().getTime(),w.frames.push({image:A.toDataURL("image/webp",1),duration:r}),u&&setTimeout(a,t.frameInterval)):setTimeout(a,t.frameInterval)}})}if("undefined"==typeof html2canvas&&"canvas"!==A.nodeName.toLowerCase())throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";t=t||{},t.frameInterval||(t.frameInterval=10);var s=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(A){A in document.createElement("canvas")&&(s=!0)});var d=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,l=50,c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);d&&c&&c[2]&&(l=parseInt(c[2],10)),d&&52>l&&(s=!1);var B,g;if(!s)!navigator.mozGetUserMedia||t.disableLogs||webrtcdev.error("Canvas recording is NOT supported in Firefox.");else if(t.disableLogs||webrtcdev.debug("Your browser supports both MediRecorder API and canvas.captureStream!"),A instanceof HTMLCanvasElement)B=A;else if(A instanceof CanvasRenderingContext2D)B=A.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";var u;this.record=function(){if(u=!0,s){var A;"captureStream"in B?A=B.captureStream(25):"mozCaptureStream"in B?A=B.mozCaptureStream(25):"webkitCaptureStream"in B&&(A=B.webkitCaptureStream(25));try{var r=new Fn;r.addTrack(A.getVideoTracks()[0]),A=r}catch(A){}if(!A)throw"captureStream API are NOT available.";g=new Oe(A,{mimeType:"video/webm"}),g.record()}else w.frames=[],p=new Date().getTime(),a();t.initCallback&&t.initCallback()},this.getWebPImages=function(r){if("canvas"!==A.nodeName.toLowerCase())return void r();var a=w.frames.length;w.frames.forEach(function(A,r){var s=a-r;t.disableLogs||webrtcdev.debug(s+"/"+a+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(s,a);var d=A.image.toDataURL("image/webp",1);w.frames[r].image=d}),t.disableLogs||webrtcdev.debug("Generating WebM"),r()},this.stop=function(A){u=!1;var r=this;return s&&g?void g.stop(A):void this.getWebPImages(function(){w.compile(function(a){t.disableLogs||webrtcdev.debug("Recording finished!"),r.blob=a,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),A&&A(r.blob),w.frames=[]})})};var m=!1;this.pause=function(){m=!0},this.resume=function(){m=!1,u||this.record()},this.clearRecordedData=function(){this.pause(),w.frames=[]};var p=new Date().getTime(),w=new pn.Video(100)}function Ve(A,t){function r(A){A="undefined"==typeof A?10:A;var t=new Date().getTime()-u;return t?l?(u=new Date().getTime(),setTimeout(r,100)):void(u=new Date().getTime(),g.paused&&g.play(),B.drawImage(g,0,0,c.width,c.height),m.frames.push({duration:t,image:c.toDataURL("image/webp")}),!d&&setTimeout(r,A,A)):setTimeout(r,A,A)}function a(A){var t=-1,r=A.length,a=function(){return t++,t===r?void A.callback():void A.functionToLoop(a,t)};a()}function s(A,t,r,s,d){var l=document.createElement("canvas");l.width=c.width,l.height=c.height;var B=l.getContext("2d"),g=[],u=t&&0<t&&t<=A.length?t:A.length,m={r:0,g:0,b:0},p=it(et(255,2)+et(255,2)+et(255,2)),w=r&&0<=r&&1>=r?r:0,h=s&&0<=s&&1>=s?s:0,C=!1;a({length:u,functionToLoop:function(r,a){var s=function(){!C&&u-d<=u*h||(-1===t&&(C=!0),g.push(A[a])),r()},d,l,u;if(!C){var Q=new Image;Q.onload=function(){B.drawImage(Q,0,0,c.width,c.height);var A=B.getImageData(0,0,c.width,c.height);d=0,l=A.data.length,u=A.data.length/4;for(var t=0;t<l;t+=4){var r={r:A.data[t],g:A.data[t+1],b:A.data[t+2]},a=it(et(r.r-m.r,2)+et(r.g-m.g,2)+et(r.b-m.b,2));a<=p*w&&d++}s()},Q.src=A[a].image}else s()},callback:function(){g=g.concat(A.slice(u)),0>=g.length&&g.push(A[A.length-1]),d(g)}})}t=t||{},t.frameInterval||(t.frameInterval=10),t.disableLogs||webrtcdev.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),c.width=t.canvas.width,c.height=t.canvas.height,B=c.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(g=t.video.cloneNode(),t.initCallback&&t.initCallback()):(g=document.createElement("video"),"undefined"==typeof g.srcObject?g.src=Cn.createObjectURL(A):g.srcObject=A,g.onloadedmetadata=function(){t.initCallback&&t.initCallback()},g.width=t.video.width,g.height=t.video.height),g.muted=!0,g.play(),u=new Date().getTime(),m=new pn.Video,t.disableLogs||(webrtcdev.log("canvas resolutions",c.width,"*",c.height),webrtcdev.log("video width/height",g.width||c.width,"*",g.height||c.height)),r(t.frameInterval)};var d=!1;this.stop=function(A){d=!0;var r=this;setTimeout(function(){s(m.frames,-1,null,null,function(a){m.frames=a,t.advertisement&&t.advertisement.length&&(m.frames=t.advertisement.concat(m.frames)),m.compile(function(t){r.blob=t,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),A&&A(r.blob)})})},10)};var l=!1;this.pause=function(){l=!0},this.resume=function(){l=!1,d&&this.record()},this.clearRecordedData=function(){this.pause(),m.frames=[]};var c=document.createElement("canvas"),B=c.getContext("2d"),g,u,m}function ze(A,t){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";t=t||{};var r=A instanceof CanvasRenderingContext2D||A instanceof HTMLCanvasElement;this.record=function(){function A(B){return a?setTimeout(function(){A(B)},100):void(c=wn(A),void 0===typeof u&&(u=B),90>B-u||(!r&&l.paused&&l.play(),!r&&d.drawImage(l,0,0,s.width,s.height),t.onGifPreview&&t.onGifPreview(s.toDataURL("image/png")),m.addFrame(d),u=B))}r||(!t.width&&(t.width=l.offsetWidth||320),!this.height&&(t.height=l.offsetHeight||240),!t.video&&(t.video={width:t.width,height:t.height}),!t.canvas&&(t.canvas={width:t.width,height:t.height}),s.width=t.canvas.width,s.height=t.canvas.height,l.width=t.video.width,l.height=t.video.height),m=new GIFEncoder,m.setRepeat(0),m.setDelay(t.frameRate||200),m.setQuality(t.quality||10),m.start(),B=Date.now();this;c=wn(A),t.initCallback&&t.initCallback()},this.stop=function(){c&&hn(c),g=Date.now(),this.blob=new Blob([new Uint8Array(m.stream().bin)],{type:"image/gif"}),m.stream().bin=[]};var a=!1;this.pause=function(){a=!0},this.resume=function(){a=!1},this.clearRecordedData=function(){m&&(this.pause(),m.stream().bin=[])};var s=document.createElement("canvas"),d=s.getContext("2d");if(r&&(A instanceof CanvasRenderingContext2D?(d=A,s=d.canvas):A instanceof HTMLCanvasElement&&(d=A.getContext("2d"),s=A)),!r){var l=document.createElement("video");l.muted=!0,l.autoplay=!0,"undefined"==typeof l.srcObject?l.src=Cn.createObjectURL(A):l.srcObject=A,l.play()}var c=null,B,g,u,m}function Ze(A,t){try{return A.videoContainer?function(A){if(A){let r=document.createElement("canvas");r.width=A.videoWidth||A.clientWidth,r.height=A.videoHeight||A.clientHeight;let a=r.getContext("2d");a.drawImage(A,0,0,r.width,r.height),t(r.toDataURL("image/png"))}else t("")}(A.videoContainer):(webrtcdev.error("[snapshot] videocontainer missing in peerinfo",A),"empty")}catch(A){webrtcdev.error("[Snapshot] ",A)}}function $e(A,t,r){st.send({type:t,message:A,name:r})}function eA(A,t){tA({header:st.extra.username,message:A,userinfo:t,color:st.extra.color}),st.send({type:"chat",userinfo:t,message:A})}function AA(A){return A.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>")}function tA(A){""!=A.message&&" "!=A.message&&(Dt.msgsnapshot?rA("chat-message self msg-avatar",A.userinfo,A.message,Dt.chatBox.id):aA("msg-box fonts",A.userinfo,A.message,Dt.chatBox.id))}function nA(A){""!=A.message&&" "!=A.message&&(Dt.msgsnapshot?rA("chat-message user msg-avatar",A.userinfo,A.message,Dt.chatBox.id):aA("msg-box fonts",A.userinfo,A.message,Dt.chatBox.id))}function rA(A,t,r,a){let s=document.createElement("div");s.id=" chat-msg-"+yn++,s.className=A+" chat-msg ",Ze(t,function(A){let a=document.createElement("img");a.src=A;let d=document.createElement("span");d.className="msg-avatar",d.appendChild(a);let l=document.createElement("span");l.className="cm-msg-text ",l.innerHTML=AA(r),s.appendChild(d),s.appendChild(l)}),document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function aA(A,t,r,a){console.log(" addMessageLineformat ",t);let s=document.createElement("ul");s.className=A,s.innerHTML=t.name?"<li><h5>"+t.name+" : "+AA(r)+"</h5></li>":"<li><h5>"+AA(r)+"</h5></li>",document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function iA(){return new Promise(function(A){let t=navigator.mediaDevices;t&&t.enumerateDevices||(webrtcdev.warn(" detectwebcam cant detect devices "),A(!1)),webrtcdev.log(" detectwebcam mediaDevices object - ",t),t.enumerateDevices().then(t=>{webrtcdev.log(" detectwebcam individual devices - ",t),A(t.some(A=>"videoinput"===A.kind))})})}function oA(){return new Promise(function(A){let t=navigator.mediaDevices;t&&t.enumerateDevices||A(!1),t.enumerateDevices().then(t=>{A(t.some(A=>"audioinput"===A.kind))})})}function sA(A,t,r){webrtcdev.log("[mediacontrol js] getCamMedia - role :",$t),webrtcdev.log("[mediacontrol js] getCamMedia - outgoingVideo "+t+" outgoingAudio "+r);var a={audio:{},video:{frameRate:20,height:240,width:320,facingMode:"user"}};"inspector"==$t?(A.dontCaptureUserMedia=!0,webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Joining as inspector without camera Video")):t&&r?(webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.log("[mediacontrol.js] getCamMedia  - Capture Full Media "),A.getUserMedia()):!t&&r?(a.video=!1,A.mediaConstraints=a,webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.warn("[mediacontrol.js] getCamMedia  - Dont Capture Webcam only Mic "),A.getUserMedia()):t&&!r?(a.audio=!1,A.mediaConstraints=a,webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints),webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Dont Capture Mic only webcam "),A.getUserMedia()):!t&&!r&&(a.video=!1,a.audio=!1,A.mediaConstraints=a,A.dontCaptureUserMedia=!0,webrtcdev.warn(" [_mediacontrol.js] getCamMedia - dont Capture outgoing video ",t," and outgoing Audio ",r),webrtcdev.log("[startJS] getCamMedia - default mediaConstraints :",A.mediaConstraints))}function dA(A,t){try{webrtcdev.log("[Mediacontrol] attachMediaStream - remvid ",A);var a="";if(0<document.getElementsByName(A).length)return webrtcdev.error("[Mediacontrol] attachMediaStream - remvid is already playing "),Promise.resolve();if(A.video)a=A.video;else if("VIDEO"==A.nodeName)a=A;else return webrtcdev.error("[ Mediacontrol] attachMediaStream - element  not found"),Promise.reject("video not found to attach stream");if(webrtcdev.log("[Mediacontrol] attachMediaStream - element ",a),webrtcdev.log("[Mediacontrol] attachMediaStream - stream ",t),t&&(t.isVideo||t.isScreen))try{a.srcObject=t}catch(A){webrtcdev.error("[Mediacontrol] attachMediaStream - ",A),a.src=Cn.createObjectURL(t)}finally{return webrtcdev.info("[Mediacontrol] attachMediaStream - added srcObject for ",t.type," valid stream ",t.streamid," to element ",a),a.play().then(()=>{webrtcdev.log("[Mediacontrol] attachMediaStream - element started playing ",a)}).catch(A=>{if(webrtcdev.error("[Mediacontrol] attachMediaStream - video play error ",A),"NotAllowedError"==A.name&&A.message.includes("play() failed")){let A=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(A||!A)&&(a.muted=!0,a.autoplay=!0,a.addEventListener("click",function(){a.muted=!1}),a.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)}))}else"NotAllowedError"==A.name&&A.message.includes("The play() request was interrupted by a call to pause()")?setTimeout(function(){a.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3):"AbortError"==A.name&&A.message.includes("The play() request was interrupted by a new load request")?(a.pause(),setTimeout(function(){a.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3)):setTimeout(function(){a.play().then(()=>{webrtcdev.info("[Mediacontrol] attachMediaStream - retry  ok ")}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error",A)})},3e3)})}else{if(""==t)return a.srcObject=null,webrtcdev.warn("[ Mediacontrol - attachMediaStream ] Media Stream empty '' attached to ",a," as stream is not valid ",t),Promise.resolve();throw webrtcdev.error("[Mediacontrol] attachMediaStream - stream is not recognized ",t),"unrecognized media stream"}}catch(A){return webrtcdev.error("[Mediacontrol] attachMediaStream - error",A),Promise.reject(new Error("attachMediaStream failed"))}}function lA(A,t){try{return A.srcObject&&A.srcObject.active?(webrtcdev.log("[Mediacontrol] reattachMediaStream - element has srcObject and is active "),Promise.resolve(1)):(A.srcObject=t.srcObject,webrtcdev.log("[Mediacontrol] reattachMediaStream - added src object for valid stream ",A),A.play().then(()=>{webrtcdev.log("[Mediacontrol] reattachMediaStream - element started playing ",A)}).catch(t=>{if(webrtcdev.error("[Mediacontrol] reattachMediaStream - video play error ",t),"NotAllowedError"==t.name&&t.message.includes("play() failed")){let t=confirm("Play failed due to auto play policy, starting video on mute, click on video to unmute");(t||!t)&&(A.muted=!0,A.autoplay=!0,A.addEventListener("click",function(){A.muted=!1}),A.play())}else"NotAllowedError"==t.name&&t.message.includes("The play() request was interrupted by a call to pause()")&&alert("Play failed, video was paused ")}))}catch(A){return webrtcdev.error("[media control] reattachMediaStream err ",A),Promise.reject(new Error("reattachMediaStream failed"))}}function cA(A){webrtcdev.warn("[ Mediacontrol] dettachMediaStream  on vid ",A);try{if("srcObject"in A){const t=A.srcObject;if(t&&""!=t){const r=t.getTracks();r.forEach(function(A){A.stop()}),A.srcObject=null}else webrtcdev.warn("[ Mediacontrol] dettachMediaStream  no stream present on remote's video")}else A.src=""}catch(A){webrtcdev.error("[ Mediacontrol] dettachMediaStream  error ",A)}finally{A.id=null}}function BA(A){let t=A.streamid,r=A.stream;r||webrtcdev.error("[recordjs] startRecord - stream is missing for peer ",A),webrtcdev.log("[recordjs] stop - stream",r);let a=Ge(r,{type:"video",recorderType:Oe});a.startRecording(),Hn[t]=a}function gA(A){let t=A.streamid,r=A.stream;r||webrtcdev.error("[recordjs] stopRecord - stream is missing for peer ",A),webrtcdev.log("[recordjs] stop - stream",r),Hn[t]||webrtcdev.log("wrong stream id ");let a=Hn[t];a.stopRecording(function(){let A=a.getBlob(),t="recordedvideo"+new Date().getTime();var r;r=dt?zn(dt):zn(st.userid),r.filearray.push(t);let s=document.createElement("div");s.value=r.filearray.length;let d=Cn.createObjectURL(A);kt.active?(S(r.uuid,r,d,t,"videoRecording"),I(r.uuid,r,d,t,"videoRecording")):I(r.uuid,r,d,t,"videoRecording")})}async function uA(){webrtcdev.log("[screenrecord js] webrtcdevRecordScreen");try{Sn=await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{mediaSource:"screen",mandatory:{maxWidth:1920<window.screen.width?window.screen.width:1920,maxHeight:1080<window.screen.height?window.screen.height:1080},optional:[]}}),webrtcdev.log("[screenrecord js] stream",Sn)}catch(A){webrtcdev.error("[screenrecord js] Error in webrtcdevRecordScreen ",A)}Sn.addEventListener("inactive",A=>{webrtcdev.log("Capture stream inactive - stop recording!"),mA(A)});try{Tn=new MediaRecorder(Sn,{mimeType:"video/webm"}),Tn.addEventListener("dataavailable",A=>{A.data&&0<A.data.size&&In.push(A.data)}),Tn.start(10),webrtcdev.log("[screenrecord js] mediaRecorder",Tn)}catch(A){webrtcdev.error("[screenrecord js] Error in mediaRecorder ",A)}}function mA(A){webrtcdev.log("webrtcdevStopRecordScreen",A),Tn.stop(),Tn=null,Sn.getTracks().forEach(A=>A.stop()),Sn=null;let t=window.URL.createObjectURL(new Blob(In,{type:"video/webm"}));pA(t)}function pA(A){var t=null;t=A instanceof Blob?Cn.createObjectURL(blob):A;var r=dt?zn(dt):zn(st.userid);var a="recordedvideo"+new Date().getTime();r.filearray.push(a);var s=document.createElement("div");s.value=r.filearray.length,S(r.uuid,r,t,a,"videoScreenRecording"),I(r.uuid,r,t,a,"videoScreenRecording")}function wA(A){webrtcdev.log("[flesharing JS] on File start ",A),webrtcdev.log("[flesharing JS] on File start description  , name :",A.name," from -> ",A.userid," to ->",A.remoteUserId);let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,r=zn(A.userid);r.filearray.includes("name : file.name")||(r.filearray.push({pid:t,name:A.name,status:"progress",from:A.userid,to:A.remoteUserId}),b(A.uuid,r,A.name,A.maxChunks,A,"fileBoxClass",A.userid,A.remoteUserId)),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareStart"}}))}function hA(A){try{if(A.currentPosition>A.maxChunks)return;let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,r=Nn[t];r&&(r.progress.value=A.currentPosition||A.maxChunks||r.progress.max,H(r.progress,r.label))}catch(A){webrtcdev.error("[flesharing JS] Problem in onFileProgress ",A)}}function fA(A){webrtcdev.log("[flesharing JS] On file End description , file :",A," from -> ",A.userid," to ->",A.remoteUserId),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}}));let t=A.uuid+"_"+A.userid+"_"+A.remoteUserId,r=A.name;var a=zn(A.userid);if(null!=a)for(x in a.filearray)a.filearray[x].name==r&&a.filearray[x].pid==t&&(a.filearray[x].status="finished",g("stopuploadButton"+t));webrtcdev.log("[flesharing JS] onFileEnd - Display on File Viewer and List -",A.url,r,A.type),I(A.uuid,a,A.url,r,A.type),webrtcdev.log("[flesharing JS] onFileEnd - Display List -",r+A.uuid,document.getElementById(r+A.uuid));dt==A.userid&&document.getElementById(r+A.uuid)||S(A.uuid,a,A.url,r,A.type)}function CA(A){webrtcdev.log(" [filehsraing js] Send file - ",A),st.send(A)}function QA(A,t,r){webrtcdev.log(" [filehsraing js] Stop Sending file - ",r);var a=zn(r.userid);for(y in a.filearray)a.filearray[y].pid==A&&(a.filearray[y].status="stop",webrtcdev.log("[filesharing js ] stopSendFile - filename ",a.filearray[y].name," | status ",a.filearray[y].status))}function UA(){try{st.send({type:"syncOldFiles"})}catch(A){webrtcdev.error("[filesharing js ] syncOldFiles",A)}}function EA(){var A=[];for(x in lt){webrtcdev.log("[flesharing JS] Checking Old Files in index ",x);var t=lt[x];if(t.filearray&&0<t.filearray.length)for(y in t.filearray){for(o in A)if(A[o].name==t.filearray[y].name)break;webrtcdev.log("[filehsraing js] user.filearray[y]",t.filearray[y]),A.push(t.filearray[y])}}setTimeout(function(){if(0<A.length)for(f in webrtcdev.log("[filehsraing js] sendOldFiles ",A),A)CA(A[f])},2e4)}function FA(){Rn=!0;let A={event:"open",from:"remote",board:_t.drawCanvasContainer,button:_t.button};st.send({type:"canvas",board:A}),webrtcdev.log("[drawJS] send canvas data on rtc"),vA(_t),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardActive"}})),webrtcdev.log("[drawJS] send ondrawboard active data on webrtcdev")}function bA(){Rn=!1;let A={event:"close",from:"remote",board:_t.drawCanvasContainer,button:_t.button};st.send({type:"canvas",board:A}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardTerminate"}}))}function vA(A){if(webrtcdev.log("[drawjs] drawCanvasobj.drawCanvasContainer ",A.drawCanvasContainer),0>document.getElementById(A.drawCanvasContainer).innerHTML.indexOf("iframe"))try{Ln.addSyncListener(function(A){st.send({type:"canvas",draw:A})}),Ln.setSelected("pencil"),Ln.setTools({pencil:!0,eraser:!0}),Ln.appendTo(document.getElementById(A.drawCanvasContainer))}catch(A){webrtcdev.error(" Canvas drawing not supported ",A)}else webrtcdev.log("[drawjs] CanvasDesigner already started iframe is attached ")}function yA(A){let t=document.createElement("span");t.className=A.button.class,t.innerHTML=A.button.html,t.onclick=function(){let t=confirm("Do you want to reconnet ?");!0==t&&($(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){$(this).html(A.button.html)},3e3))};let r=document.createElement("li");r.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(r)}function HA(A,t){document.getElementById(A).onclick=function(){var a=confirm("Do you want to reconnect ?");if(!0==a){if(!st.peers[st.connectionDescription.remoteUserId])return;st.peers[st.connectionDescription.remoteUserId].peer.close(),st.rejoin(st.connectionDescription),$(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){document.getElementById(A).innerHTML=t.button.html},3e3)}else;}}function SA(){document.body.setAttribute("style","pointer-events: none;")}function TA(A,t,r){A.style.position="absolute",A.style.left=t+"px",A.style.top=r+"px"}function IA(){document.getElementById("cursor1").setAttribute("style","display:block"),document.onmousemove=function(A){kn=A.pageX+10,On=A.pageY},xn=setInterval(RA,500)}function NA(){document.getElementById("cursor1").setAttribute("style","display:none"),st.send({type:"pointer",action:"stopCursor"}),clearInterval(xn)}function RA(){var A=document.getElementById("cursor1");A.hidden=!1,TA(A,kn,On),st.send({type:"pointer",action:"startCursor",corX:kn,corY:On})}function LA(A){var t=document.createElement("span");return t.id=A+"cursorButton",t.setAttribute("data-val","mute"),t.setAttribute("title","Cursor"),t.className=Xt.button.class_on,t.innerHTML=Xt.button.html_on,t.onclick=function(){var A=t.id,r;r=dt?zn(dt):zn(st.userid),-1<A.indexOf(r.controlBarName)?t.className==Xt.button.class_on?(IA(),t.className=Xt.button.class_off,t.innerHTML=Xt.button.html_off):t.className==Xt.button.class_off&&(NA(),t.className=Xt.button.class_on,t.innerHTML=Xt.button.html_on):alert(" Use Local Pointer button ")},t}function MA(){var A=document.createElement("span");for(x in A.className=Vt.button.class_off,A.innerHTML=Vt.button.html_off,Vt.languages)document.getElementById("CodeStyles").innerHTML=document.getElementById("CodeStyles").innerHTML+Vt.languages[x];document.getElementById("codeArea").value;zt=CodeMirror.fromTextArea(document.getElementById("codeArea"),{mode:"text/javascript",styleActiveLine:!0,lineNumbers:!1,lineWrapping:!0}),zt.setOption("theme","mdn-like"),A.onclick=function(){A.className==Vt.button.class_off?(A.className=Vt.button.class_on,A.innerHTML=Vt.button.html_on,xA(),document.getElementById(Vt.codeeditorContainer).hidden=!1):A.className==Vt.button.class_on&&(A.className=Vt.button.class_off,A.innerHTML=Vt.button.html_off,KA(),document.getElementById(Vt.codeeditorContainer).hidden=!0)};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function DA(A){if(37==A.which||38==A.which||39==A.which||40==A.which||17==A.which||18==A.which||16==A.which)return!0;var t={option:"text",codeContent:zt.getValue()};webrtcdev.log(" sending ",t),rtcMultiConnection.send({type:"codeeditor",data:t})}function kA(){$("#CodeStyles option:selected").each(function(){var A=CodeMirror.findModeByMIME($(this).attr("mime"));A&&(mode=A.mode,spec=$(this).attr("mime"),zt.setOption("mode",spec),CodeMirror.autoLoadMode(zt,mode))});var A={option:"menu",codeMode:mode,codeSpec:spec};webrtcdev.log(" sending ",A),rtcMultiConnection.send({type:"codeeditor",data:A})}function OA(A){if(webrtcdev.log("codeeditor ",A),"text"==A.option){var t=zt.getCursor();zt.setValue(A.codeContent),zt.setCursor(t)}else"menu"==A.option&&(zt.setOption("mode",evt.data.codeSpec),CodeMirror.autoLoadMode(zt,evt.data.codeMode))}function xA(){document.getElementById(Vt.codeeditorContainer).addEventListener("keyup",DA,!1),document.getElementById("CodeStyles").addEventListener("change",kA,!1)}function KA(){document.getElementById(Vt.codeeditorContainer).removeEventListener("keyup",DA,!1)}function _A(A){var t=document.createElement("span");t.className=A.button.class_off,t.innerHTML=A.button.html_off,t.onclick=function(){t.className==A.button.class_off?(t.className=A.button.class_on,t.innerHTML=A.button.html_on,zA(),document.getElementById(A.texteditorContainer).hidden=!1):t.className==A.button.class_on&&(t.className=A.button.class_off,t.innerHTML=A.button.html_off,GA(),document.getElementById(A.texteditorContainer).hidden=!0)};var r=document.createElement("li");r.appendChild(t),document.getElementById("topIconHolder_ul").appendChild(r)}function PA(A){if(37==A.which||38==A.which||39==A.which||40==A.which||17==A.which||18==A.which||16==A.which)return!0;var t={option:"text",content:document.getElementById(Pt.texteditorContainer).value};webrtcdev.log(" sending ",document.getElementById(Pt.texteditorContainer).value),rtcMultiConnection.send({type:"texteditor",data:t})}function VA(A){webrtcdev.log("texteditor ",A),"text"==A.option&&(document.getElementById(Pt.texteditorContainer).value=A.content)}function zA(){document.getElementById(Pt.texteditorContainer).addEventListener("keyup",PA,!1)}function GA(){document.getElementById(Pt.texteditorContainer).removeEventListener("keyup",PA,!1)}function XA(A){webrtcdev.log("[ timerobj] startsessionTimer ",A),A.counter.hours&&A.counter.minutes&&A.counter.seconds?(Kn=l(A.counter.hours),_n=l(A.counter.minutes),Pn=l(A.counter.seconds),"forward"==A.type?(Ce(),Kn.innerHTML=0,_n.innerHTML=0,Pn.innerHTML=0):"backward"==A.type&&(Kn.innerHTML=0,_n.innerHTML=3,Pn.innerHTML=0,Qe())):webrtcdev.error(" [timerobj] counter DOM elemnents not found ")}function JA(){try{return Mn=Intl.DateTimeFormat().resolvedOptions().timeZone,lt[0].zone=Mn,Mn}catch(A){webrtcdev.error("[timer js ]",A)}}function YA(){try{var A={type:"timer",userid:lt[0].userid,time:new Date().toJSON(),zone:lt[0].zone};webrtcdev.log("[timerjs] shareTimePeer ",A),st.send(A)}catch(A){webrtcdev.error(A)}}function WA(A,t){try{webrtcdev.log("[timerjs] peerTimeZone - ",A,t);let r=zn(t);if(!r)return;appendToPeerValue(t,"zone",A),be(r),webrtcdev.log("[timerjs] peerTimeZone , updated peerinfo with zone -  ",r)}catch(A){webrtcdev.error("[timerjs] ",A)}}function jA(){return st.peers.getAllParticipants()}function qA(A){try{for(x in webrtcdev.log("[peerinfomanager] removePeerInfo - remove userid: ",A),lt)if(lt[x].userid==A)return void lt.splice(x,1)}catch(A){webrtcdev.error("[peerinfomanager] removePeerInfo errorr - ",A)}}function ZA(A,t,r,a,s,d){if(webrtcdev.log("[peerinfomanager] updatePeerInfo-  "+A+t+r+a+s+d),!A)return void webrtcdev.error("[peerinfomanager] updatePeerInfo - userid is null / undefined, cannot create PeerInfo");let l=zn(A);l?(webrtcdev.log("[peerinfomanager] updatePeerInfo - UserID is already existing in webcallpeers, update the fields only "),l.videoContainer=l.videoContainer||"video"+A,l.videoHeight=l.videoHeight||null,l.videoClassName=l.videoClassName||null,l.userid=l.userid||A,l.name=l.name||t,l.color=l.color||r,l.email=l.email||a,l.role=l.role||s||"participant",l.type=l.type||d,l.controlBarName=l.controlBarName||"control-video"+A,l.filearray=l.filearray||[],l.vid=l.vid||"video"+d+"_"+A):(l={videoContainer:"video"+A,videoHeight:null,videoClassName:null,userid:A,name:t,color:r,email:a,role:s||"participant",type:d,controlBarName:"control-video"+A,filearray:[],vid:"video"+d+"_"+A},lt.push(l),webrtcdev.log("[peerinfomanager] updatedPeerInfo -  newly created peerinfo")),kt.active&&(l.fileShare="single"==kt.props.fileShare?{outerbox:"widget-filesharing-box",container:"widget-filesharing-container",minButton:"widget-filesharing-minbutton",maxButton:"widget-filesharing-maxbutton",rotateButton:"widget-filesharing-rotatebutton",closeButton:"widget-filesharing-closebutton"}:{outerbox:"widget-filesharing-box"+A,container:"widget-filesharing-container"+A,minButton:"widget-filesharing-minbutton"+A,maxButton:"widget-filesharing-maxbutton"+A,rotateButton:"widget-filesharing-rotatebutton"+A,closeButton:"widget-filesharing-closebutton"+A},l.fileList="single"==kt.props.fileList?{outerbox:"widget-filelisting-box",container:"widget-filelisting-container"}:{outerbox:"widget-filelisting-box"+A,container:"widget-filelisting-container"+A});let c=Gn(l.userid);lt[c]=l,webrtcdev.log("[peerinfomanager] updatePeerInfo "+c,lt[c])}function $A(A,t,r){webrtcdev.log("[sessionmanager] startSocketSession , set selfuserid ",A.userid),dt||(dt=A.userid);try{webrtcdev.log("[sessionmanager] StartSession"+r," on address ",t),socket=io.connect(t),console.log(" socket ",socket)}catch(A){throw webrtcdev.error(" problem in socket connection",A)," problem in socket connection"}return r?void(socket.on("connect",function(A){webrtcdev.log("[sessionmanager] connected to signaller ",A),socket.emit("presence",{channel:r}),socket.on("disconnected",function(A){webrtcdev.error("[sessionmanager] Disconnected from signaller ",A),ie("Disconnected from signaller "),"io server disconnect"===A&&(webrtcdev.error("[sessionmanager] Disconnected initiated by signaller , attempt to re-connect "),socket.connect())})}),socket.on("presence",function(A){Rt&&showUserStats(),webrtcdev.log("[sessionmanager] ======================= presence for sessionid ==================",A),A?Wn(r,dt):Yn(r,dt,nn.maxAllowed||10)}),socket.on("open-channel-resp",function(t){webrtcdev.log("[sessionmanager] --------------open-channel-resp---------------------  ",t),t.status&&t.channel==r?(webrtcdev.log("[sessionmanager] open-channel-resp - "," Session video:",Ht," audio: ",yt," data: ",St," OfferToReceiveAudio: ",Ft," OfferToReceiveVideo: ",bt),new Promise(function(t){sA(A,Ht,yt),setTimeout(t,3e3,"")}).then(()=>{let r=t.channel;A.openOrJoin(r,function(A){webrtcdev.log(" [sessionmanager] open-channel-resp - openOrJoin session id  ",r,"response ",A),A?(webrtcdev.info(" [sessionmanager] open-channel-resp - openOrJoin ok,  userid ",dt," with role ",$t),ZA(dt,mt,wt,pt,$t,"local")):webrtcdev.error(" [sessionmanager] open-channel-resp Errored from signaller ")})}).catch(A=>{webrtcdev.error(" [sessionmanager] Handle rejected promise ("+A+")")})):(alert("Could not open this channel, Server refused"),webrtcdev.error(" [sessionmanager] Could not open this channel, Server refused")),t.message&&ie(t.msgtype+" : "+t.message)}),socket.on("join-channel-resp",function(t){webrtcdev.log("[sessionmanager] --------------join-channel-resp---------------------  ",t),t.status&&t.channel==r?(webrtcdev.log(" [ join-channel-resp ] "," Session video:",Ht," audio: ",yt," data: ",St," OfferToReceiveAudio: ",Ft," OfferToReceiveVideo: ",bt),new Promise(function(t){sA(A,Ht,yt),setTimeout(t,3e3,"")}).then(()=>{let r=t.channel;A.openOrJoin(r,function(A){webrtcdev.info("[sessionmanager] join-channel-resp - openOrJoin session ",r," response - ",A),A?(webrtcdev.info(" [sessionmanager] join-channel-resp - openOrJoin ok,  userid ",dt," with role ",$t),ZA(dt,mt,wt,pt,$t,"local")):webrtcdev.error(" [sessionmanager] join-channel-resp -  openOrJoin  Errored from signaller ")})}).catch(A=>{webrtcdev.error("[sessionmanager] join-channel-resp - Handle rejected promise ("+A+")")}),t.message&&ie(t.msgtype+" : "+t.message)):(webrtcdev.error("[sessionmanager] Could not join this channel, Server refused"),alert("Could not join this channel, Server refused. Please end this session and create another session"))}),socket.on("channel-event",function(A){webrtcdev.log("[sessionmanager] channel-event---------------------  ",A),"new-join"==A.type&&"error"!=A.msgtype?webrtcdev.log("[session manager] - new-join-channel "):webrtcdev.warn("[session manager] - unhandled channel event ")}),socket.on("event",function(A){console.log("event",A)}),socket.on("disconnect",function(){console.error("disconnected ")})):(ie("Invalid session"),void webrtcdev.error("[sessionmanager] Session id undefined "))}var st=null,dt=null,lt=[],ct=null,Bt=null,gt=null,ut=null,mt="",pt="",wt="",ht="",ft="",Ct=null,Qt=[];this.sessionid="";var Ut={socketAddr:location.hostname+":8083/",signaller:location.hostname+":8085/"},Et=[],Ft=!0,bt=!0,vt=!0,yt=!0,Ht=!0,St=!0,Tt=null,It=null,Nt;this.remoteVideos=Nt=[];var Rt=!1,Lt=!1,Mt=!1,Dt=!1,kt=!1,Ot=!1,xt=!1,Kt=!1,_t=!1,Pt=!1,Vt=!1,zt=null,Gt=!1,Xt=!1,Jt=!1,Yt=!1,Wt=!1,jt=!1,qt=!1,Zt=!1,$t="participant",en=null,Et="none",An={},tn={},nn={},rn=[],an=null,on;this.connectionStatus=an,this.version="6.6.0",this.makesessionid=function(A){let t="";return(webrtcdev.log("[Init] Location  ",location.href),webrtcdev.log("[Init] Existing charecters after # ",location.href.replace("#","").length),location.href.replace("#","").length&&(t=-1<location.href.indexOf("?")?location.hash.substring(0,location.hash.indexOf("?")).replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""):location.hash.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""),t))?t:(webrtcdev.log("Session id not Found in URL ,  Check for auto - reload if  ",A),"reload"!=A||location.hash.replace("#","").length?(t=prompt("Enter session ",""),t):void(location.href=location.href.split("#")[0]+"#"+(100*Math.random()).toString().replace(".",""),location.reload()))},this.issafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.setsession=function(A,t,r,a,s,d){return webrtcdev.log("[ initjs ] : setsession - sessionobj : ",s),this.sessionid=Ct=session.sessionid,An=s,An.socketAddr&&(Ut.socketAddr=An.socketAddr),An.signaller&&(Ut.signaller=An.signaller),tn=A,nn=t,Et=session.turn,d&&(d.debug&&(Rt=d.debug||!1),d.chat&&(Dt=d.chat||null),d.fileShare&&(kt=d.fileShare||null),d.screenrecord&&(Ot=d.screenrecord||null),d.screenshare&&(jt=d.screenshare||null),d.snapshot&&(xt=d.snapshot||null),d.videoRecord&&(Kt=d.videoRecord||null),d.reconnect&&(Gt=d.reconnect||null),d.drawCanvas&&(_t=d.drawCanvas||null),d.texteditor&&(Pt=d.texteditor||null),d.codeeditor&&(Vt=d.codeeditor||null),d.mute&&(Jt=d.mute||null),d.timer&&(Lt=d.timer||null),d.listenin&&(Wt=d.listenin||null),d.cursor&&(Xt=d.cursor||null),d.minmax&&(Yt=d.minmax||null),d.help&&(qt=d.help||null),d.statistics&&(Zt=d.statistics||null)),{sessionid:Ct,outgoing:a,incoming:r,socketAddr:Ut.socketAddr,signaller:Ut.signaller,localobj:tn,remoteobj:nn,turn:Et,widgets:d}},this.startCall=function(A){if(!A)return void webrtcdev.error("[ initjs ] : Cannot initiate startcall without session object ");webrtcdev.log("[ initjs ] startwebrtcdev begin processing with ",A),webrtcdev.log("[ initjs ] : incoming ",A.incoming),webrtcdev.log("[ initjs ] : outgoing ",A.outgoing),A.incoming&&(Ft=A.incoming.audio,bt=A.incoming.video,vt=A.incoming.data),A.outgoing&&(yt=A.outgoing.audio,Ht=A.outgoing.video,St=A.outgoing.data),webrtcdev.log(" [ initjs  ] : role ",$t);let t=A.sessionid;webrtcdev.log("[ initjs ] : sessionid : "+t+" and localStorage  ",localStorage),1<=localStorage.length&&localStorage.getItem("channel")!==t?(webrtcdev.log("[ intijs ] : Current Session ID "+t+" doesnt match cached channel id "+localStorage.getItem("channel")+"-> clearCaches()"),clearCaches()):webrtcdev.log("[ initjs ] : no action taken on localStorage"),webrtcdev.log("[ initjs ] : localobj ",tn),webrtcdev.log("[ initjs ] : remoteobj ",nn),Tt=tn.video;let r=nn.videoarr;if(Ht&&(It=r[0]),!nn.dynamicVideos)for(let A=1;A<r.length;A++)Nt.push(r[A]);if(tn.hasOwnProperty("userdetails")){let A=tn.userdetails;webrtcdev.info("[init JS] localobj userdetails ",A),mt=A.username||"LOCAL",wt=A.usercolor||"",pt=A.useremail||"",$t=A.role||"participant"}else webrtcdev.warn("localobj has no userdetails ");return"inspector"==$t&&resolve("done"),new Promise(A=>{iA().then(A=>{webrtcdev.log("Has Webcam: "+(A?"yes":"no")),A||(webrtcdev.error(" dont have access to webcam  "),alert(" you dont have access to webcam "),Ht=!1),Ht&&(webrtcdev.log(" get permission for video Access "),s())}).catch(A=>{webrtcdev.error(" dont have access to webcam  ",A)}),oA().then(A=>{webrtcdev.log("Has Mic: "+(A?"yes":"no")),A||(webrtcdev.error(" dont have access to mic  "),alert(" you dont have access to Mic "),yt=!1),yt&&(webrtcdev.log(" get permission for audio access "),d())}).catch(A=>{webrtcdev.error(" dont have access to mic  ",A)}),se(),A(t)}).then(t=>{jn(t,A)}).then(()=>{Jn(st,A.widgets)}).then(()=>{$A(st,A.socketAddr,A.sessionid),an="started"}).catch(A=>{webrtcdev.error(" [ initjs ] : Promise rejected ",A)})},this.stopCall=stopCall=function(){webrtcdev.log(" stopCall "),st.closeEntireSession(),localStorage.getItem("channel")||localStorage.removeItem("channel"),localStorage.getItem("userid")||localStorage.removeItem("userid"),localStorage.getItem("remoteUsers")||localStorage.removeItem("remoteUsers"),this.connectionStatus="closed"},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var A=this.length-1;0<=A;A--)this[A]&&this[A].parentElement&&this[A].parentElement.removeChild(this[A])},this.attachControlButtons=attachControlButtons=function(A,t){let r=t.stream||A.srcObject||null,a=t.streamid||A.srcObject.id||null,s=t.controlBarName,d=t.fileSharingContainer,l=A.parentNode;if(webrtcdev.log(" [media dom modifier] attachControlButtons to the parent Node of video  ",l),l){let A=l.childNodes;for(i in A){let t=A[i];"DIV"==t.nodeName&&t.id&&-1<t.id.indexOf("control")&&(webrtcdev.warn("[media dom modifier] control bar exists already, delete the previous one before adding new one",t),l.removeChild(t))}}let c=document.createElement("div");if(c.id=s,c.className="local"==t.type?"localVideoControlBarClass":"remoteVideoControlBarClass",Rt){let t=document.createElement("div");t.innerHTML=A.id,c.appendChild(t)}if(Jt.active&&(Jt.audio.active&&c.appendChild(ee(Jt,s,t)),Jt.video.active&&c.appendChild(Ae(Jt,s,t))),xt.active&&c.appendChild(re(s,t)),Kt.active&&c.appendChild(ae(Kt,s,t)),Xt.active&&c.appendChild(LA(s,t)),Yt.active){c.appendChild(q(Yt,s,t,a,r)),nameBoxid="#videoheaders"+t.userid;let A=document.querySelectorAll(nameBoxid);for(n in A)A[n].appendChild&&A[n].appendChild(Z(Yt,s,t,a,r))}l.appendChild(c)},this.showdesktopnotification=showdesktopnotification=function(A,t){if(!("Notification"in window))alert("This browser does not support desktop notification");else if("granted"===Notification.permission){new Notification(A,{body:t})}else"denied"!==Notification.permission&&webrtcdev.warn(" [notify.js] notification denied")};var sn=document.createElement("div"),dn;sn.id="saveButtonCanvasDraw",sn.setAttribute("data-toggle","modal"),sn.setAttribute("data-target","#saveModal"),sn.onclick=function(){W("blobcanvas")},document.body.appendChild(sn),this.getWebrtcdevStats=getWebrtcdevStats=function(){for(let A in webrtcdev.info(" URL  : ",window.location.href),webrtcdev.info(" Bandwidth  : ",this.version),webrtcdev.info(" Browser  : ",st.DetectRTC.browser),webrtcdev.info(" Network connection downlink : ",navigator.connection.downlink),webrtcdev.info(" Network connection effectiveType : ",navigator.connection.effectiveType),webrtcdev.info(" Network connection rtt : ",navigator.connection.rtt),webrtcdev.info(" Bandwidth  : ",st.bandwidth),webrtcdev.info(" All active participants  : ",jA()),Ie(),lt)webrtcdev.info(" Peer   : ",A," - ",lt[A]);return new Promise(function(A){for(let t in st.peers)if(st.peers[t].userid){let r=st.peers[t].peer;webrtcdev.log(r),r.getStats(null).then(t=>{let r="";t.forEach(A=>{r+="Report:"+A.type+" <br/> ID:"+A.id+" <br/>Timestamp:"+A.timestamp+" <br/> ",Object.keys(A).forEach(t=>{"id"!==t&&"timestamp"!==t&&"type"!==t&&(r+=t+" : "+A[t]+" <br/> ")})}),webrtcdev.info("[stats] getWebrtcdevStats - self  ",dt,r),A(r)})}})},this.oldgetStats=function(A,t,r){function a(t){webrtcdev.log("peer ",s);s.getStats()&&(!navigator.mozGetUserMedia?s.getStats(function(A){var r=[];A.result().forEach(function(A){var t={};A.names().forEach(function(r){t[r]=A.stat(r)}),t.id=A.id,t.type=A.type,t.timestamp=A.timestamp,r.push(t)}),t(r)}):s.getStats(A,function(A){var r=[];A.forEach(function(A){r.push(A)}),t(r)},t))}var s=this;if(arguments[0]instanceof RTCMultiConnection){if(s=arguments[0],!navigator.mozGetUserMedia||(A=arguments[1],t=arguments[2],r=arguments[3]),!(A instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"2nd argument is not instance of MediaStreamTrack.";}else if(!(A instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"1st argument is not instance of MediaStreamTrack.";var d={audio:{},video:{}},l=!1;(function A(){a(function(a){for(var c={audio:{},video:{},results:a,nomore:function(){l=!0}},B=0,g;B<a.length;++B){if(g=a[B],g.datachannelid&&"datachannel"===g.type&&(c.datachannel={state:g.state}),"googLibjingleSession"===g.type&&(c.isOfferer=g.googInitiator),"googCertificate"==g.type&&(c.encryption=g.googFingerprintAlgorithm),"opus"==g.googCodecName&&g.bytesSent){var u=0;if(!!g.bytesSent){d.audio.prevBytesSent||(d.audio.prevBytesSent=g.bytesSent);var m=g.bytesSent-d.audio.prevBytesSent;d.audio.prevBytesSent=g.bytesSent,u=m/1024}c.audio||(c.audio=g),c.audio.availableBandwidth=u.toFixed(1)}if("VP8"==g.googCodecName){var u=0;if(!!g.bytesSent){d.video.prevBytesSent||(d.video.prevBytesSent=g.bytesSent);var m=g.bytesSent-d.video.prevBytesSent;d.video.prevBytesSent=g.bytesSent,u=m/1024}c.video||(c.video=g),c.video.availableBandwidth=u.toFixed(1),g.googFrameHeightReceived&&g.googFrameWidthReceived&&(c.resolutions={width:g.googFrameWidthReceived,height:g.googFrameHeightReceived})}"VideoBwe"==g.type&&(c.video.bandwidth={googActualEncBitrate:g.googActualEncBitrate,googAvailableSendBandwidth:g.googAvailableSendBandwidth,googAvailableReceiveBandwidth:g.googAvailableReceiveBandwidth,googRetransmitBitrate:g.googRetransmitBitrate,googTargetEncBitrate:g.googTargetEncBitrate,googBucketDelay:g.googBucketDelay,googTransmitBitrate:g.googTransmitBitrate}),"googCandidatePair"==g.type&&"true"==g.googActiveConnection&&(c.connectionType={local:{candidateType:g.googLocalCandidateType,ipAddress:g.googLocalAddress},remote:{candidateType:g.googRemoteCandidateType,ipAddress:g.googRemoteAddress},transport:g.googTransportType});var p=((navigator.connection||{}).type||"unknown").toString().toLowerCase();"localcandidate"===g.type&&(!c.connectionType&&(c.connectionType={}),c.connectionType.local={candidateType:g.candidateType,ipAddress:g.ipAddress+":"+g.portNumber,networkType:g.networkType||"unknown",transport:g.transport}),"remotecandidate"===g.type&&(!c.connectionType&&(c.connectionType={}),c.connectionType.local={candidateType:g.candidateType,ipAddress:g.ipAddress+":"+g.portNumber,networkType:g.networkType||p,transport:g.transport})}try{-1!==s.iceConnectionState.search(/failed|closed/gi)&&(l=!0)}catch(A){l=!0}!0===l&&(c.datachannel&&(c.datachannel.state="close"),c.ended=!0),t(c),!l&&typeof r!=null&&r&&setTimeout(A,r||1e3)})})()},"undefined"!=typeof module&&(module.exports=getStats),this.showRtcConn=function(){return st?(webrtcdev.info(" ========================================================================="),webrtcdev.info("[stats] rtcConn : ",st),webrtcdev.info(" =========================================================================")):webrtcdev.warn(" rtcConn doesnt exist "),st},this.updateStats=function(){webrtcdev.info(" ============================ get Stats  =========================================="),Zt&&Zt.active&&(getStats(event.stream.getVideoTracks(),function(A){document.getElementById("network-stats-body").innerHTML=A},2e4),document.getElementById(Zt.statsConainer).innerHTML+=JSON.stringify(Zt),document.getElementById(Zt.statsConainer).innerHTML+=JSON.stringify(Zt.bandwidth),document.getElementById(Zt.statsConainer).innerHTML+=JSON.stringify(Zt.codecs))};var ln=null,cn=null,Bn,on,gn;this.showScrConn=function(){ln?(webrtcdev.info(" ========================================================================="),webrtcdev.info(" srcConn : ",ln),webrtcdev.info(" srcConn.peers.getAllParticipants() : ",ln.peers.getAllParticipants()),webrtcdev.info(" =========================================================================")):webrtcdev.debug(" Screen share is not active ")},"",function(){function A(){function A(A,t){function r(A,r,d){p=tt(r.byteLength/s);for(var l=0,c;l<p;l++)c=l*s,m[u]=r.slice(c,ot(c+s,r.byteLength)),t({uuid:a.uuid,buffer:m[u],currentPosition:u,maxChunks:g,size:a.size,name:a.name,lastModifiedDate:a.lastModifiedDate.toString(),type:a.type}),u++;u==g&&(w=!0),d()}t=t||function(A){postMessage(A)};var a=A.file;a.uuid||(a.uuid=(100*Math.random()).toString().replace(/\./g,""));var s=A.chunkSize||15000;A.extra&&A.extra.chunkSize&&(s=A.extra.chunkSize);var d=0,l=s,c=nt(ot(1e8,l)/s),B=c*s,g=tt(a.size/s);a.maxChunks=g;var u=0,m=[],p,w;t({currentPosition:u,uuid:a.uuid,maxChunks:g,size:a.size,name:a.name,type:a.type,lastModifiedDate:a.lastModifiedDate.toString(),start:!0});var h=new FileReader,C;h.onloadend=function(A){A.target.readyState==FileReader.DONE&&r(a.name,A.target.result,function(){d++,(d+1)*B<a.size?(C=a.slice(d*B,(d+1)*B),h.readAsArrayBuffer(C)):d*B<a.size?(C=a.slice(d*B,a.size),h.readAsArrayBuffer(C)):(a.url=Cn.createObjectURL(a),t({currentPosition:u,uuid:a.uuid,maxChunks:g,size:a.size,name:a.name,lastModifiedDate:a.lastModifiedDate.toString(),url:Cn.createObjectURL(a),type:a.type,end:!0}))})},u+=1,C=a.slice(d*B,(d+1)*B),h.readAsArrayBuffer(C)}var t=this;t.readAsArrayBuffer=function(t,r){function a(A){t.chunks[A.uuid]||(t.chunks[A.uuid]={currentPosition:-1}),r.extra=r.extra||{userid:0},A.userid=r.userid||r.extra.userid||0,A.extra=r.extra,t.chunks[A.uuid][A.currentPosition]=A,A.end&&s&&(s(A.uuid),s=null),200<A.maxChunks&&200==A.currentPosition&&s&&(s(A.uuid),s=null)}var s=r.earlyCallback;delete r.earlyCallback;A(r,a)}}function t(A){function t(s,d){if(!s.uuid)return void A.convertToObject(s,function(A){t(A)});if(s.start&&!a.chunks[s.uuid]&&(a.chunks[s.uuid]={},A.onBegin&&A.onBegin(s)),!s.end&&s.buffer&&(a.chunks[s.uuid][s.currentPosition]=s.buffer),s.end){var l=a.chunks[s.uuid],c=[];Object.keys(l).forEach(function(A){c.push(l[A])});var B=new Blob(c,{type:s.type});B=r(B,s),B.url=Cn.createObjectURL(B),B.uuid=s.uuid,B.size||webrtcdev.error("Something went wrong. Blob Size is 0."),A.onEnd&&A.onEnd(B),delete a.chunks[s.uuid],delete a.chunksWaiters[s.uuid]}s.buffer&&A.onProgress&&A.onProgress(s),s.end||(d(s),a.chunksWaiters[s.uuid]=function(){function A(){s.buffer&&a.chunks[s.uuid]&&(s.currentPosition==s.maxChunks||a.chunks[s.uuid][s.currentPosition]||(d(s),setTimeout(A,5e3)))}setTimeout(A,5e3)},a.chunksWaiters[s.uuid]())}var a=this;a.chunks={},a.chunksWaiters={},a.receive=t}function r(A,t){if(A||(A={}),!t)return A;for(var r in t)try{A[r]=t[r]}catch(A){}return A}var a={ConvertToArrayBuffer:function(A,t){F.pack(A,function(A){t(A.buffer)})},ConvertToObject:function(A,t){F.unpack(A,t)}},s=!1,d=!1,l=Uint8Array.BYTES_PER_ELEMENT,c=Uint16Array.BYTES_PER_ELEMENT,B=Uint32Array.BYTES_PER_ELEMENT,g={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17};if(s)var u=["NULL","UNDEFINED","STRING","NUMBER","BOOLEAN","ARRAY","OBJECT","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT16ARRAY","UINT32ARRAY","FLOAT32ARRAY","FLOAT64ARRAY","ARRAYBUFFER","BLOB","BUFFER"];var m=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],p=function(A,t,r){var a=[];a[0]=[];for(var s=0;s<40;s++)a[0][s]=10>s?"0"+s.toString(10):s.toString(10);for(s=0;s<r;s++){var l=A.getUint8(t+s,d),c=~~(s/40)+1;"undefined"==typeof a[c]&&(a[c]=[]),a[c][s%40]=16>l?"0"+l.toString(16):l.toString(16)}for(webrtcdev.log("%c"+a[0].join(" "),"font-weight: bold;"),s=1;s<a.length;s++)webrtcdev.log(a[s].join(" "))},w=function(A){var t;if(A===void 0)t=g.UNDEFINED;else if(null===A)t=g.NULL;else{var r=A.constructor.name;if(r!==void 0)t=g[r.toUpperCase()];else switch(typeof A){case"string":t=g.STRING;break;case"number":t=g.NUMBER;break;case"boolean":t=g.BOOLEAN;break;case"object":A instanceof Array?t=g.ARRAY:A instanceof Int8Array?t=g.INT8ARRAY:A instanceof Int16Array?t=g.INT16ARRAY:A instanceof Int32Array?t=g.INT32ARRAY:A instanceof Uint8Array?t=g.UINT8ARRAY:A instanceof Uint16Array?t=g.UINT16ARRAY:A instanceof Uint32Array?t=g.UINT32ARRAY:A instanceof Float32Array?t=g.FLOAT32ARRAY:A instanceof Float64Array?t=g.FLOAT64ARRAY:A instanceof ArrayBuffer?t=g.ARRAYBUFFER:A instanceof Blob?t=g.BLOB:A instanceof Buffer?t=g.BUFFER:A instanceof Object&&(t=g.OBJECT);break;default:}}return t},h=function(A){var t=0,r=0,a=0,w=d,h=new ArrayBuffer(A[0].byte_length+A[0].header_size),C=new DataView(h);for(r=0;r<A.length;r++){var Q=t,U=A[r].header_size,E=A[r].type,F=A[r].length,b=A[r].value,H=A[r].byte_length,S=m[E],T=null===S?0:window[S+"Array"].BYTES_PER_ELEMENT;switch(E===g.BUFFER?C.setUint8(t,g.BLOB,w):C.setUint8(t,E,w),t+=l,s&&webrtcdev.info("Packing",E,u[E]),(E===g.ARRAY||E===g.OBJECT)&&(C.setUint16(t,F,w),t+=c,s&&webrtcdev.info("Content Length",F)),C.setUint32(t,H,w),t+=B,s&&(webrtcdev.info("Header Size",U,"bytes"),webrtcdev.info("Byte Length",H,"bytes")),E){case g.NULL:case g.UNDEFINED:break;case g.STRING:for(s&&webrtcdev.info("Actual Content %c\""+b+"\"","font-weight:bold;"),a=0;a<F;a++,t+=T)C.setUint16(t,b.charCodeAt(a),w);break;case g.NUMBER:case g.BOOLEAN:s&&webrtcdev.info("%c"+b.toString(),"font-weight:bold;"),C["set"+S](t,b,w),t+=T;break;case g.INT8ARRAY:case g.INT16ARRAY:case g.INT32ARRAY:case g.UINT8ARRAY:case g.UINT16ARRAY:case g.UINT32ARRAY:case g.FLOAT32ARRAY:case g.FLOAT64ARRAY:var I=new Uint8Array(C.buffer,t,H);I.set(new Uint8Array(b.buffer)),t+=H;break;case g.ARRAYBUFFER:case g.BUFFER:var I=new Uint8Array(C.buffer,t,H);I.set(new Uint8Array(b)),t+=H;break;case g.BLOB:case g.ARRAY:case g.OBJECT:break;default:throw"TypeError: Unexpected type found.";}s&&p(C,Q,t-Q)}return C},C=function(A,t){var r=0,a=d,w=t,h,Q,U,E,F;h=A.getUint8(t,a),t+=l,s&&webrtcdev.info("Unpacking",h,u[h]),(h===g.ARRAY||h===g.OBJECT)&&(Q=A.getUint16(t,a),t+=c,s&&webrtcdev.info("Content Length",Q)),U=A.getUint32(t,a),t+=B,s&&webrtcdev.info("Byte Length",U,"bytes");var b=m[h],H=null===b?0:window[b+"Array"].BYTES_PER_ELEMENT;switch(h){case g.NULL:case g.UNDEFINED:s&&p(A,w,t-w),E=null;break;case g.STRING:Q=U/H;var S=[];for(r=0;r<Q;r++){var T=A.getUint16(t,a);t+=H,S.push(rt(T))}E=S.join(""),s&&(webrtcdev.info("Actual Content %c\""+E+"\"","font-weight:bold;"),p(A,w,t-w));break;case g.NUMBER:E=A.getFloat64(t,a),t+=H,s&&(webrtcdev.info("Actual Content %c\""+E.toString()+"\"","font-weight:bold;"),p(A,w,t-w));break;case g.BOOLEAN:E=1===A.getUint8(t,a),t+=H,s&&(webrtcdev.info("Actual Content %c\""+E.toString()+"\"","font-weight:bold;"),p(A,w,t-w));break;case g.INT8ARRAY:case g.INT16ARRAY:case g.INT32ARRAY:case g.UINT8ARRAY:case g.UINT16ARRAY:case g.UINT32ARRAY:case g.FLOAT32ARRAY:case g.FLOAT64ARRAY:case g.ARRAYBUFFER:F=A.buffer.slice(t,t+U),t+=U,E=h===g.ARRAYBUFFER?F:new window[b+"Array"](F),s&&p(A,w,t-w);break;case g.BLOB:if(s&&p(A,w,t-w),window.Blob){var I=C(A,t),N=C(A,I.cursor);t=N.cursor,E=new Blob([N.value],{type:I.value})}else F=A.buffer.slice(t,t+U),t+=U,E=new Buffer(F);break;case g.ARRAY:for(s&&p(A,w,t-w),E=[],r=0;r<Q;r++)F=C(A,t),t=F.cursor,E.push(F.value);break;case g.OBJECT:for(s&&p(A,w,t-w),E={},r=0;r<Q;r++){var R=C(A,t),L=C(A,R.cursor);t=L.cursor,E[R.value]=L.value}break;default:throw"TypeError: Type not supported.";}return{value:E,cursor:t}},Q=function(A,t){for(var r=A.length,a=[],s=0,d=0,l=0;l<A.length;l++)(function(l){U(A[l],function(A){if(a[l]=A,d+=A[0].header_size+A[0].byte_length,++s===r){for(var c=[],B=0;B<a.length;B++)c=c.concat(a[B]);t(c,d)}})})(l)},U=function(A,t){var r=1,a=l+B,s=0,d=0,u;switch(u=w(A),r=void 0===m[u]||null===m[u]?0:window[m[u]+"Array"].BYTES_PER_ELEMENT,u){case g.UNDEFINED:case g.NULL:break;case g.NUMBER:case g.BOOLEAN:s=r;break;case g.STRING:d=A.length,s+=d*r;break;case g.INT8ARRAY:case g.INT16ARRAY:case g.INT32ARRAY:case g.UINT8ARRAY:case g.UINT16ARRAY:case g.UINT32ARRAY:case g.FLOAT32ARRAY:case g.FLOAT64ARRAY:d=A.length,s+=d*r;break;case g.ARRAY:return void Q(A,function(r,s){t([{type:u,length:A.length,header_size:a+c,byte_length:s,value:null}].concat(r))});case g.OBJECT:var p=[];for(var h in A)A.hasOwnProperty(h)&&(p.push(h),p.push(A[h]),d++);return void Q(p,function(A,r){t([{type:u,length:d,header_size:a+c,byte_length:r,value:null}].concat(A))});case g.ARRAYBUFFER:s+=A.byteLength;break;case g.BLOB:var C=A.type,U=new FileReader;return U.onload=function(A){Q([C,A.target.result],function(A,r){t([{type:u,length:d,header_size:a,byte_length:r,value:null}].concat(A))})},U.onerror=function(A){throw"FileReader Error: "+A},void U.readAsArrayBuffer(A);case g.BUFFER:s+=A.length;break;default:throw"TypeError: Type \""+A.constructor.name+"\" not supported.";}t([{type:u,length:d,header_size:a,byte_length:s,value:A}].concat([]))},E=function(A){var t=A instanceof DataView?A:new DataView(A),r=C(t,0);return r.value};s&&(window.Test={BIG_ENDIAN:d,LITTLE_ENDIAN:!0,Types:g,pack:h,unpack:C,serialize:U,deserialize:E});var F={pack:function(A,t){try{s&&webrtcdev.info("%cPacking Start","font-weight: bold; color: red;",A),U(A,function(A){s&&webrtcdev.info("Serialized Object",A),t(h(A))})}catch(A){throw A}},unpack:function(A,t){try{s&&webrtcdev.info("%cUnpacking Start","font-weight: bold; color: red;",A);var r=E(A);s&&webrtcdev.info("Deserialized Object",r),t(r)}catch(A){throw A}}};window.FileConverter=a,window.FileSelector=function(){function A(A,a){var s=document.createElement("input");s.type="file",a&&(s.multiple=!0),s.accept=r.accept,s.onchange=function(){return a?s.files.length?void A(s.files):void webrtcdev.error("No file selected."):s.files[0]?void(A(s.files[0]),s.parentNode.removeChild(s)):void webrtcdev.error("No file selected.")},s.style.display="none",(document.body||document.documentElement).appendChild(s),t(s)}function t(A){var t=new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,button:0,buttons:0,mozInputSource:1}),r=A.dispatchEvent(t)}var r=this;r.selectSingleFile=A,r.selectMultipleFiles=function(t){A(t,!0)},r.accept="*.*"},window.FileBufferReader=function(){function r(A,t){if(null==A||"object"!=typeof A)return A;if(A.constructor!=Object&&A.constructor!=Array)return A;if(A.constructor==Date||A.constructor==RegExp||A.constructor==Function||A.constructor==String||A.constructor==Number||A.constructor==Boolean)return new A.constructor(A);for(var a in t=t||new A.constructor,A)t[a]="undefined"==typeof t[a]?r(A[a],null):t[a];return t}var s=this,d=new A;s.chunks={},s.users={},s.readAsArrayBuffer=function(A,t,a){d.readAsArrayBuffer(s,{file:A,earlyCallback:function(A){t(r(A,{currentPosition:-1}))},extra:a||{userid:0}})},s.getNextChunk=function(A,t,a){try{for(x in lt)if(lt[x].userid==dt)for(y in lt[x].filearray)lt[x].filearray[y].pid||console.warn("[ fbr.getNextChunk ] pid does mot exist "),lt[x].filearray[y].pid.includes(A)&&"stop"==lt[x].filearray[y].status&&(lt[x].filearray[y].status="stopped")}catch(A){webrtcdev.log(A)}var d;"undefined"!=typeof A.currentPosition&&(d=A.currentPosition,A=A.uuid);var l=s.chunks[A];if(l){"undefined"==typeof a?("undefined"!=typeof d&&(s.chunks[A].currentPosition=d),s.chunks[A].currentPosition++,d=s.chunks[A].currentPosition):(!s.users[a+""]&&(s.users[a+""]={fileUUID:A,userid:a,currentPosition:-1}),"undefined"!=typeof d&&(s.users[a+""].currentPosition=d),s.users[a+""].currentPosition++,d=s.users[a+""].currentPosition);var c=l[d];return c?void(c=r(c),"undefined"!=typeof a&&(c.remoteUserId=a+""),!!c.start&&s.onBegin(c),!!c.end&&s.onEnd(c),s.onProgress(c),s.convertToArrayBuffer(c,function(A){return c.currentPosition==c.maxChunks?void t(A,!0):void t(A,!1)})):(delete s.chunks[A],void s.convertToArrayBuffer({chunkMissing:!0,currentPosition:d,uuid:A},t))}};var l=new t(s);s.addChunk=function(A,t){A&&l.receive(A,function(A){s.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:A.currentPosition,uuid:A.uuid},t)})},s.chunkMissing=function(A){delete l.chunks[A.uuid],delete l.chunksWaiters[A.uuid]},s.onBegin=function(){},s.onEnd=function(){},s.onProgress=function(){},s.convertToObject=a.ConvertToObject,s.convertToArrayBuffer=a.ConvertToArrayBuffer,s.setMultipleUsers=function(){}}}(),window.requestAnimationFrame||(wn=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),window.cancelAnimationFrame||(hn=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame),window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext),Cn=window.URL||window.webkitURL,navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.webkitMediaStream&&(window.MediaStream=window.webkitMediaStream);var un=!!navigator.webkitGetUserMedia,mn={AudioContext:window.AudioContext||window.webkitAudioContext},pn=function(){function A(A){for(var r=t(A),a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:g(r.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:r.width,id:176},{data:r.height,id:186}]}]}]}]}],s=0,c=0;s<A.length;){var B=[],u=0;do B.push(A[s]),u+=A[s].duration,s++;while(s<A.length&&u<3e4);var m=0,p={id:524531317,data:[{data:c,id:231}].concat(B.map(function(A){var t=l({discardable:0,frame:A.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:at(m)});return m+=A.duration,{data:t,id:163}}))};a[1].data.push(p),c+=u}return d(a)}function t(A){if(!A[0])return void webrtcdev.warn("Something went wrong. Maybe WebP format is not supported in the current browser.");for(var t=A[0].width,r=A[0].height,a=A[0].duration,s=1;s<A.length;s++)a+=A[s].duration;return{duration:a,width:t,height:r}}function r(A){for(var t=[];0<A;)t.push(255&A),A>>=8;return new Uint8Array(t.reverse())}function a(A){return new Uint8Array(A.split("").map(function(A){return A.charCodeAt(0)}))}function s(A){var t=[],r=A.length%8?Array(9-A.length%8).join("0"):"";A=r+A;for(var a=0;a<A.length;a+=8)t.push(parseInt(A.substr(a,8),2));return new Uint8Array(t)}function d(A){for(var t=[],l=0,c;l<A.length;l++){c=A[l].data,"object"==typeof c&&(c=d(c)),"number"==typeof c&&(c=s(c.toString(2))),"string"==typeof c&&(c=a(c));var B=c.size||c.byteLength||c.length,g=tt(tt(At(B)/At(2))/8),u=B.toString(2),m=Array(7*g+7+1-u.length).join("0")+u,p=Array(g).join("0")+"1"+m;t.push(r(A[l].id)),t.push(s(p)),t.push(c)}return new Blob(t,{type:"video/webm"})}function l(A){var t=0;if(A.keyframe&&(t|=128),A.invisible&&(t|=8),A.lacing&&(t|=A.lacing<<1),A.discardable&&(t|=1),127<A.trackNum)throw"TrackNumber > 127 not supported";var r=[128|A.trackNum,A.timecode>>8,255&A.timecode,t].map(function(A){return rt(A)}).join("")+A.frame;return r}function c(A){for(var t=A.RIFF[0].WEBP[0],r=t.indexOf("\x9D\x01*"),a=0,s=[];4>a;a++)s[a]=t.charCodeAt(r+3+a);var d,l,c;return c=s[1]<<8|s[0],d=16383&c,c=s[3]<<8|s[2],l=16383&c,{width:d,height:l,data:t,riff:A}}function B(A){for(var t=0,r={};t<A.length;){var a=A.substr(t,4),s=parseInt(A.substr(t+4,4).split("").map(function(A){var t=A.charCodeAt(0).toString(2);return Array(8-t.length+1).join("0")+t}).join(""),2),d=A.substr(t+4+4,s);t+=8+s,r[a]=r[a]||[],"RIFF"==a||"LIST"==a?r[a].push(B(d)):r[a].push(d)}return r}function g(A){return[].slice.call(new Uint8Array(new Float64Array([A]).buffer),0).map(function(A){return rt(A)}).reverse().join("")}function u(A){this.frames=[],this.duration=A||1,this.quality=100}return u.prototype.add=function(A,t){if("canvas"in A&&(A=A.canvas),"toDataURL"in A&&(A=A.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(A))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:A,duration:t||this.duration})},u.prototype.compile=function(){return new A(this.frames.map(function(A){var t=c(B(atob(A.image.slice(23))));return t.duration=A.duration,t}))},{Video:u,toWebM:A}}();"",Ge.getFromDisk=function(A,t){if(!t)throw"callback is mandatory.";webrtcdev.log("Getting recorded "+("all"===A?"blobs":A+" blob ")+" from disk!"),vn.Fetch(function(r,a){"all"!==A&&a===A+"Blob"&&t&&t(r),"all"===A&&t&&t(r,a.replace("Blob",""))})},Ge.writeToDisk=function(A){webrtcdev.log("Writing recorded blob(s) to disk!"),A=A||{},A.audio&&A.video&&A.gif?A.audio.getDataURL(function(t){A.video.getDataURL(function(r){A.gif.getDataURL(function(A){vn.Store({audioBlob:t,videoBlob:r,gifBlob:A})})})}):A.audio&&A.video?A.audio.getDataURL(function(t){A.video.getDataURL(function(A){vn.Store({audioBlob:t,videoBlob:A})})}):A.audio&&A.gif?A.audio.getDataURL(function(t){A.gif.getDataURL(function(A){vn.Store({audioBlob:t,gifBlob:A})})}):A.video&&A.gif?A.video.getDataURL(function(t){A.gif.getDataURL(function(A){vn.Store({videoBlob:t,gifBlob:A})})}):A.audio?A.audio.getDataURL(function(A){vn.Store({audioBlob:A})}):A.video?A.video.getDataURL(function(A){vn.Store({videoBlob:A})}):A.gif&&A.gif.getDataURL(function(A){vn.Store({gifBlob:A})})},"undefined"!=typeof module&&(module.exports=Ge),"function"==typeof define&&define.amd&&define("RecordRTC",[],function(){return Ge}),Ye.getFromDisk=Ge.getFromDisk,Ye.writeToDisk=Ge.writeToDisk,"undefined"!=typeof Ge&&(Ge.MRecordRTC=Ye);(function(A){A&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(A.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var A={getContext:function(){return A},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return A},A.HTMLVideoElement=function(){}),"undefined"==typeof location&&(A.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof on&&(A.screen={width:0,height:0}),"undefined"==typeof Cn&&(A.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),A.window=global)})("undefined"==typeof global?null:global);var wn=window.requestAnimationFrame;"undefined"==typeof wn&&("undefined"!=typeof webkitRequestAnimationFrame&&(wn=webkitRequestAnimationFrame),"undefined"!=typeof mozRequestAnimationFrame&&(wn=mozRequestAnimationFrame));var hn=window.cancelAnimationFrame;"undefined"==typeof hn&&("undefined"!=typeof webkitCancelAnimationFrame&&(hn=webkitCancelAnimationFrame),"undefined"!=typeof mozCancelAnimationFrame&&(hn=mozCancelAnimationFrame));var fn=window.AudioContext;"undefined"==typeof fn&&("undefined"!=typeof webkitAudioContext&&(fn=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(fn=mozAudioContext));var Cn=window.URL;"undefined"==typeof Cn&&"undefined"!=typeof webkitURL&&(Cn=webkitURL),"undefined"!=typeof navigator&&"undefined"==typeof navigator.getUserMedia&&("undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var Qn=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),Un=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),En=!Un&&!Qn&&!!navigator.webkitGetUserMedia,Fn=window.MediaStream;"undefined"==typeof Fn&&"undefined"!=typeof webkitMediaStream&&(Fn=webkitMediaStream),"undefined"!=typeof Fn&&(!("getVideoTracks"in Fn.prototype)&&(Fn.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var A=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&A.push(t)}),A},Fn.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var A=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&A.push(t)}),A}),!("stop"in Fn.prototype)&&(Fn.prototype.stop=function(){this.getAudioTracks().forEach(function(A){!A.stop||A.stop()}),this.getVideoTracks().forEach(function(A){!A.stop||A.stop()})}));var bn={};"undefined"==typeof fn?"undefined"!=typeof webkitAudioContext&&(bn.AudioContext=webkitAudioContext):bn.AudioContext=fn,"undefined"!=typeof Ge&&(Ge.Storage=bn),"undefined"!=typeof Ge&&(Ge.MediaStreamRecorder=Oe),"undefined"!=typeof Ge&&(Ge.StereoAudioRecorder=_e),"undefined"!=typeof Ge&&(Ge.CanvasRecorder=qe),"undefined"!=typeof Ge&&(Ge.WhammyRecorder=Ve);var pn=function(){function A(A){this.frames=[],this.duration=A||1,this.quality=.8}function t(A){var t=Cn.createObjectURL(new Blob([A.toString(),"this.onmessage =  function (e) {"+A.name+"(e.data);}"],{type:"application/javascript"})),r=new Worker(t);return Cn.revokeObjectURL(t),r}function r(A){function t(A,t,r){return[{data:A,id:231}].concat(r.map(function(A){var r=c({discardable:0,frame:A.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:at(t)});return t+=A.duration,{data:r,id:163}}))}function r(A){if(!A[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=A[0].width,r=A[0].height,a=A[0].duration,s=1;s<A.length;s++)a+=A[s].duration;return{duration:a,width:t,height:r}}function a(A){for(var t=[];0<A;)t.push(255&A),A>>=8;return new Uint8Array(t.reverse())}function s(A){return new Uint8Array(A.split("").map(function(A){return A.charCodeAt(0)}))}function d(A){var t=[],r=A.length%8?Array(9-A.length%8).join("0"):"";A=r+A;for(var a=0;a<A.length;a+=8)t.push(parseInt(A.substr(a,8),2));return new Uint8Array(t)}function l(A){for(var t=[],r=0,c;r<A.length;r++){c=A[r].data,"object"==typeof c&&(c=l(c)),"number"==typeof c&&(c=d(c.toString(2))),"string"==typeof c&&(c=s(c));var B=c.size||c.byteLength||c.length,g=tt(tt(At(B)/At(2))/8),u=B.toString(2),m=Array(7*g+7+1-u.length).join("0")+u,p=Array(g).join("0")+"1"+m;t.push(a(A[r].id)),t.push(d(p)),t.push(c)}return new Blob(t,{type:"video/webm"})}function c(A){var t=0;if(A.keyframe&&(t|=128),A.invisible&&(t|=8),A.lacing&&(t|=A.lacing<<1),A.discardable&&(t|=1),127<A.trackNum)throw"TrackNumber > 127 not supported";var r=[128|A.trackNum,A.timecode>>8,255&A.timecode,t].map(function(A){return rt(A)}).join("")+A.frame;return r}function B(A){for(var t=A.RIFF[0].WEBP[0],r=t.indexOf("\x9D\x01*"),a=0,s=[];4>a;a++)s[a]=t.charCodeAt(r+3+a);var d,l,c;return c=s[1]<<8|s[0],d=16383&c,c=s[3]<<8|s[2],l=16383&c,{width:d,height:l,data:t,riff:A}}function g(A,t){return parseInt(A.substr(t+4,4).split("").map(function(A){var t=A.charCodeAt(0).toString(2);return Array(8-t.length+1).join("0")+t}).join(""),2)}function u(A){for(var t=0,r={};t<A.length;){var a=A.substr(t,4),s=g(A,t),d=A.substr(t+4+4,s);t+=8+s,r[a]=r[a]||[],"RIFF"===a||"LIST"===a?r[a].push(u(d)):r[a].push(d)}return r}function m(A){return[].slice.call(new Uint8Array(new Float64Array([A]).buffer),0).map(function(A){return rt(A)}).reverse().join("")}var p=new function(A){var a=r(A);if(!a)return[];for(var s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:m(a.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:a.width,id:176},{data:a.height,id:186}]}]}]}]}],d=0,c=0;d<A.length;){var B=[],g=0;do B.push(A[d]),g+=A[d].duration,d++;while(d<A.length&&g<3e4);var u={id:524531317,data:t(c,0,B)};s[1].data.push(u),c+=g}return l(s)}(A.map(function(A){var t=B(u(atob(A.image.slice(23))));return t.duration=A.duration,t}));postMessage(p)}return A.prototype.add=function(A,t){if("canvas"in A&&(A=A.canvas),"toDataURL"in A&&(A=A.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(A))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:A,duration:t||this.duration})},A.prototype.compile=function(A){var a=t(r);a.onmessage=function(t){return t.data.error?void webrtcdev.error(t.data.error):void A(t.data)},a.postMessage(this.frames)},{Video:A}}();"undefined"!=typeof Ge&&(Ge.Whammy=pn);var vn={init:function(){function A(A){A.createObjectStore(r.dataStoreName)}function t(){function A(A){t.objectStore(r.dataStoreName).get(A).onsuccess=function(t){r.callback&&r.callback(t.target.result,A)}}var t=d.transaction([r.dataStoreName],"readwrite");r.videoBlob&&t.objectStore(r.dataStoreName).put(r.videoBlob,"videoBlob"),r.gifBlob&&t.objectStore(r.dataStoreName).put(r.gifBlob,"gifBlob"),r.audioBlob&&t.objectStore(r.dataStoreName).put(r.audioBlob,"audioBlob"),A("audioBlob"),A("videoBlob"),A("gifBlob")}var r=this;if("undefined"==typeof indexedDB||"undefined"==typeof indexedDB.open)return void webrtcdev.error("IndexedDB API are not available in this browser.");var a=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),s=indexedDB.open(a,1),d;s.onerror=r.onError,s.onsuccess=function(){if(d=s.result,d.onerror=r.onError,!d.setVersion)t();else if(1!==d.version){var a=d.setVersion(1);a.onsuccess=function(){A(d),t()}}else t()},s.onupgradeneeded=function(t){A(t.target.result)}},Fetch:function(A){return this.callback=A,this.init(),this},Store:function(A){return this.audioBlob=A.audioBlob,this.videoBlob=A.videoBlob,this.gifBlob=A.gifBlob,this.init(),this},onError:function(A){webrtcdev.error(JSON.stringify(A,null,"\t"))},dataStoreName:"recordRTC",dbName:null};"undefined"!=typeof Ge&&(Ge.DiskStorage=vn),"undefined"!=typeof Ge&&(Ge.GifRecorder=ze);var yn=0;Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return!(!(0<this.currentTime)||this.paused||this.ended||!(2<this.readyState))}});var Hn={},Sn=null,Tn=null,In=[],Nn={},Rn=!1,Ln;this.getlisteninlink=function(){Ct||console.error("cant generate listenin link , no session id found ");try{webrtcdev.log(" Current Session ",window.origin);let A=window.origin+"/#"+Ct+"?appname=webrtcwebcall&role=inspector&audio=0&video=0";return A}catch(A){return webrtcdev.error("ListenIn :",A),!1}},this.sendlisteninlink=function(A,t,r,a){var s={apikey:t,senderuseremail:r,receiveruseremail:a,webrtcsessionid:webrtcdevobj.sessionid,connectiontype:1};return fetch(A,{method:"post",crossDomain:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:t,"Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(s)}).then(A=>A.json()).then(A=>console.log("Listenin API response ",A)).catch(A=>console.error("Listenin API response ",A))};var Mn="",Dn=null,kn,On,xn,Kn,_n,Pn;try{Dn=new Worker("js/timekeeper.js"),Dn.addEventListener("message",function(A){let t=l(A.data.remotetime);A.data.remotetime&&t&&(t.innerHTML=A.data.time)},!1)}catch(A){webrtcdev.error("[timerjs]",A)}var Vn=function(){try{var A=[];for(x in lt){let t=lt[+x+1];if(!t)break;webrtcdev.debug(" [timer js] startPeersTime for ",t.userid),He(t),A.push({zone:t.zone,userid:t.userid,remotetime:"remoteTime_"+t.userid}),Mt=!0}webrtcdev.info("[timerjs] Final tobj ",A),0<A.length&&Dn.postMessage(A)}catch(A){webrtcdev.error(A)}};this.getwebrtcdevlogs=function(){return webrtcdevlogs?webrtcdevlogs:null},this.sendwebrtcdevLogs=function(A,t,r){const a=new FormData;a.append("name",username||"no name"),document.getElementById(qt.screenshotContainer)&&a.append("scimage",document.getElementById(qt.screenshotContainer).src),document.getElementById(qt.logsContainer)&&(document.getElementById(qt.logsContainer).innerText=webrtcdevlogs),a.append("apikey",t),a.append("useremail",pt),a.append("sessionid",Ct),a.append("message",r);{a.append("logfileContent",webrtcdevlogs)}return fetch(A,{method:"POST",body:a})},this.showUserStats=showUserStats=function(){var A=" userid-"+dt+" Email-"+pt+" Audio-"+outgoing.audio+" Video-"+outgoing.video+" Role- "+$t;document.getElementById("userstatus")?document.getElementById("userstatus").innerHTML=A:document.body.append("USER Status "+A)},this.getscreenshot=function(A){var t=document.querySelector(A);html2canvas(t).then(A=>A.toDataURL())};var zn=function(A){for(x in lt)if(lt[x].userid==A)return lt[x];return null},Gn=function(A){for(x in lt)if(lt[x].userid==A)return x;return null},Xn=function(A){for(x in webrtcdev.log("peerinfomanager] find perinfo SDP ",A),st.peers)if(st.peers[x].userid==A){webrtcdev.log("peerinfomanager] PeerInfo Remote ",st.peers[x]);let A=st.peers[x].peer.currentRemoteDescription;webrtcdev.log("peerinfomanager] PeerInfo Remote SDP ",A.type,A.sdp);let t=A.sdp.split("\n").map(A=>A.trim());t.forEach(function(A){if(0===A.indexOf("a=fingerprint:")){let t=A.substr(14).split(" ");console.log("algorithm - ",t[0]),console.log("fingerprint - ",t[1])}if(0===A.indexOf("m=audio")){let t=A.substr(8).split(" ");console.log("Audio codecs - ",t)}if(0===A.indexOf("m=video")){let t=A.substr(8).split(" ");console.log("Video codecs - ",t)}if(0===A.indexOf("c=IN IP4")){let t=A.substr(9).split(" ");console.log("Contact line - ",t)}})}return null};this.appendToPeerValue=appendToPeerValue=function(A,t,r){try{if(!t||!r)return;let a=zn(A);(a[t]||a.hasOwnProperty(t))&&removefromPeerValue(A,t),a[t]=r;let s=Gn(a.userid);lt[s]=a,webrtcdev.log("[peerinfomanager] appendToPeerValue - update webcallpeers index "+s,lt[s])}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue errorr - ",A)}},this.removefromPeerValue=removefromPeerValue=function(A,t){webrtcdev.log("[peerinfomanager] removefromPeerValue "+A+" key "+t);let r=zn(A);return delete r[t]},this.getwebcallpeers=function(){return lt};var Jn=function(A,t){return webrtcdev.log(" [widgets] widgetsobj ",t),new Promise(function(t){if(Dt.active?(webrtcdev.log(" chat objs ",Dt.inputBox,Dt.inputBox.text_id,document.getElementById(Dt.inputBox.text_id)),Dt.inputBox&&Dt.inputBox.text_id?(webrtcdev.log("[sessionmanager] chatObj - Assign chat Box "),me(Dt)):(webrtcdev.log("[sessionmanager] chatobj - Create chat Box "),ue(Dt)),webrtcdev.log("[sessionmanager] chat widget loaded ")):webrtcdev.log("[sessionmanager] chat widget deactivated  "),Ot&&Ot.active&&"inspector"!=$t?(Ot.button.id&&document.getElementById(Ot.button.id)?(webrtcdev.log("[sessionmanager] Assign Screen Record Button "),Be(Ot)):(webrtcdev.log("[sessionmanager] Create Screen Record Button "),ge(Ot)),webrtcdev.log(" [sessionmanager] Screen record widget loaded ")):Ot&&!Ot.active&&(Ot.button&&Ot.button.id&&document.getElementById(Ot.button.id)&&(document.getElementById(Ot.button.id).className="inactiveButton"),webrtcdev.warn("[sessionmanager] Screen record widget deactivated")),jt.active?(jt.button.shareButton.id&&l(jt.button.shareButton.id)?(webrtcdev.log("[sessionmanager] Assign screenshare Button "),le(jt.button.shareButton)):(webrtcdev.log("[sessionmanager] Create screenshare Button "),de(jt)),webrtcdev.log(" [sessionmanager]screen share widget loaded ")):webrtcdev.warn("[sessionmanager] screen share widget deactivated "),Gt&&Gt.active?(Gt.button.id&&document.getElementById(Gt.button.id)?(webrtcdev.log("[sessionmanager] Reconnect Button Assigned"),HA(Gt.button.id)):(webrtcdev.log("[sessionmanager]Rconnect Button created"),yA(Gt)),webrtcdev.log(" [sessionmanager]reconnect widget loaded ")):Gt&&!Gt.active&&(Gt.button&&Gt.button.id&&document.getElementById(Gt.button.id)&&(document.getElementById(Gt.button.id).className="inactiveButton"),webrtcdev.warn(" [sessionmanager] reconnect widget deactivated ")),Xt&&Xt.active?(g("cursor1"),g("cursor2"),webrtcdev.log(" [sessionmanager] cursor widget not loaded ")):webrtcdev.warn(" [sessionmanager] cursor widget deactivated "),Wt&&Wt.active?(Wt.button.id&&document.getElementById(Wt.button.id),webrtcdev.log("[widget js] listenin widget loaded ")):Wt&&!Wt.active&&(Wt.button&&Wt.button.id&&document.getElementById(Wt.button.id)&&(document.getElementById(Wt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] listenin widget deactivated ")),Lt&&Lt.active?(fe(Lt),g(Lt.container.id)):Lt&&!Lt.active&&webrtcdev.warn("[widget js] timer widget deactivated "),_t&&_t.active?(_t.container&&_t.container.id&&document.getElementById(_t.container.id)&&(document.getElementById(_t.container.id).hidden=!0),_t.button&&_t.button.id&&document.getElementById(_t.button.id)?he(_t):we(_t),Ln=function(){function A(A){r&&r.contentWindow.postMessage({canvasDesignerSyncData:A},"*")}function t(){event.data&&event.data.canvasDesignerSyncData&&d(event.data.canvasDesignerSyncData)}var r;let a={line:!0,pencil:!0,dragSingle:!0,dragMultiple:!0,eraser:!0,rectangle:!0,arc:!0,bezier:!0,quadratic:!0,text:!0};var s="pencil",d=function(A){webrtcdev.log("[widget js] syncDataListener",A)},l=window.addEventListener?"addEventListener":"attachEvent",c=window[l],B="attachEvent"==l?"onmessage":"message";return c(B,function(A){webrtcdev.log(" [widget js] CanvasDesigner parent received message : ",A.data),A.data.modalpopup?sn.click():A.data||A.data.canvasDesignerSyncData?d(A.data.canvasDesignerSyncData):(!A.data||!A.data.canvasDesignerSyncData)&&webrtcdev.log("[widget js] parent received unexpected message")},!1),{appendTo:function(A){r=document.createElement("iframe"),r.id="drawboard",r.src="widget.html?tools="+JSON.stringify(a)+"&selectedIcon="+s,r.style.width="100%",r.style.height="100%",r.allowtransparency=!0,r.style.border=0,A.appendChild(r)},destroy:function(){r&&r.parentNode.removeChild(r),window.removeEventListener("message",t)},addSyncListener:function(A){d=A},syncData:A,setTools:function(A){a=A},setSelected:function(A){"undefined"!=typeof a[A]&&(s=A)}}}(),webrtcdev.log("[widget js] draw widget loaded ")):_t&&!_t.active&&(_t.button&&_t.button.id&&document.getElementById(_t.button.id)&&(document.getElementById(_t.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] draw widget deactivated ")),Pt.active&&_A(),Vt.active&&MA(),kt.active?(webrtcdev.log("[widget js] fileshareobj ",kt),A.enableFileSharing=!0,A.filesContainer=document.getElementById(kt.fileShareContainer),kt.button.id&&document.getElementById(kt.button.id)?F(kt):E(kt),webrtcdev.log(" [widget js] File sharing widget loaded ")):webrtcdev.warn("[widget js] File sharing widget not loaded "),Zt&&Zt.active)try{webrtcdev.log("[widget js]statisticsobj ",Zt),document.getElementById(Zt.statsConainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] statisticsobj statsConainer not found",A)}if(qt&&qt.active)try{webrtcdev.log("[widget js] helpobj ",qt,document.getElementById(qt.helpContainer)),document.getElementById(qt.helpContainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] helpobj helpContainer not found",A)}t("success")})},Yn=function(A,t,r){webrtcdev.info("[sessionmanager] - openWebRTC channel: ",A),socket.emit("open-channel",{channel:A,sender:t,maxAllowed:r}),ie(" Making a new session ")},Wn=function(A,t){ie("Joining an existing session "+A),webrtcdev.info(" [sessionmanager] joinWebRTC channel: ",A),Rt&&showUserStats(),socket.emit("join-channel",{channel:A,sender:t,extra:{userid:t,name:mt||"",color:wt||"",email:pt||"",role:$t||"participant"}})},jn=function(t,r){return webrtcdev.log("[sessionmanager] setRtcConn - initiating RtcConn with signaller ",r),st=new RTCMultiConnection,st.channel=this.sessionid,st.socketURL=r.signaller,st.iceServers=r.turn.iceServers,st.iceTransportPolicy="all",st.bundlePolicy="balanced",st.rtcpMuxPolicy="require",st.iceCandidatePoolSize=0,st.sdpSemantics="unified-plan",st.sdpConstraints={mandatory:{OfferToReceiveAudio:Ft||!0,OfferToReceiveVideo:bt||!0},optional:[{VoiceActivityDetection:!1}]},st.candidates={host:!0,stun:!0,turn:!0},st.session={video:Ht||!0,audio:yt||!0,data:St||!0},st.direction="many-to-many",st.dontCaptureUserMedia=!Ht||!1,st.dontGetRemoteStream=!Ht||!1,st.dontAttachStream=!Ht||!1,st.isLowBandwidth=1>navigator.connection.downlink,st.bandwidth={screen:!0,audio:!0,video:!0},st.codecs={audio:"opus",video:"VP9"},st.version="6.6.0",st.onopen=function(A){webrtcdev.log("[sessionmanager] onopen - event ",A);try{if(ie(A.extra.name+" joined session ","info"),showdesktopnotification(document.title,A.extra.name+" joined session "),A.userid==dt)webrtcdev.log("[sessionmanager] onopen - selfuserid ",dt," joined the session "),webrtcdev.log("[sessionmanager] onopen - dispatch onLocalConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onLocalConnect"}}));else{if(webrtcdev.log(" SDP",Xn(A.userid)),"unlimited"!=nn.maxAllowed&&lt.length<=nn.maxAllowed){webrtcdev.log("[sessionmanager] onopen: peer length "+lt.length+" is less than max capacity of session  of the session "+nn.maxAllowed);let t=zn(A.userid),r=A.extra.name,a=A.extra.color,s=A.extra.email,d=A.extra.role;t?(webrtcdev.log("[sessionmanager] onopen - PeerInfo was already present, this is s rejoin, update the peerinfo "),ZA(A.userid,r,a,s,d,"remote"),ie(A.extra.role+" "+A.type)):(webrtcdev.log("[sessionmanager] onopen - create new peerinfo"),"LOCAL"==r&&(r="REMOTE"),ZA(A.userid,r,a,s,d,"remote"),ie(A.extra.role+"  "+A.type),t=zn(A.userid)),t.stream="",t.streamid="",m(t)}else webrtcdev.error("[sessionmanager] onopen - max capacity of session is reached ",nn.maxAllowed),oe("Another user is trying to join this channel but max count [ "+nn.maxAllowed+" ] is reached");webrtcdev.log("[sessionmanager] onopen - dispatch onSessionConnect"),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onSessionConnect"}}))}Rt||(!localStorage.getItem("userid")&&localStorage.setItem("userid",dt),!localStorage.getItem("channel")&&localStorage.setItem("channel",t))}catch(A){ie("problem in session open ","warning"),webrtcdev.error("[sessionmanager] onopen - problem in session open",A)}},st.onMediaError=function(A,t){webrtcdev.error("[sessionmanager] onMediaError - ",A," constraints ",t),webrtcdev.warn("[sessionmanager] onMediaError - Joining without camera Stream"),ie(A.name+" Joining without camera Stream ","warning"),en=!1;let r=zn(dt);r.type="Local",r.stream="",r.streamid="",m(r)},st.onstream=function(A){webrtcdev.log("[sessionmanager] onstream - event ",A),"local"==A.type&&(en=!0);var t=zn(A.userid);if(!t){webrtcdev.error("[sessionmanager] onstream - PeerInfo not present in webcallpeers "+A.userid+" creating it now ");let r=A.userid;ZA(r,A.extra.name,A.extra.color,A.extra.email,A.extra.role,A.type),appendToPeerValue(r,"stream",A.stream),appendToPeerValue(r,"streamid",A.stream.streamid),t=zn(r),m(t),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",r)}else"inspector"==$t&&"local"==A.type?(webrtcdev.warn("[sessionmanager] onstream - ignore any incoming stream from inspector"),m(t)):(webrtcdev.log("[sessionmanager] onstream - update PeerInfo with incoming stream and streamId "),appendToPeerValue(userid,"type",A.type),appendToPeerValue(userid,"stream",A.stream),appendToPeerValue(userid,"streamid",A.stream.streamid),t=zn(userid),m(t),webrtcdev.log(" [sessionmanager] onstream - updated webcallview for ",t.userid))},st.onstreamended=function(A){webrtcdev.warn("[sessionmanager] On streamEnded event ",A);let t=document.getElementById(A.streamid);t&&t.parentNode.removeChild(t)},st.chunkSize=50000,st.onmessage=function(t){if(webrtcdev.log("[sessionmanager] onmessage ",t),t.data.typing);else if(t.data.stoppedTyping);else{let B=zn(t.userid);switch(t.data.type){case"screenshare":if("startscreenshare"==t.data.message){let A=t.data.screenid;ie("Starting screen share ",A);let r=document.getElementById(jt.button.shareButton.id);r.className=jt.button.shareButton.class_busy,r.innerHTML=jt.button.shareButton.html_busy,r.disabled=!0,Le("join",A)}else if("screenshareStartedViewing"==t.data.message)ce("","screenshareStartedViewing");else if("stoppedscreenshare"==t.data.message){ie("Screenshare has stopped : "+e.data.screenStreamid);let A=document.getElementById(jt.button.shareButton.id);A.className=jt.button.shareButton.class_off,A.innerHTML=jt.button.shareButton.html_off,A.disabled=!1,De(e.data.screenStreamid)}else webrtcdev.warn("[sessionmanager] unrecognized screen-share message ",t.data.message);break;case"chat":nA({header:t.extra.name,message:t.data.message,userinfo:t.data.userinfo,color:t.extra.color}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"chat",action:"onchat"}}));break;case"imagesnapshot":S(null,B,t.data.message,t.data.name,"imagesnapshot"),I(null,B,t.data.message,t.data.name,"imagesnapshot");break;case"videoRecording":S(null,B,t.data.message,t.data.name,"videoRecording"),I(null,B,t.data.message,t.data.name,"videoRecording");break;case"videoScreenRecording":S(null,B,t.data.message,t.data.name,"videoScreenRecording"),I(null,B,t.data.message,t.data.name,"videoScreenRecording");break;case"file":nA({header:t.extra.name,message:t.data.message,userinfo:A(st.blobURLs[t.userid],"chat-message.png"),color:t.extra.color});break;case"canvas":t.data.draw?Ln.syncData(t.data.draw):t.data.board?(webrtcdev.log("[sessionmanager] Canvas : ",t.data),"remote"==t.data.board.from&&"open"==t.data.board.event&&!0!=Rn&&pe(t.data.board)):webrtcdev.warn(" Board data mismatch",t.data);break;case"texteditor":VA(t.data.data);break;case"codeeditor":OA(t.data.data);break;case"pointer":var r=document.getElementById("cursor2");r?"startCursor"==e.data.action?(r.setAttribute("style","display:block"),TA(r,t.data.corX,t.data.corY)):"stopCursor"==t.data.action&&r.setAttribute("style","display:none"):alert(" Cursor for remote is not present ");break;case"timer":B&&(!B.time&&(B.time=t.data.time),!B.zone&&(B.zone=t.data.zone),webrtcdev.log("[sessionmanager] webcallpeers appended with zone and datetime ",B)),webrtcdev.log("[sessionmanager] peerTimerStarted, start peerTimeZone and startPeersTime"),WA(t.data.zone,t.userid),Vn(t.data.time,t.data.zone,t.userid);break;case"buttonclick":var a=l(t.data.buttonName);a.getAttribute("lastClickedBy")!=st.userid&&(a.setAttribute("lastClickedBy",t.userid),a.click());break;case"syncOldFiles":EA();break;case"shareFileRemove":webrtcdev.log(" [sessionmanager] shareFileRemove - remove file : ",t.data._filename);var s=t.data._element,d=t.data._filename;let u="removeButton"+s;if(document.getElementById("display"+d)&&g("display"+d),document.getElementById(s))g(s),D(s),webrtcdev.log(" [sessionmanager] shareFileRemove done");else return void webrtcdev.log(" [sessionmanager] shareFileRemove already done since ",s,"element doesnt exist ");document.getElementById(u).click(),g(u);break;case"shareFileStopUpload":var c=t.data._element;for(x in webrtcdev.log(" [sessionmanager] shareFileStopUpload",c),lt)for(y in lt[x].filearray)if(lt[x].filearray[y].pid==c)return webrtcdev.log("[ sessionmanager ] shareFileStopUpload -  filepid ",lt[x].filearray[y].pid," | status ",lt[x].filearray[y].status),lt[x].filearray[y].status="stopped",M(c),void D(c);break;case"sendstats":Se();break;case"receivedstats":Te(t.userid,t.data.message);break;default:webrtcdev.warn("[sessionmanager] unrecognizable message from peer  ",t);}}},st.sendMessage=function(A){webrtcdev.log("[session manager] sendMessage ",A),A.userid=st.userid,A.extra=st.extra,st.sendCustomMessage(A)},st.onleave=function(A){webrtcdev.log("[session manager] onleav -  ",A),webrtcdev.warn("[session manager] onleave - userid left ",A.userid);var t=zn(A.userid);t&&(t.name&&(ie(t.name+" left the conversation."),webrtcdev.log("[session manager] onleave - name ",t.name)),webrtcdev.warn("[session manager]  onleave -  remove peerinfo ",t," from webcallpeers ",lt),C(t),qA(A.userid))},st.onclose=function(A){webrtcdev.warn("[session manager] RTCConn on close  ",A)},st.onEntireSessionClosed=function(A){webrtcdev.warn("[session manager]  on Entire sesion closed ",A),st.attachStreams.forEach(function(A){A.stop()}),ie("Session Disconnected")},st.onFileStart=function(A){webrtcdev.log("[sessionmanager] onFileStart",A),wA(A)},st.onFileProgress=function(A){hA(A)},st.onFileEnd=function(A){fA(A)},st.takeSnapshot=function(A,t){Ze({userid:A,connection:connection,callback:t})},st.connectionType=null,st.remoteUsers=[],st.extra={uuid:st.userid,name:mt||"",color:"undefined"==typeof nn.userdetails?"":nn.userdetails.usercolor,email:pt||"",role:$t||"participant"},st.socketMessageEvent="RTCMultiConnection-Message",st.socketCustomEvent="RTCMultiConnection-Custom-Message",st.enableFileSharing=!0,st.filesContainer=document.body||document.documentElement,st.onSocketDisconnect=function(A){webrtcdev.error("[sesionmanager ] on Socket Disconnected ",A),webrtcdev.log("[sesionmanager ] re-establish socket connection  with SDP "),st.rejoin(st.connectionDescription)},st.onSocketError=function(A){webrtcdev.error("[sesionmanager ] on Socket Error ",A)},webrtcdev.log("[sessionmanager] rtcConn : ",st),st},qn=function(A,t,r){var a=zn(r);if("done'"==a.setup)return void webrtcdev.info(" [sessionmanager] setupCallView is laready done for peer",a);if(w(a),Rt&&showUserStats(),Wt.active&&"inspector"==$t&&(webrtcdev.info(" [sessionmanage] freezing screen for role inspector "),SA()),kt.active){if("single"==kt.props.fileShare)z(a),l(a.fileShare.outerbox)&&(l(a.fileShare.outerbox).style.width="100%");else if("divided"==kt.props.fileShare){for(x in"inspector"==$t?webrtcdev.log("[sessionmanager] Since it is an inspector's own session , not creating local File viewer and list"):(webrtcdev.log(" [sessionmanager] creating local file sharing"),z(a)),lt)lt[x].userid!=dt&&"inspector"!=lt[x].role&&(webrtcdev.log("[sessionmanager] setupCallView - creating remote file sharing "),z(lt[x]));kt.sendOldFiles&&UA()}else webrtcdev.error("[sessionmanager] fileshareobj.props.fileShare undefined ");"single"==kt.props.fileList?document.getElementById(a.fileList.outerbox).style.width="100%":"single"==kt.props.fileShare?webrtcdev.error("fileshareobj.props.fileShare undefined "):webrtcdev.log("No Separate div created for this peer since fileshare container is single")}Zt&&Zt.active&&getWebrtcdevStats(),Lt&&Lt.active&&(XA(Lt),YA(),ve(),Fe())};window.onunload=function(){webrtcdev.log("[startjs] onunload ",localStorage.getItem("channel")),alert(" Refreshing the Page will loose the session data")},this.clearCaches=clearCaches=function(){localStorage.clear()}};"undefined"!=typeof module&&(module.exports=exports=webrtcdevcon);