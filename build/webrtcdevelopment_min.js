/* Generated on:Tue Apr 28 2020 23:02:45 GMT+0530 (India Standard Time) || version: 5.3.2 - Altanai (@altanai)  , License : MIT  */var webrtcdevlogs=[];function isJSON(e){if("string"!=typeof e)return!1;try{var A=JSON.parse(e);return"object"==typeof A}catch(e){return!1}}function toStr(A){try{return JSON.stringify(A,function(e,A){return A&&A.sdp?(log(A.sdp.type,"\t",A.sdp.sdp),""):A},"\t")}catch(t){return A}}function getArgsJson(e){var A="";for(i in e)e[i]&&(A+=toStr(e[i]));return A}var webrtcdevlogger={log:function(){let e="";isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push("<pre style='color:grey'>[LOG]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push("<p style='color:grey'>[LOG]"+e+"</p>")),console.log(arguments)},info:function(){let e="";isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push("<pre style='color:blue'>[INFO]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push("<p style='color:blue'>[INFO]"+e+"</p>")),console.info(arguments)},debug:function(){let e="";isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push("<pre style='color:green'>[DEBUG]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push("<p style='color:green'>[DEBUG]"+e+"</p>")),console.debug(arguments)},warn:function(){let e="";isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push("<pre style='color:orange'>[WARN]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push("<p style='color:orange'>[WARN]"+e+"</p>")),console.warn(arguments)},error:function(){let e="";isJSON(arguments)?(e=JSON.stringify(arguments,void 0,2),webrtcdevlogs.push("<pre style='color:red'>[ERROR]"+e+"</pre>")):(e=getArgsJson(arguments),webrtcdevlogs.push("<p style='color:red'>[ERROR]"+e+"</p>")),console.error(arguments)}},webrtcdev=webrtcdevlogger,RTCMultiConnection=function(e,A){function t(A,t){function n(e){return!e.audio&&!e.video&&!e.screen&&e.data}function r(e,t){A.peersBackup[e]||(A.peersBackup[e]={userid:e,extra:{}}),A.peersBackup[e].extra=t}function a(e){if(e.remoteUserId==A.userid){if(A.peers[e.sender]&&A.peers[e.sender].extra!=e.message.extra&&(A.peers[e.sender].extra=e.extra,A.onExtraDataUpdated({userid:e.sender,extra:e.extra}),r(e.sender,e.extra)),e.message.streamSyncNeeded&&A.peers[e.sender]){var t=A.streamEvents[e.message.streamid];if(!t||!t.stream)return;var s=e.message.action;if("ended"===s||"inactive"===s||"stream-removed"===s)return A.peersBackup[t.userid]&&(t.extra=A.peersBackup[t.userid].extra),void A.onstreamended(t);var l="both"==e.message.type?null:e.message.type;return void("function"==typeof t.stream[s]&&t.stream[s](l))}if("dropPeerConnection"===e.message)return void A.deletePeer(e.sender);if(e.message.allParticipants)return-1===e.message.allParticipants.indexOf(e.sender)&&e.message.allParticipants.push(e.sender),void e.message.allParticipants.forEach(function(e){d[A.peers[e]?"renegotiatePeer":"createNewPeer"](e,{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:n(A.session)})});if(e.message.newParticipant)return e.message.newParticipant==A.userid?void 0:A.peers[e.message.newParticipant]?void 0:void d.createNewPeer(e.message.newParticipant,e.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!A.session.oneway||"one-way"===A.direction,isDataOnly:n(A.session)});if(e.message.readyForOffer&&(A.attachStreams.length&&(A.waitingForLocalMedia=!1),A.waitingForLocalMedia))return void setTimeout(function(){a(e)},1);if(e.message.newParticipationRequest&&e.sender!==A.userid){A.peers[e.sender]&&A.deletePeer(e.sender);var c={extra:e.extra||{},localPeerSdpConstraints:e.message.remotePeerSdpConstraints||{OfferToReceiveAudio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:e.message.localPeerSdpConstraints||{OfferToReceiveAudio:A.session.oneway?!!A.session.audio:A.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:A.session.oneway?!!A.session.video||!!A.session.screen:A.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"==typeof e.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:e.message.isOneWay,isDataOnly:"undefined"==typeof e.message.isDataOnly?n(A.session):e.message.isDataOnly,dontGetRemoteStream:"undefined"==typeof e.message.isOneWay?!!A.session.oneway||"one-way"===A.direction:e.message.isOneWay,dontAttachLocalStream:!!e.message.dontGetRemoteStream,connectionDescription:e,successCallback:function(){}};return void A.onNewParticipant(e.sender,c)}return e.message.changedUUID&&A.peers[e.message.oldUUID]&&(A.peers[e.message.newUUID]=A.peers[e.message.oldUUID],delete A.peers[e.message.oldUUID]),e.message.userLeft?(d.onUserLeft(e.sender),void(!e.message.autoCloseEntireSession||A.leave())):void d.addNegotiatedMessage(e.message,e.sender)}}webrtcdev.log(" >>>>s  SocketConnection ",A);var s="";s+="?userid="+A.userid,s+="&sessionid="+A.sessionid,s+="&msgEvent="+A.socketMessageEvent,s+="&socketCustomEvent="+A.socketCustomEvent,s+="&autoCloseEntireSession="+!!A.autoCloseEntireSession,!0===A.session.broadcast&&(s+="&oneToMany=true"),s+="&maxParticipantsAllowed="+A.maxParticipantsAllowed,A.enableScalableBroadcast&&(s+="&enableScalableBroadcast=true",s+="&maxRelayLimitPerUser="+(A.maxRelayLimitPerUser||2)),s+="&extra="+JSON.stringify(A.extra||{}),A.socketCustomParameters&&(s+=A.socketCustomParameters);try{io.sockets={}}catch(A){}if(A.socketURL||(webrtcdev.log(" >>>>s  socket.io url is missing , using / "),A.socketURL="/"),"/"!=A.socketURL.substr(A.socketURL.length-1,1))throw"\"socketURL\" MUST end with a slash.";A.enableLogs&&("/"==A.socketURL?webrtcdev.info("socket.io url is: ",location.origin+"/"):webrtcdev.info("socket.io url is: ",A.socketURL));try{A.socket=io(A.socketURL+s)}catch(t){A.socket=io.connect(A.socketURL+s,A.socketOptions)}var d=A.multiPeersHandler;A.socket.on("extra-data-updated",function(e,t){A.peers[e]&&(A.peers[e].extra=t,A.onExtraDataUpdated({userid:e,extra:t}),r(e,t))}),A.socket.on(A.socketMessageEvent,a);var l=!1;A.socket.resetProps=function(){l=!1},A.socket.on("connect",function(){l||(l=!0,A.enableLogs&&webrtcdev.info("[RTC header] socket.io connection is opened."),setTimeout(function(){A.socket.emit("extra-data-updated",A.extra)},1e3),t&&t(A.socket))}),A.socket.on("disconnect",function(e){webrtcdev.error("[RTC header] socket.io connection is disconneted ."),A.onSocketDisconnect(e)}),A.socket.on("error",function(e){webrtcdev.error("[RTC header] socket.io connection errorred."),A.onSocketError(e)}),A.socket.on("user-disconnected",function(e){webrtcdev.log("[RTC header] user-disconnected"),e===A.userid||(A.onUserStatusChanged({userid:e,status:"offline",extra:A.peers[e]?A.peers[e].extra||{}:{}}),A.deletePeer(e))}),A.socket.on("user-connected",function(e){webrtcdev.log("[RTC header] user-connected"),e===A.userid||A.onUserStatusChanged({userid:e,status:"online",extra:A.peers[e]?A.peers[e].extra||{}:{}})}),A.socket.on("closed-entire-session",function(e,t){A.leave(),A.onEntireSessionClosed({sessionid:e,userid:e,extra:t})}),A.socket.on("userid-already-taken",function(e,t){A.onUserIdAlreadyTaken(e,t)}),A.socket.on("logs",function(e){A.enableLogs&&webrtcdev.debug("server-logs",e)}),A.socket.on("number-of-broadcast-viewers-updated",function(e){A.onNumberOfBroadcastViewersUpdated(e)}),A.socket.on("set-isInitiator-true",function(e){e!=A.sessionid||(A.isInitiator=!0)})}function n(e){function A(){e.fbr=new FileBufferReader,e.fbr.onProgress=function(A){e.onFileProgress(A)},e.fbr.onBegin=function(A){e.onFileStart(A)},e.fbr.onEnd=function(A){e.onFileEnd(A)}}var t=this,n=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];e.peers={getLength:function(){var e=0;for(var A in this)-1==n.indexOf(A)&&e++;return e},selectFirst:function(){var e;for(var A in this)-1==n.indexOf(A)&&(e=this[A]);return e},getAllParticipants:function(e){var A=[];for(var t in this)-1==n.indexOf(t)&&t!=e&&A.push(t);return A},forEach:function(A){this.getAllParticipants().forEach(function(t){A(e.peers[t])})},send:function(A,n){var r=this;if(!u(A.size)&&!u(A.type)){if(e.enableFileSharing)return void t.shareFile(A,n);"string"!=typeof A&&(A=JSON.stringify(A))}if("text"!==A.type&&!(A instanceof ArrayBuffer)&&!(A instanceof DataView))return void S.send({text:A,channel:this,connection:e,remoteUserId:n});if("text"===A.type&&(A=JSON.stringify(A)),n){var a=e.peers[n];if(a)return a.channels.length?void a.channels.forEach(function(e){e.send(A)}):(e.peers[n].createDataChannel(),e.renegotiate(n),void setTimeout(function(){r.send(A,n)},3e3))}this.getAllParticipants().forEach(function(t){return r[t].channels.length?void r[t].channels.forEach(function(e){e.send(A)}):(e.peers[t].createDataChannel(),e.renegotiate(t),void setTimeout(function(){r[t].channels.forEach(function(e){e.send(A)})},3e3))})}},this.uuid=e.userid,this.getLocalConfig=function(n,r,a){return a||(a={}),{streamsToShare:a.streamsToShare||{},rtcMultiConnection:e,connectionDescription:a.connectionDescription,userid:r,localPeerSdpConstraints:a.localPeerSdpConstraints,remotePeerSdpConstraints:a.remotePeerSdpConstraints,dontGetRemoteStream:!!a.dontGetRemoteStream,dontAttachLocalStream:!!a.dontAttachLocalStream,renegotiatingPeer:!!a.renegotiatingPeer,peerRef:a.peerRef,channels:a.channels||[],onLocalSdp:function(e){t.onNegotiationNeeded(e,r)},onLocalCandidate:function(A){A=b.processCandidates(e,A),A&&t.onNegotiationNeeded(A,r)},remoteSdp:n,onDataChannelMessage:function(n){if(!e.fbr&&e.enableFileSharing&&A(),"string"==typeof n||!e.enableFileSharing)return void t.onDataChannelMessage(n,r);var a=this;return n instanceof ArrayBuffer||n instanceof DataView?void e.fbr.convertToObject(n,function(e){a.onDataChannelMessage(e)}):n.readyForNextChunk?void e.fbr.getNextChunk(n,function(A){e.peers[r].channels.forEach(function(e){e.send(A)})},r):n.chunkMissing?void e.fbr.chunkMissing(n):void e.fbr.addChunk(n,function(A){e.peers[r].peer.channel.send(A)})},onDataChannelError:function(e){t.onDataChannelError(e,r)},onDataChannelOpened:function(e){t.onDataChannelOpened(e,r)},onDataChannelClosed:function(e){t.onDataChannelClosed(e,r)},onRemoteStream:function(A){e.peers[r]&&e.peers[r].streams.push(A),t.onGettingRemoteMedia(A,r)},onRemoteStreamRemoved:function(e){t.onRemovingRemoteMedia(e,r)},onPeerStateChanged:function(e){t.onPeerStateChanged(e),"new"===e.iceConnectionState&&t.onNegotiationStarted(r,e),"connected"===e.iceConnectionState&&t.onNegotiationCompleted(r,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(t.onUserLeft(r),t.disconnectWith(r))}}},this.createNewPeer=function(A,t){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(t=t||{},!e.isInitiator||!e.session.audio||"two-way"!==e.session.audio||t.streamsToShare||(t.isOneWay=!1,t.isDataOnly=!1,t.session=e.session),!t.isOneWay&&!t.isDataOnly)return t.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:t},A);t=e.setUserPreferences(t,A);var n=this.getLocalConfig(null,A,t);e.peers[A]=new PeerInitiator(n)}},this.createAnsweringPeer=function(A,t,n){n=e.setUserPreferences(n||{},t);var r=this.getLocalConfig(A,t,n);e.peers[t]=new PeerInitiator(r)},this.renegotiatePeer=function(A,t,n){if(!e.peers[A])return void(e.enableLogs&&webrtcdev.error("Peer ("+A+") does not exist. Renegotiation skipped."));t||(t={}),t.renegotiatingPeer=!0,t.peerRef=e.peers[A].peer,t.channels=e.peers[A].channels;var r=this.getLocalConfig(n,A,t);e.peers[A]=new PeerInitiator(r)},this.replaceTrack=function(A,t,n){if(!e.peers[t])throw"This peer ("+t+") does not exist.";var r=e.peers[t].peer;return!!r.getSenders&&"function"==typeof r.getSenders&&r.getSenders().length?void r.getSenders().forEach(function(r){n&&"video"===r.track.kind&&(e.peers[t].peer.lastVideoTrack=r.track,r.replaceTrack(A)),n||"audio"!==r.track.kind||(e.peers[t].peer.lastAudioTrack=r.track,r.replaceTrack(A))}):void(webrtcdev.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(t))},this.onNegotiationNeeded=function(){},this.addNegotiatedMessage=function(A,n){if(A.type&&A.sdp)return"answer"==A.type&&e.peers[n]&&e.peers[n].addRemoteSdp(A),"offer"==A.type&&(A.renegotiatingPeer?this.renegotiatePeer(n,null,A):this.createAnsweringPeer(A,n)),void(e.enableLogs&&webrtcdev.log("Remote peer's sdp:",A.sdp));if(A.candidate)return e.peers[n]&&e.peers[n].addRemoteCandidate(A),void(e.enableLogs&&webrtcdev.log("Remote peer's candidate pairs:",A.candidate));if(A.enableMedia){e.session=A.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),A.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var r={};e.attachStreams.forEach(function(e){r[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),A.userPreferences.streamsToShare=r,t.onNegotiationNeeded({readyForOffer:!0,userPreferences:A.userPreferences},n)}A.readyForOffer&&e.onReadyForOffer(n,A.userPreferences)},this.onGettingRemoteMedia=function(){},this.onRemovingRemoteMedia=function(){},this.onGettingLocalMedia=function(){},this.onLocalMediaError=function(A,t){e.onMediaError(A,t)},this.shareFile=function(t,n){A(),e.fbr.readAsArrayBuffer(t,function(A){var t=e.getAllParticipants();n&&(t=[n]),t.forEach(function(t){e.fbr.getNextChunk(A,function(A){e.peers[t].channels.forEach(function(e){e.send(A)})},t)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15000:e.chunkSize||0})};var r;r=new E(e),this.onDataChannelMessage=function(A,t){r.receive(JSON.parse(A),t,e.peers[t]?e.peers[t].extra:{})},this.onDataChannelClosed=function(A,t){A.userid=t,A.extra=e.peers[t]?e.peers[t].extra:{},e.onclose(A)},this.onDataChannelError=function(A,t){A.userid=t,event.extra=e.peers[t]?e.peers[t].extra:{},e.onerror(A)},this.onDataChannelOpened=function(A,t){return e.peers[t].channels.length?void(e.peers[t].channels=[A]):void(e.peers[t].channels.push(A),e.onopen({userid:t,extra:e.peers[t]?e.peers[t].extra:{},channel:A}))},this.onPeerStateChanged=function(A){e.onPeerStateChanged(A)},this.onNegotiationStarted=function(){},this.onNegotiationCompleted=function(){},this.getRemoteStreams=function(A){return A=A||e.peers.getAllParticipants()[0],e.peers[A]?e.peers[A].streams:[]}}function r(e,A,t){if("undefined"!=typeof CustomEvent){var n=new CustomEvent(A,{arguments:t,__exposedProps__:t});e.dispatchEvent(n)}}function a(e,A){if(A.stream&&w(A.stream,"audio").length){if(!e||!A)throw"Both arguments are required.";if(e.onspeaking&&e.onsilence){if("undefined"==typeof hark)throw"hark.js not found.";hark(A.stream,{onspeaking:function(){e.onspeaking(A)},onsilence:function(){e.onsilence(A)},onvolumechange:function(t,n){e.onvolumechange&&e.onvolumechange(merge({volume:t,threshold:n},A))}})}}}function s(e,A){A.stream&&A.stream&&A.stream.addEventListener&&(A.stream.addEventListener("mute",function(t){t=e.streamEvents[A.streamid],t.session={audio:"audio"===t.muteType,video:"video"===t.muteType},e.onmute(t)},!1),A.stream.addEventListener("unmute",function(t){t=e.streamEvents[A.streamid],t.session={audio:"audio"===t.unmuteType,video:"video"===t.unmuteType},e.onunmute(t)},!1))}function d(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),A="",t=0,n=e.length;t<n;t++)A+=e[t].toString(36);return A}return(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"")}function l(e,A,t){if(!t.autoCreateMediaElement)return void A({});var n=!1;w(e,"video").length||e.isVideo||e.isScreen||(n=!0),"Firefox"===DetectRTC.browser.name&&(t.session.video||t.session.screen)&&(n=!1);var r=document.createElement(n?"audio":"video");if(r.srcObject=e,r.setAttribute("autoplay",!0),r.setAttribute("playsinline",!0),r.setAttribute("controls",!0),r.setAttribute("muted",!1),r.setAttribute("volume",1),"Firefox"===DetectRTC.browser.name){var a="ended";"oninactive"in r&&(a="inactive"),r.addEventListener(a,function(){if(currentUserMediaRequest.remove(e.idInstance),"local"===e.type){a="ended","oninactive"in e&&(a="inactive"),T.onSyncNeeded(e.streamid,a),t.attachStreams.forEach(function(A,n){e.streamid===A.streamid&&delete t.attachStreams[n]});var A=[];t.attachStreams.forEach(function(e){e&&A.push(e)}),t.attachStreams=A;var n=t.streamEvents[e.streamid];if(n)return void t.onstreamended(n);this.parentNode&&this.parentNode.removeChild(this)}},!1)}var s=r.play();if("undefined"!=typeof s){var d=!1;setTimeout(function(){d||(d=!0,A(r))},1e3),s.then(function(){d||(d=!0,A(r))}).catch(function(){d||(d=!0,A(r))})}else A(r)}function c(e,A){window.removeEventListener(e,A),window.addEventListener(e,A,!1)}function B(e){var A=[];return e.forEach(function(e){e&&A.push(e)}),A}function g(e){return!e.audio&&!e.video&&!e.screen&&e.data}function u(e){return"undefined"==typeof e}function m(e){return"string"==typeof e}function p(e,A){return!(e.session.audio&&"two-way"===e.session.audio)&&(!("Firefox"!==DetectRTC.browser.name||!1===A)||!("Chrome"!==DetectRTC.browser.name||50>DetectRTC.browser.version)&&(!(!0!==typeof A)||!!("undefined"==typeof A&&e.session.audio&&e.session.screen&&!e.session.video)&&(A=!0,!0)))}function w(e,A){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(A||"audio")}):[]}function h(){var A=!1;try{if("undefined"==typeof RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=new RTCPeerConnection;try{t.addTransceiver("audio"),A=!0}catch(A){}t.close()}catch(t){A=!1}return A&&Q()}function Q(){var A=!1;try{var t=new RTCPeerConnection({sdpSemantics:"unified-plan"});try{var e=t.getConfiguration();A=!("unified-plan"!=e.sdpSemantics)||"plan-b"!=e.sdpSemantics&&!1}catch(t){A=!1}}catch(t){A=!1}return A}function C(e,A){e.mandatory&&e.mandatory.chromeMediaSource?A.isScreen=!0:e.mozMediaSource||e.mediaSource?A.isScreen=!0:e.video?A.isVideo=!0:e.audio&&(A.isAudio=!0)}function U(e){function A(A,n){C(e.localMediaConstraints,A);var r="ended";"oninactive"in A&&(r="inactive"),A.addEventListener(r,function(){delete currentUserMediaRequest.streams[t],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=B(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[t]={stream:A},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&U(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(A,n)}if(!0===currentUserMediaRequest.mutex)return void currentUserMediaRequest.queueRequests.push(e);currentUserMediaRequest.mutex=!0;var t=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[t])A(currentUserMediaRequest.streams[t].stream,!0);else{var n=!!/BB10|BlackBerry/i.test(navigator.userAgent||"");if(n||"undefined"==typeof navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(e.localMediaConstraints,function(e){e.streamid=e.streamid||e.id||d(),e.idInstance=t,A(e)},function(A){e.onLocalMediaError(A,e.localMediaConstraints)});if("undefined"==typeof navigator.mediaDevices){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var r=function(){},a=function(){},s,l;navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),s=stream},function(e){a(e),l=e}),{then:function(e){return s?void e(s):(r=e,{then:function(e){return l?void e(l):void(a=e)}})}}}}}if(!0===e.localMediaConstraints.isScreen){if(navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||d(),e.idInstance=t,A(e)}).catch(function(A){e.onLocalMediaError(A,e.localMediaConstraints)});else if(navigator.getDisplayMedia)navigator.getDisplayMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||d(),e.idInstance=t,A(e)}).catch(function(A){e.onLocalMediaError(A,e.localMediaConstraints)});else throw new Error("getDisplayMedia API is not availabe in this browser.");return}webrtcdev.log("[ getusermediahandler ] localMediaConstraints : ",e.localMediaConstraints),navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||d(),e.idInstance=t,A(e)}).catch(function(A){e.onLocalMediaError(A,e.localMediaConstraints)})}}function E(A){var t={};return{receive:function(n,r,a){var s=n.uuid;if(t[s]||(t[s]=[]),t[s].push(n.message),n.last){var d=t[s].join("");n.isobject&&(d=JSON.parse(d));var l=new Date().getTime(),c=l-n.sendingTime,B={data:d,userid:r,extra:a,latency:c};A.autoTranslateText?(B.original=B.data,A.Translator.TranslateText(B.data,function(e){B.data=e,A.onmessage(B)})):A.onmessage(B),delete t[s]}}}}(function(e){e&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},document.addEventListener=document.removeEventListener=e.addEventListener=e.removeEventListener=function(){},e.HTMLVideoElement=e.HTMLMediaElement=function(){}),"undefined"==typeof io&&(e.io=function(){return{on:function(e,A){A=A||function(){},"connect"===e&&A()},emit:function(e,A,t){t=t||function(){},("open-room"===e||"join-room"===e)&&t(!0,A.sessionid,null)}}}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:"",origin:"self"}),"undefined"==typeof screen&&(e.screen={width:0,height:0}),"undefined"==typeof URL&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=global)})("undefined"==typeof global?null:global),"",function(){function e(){var e=B.appVersion,A=B.userAgent,t=B.appName,n=""+parseFloat(B.appVersion),r=parseInt(B.appVersion,10),a,s,d;if(w&&!h&&-1!==A.indexOf("CriOS")&&(w=!1,h=!0),m){t="Opera";try{n=B.userAgent.split("OPR/")[1].split(" ")[0],r=n.split(".")[0]}catch(A){n="0.0.0.0",r=0}}else Q?(s=A.indexOf("rv:"),0<s?n=A.substring(s+3):(s=A.indexOf("MSIE"),n=A.substring(s+5)),t="IE"):h?(s=A.indexOf("Chrome"),t="Chrome",n=A.substring(s+7)):w?(s=A.indexOf("Safari"),t="Safari",n=A.substring(s+7),-1!==(s=A.indexOf("Version"))&&(n=A.substring(s+8)),-1!==B.userAgent.indexOf("Version/")&&(n=B.userAgent.split("Version/")[1].split(" ")[0])):p?(s=A.indexOf("Firefox"),t="Firefox",n=A.substring(s+8)):(a=A.lastIndexOf(" ")+1)<(s=A.lastIndexOf("/"))&&(t=A.substring(a,s),n=A.substring(s+1),t.toLowerCase()===t.toUpperCase()&&(t=B.appName));return u&&(t="Edge",n=B.userAgent.split("Edge/")[1]),-1!==(d=n.search(/[; \)]/))&&(n=n.substring(0,d)),r=parseInt(""+n,10),isNaN(r)&&(n=""+parseFloat(B.appVersion),r=parseInt(B.appVersion,10)),{fullVersion:n,version:r,name:t,isPrivateBrowsing:!1}}function A(e,A){var t=0,n=!1,r=window.setInterval(function(){e()&&(window.clearInterval(r),A(n)),50<t++&&(window.clearInterval(r),n=!0,A(n))},10)}function t(e){var A=e.toLowerCase();if(0===A.indexOf("msie")&&0===A.indexOf("trident"))return!1;var t=/(?:msie|rv:)\s?([\d\.]+)/.exec(A);return!!(t&&10<=parseInt(t[1],10))}function n(){for(var e="-",A=B.appVersion,t=B.userAgent,n=e,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],a=0,s;s=r[a];a++)if(s.r.test(t)){n=s.s;break}var d=e;return /Windows/.test(n)&&(/Windows (.*)/.test(n)&&(d=/Windows (.*)/.exec(n)[1]),n="Windows"),"Mac OS X"===n?/Mac OS X (10[\.\_\d]+)/.test(t)&&(d=/Mac OS X (10[\.\_\d]+)/.exec(t)[1]):"Android"===n?/Android ([\.\_\d]+)/.test(t)&&(d=/Android ([\.\_\d]+)/.exec(t)[1]):"iOS"===n?/OS (\d+)_(\d+)_?(\d+)?/.test(t)&&(d=/OS (\d+)_(\d+)_?(\d+)?/.exec(A),d=d[1]+"."+d[2]+"."+(0|d[3])):void 0,{osName:n,osVersion:d}}function r(e){e=(e||B.userAgent).toLowerCase();var A=e.match(/android\s([0-9\.]*)/);return!!A&&A[1]}function a(e,A){function t(A){if(!A)return void e();var t=S.exec(A);if(t){var n=t[1],a=A.match(T);void 0===r[n]&&e(n,a,!0),r[n]=!0}}function n(){var e=c.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&t(e)})}if("undefined"!=typeof document&&"function"==typeof document.getElementById){var r={},a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!a){var s=document.getElementById("iframe");if(!s)return;var d=s.contentWindow;a=d.RTCPeerConnection||d.mozRTCPeerConnection||d.webkitRTCPeerConnection}if(a){var l=null;"Chrome"===P.browser&&58>P.browser.version&&(l={optional:[{RtpDataChannels:!0}]});var c=new a({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},l);if(A&&(c.addStream?c.addStream(A):c.addTrack&&A.getTracks()[0]&&c.addTrack(A.getTracks()[0],A)),c.onicecandidate=function(e){e.candidate&&e.candidate.candidate?t(e.candidate.candidate):t()},!A)try{c.createDataChannel("sctp",{})}catch(A){}P.isPromisesSupported?c.createOffer().then(function(e){c.setLocalDescription(e).then(n)}):c.createOffer(function(e){c.setLocalDescription(e,n,function(){})},function(){})}}}function s(e){if(!M)return void(e&&e());if(!B.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(B.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!B.enumerateDevices&&B.enumerateDevices&&(B.enumerateDevices=B.enumerateDevices.bind(B)),!B.enumerateDevices)return void(e&&e());I=[],N=[],R=[],L=[],D=!1,O=!1,k=!1,K=!1,_=!1;var A={};B.enumerateDevices(function(t){t.forEach(function(e){var t={};for(var n in e)try{"function"!=typeof e[n]&&(t[n]=e[n])}catch(A){}A[t.deviceId+t.label+t.kind]||("audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput"),!t.deviceId&&(t.deviceId=t.id),!t.id&&(t.id=t.deviceId),t.label?("videoinput"===t.kind&&!_&&(_=!0),"audioinput"===t.kind&&!K&&(K=!0)):(t.isCustomLabel=!0,t.label="videoinput"===t.kind?"Camera "+(L.length+1):"audioinput"===t.kind?"Microphone "+(N.length+1):"audiooutput"===t.kind?"Speaker "+(R.length+1):"Please invoke getUserMedia once.","undefined"!=typeof P&&P.browser.isChrome&&46<=P.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.label="HTTPs is required to get label of this "+t.kind+" device.")),"audioinput"===t.kind&&(D=!0,-1===N.indexOf(t)&&N.push(t)),"audiooutput"===t.kind&&(O=!0,-1===R.indexOf(t)&&R.push(t)),"videoinput"===t.kind&&(k=!0,-1===L.indexOf(t)&&L.push(t)),I.push(t),A[t.deviceId+t.label+t.kind]=t)}),"undefined"!=typeof P&&(P.MediaDevices=I,P.hasMicrophone=D,P.hasSpeakers=O,P.hasWebcam=k,P.isWebsiteHasWebcamPermissions=_,P.isWebsiteHasMicrophonePermissions=K,P.audioInputDevices=N,P.audioOutputDevices=R,P.videoInputDevices=L),e&&e()})}var d="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",l="object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&!process.browser;if(l){var c=process.versions.node.toString().replace("v","");d="Nodejs/"+c+" (NodeOS) AppleWebKit/"+c+" (KHTML, like Gecko) Nodejs/"+c+" Nodejs/"+c}(function(e){"undefined"!=typeof window||("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:d,getUserMedia:function(){}},e.window=global):"undefined"==typeof window,"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))})("undefined"==typeof global?window:global);var B=window.navigator;"undefined"==typeof B?B={getUserMedia:function(){},userAgent:d}:("undefined"!=typeof B.webkitGetUserMedia&&(B.getUserMedia=B.webkitGetUserMedia),"undefined"!=typeof B.mozGetUserMedia&&(B.getUserMedia=B.mozGetUserMedia));var g=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(B.userAgent||""),u=-1!==B.userAgent.indexOf("Edge")&&(!!B.msSaveOrOpenBlob||!!B.msSaveBlob),m=!!window.opera||0<=B.userAgent.indexOf(" OPR/"),p="undefined"!=typeof window.InstallTrigger,w=/^((?!chrome|android).)*safari/i.test(B.userAgent),h=!!window.chrome&&!m,Q="undefined"!=typeof document&&!!document.documentMode&&!u,C={Android:function(){return B.userAgent.match(/Android/i)},BlackBerry:function(){return B.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return B.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return B.userAgent.match(/Opera Mini/i)},Windows:function(){return B.userAgent.match(/IEMobile/i)},any:function(){return C.Android()||C.BlackBerry()||C.iOS()||C.Opera()||C.Windows()},getOsName:function(){var e="Unknown OS";return C.Android()&&(e="Android"),C.BlackBerry()&&(e="BlackBerry"),C.iOS()&&(e="iOS"),C.Opera()&&(e="Opera Mini"),C.Windows()&&(e="Windows"),e}},U="Unknown OS",E="Unknown OS Version",F=n();F&&F.osName&&"-"!=F.osName?(U=F.osName,E=F.osVersion):C.any()&&(U=C.getOsName(),"Android"==U&&(E=r()));var l="object"==typeof process&&"object"==typeof process.versions&&process.versions.node;"Unknown OS"===U&&l&&(U="Nodejs",E=process.versions.node.toString().replace("v",""));var b=!1,H=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"==typeof document||"function"!=typeof document.createElement||(!b&&e in document.createElement("canvas")&&(b=!0),!H&&e in document.createElement("video")&&(H=!0))});var T=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,S=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,I=[],N=[],R=[],L=[];B.mediaDevices&&B.mediaDevices.enumerateDevices&&(B.enumerateDevices=function(e){var A=B.mediaDevices.enumerateDevices();A&&A.then?B.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var M=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?M=!0:B.mediaDevices&&!!B.mediaDevices.enumerateDevices&&(M=!0);var D=!1,O=!1,k=!1,K=!1,_=!1,P=window.DetectRTC||{};P.browser=e(),function(e){var n;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){n=!1},function(){n=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r;try{r=window.indexedDB.open("test"),r.onerror=function(){return!0}}catch(A){n=!0}"undefined"==typeof n&&A(function(){return"done"===r.readyState},function(e){e||(n=!r.result)})}else if(t(window.navigator.userAgent)){n=!1;try{window.indexedDB||(n=!0)}catch(A){n=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(A){n=!0}"undefined"==typeof n&&(n=!1,window.localStorage.removeItem("test"))}}catch(A){n=!1}A(function(){return"undefined"!=typeof n},function(){e(n)})}(function(e){P.browser.isPrivateBrowsing=!!e}),P.browser["is"+P.browser.name]=!0,P.osName=U,P.osVersion=E;var V="object"==typeof process&&"object"==typeof process.versions&&process.versions["node-webkit"],z=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){z||e in window&&(z=!0)}),P.isWebRTCSupported=z,P.isORTCSupported="undefined"!=typeof RTCIceGatherer;var X=!1;if(P.browser.isChrome&&35<=P.browser.version?X=!0:P.browser.isFirefox&&34<=P.browser.version?X=!0:P.browser.isEdge&&17<=P.browser.version?X=!0:"Android"===P.osName&&P.browser.isChrome&&(X=!0),!/^(https:|chrome-extension:)$/g.test(location.protocol||"")){var G="undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g);G&&(P.browser.isChrome||P.browser.isEdge||P.browser.isOpera)?X=!1:P.browser.isFirefox&&(X=!1)}P.isScreenCapturingSupported=X;var J={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){J.isSupported||e in window&&(J.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(J.isCreateMediaStreamSourceSupported=!0))}),P.isAudioContextSupported=J.isSupported,P.isCreateMediaStreamSourceSupported=J.isCreateMediaStreamSourceSupported;var Y=!1;P.browser.isChrome&&31<P.browser.version&&(Y=!0),P.isRtpDataChannelsSupported=Y;var W=!1;P.browser.isFirefox&&28<P.browser.version?W=!0:P.browser.isChrome&&25<P.browser.version?W=!0:P.browser.isOpera&&11<=P.browser.version&&(W=!0),P.isSctpDataChannelsSupported=W,P.isMobileDevice=g;var q=!1;B.getUserMedia?q=!0:B.mediaDevices&&B.mediaDevices.getUserMedia&&(q=!0),P.browser.isChrome&&46<=P.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(q="Requires HTTPs"),"Nodejs"===P.osName&&(q=!1),P.isGetUserMediaSupported=q,P.isCanvasSupportsStreamCapturing=b,P.isVideoSupportsStreamCapturing=H,"Chrome"==P.browser.name&&53<=P.browser.version&&(!P.isCanvasSupportsStreamCapturing&&(P.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),!P.isVideoSupportsStreamCapturing&&(P.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),P.DetectLocalIPAddress=function(e,A){if(P.isWebRTCSupported){var t=!0,n=!0;a(function(A){A?A.match(T)?(t=!1,e("Local: "+A,t,n)):A.match(/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/)?(n=!1,e("Public: "+A,t,n)):e("Public: "+A,t,n):e()},A)}},P.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,P.isWebSocketsBlocked=!P.isWebSocketsSupported,"Nodejs"===P.osName&&(P.isWebSocketsSupported=!0,P.isWebSocketsBlocked=!1),P.checkWebSocketsSupport=function(A){A=A||function(){};try{var t=new WebSocket("wss://echo.websocket.org:443/"),n;t.onopen=function(){P.isWebSocketsBlocked=!1,n=new Date().getTime(),t.send("ping")},t.onmessage=function(){P.WebsocketLatency=new Date().getTime()-n+"ms",A(),t.close(),t=null},t.onerror=function(){P.isWebSocketsBlocked=!0,A()}}catch(t){P.isWebSocketsBlocked=!0,A()}},P.load=function(e){e=e||function(){},s(e)},"function"==typeof s,P.MediaDevices="undefined"==typeof I?[]:I,P.hasMicrophone=D,P.hasSpeakers=O,P.hasWebcam=k,P.isWebsiteHasWebcamPermissions=_,P.isWebsiteHasMicrophonePermissions=K,P.audioInputDevices=N,P.audioOutputDevices=R,P.videoInputDevices=L;var Z=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(Z=!0),P.isSetSinkIdSupported=Z;var ee=!1;P.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(ee=!0):P.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(ee=!0),P.isRTPSenderReplaceTracksSupported=ee;var Ae=!1;P.browser.isFirefox&&38<P.browser.version&&(Ae=!0),P.isRemoteStreamProcessingSupported=Ae;var te=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(te=!0),P.isApplyConstraintsSupported=te;var ne=!1;P.browser.isFirefox&&43<=P.browser.version&&(ne=!0),P.isMultiMonitorScreenCapturingSupported=ne,P.isPromisesSupported=!!("Promise"in window),P.version="1.3.9","undefined"==typeof P&&(window.DetectRTC={});var re=window.MediaStream;"undefined"==typeof re&&"undefined"!=typeof webkitMediaStream&&(re=webkitMediaStream),P.MediaStream="undefined"!=typeof re&&"function"==typeof re&&Object.keys(re.prototype),P.MediaStreamTrack="undefined"!=typeof MediaStreamTrack&&Object.keys(MediaStreamTrack.prototype);var ie=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;P.RTCPeerConnection="undefined"!=typeof ie&&Object.keys(ie.prototype),window.DetectRTC=P,"undefined"!=typeof module&&(module.exports=P),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return P})}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,A,t){e.attachEvent&&e.attachEvent("on"+A,t)}),window.attachEventListener=function(e,A,t,n){e.addEventListener(A,t,n)};var F=window.MediaStream;"undefined"==typeof F&&"undefined"!=typeof webkitMediaStream&&(F=webkitMediaStream),"undefined"==typeof F||"stop"in F.prototype||(F.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})}),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker";var b=function(){return{processCandidates:function(e,A){var t=A.candidate,n=e.candidates,r=n.stun,a=n.turn;if((u(n.reflexive)||(r=n.reflexive),u(n.relay)||(a=n.relay),n.host||!t.match(/typ host/g))&&(a||!t.match(/typ relay/g))&&(r||!t.match(/typ srflx/g))){var s=e.iceProtocols;if(s.udp||!t.match(/ udp /g))return s.tcp||!t.match(/ tcp /g)?(e.enableLogs&&webrtcdev.debug("Your candidate pairs:",t),{candidate:t,sdpMid:A.sdpMid,sdpMLineIndex:A.sdpMLineIndex}):void 0}}}}(),H=function(){return{getIceServers:function(){return[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}}}();window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var A=this.streams[e];if(A){A=A.stream;var t=A.currentUserMediaRequestOptions;this.queueRequests.indexOf(t)&&(delete this.queueRequests[this.queueRequests.indexOf(t)],this.queueRequests=B(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e]}}};var T=function(){function e(e){return e?"string"==typeof e||"undefined"==typeof e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0:void 0}function A(A,n,a){function s(){if(a.streamEvents[A.streamid].mediaElement){var n=a.streamEvents[A.streamid].mediaElement;n.volume=0,t(200,5,function(){try{n.volume+=.2}catch(A){n.volume=1}})}}if(A&&A.addEventListener){if("undefined"==typeof n||!0==n){var d="ended";"oninactive"in A&&(d="inactive"),A.addEventListener(d,function(){T.onSyncNeeded(this.streamid,d)},!1)}A.mute=function(t,s){t=e(t),"undefined"!=typeof s&&(n=s),("undefined"==typeof t||"audio"==t)&&w(A,"audio").forEach(function(e){e.enabled=!1,a.streamEvents[A.streamid].isAudioMuted=!0}),("undefined"==typeof t||"video"==t)&&w(A,"video").forEach(function(e){e.enabled=!1}),("undefined"==typeof n||!0==n)&&T.onSyncNeeded(A.streamid,"mute",t),a.streamEvents[A.streamid].muteType=t||"both",r(A,"mute",t)},A.unmute=function(t,d){t=e(t),"undefined"!=typeof d&&(n=d),s(),("undefined"==typeof t||"audio"==t)&&w(A,"audio").forEach(function(e){e.enabled=!0,a.streamEvents[A.streamid].isAudioMuted=!1}),("undefined"==typeof t||"video"==t)&&(w(A,"video").forEach(function(e){e.enabled=!0}),"undefined"!=typeof t&&"video"==t&&a.streamEvents[A.streamid].isAudioMuted&&function e(t){t||(t=0),t++,100>t&&a.streamEvents[A.streamid].isAudioMuted&&(A.mute("audio"),setTimeout(function(){e(t)},50))}()),("undefined"==typeof n||!0==n)&&T.onSyncNeeded(A.streamid,"unmute",t),a.streamEvents[A.streamid].unmuteType=t||"both",r(A,"unmute",t)}}}function t(e,A,n,r){r=(r||0)+1;r>=A||setTimeout(function(){n(),t(e,A,n,r)},e)}return{setHandlers:A,onSyncNeeded:function(){}}}(),S={send:function(e){function A(e,a){var d={type:"text",uuid:B,sendingTime:g};e&&(a=e,d.packets=parseInt(a.length/s)),a.length>s?d.message=a.slice(0,s):(d.message=a,d.last=!0,d.isobject=c),n.send(d,r),l=a.slice(d.message.length),l.length&&setTimeout(function(){A(null,l)},t.chunkInterval||100)}var t=e.connection,n=e.channel,r=e.remoteUserId,a=e.text,s=t.chunkSize||1e3,l="",c=!1;m(a)||(c=!0,a=JSON.stringify(a));var B=d(),g=new Date().getTime();A(a)}},I=function(){return{handle:function(e){function A(e,A){if(-1!==e.position){var t=+e.position.toFixed(2).split(".")[1]||100;A.innerHTML=t+"%"}}var t={};e.onFileStart=function(A){var n=document.createElement("div");return n.title=A.name,n.innerHTML="<label>0%</label> <progress></progress>",A.remoteUserId&&(n.innerHTML+=" (Sharing with:"+A.remoteUserId+")"),e.filesContainer||(e.filesContainer=document.body||document.documentElement),e.filesContainer.insertBefore(n,e.filesContainer.firstChild),A.remoteUserId?void(!t[A.uuid]&&(t[A.uuid]={}),t[A.uuid][A.remoteUserId]={div:n,progress:n.querySelector("progress"),label:n.querySelector("label")},t[A.uuid][A.remoteUserId].progress.max=A.maxChunks):(t[A.uuid]={div:n,progress:n.querySelector("progress"),label:n.querySelector("label")},void(t[A.uuid].progress.max=A.maxChunks))},e.onFileProgress=function(e){var n=t[e.uuid];!n||e.remoteUserId&&(n=t[e.uuid][e.remoteUserId],!n)||(n.progress.value=e.currentPosition||e.maxChunks||n.progress.max,A(n.progress,n.label))},e.onFileEnd=function(e){var A=t[e.uuid];if(!A)return void console.error("No such progress-helper element exist.",e);if(!(e.remoteUserId&&(A=t[e.uuid][e.remoteUserId],!A))){var n=A.div;n.innerHTML=-1==e.type.indexOf("image")?"<a href=\""+e.url+"\" download=\""+e.name+"\">Download <strong style=\"color:red;\">"+e.name+"</strong> </a><br /><iframe src=\""+e.url+"\" title=\""+e.name+"\" style=\"width: 80%;border: 0;height: inherit;margin-top:1em;\"></iframe>":"<a href=\""+e.url+"\" download=\""+e.name+"\">Download <strong style=\"color:red;\">"+e.name+"</strong> </a><br /><img src=\""+e.url+"\" title=\""+e.name+"\" style=\"max-width: 80%;\">"}}}}}();(function(r){function B(e){if(r.socketAutoReConnect=!0,r.socket)return void(e&&e(r.socket));if("undefined"==typeof t)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else if("undefined"!=typeof PubNubConnection)window.SocketConnection=PubNubConnection;else throw"SocketConnection.js seems missed.";new t(r,function(){e&&e(r.socket)})}function u(e,A){r.socket.emit("join-room",{sessionid:r.sessionid,session:r.session,mediaConstraints:r.mediaConstraints,sdpConstraints:r.sdpConstraints,streams:Q(),extra:r.extra,password:"undefined"!=typeof r.password&&"object"!=typeof r.password?r.password:""},function(t,n){if(!0===t){if(r.enableLogs&&webrtcdev.log("isRoomJoined: ",t," roomid: ",r.sessionid),!!r.peers[r.sessionid])return;S.onNegotiationNeeded(e)}!1===t&&(r.enableLogs&&webrtcdev.warn("isRoomJoined: ",n," roomid: ",r.sessionid),setTimeout(function(){u(e,A)},3e3)),A(t,r.sessionid,n)})}function m(e){r.enableLogs&&webrtcdev.log("Sending open-room signal to socket.io"),r.waitingForLocalMedia=!1,r.socket.emit("open-room",{sessionid:r.sessionid,session:r.session,mediaConstraints:r.mediaConstraints,sdpConstraints:r.sdpConstraints,streams:Q(),extra:r.extra,identifier:r.publicRoomIdentifier,password:"undefined"!=typeof r.password&&"object"!=typeof r.password?r.password:""},function(A,t){!0===A&&(r.enableLogs&&webrtcdev.log("isRoomOpened: ",A," roomid: ",r.sessionid),e(A,r.sessionid)),!1===A&&(r.enableLogs&&webrtcdev.warn("isRoomOpened: ",t," roomid: ",r.sessionid),e(A,r.sessionid,t))})}function Q(){try{return r.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(A){return[]}}function C(e,A){if(r.dontCaptureUserMedia||e.isDataOnly)return void A();var t={};e.localPeerSdpConstraints.OfferToReceiveAudio&&(t.audio=r.mediaConstraints.audio),e.localPeerSdpConstraints.OfferToReceiveVideo&&(t.video=r.mediaConstraints.video);var n=e.session||r.session;return n.oneway&&"two-way"!==n.audio&&"two-way"!==n.video&&"two-way"!==n.screen?void A():void(n.oneway&&n.audio&&"two-way"===n.audio&&(n={audio:!0}),(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(r)}).then(function(e){e.isScreen=!0,S.onGettingLocalMedia(e),(n.audio||n.video)&&!p(r)?r.invokeGetUserMedia(null,A):A(e)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):r.invokeGetUserMedia({audio:p(r),video:!0,isScreen:!0},(n.audio||n.video)&&!p(r)?r.invokeGetUserMedia(null,A):A):(n.audio||n.video)&&r.invokeGetUserMedia(null,A,n)))}function E(e,A){return e?void(A.audio&&w(e,"audio").forEach(function(e){e.applyConstraints(A.audio)}),A.video&&w(e,"video").forEach(function(e){e.applyConstraints(A.video)})):void(!r.enableLogs||webrtcdev.error("No stream to applyConstraints."))}function b(e,A,t){return A?void S.replaceTrack(e,A,t):void r.peers.getAllParticipants().forEach(function(A){S.replaceTrack(e,A,t)})}A=A||{useDefaultDevices:!0},r.channel=r.sessionid=(e||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"",r.socketURL=r.socketURL||"/",webrtcdev.log("[RTCMultiConnection] connection channel ",r.channel);var S=new n(r),N={};S.onGettingLocalMedia=function(e,A){if(A=A||function(){},N[e.streamid])return void A();N[e.streamid]=!0;try{e.type="local"}catch(A){}r.setStreamEndHandler(e),l(e,function(t){t.id=e.streamid,t.muted=!0,t.volume=0,-1===r.attachStreams.indexOf(e)&&r.attachStreams.push(e),"undefined"!=typeof T&&T.setHandlers(e,!0,r),r.streamEvents[e.streamid]={stream:e,type:"local",mediaElement:t,userid:r.userid,extra:r.extra,streamid:e.streamid,isAudioMuted:!0};try{a(r,r.streamEvents[e.streamid]),s(r,r.streamEvents[e.streamid]),r.onstream(r.streamEvents[e.streamid])}catch(A){}A()},r)},S.onGettingRemoteMedia=function(e,A){try{e.type="remote"}catch(A){}r.setStreamEndHandler(e,"remote-stream"),l(e,function(t){t.id=e.streamid,"undefined"!=typeof T&&T.setHandlers(e,!1,r),r.streamEvents[e.streamid]={stream:e,type:"remote",userid:A,extra:r.peers[A]?r.peers[A].extra:{},mediaElement:t,streamid:e.streamid},s(r,r.streamEvents[e.streamid]),r.onstream(r.streamEvents[e.streamid])},r)},S.onRemovingRemoteMedia=function(e,A){var t=r.streamEvents[e.streamid];t||(t={stream:e,type:"remote",userid:A,extra:r.peers[A]?r.peers[A].extra:{},streamid:e.streamid,mediaElement:r.streamEvents[e.streamid]?r.streamEvents[e.streamid].mediaElement:null}),r.peersBackup[t.userid]&&(t.extra=r.peersBackup[t.userid].extra),r.onstreamended(t),delete r.streamEvents[e.streamid]},S.onNegotiationNeeded=function(e,A,t){t=t||function(){},A=A||e.remoteUserId,e=e||"";var n={remoteUserId:A,message:e,sender:r.userid};e.remoteUserId&&e.message&&e.sender&&(n=e),B(function(){r.socket.emit(r.socketMessageEvent,n,t)})},S.onUserLeft=function(e){r.deletePeer(e)},S.disconnectWith=function(e,A){r.socket&&r.socket.emit("disconnect-with",e,A||function(){}),r.deletePeer(e)},r.socketOptions={transport:"websocket"},r.openOrJoin=function(e,A){A=A||function(){},r.checkPresence(e,function(e,t){if(e){r.sessionid=t;var n=!1,a=!1,s=!!r.session.oneway,d=g(r.session);a={OfferToReceiveAudio:r.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:r.sdpConstraints.mandatory.OfferToReceiveVideo},n={OfferToReceiveAudio:s?!!r.session.audio:r.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!r.session.video||!!r.session.screen:r.sdpConstraints.mandatory.OfferToReceiveVideo};var l={remoteUserId:r.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:d,localPeerSdpConstraints:n,remotePeerSdpConstraints:a},sender:r.userid};return void C(l.message,function(){u(l,A)})}return r.waitingForLocalMedia=!0,r.isInitiator=!0,r.sessionid=t||r.sessionid,g(r.session)?void m(A):void r.captureUserMedia(function(){m(A)})})},r.waitingForLocalMedia=!1,r.open=function(e,A){A=A||function(){},r.waitingForLocalMedia=!0,r.isInitiator=!0,r.sessionid=e||r.sessionid,B(function(){return g(r.session)?void m(A):void r.captureUserMedia(function(){m(A)})})},r.peersBackup={},r.deletePeer=function(e){if(e&&r.peers[e]){var A={userid:e,extra:r.peers[e]?r.peers[e].extra:{}};if(r.peersBackup[A.userid]&&(A.extra=r.peersBackup[A.userid].extra),r.onleave(A),!!r.peers[e]){r.peers[e].streams.forEach(function(e){e.stop()});var t=r.peers[e].peer;if(t&&"closed"!==t.iceConnectionState)try{t.close()}catch(A){}r.peers[e]&&(r.peers[e].peer=null,delete r.peers[e])}}},r.rejoin=function(e){if(!r.isInitiator&&e&&Object.keys(e).length){var A={};r.peers[e.remoteUserId]&&(A=r.peers[e.remoteUserId].extra,r.deletePeer(e.remoteUserId)),e&&e.remoteUserId&&(r.join(e.remoteUserId),r.onReConnecting({userid:e.remoteUserId,extra:A}))}},r.join=function(e,A){r.sessionid=!!e&&(e.sessionid||e.remoteUserId||e)||r.sessionid,r.sessionid+="";var t=!1,n=!1,a=!1,s=!1;if(e&&e.session||!e||"string"==typeof e){var d=e?e.session||r.session:r.session;a=!!d.oneway,s=g(d),n={OfferToReceiveAudio:r.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:r.sdpConstraints.mandatory.OfferToReceiveVideo},t={OfferToReceiveAudio:a?!!r.session.audio:r.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a?!!r.session.video||!!r.session.screen:r.sdpConstraints.mandatory.OfferToReceiveVideo}}A=A||{};var l=function(){};"function"==typeof A&&(l=A,A={}),"undefined"!=typeof A.localPeerSdpConstraints&&(t=A.localPeerSdpConstraints),"undefined"!=typeof A.remotePeerSdpConstraints&&(n=A.remotePeerSdpConstraints),"undefined"!=typeof A.isOneWay&&(a=A.isOneWay),"undefined"!=typeof A.isDataOnly&&(s=A.isDataOnly);var c={remoteUserId:r.sessionid,message:{newParticipationRequest:!0,isOneWay:a,isDataOnly:s,localPeerSdpConstraints:t,remotePeerSdpConstraints:n},sender:r.userid};return C(c.message,function(){B(function(){u(c,l)})}),c},r.publicRoomIdentifier="",r.getUserMedia=r.captureUserMedia=function(e,A){e=e||function(){};var t=A||r.session;return r.dontCaptureUserMedia||g(t)?(webrtcdev.warn("[RTCConn] dont capture media "),void e()):void((t.audio||t.video||t.screen)&&(t.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(r)}).then(function(n){if(n.isScreen=!0,S.onGettingLocalMedia(n),(t.audio||t.video)&&!p(r)){var a={};for(var d in t)"screen"!=d&&(a[d]=t[d]);return void r.invokeGetUserMedia(A,e,a)}e(n)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):r.invokeGetUserMedia({audio:p(r),video:!0,isScreen:!0},function(n){if((t.audio||t.video)&&!p(r)){var a={};for(var d in t)"screen"!=d&&(a[d]=t[d]);return void r.invokeGetUserMedia(A,e,a)}e(n)}):(t.audio||t.video)&&r.invokeGetUserMedia(A,e,t)))},r.onbeforeunload=function(e,A){r.closeBeforeUnload&&(r.peers.getAllParticipants().forEach(function(e){S.onNegotiationNeeded({userLeft:!0},e),r.peers[e]&&r.peers[e].peer&&r.peers[e].peer.close(),delete r.peers[e]}),!A&&r.closeSocket(),r.isInitiator=!1)},window.ignoreBeforeUnload?r.closeBeforeUnload=!1:(r.closeBeforeUnload=!0,window.addEventListener("beforeunload",r.onbeforeunload,!1)),r.userid=d(),r.changeUserId=function(e,A){A=A||function(){},r.userid=e||d(),r.socket.emit("changed-uuid",r.userid,A)},r.extra={},r.attachStreams=[],r.session={audio:!0,video:!0},r.enableFileSharing=!1,r.bandwidth={screen:!1,audio:!1,video:!1},r.codecs={audio:"opus",video:"VP9"},r.processSdp=function(e){return h()?e:"Safari"===DetectRTC.browser.name?e:("VP8"===r.codecs.video.toUpperCase()&&(e=CodecsHandler.preferCodec(e,"vp8")),"VP9"===r.codecs.video.toUpperCase()&&(e=CodecsHandler.preferCodec(e,"vp9")),"H264"===r.codecs.video.toUpperCase()&&(e=CodecsHandler.preferCodec(e,"h264")),"G722"===r.codecs.audio&&(e=CodecsHandler.removeNonG722(e)),"Firefox"===DetectRTC.browser.name)?e:((r.bandwidth.video||r.bandwidth.screen)&&(e=CodecsHandler.setApplicationSpecificBandwidth(e,r.bandwidth,!!r.session.screen)),r.bandwidth.video&&(e=CodecsHandler.setVideoBitrates(e,{min:1024*(8*r.bandwidth.video),max:1024*(8*r.bandwidth.video)})),r.bandwidth.audio&&(e=CodecsHandler.setOpusAttributes(e,{maxaveragebitrate:1024*(8*r.bandwidth.audio),maxplaybackrate:1024*(8*r.bandwidth.audio),stereo:1,maxptime:3})),e)},"undefined"!=typeof CodecsHandler&&(r.BandwidthHandler=r.CodecsHandler=CodecsHandler),r.mediaConstraints={audio:{mandatory:{},optional:r.bandwidth.audio?[{bandwidth:1024*(8*r.bandwidth.audio)||1048576}]:[]},video:{mandatory:{},optional:r.bandwidth.video?[{bandwidth:1024*(8*r.bandwidth.video)||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(r.mediaConstraints={audio:!0,video:!0}),A.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){var e,A;if(DetectRTC.MediaDevices.forEach(function(t){"audioinput"===t.kind&&!1!==r.mediaConstraints.audio&&(e=t),"videoinput"===t.kind&&!1!==r.mediaConstraints.video&&(A=t)}),e){if("Firefox"===DetectRTC.browser.name)return void(!0===r.mediaConstraints.audio?r.mediaConstraints.audio={deviceId:e.id}:r.mediaConstraints.audio.deviceId=e.id);!0==r.mediaConstraints.audio&&(r.mediaConstraints.audio={mandatory:{},optional:[]}),r.mediaConstraints.audio.optional||(r.mediaConstraints.audio.optional=[]);var t=[{sourceId:e.id}];r.mediaConstraints.audio.optional=t.concat(r.mediaConstraints.audio.optional)}if(A){if("Firefox"===DetectRTC.browser.name)return void(!0===r.mediaConstraints.video?r.mediaConstraints.video={deviceId:A.id}:r.mediaConstraints.video.deviceId=A.id);!0==r.mediaConstraints.video&&(r.mediaConstraints.video={mandatory:{},optional:[]}),r.mediaConstraints.video.optional||(r.mediaConstraints.video.optional=[]);var t=[{sourceId:A.id}];r.mediaConstraints.video.optional=t.concat(r.mediaConstraints.video.optional)}}),r.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},r.sdpSemantics=null,r.iceCandidatePoolSize=null,r.bundlePolicy=null,r.rtcpMuxPolicy=null,r.iceTransportPolicy=null,r.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},r.iceServers=H.getIceServers(r),r.candidates={host:!0,stun:!0,turn:!0},r.iceProtocols={tcp:!0,udp:!0},r.onopen=function(e){webrtcdev.info("Data connection has been opened between you & ",e.userid)},r.onclose=function(e){webrtcdev.warn("Data connection has been closed between you & ",e.userid)},r.onerror=function(e){webrtcdev.error(e.userid,"data-error",e)},r.onmessage=function(e){webrtcdev.debug("data-message",e.userid,e.data)},r.send=function(e,A){r.peers.send(e,A)},r.close=r.disconnect=r.leave=function(){r.onbeforeunload(!1,!0)},r.closeEntireSession=function(e){e=e||function(){},r.socket.emit("close-entire-session",function A(){return r.getAllParticipants().length?void setTimeout(A,100):void(r.onEntireSessionClosed({sessionid:r.sessionid,userid:r.userid,extra:r.extra}),r.changeUserId(null,function(){r.close(),e()}))})},r.onEntireSessionClosed=function(e){r.enableLogs&&webrtcdev.info("Entire session is closed: ",e.sessionid,e.extra)},r.onstream=function(A){var e=r.videosContainer;e.insertBefore(A.mediaElement,e.firstChild);var t=A.mediaElement.play();return"undefined"==typeof t?void setTimeout(function(){A.mediaElement.play()},2e3):void t.catch(function(){}).then(function(){setTimeout(function(){A.mediaElement.play()},2e3)})},r.onstreamended=function(A){A.mediaElement||(A.mediaElement=document.getElementById(A.streamid)),A.mediaElement&&A.mediaElement.parentNode&&A.mediaElement.parentNode.removeChild(A.mediaElement)},r.direction="many-to-many",r.removeStream=function(e,A){var t;return r.attachStreams.forEach(function(A){A.id===e&&(t=A)}),t?void(r.peers.getAllParticipants().forEach(function(e){if(!(A&&e!==A)){var n=r.peers[e];try{n.peer.removeStream(t)}catch(A){}}}),r.renegotiate()):void webrtcdev.warn("No such stream exist.",e)},r.addStream=function(e,A){function t(t){e.streamCallback&&e.streamCallback(t),r.renegotiate(A)}return e.getTracks?(-1===r.attachStreams.indexOf(e)&&(!e.streamid&&(e.streamid=e.id),r.attachStreams.push(e)),void r.renegotiate(A)):g(e)?void r.renegotiate(A):void((e.audio||e.video||e.screen)&&(e.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(r)}).then(function(A){A.isScreen=!0,S.onGettingLocalMedia(A),(e.audio||e.video)&&!p(r)?r.invokeGetUserMedia(null,function(e){t(e)}):t(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):r.invokeGetUserMedia({audio:p(r),video:!0,isScreen:!0},function(A){(e.audio||e.video)&&!p(r)?r.invokeGetUserMedia(null,function(e){t(e)}):t(A)}):(e.audio||e.video)&&r.invokeGetUserMedia(null,t)))},r.invokeGetUserMedia=function(e,A,t){t||(t=r.session),e||(e=r.mediaConstraints),webrtcdev.log(" ======================= invokeGetUserMedia ============= ",t.audio,t.video,e),e.isScreen?U({onGettingLocalMedia:function(t){var n=e.video;n&&(n.mediaSource||n.mozMediaSource?t.isScreen=!0:n.mandatory&&n.mandatory.chromeMediaSource&&(t.isScreen=!0)),t.isScreen||(t.isVideo=!!w(t,"video").length,t.isAudio=!t.isVideo&&w(t,"audio").length),S.onGettingLocalMedia(t,function(){"function"==typeof A&&A(t)})},onLocalMediaError:function(e,A){S.onLocalMediaError(e,A)},localMediaConstraints:e}):U({onGettingLocalMedia:function(t){var n=e.video;n&&(n.mediaSource||n.mozMediaSource?t.isScreen=!0:n.mandatory&&n.mandatory.chromeMediaSource&&(t.isScreen=!0)),t.isScreen||(t.isVideo=!!w(t,"video").length,t.isAudio=!t.isVideo&&w(t,"audio").length),S.onGettingLocalMedia(t,function(){"function"==typeof A&&A(t)})},onLocalMediaError:function(e,A){S.onLocalMediaError(e,A)},localMediaConstraints:{audio:!!t.audio&&e.audio,video:!!t.video&&e.video}})},r.applyConstraints=function(e,A){if(!MediaStreamTrack||!MediaStreamTrack.prototype.applyConstraints)return void alert("track.applyConstraints is NOT supported in your browser.");if(A){var t;return r.streamEvents[A]&&(t=r.streamEvents[A].stream),void E(t,e)}r.attachStreams.forEach(function(A){E(A,e)})},r.replaceTrack=function(e,A,t){function n(n){r.replaceTrack(n,A,t||e.video||e.screen)}if(e=e||{},!RTCPeerConnection.prototype.getSenders)return void r.addStream(e);if(e instanceof MediaStreamTrack)return void b(e,A,t);if(e instanceof F)return w(e,"video").length&&b(w(e,"video")[0],A,!0),void(w(e,"audio").length&&b(w(e,"audio")[0],A,!1));if(g(e)){throw"connection.replaceTrack requires audio and/or video and/or screen."}(e.audio||e.video||e.screen)&&(e.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:p(r)}).then(function(A){A.isScreen=!0,S.onGettingLocalMedia(A),(e.audio||e.video)&&!p(r)?r.invokeGetUserMedia(null,n):n(A)},function(){webrtcdev.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):r.invokeGetUserMedia({audio:p(r),video:!0,isScreen:!0},(e.audio||e.video)&&!p(r)?r.invokeGetUserMedia(null,n):n):(e.audio||e.video)&&r.invokeGetUserMedia(null,n))},r.resetTrack=function(e,A){e||(e=r.getAllParticipants()),"string"==typeof e&&(e=[e]),e.forEach(function(e){var t=r.peers[e].peer;("undefined"==typeof A||!0===A)&&t.lastVideoTrack&&r.replaceTrack(t.lastVideoTrack,e,!0),("undefined"==typeof A||!1===A)&&t.lastAudioTrack&&r.replaceTrack(t.lastAudioTrack,e,!1)})},r.renegotiate=function(e){return e?void S.renegotiatePeer(e):void r.peers.getAllParticipants().forEach(function(e){S.renegotiatePeer(e)})},r.setStreamEndHandler=function(e,A){if(e&&e.addEventListener&&(A=!!A,!e.alreadySetEndHandler)){e.alreadySetEndHandler=!0;var t="ended";"oninactive"in e&&(t="inactive"),e.addEventListener(t,function(){if(e.idInstance&&currentUserMediaRequest.remove(e.idInstance),!A){var t=[];r.attachStreams.forEach(function(A){A.id!=e.id&&t.push(A)}),r.attachStreams=t}var n=r.streamEvents[e.streamid];if(n||(n={stream:e,streamid:e.streamid,type:A?"remote":"local",userid:r.userid,extra:r.extra,mediaElement:r.streamEvents[e.streamid]?r.streamEvents[e.streamid].mediaElement:null}),A&&r.peers[n.userid]){var a=r.peers[n.userid].peer,t=[];a.getRemoteStreams().forEach(function(A){A.id!=e.id&&t.push(A)}),r.peers[n.userid].streams=t}n.userid===r.userid&&"remote"===n.type||(r.peersBackup[n.userid]&&(n.extra=r.peersBackup[n.userid].extra),r.onstreamended(n),delete r.streamEvents[e.streamid])},!1)}},r.onMediaError=function(e,A){!r.enableLogs||webrtcdev.error(e,A)},r.autoCloseEntireSession=!1,r.filesContainer=r.videosContainer=document.body||document.documentElement,r.isInitiator=!1,r.shareFile=S.shareFile,"undefined"!=typeof I&&I.handle(r),"undefined"!=typeof TranslationHandler&&TranslationHandler.handle(r),r.token=d,r.onNewParticipant=function(e,A){r.acceptParticipationRequest(e,A)},r.acceptParticipationRequest=function(e,A){A.successCallback&&(A.successCallback(),delete A.successCallback),S.createNewPeer(e,A)},"undefined"!=typeof T&&(r.StreamsHandler=T),r.onleave=function(){},r.invokeSelectFileDialog=function(e){var A=new FileSelector;A.accept="*.*",A.selectSingleFile(e)},r.onmute=function(A){if(A&&A.mediaElement){if("both"===A.muteType||"video"===A.muteType){A.mediaElement.src=null;var e=A.mediaElement.pause();"undefined"==typeof e?A.mediaElement.poster=A.snapshot||"muted.png":e.then(function(){A.mediaElement.poster=A.snapshot||"muted.png"})}else"audio"===A.muteType&&(A.mediaElement.muted=!0);webrtcdev.log("[RtcConn] onmute")}},r.onunmute=function(A){A&&A.mediaElement&&A.stream&&("both"===A.unmuteType||"video"===A.unmuteType?(A.mediaElement.poster=null,A.mediaElement.srcObject=A.stream,A.mediaElement.play()):"audio"===A.unmuteType&&(A.mediaElement.muted=!1),webrtcdev.log("[RtcConn] onunmute"))},r.onExtraDataUpdated=function(e){e.status="online",r.onUserStatusChanged(e,!0)},r.getAllParticipants=function(e){return r.peers.getAllParticipants(e)},"undefined"!=typeof T&&(T.onSyncNeeded=function(e,A,t){r.peers.getAllParticipants().forEach(function(n){S.onNegotiationNeeded({streamid:e,action:A,streamSyncNeeded:!0,type:t||"both"},n)})}),r.connectSocket=function(e){B(e)},r.closeSocket=function(){try{io.sockets={}}catch(A){}r.socket&&("function"==typeof r.socket.disconnect&&r.socket.disconnect(),"function"==typeof r.socket.resetProps&&r.socket.resetProps(),r.socket=null)},r.getSocket=function(e){return!e&&r.enableLogs&&webrtcdev.warn("getSocket.callback paramter is required."),e=e||function(){},r.socket?e(r.socket):B(function(){e(r.socket)}),r.socket},r.getRemoteStreams=S.getRemoteStreams;var R=["selectFirst","selectAll","forEach"];if(r.streamEvents={selectFirst:function(e){return r.streamEvents.selectAll(e)[0]},selectAll:function(e){e||(e={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==e&&(e={local:!0}),"remote"==e&&(e={remote:!0}),"screen"==e&&(e={isScreen:!0}),"audio"==e&&(e={isAudio:!0}),"video"==e&&(e={isVideo:!0});var A=[];return Object.keys(r.streamEvents).forEach(function(t){var n=r.streamEvents[t];if(-1===R.indexOf(t)){var a=!0;e.local&&"local"===n.type&&(a=!1),e.remote&&"remote"===n.type&&(a=!1),e.isScreen&&n.stream.isScreen&&(a=!1),e.isVideo&&n.stream.isVideo&&(a=!1),e.isAudio&&n.stream.isAudio&&(a=!1),e.userid&&n.userid===e.userid&&(a=!1),!1==a&&A.push(n)}}),A}},r.socketMessageEvent="@@socketMessageEvent",r.socketCustomEvent="@@socketCustomEvent",r.DetectRTC=DetectRTC,r.setCustomSocketEvent=function(e){e&&(r.socketCustomEvent=e),r.socket&&r.socket.emit("set-custom-socket-event-listener",r.socketCustomEvent)},r.getNumberOfBroadcastViewers=function(e,A){r.socket&&e&&A&&r.socket.emit("get-number-of-users-in-specific-broadcast",e,A)},r.onNumberOfBroadcastViewersUpdated=function(e){r.enableLogs&&r.isInitiator&&webrtcdev.info("Number of broadcast (",e.broadcastId,") viewers",e.numberOfBroadcastViewers)},r.onUserStatusChanged=function(e,A){!r.enableLogs||A||webrtcdev.info(e.userid,e.status)},r.getUserMediaHandler=U,r.multiPeersHandler=S,r.enableLogs=!0,r.setCustomSocketHandler=function(e){"undefined"!=typeof t&&(t=e)},r.chunkSize=40000,r.maxParticipantsAllowed=1e3,r.disconnectWith=S.disconnectWith,r.checkPresence=function(e,A){return e=e||r.sessionid,"SSEConnection"===t.name?void SSEConnection.checkPresence(e,function(e,t,n){return r.socket?void A(e,t):(e||(r.userid=t),void r.connectSocket(function(){A(e,t,n)}))}):r.socket?void r.socket.emit("check-presence",e+"",function(e,t,n){r.enableLogs&&webrtcdev.log("checkPresence.isRoomExist: ",e," roomid: ",t),A(e,t,n)}):void r.connectSocket(function(){r.checkPresence(e,A)})},r.onReadyForOffer=function(e,A){r.multiPeersHandler.createNewPeer(e,A)},r.setUserPreferences=function(e){return r.dontAttachStream&&(e.dontAttachLocalStream=!0),r.dontGetRemoteStream&&(e.dontGetRemoteStream=!0),e},r.updateExtraData=function(){r.socket.emit("extra-data-updated",r.extra)},r.enableScalableBroadcast=!1,r.maxRelayLimitPerUser=3,r.dontCaptureUserMedia=!1,r.dontAttachStream=!1,r.dontGetRemoteStream=!1,r.onReConnecting=function(e){r.enableLogs&&webrtcdev.info("ReConnecting with",e.userid,"...")},r.beforeAddingStream=function(e){return e},r.beforeRemovingStream=function(e){return e},r.modifyScreenConstraints=function(e){return e},r.onPeerStateChanged=function(e){r.enableLogs&&-1!==e.iceConnectionState.search(/closed|failed/gi)&&webrtcdev.error("Peer connection is closed between you & ",e.userid,e.extra,"state:",e.iceConnectionState)},r.isOnline=!0,c("online",function(){r.isOnline=!0}),c("offline",function(){r.isOnline=!1}),r.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(r.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),r.isLowBandwidth)){if(r.bandwidth={audio:!1,video:!1,screen:!1},r.mediaConstraints.audio&&r.mediaConstraints.audio.optional&&r.mediaConstraints.audio.optional.length){var L=[];r.mediaConstraints.audio.optional.forEach(function(e){"undefined"==typeof e.bandwidth&&L.push(e)}),r.mediaConstraints.audio.optional=L}if(r.mediaConstraints.video&&r.mediaConstraints.video.optional&&r.mediaConstraints.video.optional.length){var L=[];r.mediaConstraints.video.optional.forEach(function(e){"undefined"==typeof e.bandwidth&&L.push(e)}),r.mediaConstraints.video.optional=L}}r.getExtraData=function(e,A){if(!e)throw"remoteUserId is required.";return"function"==typeof A?void r.socket.emit("get-remote-user-extra-data",e,function(e,t,n){A(e,t,n)}):r.peers[e]?r.peers[e].extra:r.peersBackup[e]?r.peersBackup[e].extra:{}},!A.autoOpenOrJoin||r.openOrJoin(r.sessionid),r.onUserIdAlreadyTaken=function(e){r.close(),r.closeSocket(),r.isInitiator=!1,r.userid=r.token(),r.join(r.sessionid),r.enableLogs&&webrtcdev.warn("Userid already taken.",e,"Your new userid:",r.userid)},r.trickleIce=!0,r.version="@@version",r.onSettingLocalDescription=function(e){r.enableLogs&&webrtcdev.info("Set local description for remote user",e.userid)},r.resetScreen=function(){sourceId=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},r.autoCreateMediaElement=!0,r.password=null,r.setPassword=function(e,A){A=A||function(){},r.socket?r.socket.emit("set-password",e,A):(r.password=e,A(!0,r.sessionid,null))},r.onSocketDisconnect=function(){r.enableLogs&&webrtcdev.warn("socket.io connection is closed")},r.onSocketError=function(){r.enableLogs&&webrtcdev.warn("socket.io connection is failed")},r.errors={ROOM_NOT_AVAILABLE:"Session id not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"session permission denied",ROOM_FULL:"session capacity is full",DID_NOT_JOIN_ANY_ROOM:"Did not join any session yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}})(this)};"undefined"!=typeof module&&(module.exports=exports=RTCMultiConnection),"function"==typeof define&&define.amd&&define("RTCMultiConnection",[],function(){return RTCMultiConnection}),function(e,A){"object"==typeof exports&&"object"==typeof module?module.exports=A():"function"==typeof define&&define.amd?define([],A):"object"==typeof exports?exports.html2canvas=A():e.html2canvas=A()}(this,function(){var e=Math.ceil,A=Math.PI,t=Math.floor,n=Math.abs,r=Math.round,s=Math.sqrt,d=Math.max,l=Math.min;return function(e){function A(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,A),r.l=!0,r.exports}var t={};return A.m=e,A.c=t,A.d=function(e,t,n){A.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},A.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,A){return Object.prototype.hasOwnProperty.call(e,A)},A.p="",A(A.s=27)}([function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var n=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),s=function(e){var A=e.match(/^#([a-f0-9]{3})$/i);return!!A&&[parseInt(A[1][0]+A[1][0],16),parseInt(A[1][1]+A[1][1],16),parseInt(A[1][2]+A[1][2],16),null]},d=function(e){var A=e.match(/^#([a-f0-9]{6})$/i);return!!A&&[parseInt(A[1].substring(0,2),16),parseInt(A[1].substring(2,4),16),parseInt(A[1].substring(4,6),16),null]},c=function(e){var A=e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/);return!!A&&[+A[1],+A[2],+A[3],null]},B=function(e){var A=e.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/);return!!(A&&4<A.length)&&[+A[1],+A[2],+A[3],+A[4]]},u=function(e){return[l(e[0],255),l(e[1],255),l(e[2],255),3<e.length?e[3]:null]},m=function(e){var A=w[e.toLowerCase()];return!!A&&A},p=function(){function e(A){t(this,e);var l=Array.isArray(A)?u(A):s(A)||c(A)||B(A)||m(A)||d(A)||[0,0,0,null],p=n(l,4),w=p[0],r=p[1],g=p[2],h=p[3];this.r=w,this.g=r,this.b=g,this.a=h}return r(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),e}();A.default=p;var w={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},h=A.TRANSPARENT=new p([0,0,0,0])},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var n=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),r=A.LENGTH_TYPE={PX:0,PERCENTAGE:1},a=function(){function e(A){t(this,e),this.type="%"===A.substr(A.length-1)?r.PERCENTAGE:r.PX;var n=parseFloat(A);isNaN(n)&&console.error("Invalid value given for Length: \""+A+"\""),this.value=isNaN(n)?0:n}return n(e,[{key:"isPercentage",value:function(){return this.type===r.PERCENTAGE}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(A){return new e(A)}}]),e}();A.default=a;var s=function e(A){var t=A.parent;return t?e(t):parseFloat(A.style.font.fontSize)},d=A.calculateLengthFromValueWithUnit=function(e,A,t){switch(t){case"px":case"%":return new a(A+t);case"em":case"rem":var n=new a(A);return n.value*="em"===t?parseFloat(e.style.font.fontSize):s(e),n;default:return new a("0");}}},function(e,A,t){"";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseBoundCurves=A.calculatePaddingBoxPath=A.calculateBorderBoxPath=A.parsePathForBorder=A.parseDocumentSize=A.calculateContentBox=A.calculatePaddingBox=A.parseBounds=A.Bounds=void 0;var a=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),c=t(7),B=n(c),g=t(32),u=n(g),m=0,p=1,w=2,h=3,Q=0,C=1,U=A.Bounds=function(){function e(A,t,n,a){r(this,e),this.left=A,this.top=t,this.width=n,this.height=a}return a(e,null,[{key:"fromClientRect",value:function(A,t,n){return new e(A.left+t,A.top+n,A.width,A.height)}}]),e}(),E=A.parseBounds=function(e,A,t){return U.fromClientRect(e.getBoundingClientRect(),A,t)},F=A.calculatePaddingBox=function(e,A){return new U(e.left+A[h].borderWidth,e.top+A[m].borderWidth,e.width-(A[p].borderWidth+A[h].borderWidth),e.height-(A[m].borderWidth+A[w].borderWidth))},b=A.calculateContentBox=function(e,A,t){var n=A[m].value,r=A[p].value,a=A[w].value,s=A[h].value;return new U(e.left+s+t[h].borderWidth,e.top+n+t[m].borderWidth,e.width-(t[p].borderWidth+t[h].borderWidth+s+r),e.height-(t[m].borderWidth+t[w].borderWidth+n+a))},H=A.parseDocumentSize=function(e){var A=e.body,t=e.documentElement;if(!A||!t)throw new Error("Unable to get document size");var n=d(d(A.scrollWidth,t.scrollWidth),d(A.offsetWidth,t.offsetWidth),d(A.clientWidth,t.clientWidth)),r=d(d(A.scrollHeight,t.scrollHeight),d(A.offsetHeight,t.offsetHeight),d(A.clientHeight,t.clientHeight));return new U(0,0,n,r)},T=A.parsePathForBorder=function(e,A){switch(A){case m:return S(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case p:return S(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case w:return S(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case h:default:return S(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner);}},S=function(e,A,t,n){var r=[];return e instanceof u.default?r.push(e.subdivide(.5,!1)):r.push(e),t instanceof u.default?r.push(t.subdivide(.5,!0)):r.push(t),n instanceof u.default?r.push(n.subdivide(.5,!0).reverse()):r.push(n),A instanceof u.default?r.push(A.subdivide(.5,!1).reverse()):r.push(A),r},I=A.calculateBorderBoxPath=function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]},N=A.calculatePaddingBoxPath=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},R=A.parseBoundCurves=function(e,A,t){var n=t[L.TOP_LEFT][Q].getAbsoluteValue(e.width),r=t[L.TOP_LEFT][C].getAbsoluteValue(e.height),a=t[L.TOP_RIGHT][Q].getAbsoluteValue(e.width),s=t[L.TOP_RIGHT][C].getAbsoluteValue(e.height),c=t[L.BOTTOM_RIGHT][Q].getAbsoluteValue(e.width),g=t[L.BOTTOM_RIGHT][C].getAbsoluteValue(e.height),u=t[L.BOTTOM_LEFT][Q].getAbsoluteValue(e.width),U=t[L.BOTTOM_LEFT][C].getAbsoluteValue(e.height),E=[];E.push((n+a)/e.width),E.push((u+c)/e.width),E.push((r+U)/e.height),E.push((s+g)/e.height);var F=d.apply(Math,E);1<F&&(n/=F,r/=F,a/=F,s/=F,c/=F,g/=F,u/=F,U/=F);var b=e.width-a,H=e.height-g,T=e.width-c,S=e.height-U;return{topLeftOuter:0<n||0<r?M(e.left,e.top,n,r,L.TOP_LEFT):new B.default(e.left,e.top),topLeftInner:0<n||0<r?M(e.left+A[h].borderWidth,e.top+A[m].borderWidth,d(0,n-A[h].borderWidth),d(0,r-A[m].borderWidth),L.TOP_LEFT):new B.default(e.left+A[h].borderWidth,e.top+A[m].borderWidth),topRightOuter:0<a||0<s?M(e.left+b,e.top,a,s,L.TOP_RIGHT):new B.default(e.left+e.width,e.top),topRightInner:0<a||0<s?M(e.left+l(b,e.width+A[h].borderWidth),e.top+A[m].borderWidth,b>e.width+A[h].borderWidth?0:a-A[h].borderWidth,s-A[m].borderWidth,L.TOP_RIGHT):new B.default(e.left+e.width-A[p].borderWidth,e.top+A[m].borderWidth),bottomRightOuter:0<c||0<g?M(e.left+T,e.top+H,c,g,L.BOTTOM_RIGHT):new B.default(e.left+e.width,e.top+e.height),bottomRightInner:0<c||0<g?M(e.left+l(T,e.width-A[h].borderWidth),e.top+l(H,e.height+A[m].borderWidth),d(0,c-A[p].borderWidth),g-A[w].borderWidth,L.BOTTOM_RIGHT):new B.default(e.left+e.width-A[p].borderWidth,e.top+e.height-A[w].borderWidth),bottomLeftOuter:0<u||0<U?M(e.left,e.top+S,u,U,L.BOTTOM_LEFT):new B.default(e.left,e.top+e.height),bottomLeftInner:0<u||0<U?M(e.left+A[h].borderWidth,e.top+S,d(0,u-A[h].borderWidth),U-A[w].borderWidth,L.BOTTOM_LEFT):new B.default(e.left+A[h].borderWidth,e.top+e.height-A[w].borderWidth)}},L={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},M=function(e,A,t,n,r){var a=4*((s(2)-1)/3),d=t*a,l=n*a,c=e+t,g=A+n;switch(r){case L.TOP_LEFT:return new u.default(new B.default(e,g),new B.default(e,g-l),new B.default(c-d,A),new B.default(c,A));case L.TOP_RIGHT:return new u.default(new B.default(e,A),new B.default(e+d,A),new B.default(c,g-l),new B.default(c,g));case L.BOTTOM_RIGHT:return new u.default(new B.default(c,A),new B.default(c,A+l),new B.default(e+d,g),new B.default(e,g));case L.BOTTOM_LEFT:default:return new u.default(new B.default(c,g),new B.default(c-d,g),new B.default(e,A+l),new B.default(e,A));}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.contains=function(e,A){return 0!=(e&A)},n=A.distance=function(e,A){return s(e*e+A*A)},r=A.copyCSSStyles=function(e,A){for(var t=e.length-1,n;0<=t;t--)n=e.item(t),"content"!==n&&A.style.setProperty(n,e.getPropertyValue(n));return A},a=A.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(e,A,t){"";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseBackgroundImage=A.parseBackground=A.calculateBackgroundRepeatPath=A.calculateBackgroundPosition=A.calculateBackgroungPositioningArea=A.calculateBackgroungPaintingArea=A.calculateGradientBackgroundSize=A.calculateBackgroundSize=A.BACKGROUND_ORIGIN=A.BACKGROUND_CLIP=A.BACKGROUND_SIZE=A.BACKGROUND_REPEAT=void 0;var s=t(0),d=n(s),l=t(1),c=n(l),B=t(31),g=n(B),u=t(7),m=n(u),p=t(2),w=t(17),h=A.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},Q=A.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},C=A.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},U=A.BACKGROUND_ORIGIN=C,E="auto",F=function e(A){a(this,e);"contain"===A?this.size=Q.CONTAIN:"cover"===A?this.size=Q.COVER:"auto"===A?this.size=Q.AUTO:this.value=new c.default(A)},b=A.calculateBackgroundSize=function(e,A,t){var n=0,r=0,a=e.size;if(a[0].size===Q.CONTAIN||a[0].size===Q.COVER){var s=t.width/t.height,d=A.width/A.height;return s<d==(a[0].size===Q.COVER)?new g.default(t.height*d,t.height):new g.default(t.width,t.width/d)}return a[0].value&&(n=a[0].value.getAbsoluteValue(t.width)),a[0].size===Q.AUTO&&a[1].size===Q.AUTO?r=A.height:a[1].size===Q.AUTO?r=n/A.width*A.height:a[1].value&&(r=a[1].value.getAbsoluteValue(t.height)),a[0].size===Q.AUTO&&(n=r/A.height*A.width),new g.default(n,r)},H=A.calculateGradientBackgroundSize=function(e,A){var t=e.size,n=t[0].value?t[0].value.getAbsoluteValue(A.width):A.width,r=t[1].value?t[1].value.getAbsoluteValue(A.height):t[0].value?n:A.height;return new g.default(n,r)},T=new F(E),S=A.calculateBackgroungPaintingArea=function(e,A){switch(A){case C.BORDER_BOX:return(0,p.calculateBorderBoxPath)(e);case C.PADDING_BOX:default:return(0,p.calculatePaddingBoxPath)(e);}},I=A.calculateBackgroungPositioningArea=function(e,A,t,n){var r=(0,p.calculatePaddingBox)(A,n);switch(e){case U.BORDER_BOX:return A;case U.CONTENT_BOX:var a=t[w.PADDING_SIDES.LEFT].getAbsoluteValue(A.width),s=t[w.PADDING_SIDES.RIGHT].getAbsoluteValue(A.width),d=t[w.PADDING_SIDES.TOP].getAbsoluteValue(A.width),l=t[w.PADDING_SIDES.BOTTOM].getAbsoluteValue(A.width);return new p.Bounds(r.left+a,r.top+d,r.width-a-s,r.height-d-l);case U.PADDING_BOX:default:return r;}},N=A.calculateBackgroundPosition=function(e,A,t){return new m.default(e[0].getAbsoluteValue(t.width-A.width),e[1].getAbsoluteValue(t.height-A.height))},R=A.calculateBackgroundRepeatPath=function(e,A,t,n,a){var s=e.repeat;return s===h.REPEAT_X?[new m.default(r(a.left),r(n.top+A.y)),new m.default(r(a.left+a.width),r(n.top+A.y)),new m.default(r(a.left+a.width),r(t.height+n.top+A.y)),new m.default(r(a.left),r(t.height+n.top+A.y))]:s===h.REPEAT_Y?[new m.default(r(n.left+A.x),r(a.top)),new m.default(r(n.left+A.x+t.width),r(a.top)),new m.default(r(n.left+A.x+t.width),r(a.height+a.top)),new m.default(r(n.left+A.x),r(a.height+a.top))]:s===h.NO_REPEAT?[new m.default(r(n.left+A.x),r(n.top+A.y)),new m.default(r(n.left+A.x+t.width),r(n.top+A.y)),new m.default(r(n.left+A.x+t.width),r(n.top+A.y+t.height)),new m.default(r(n.left+A.x),r(n.top+A.y+t.height))]:[new m.default(r(a.left),r(a.top)),new m.default(r(a.left+a.width),r(a.top)),new m.default(r(a.left+a.width),r(a.height+a.top)),new m.default(r(a.left),r(a.height+a.top))]},L=A.parseBackground=function(e,A){return{backgroundColor:new d.default(e.backgroundColor),backgroundImage:k(e,A),backgroundClip:M(e.backgroundClip),backgroundOrigin:D(e.backgroundOrigin)}},M=function(e){return"padding-box"===e?C.PADDING_BOX:"content-box"===e?C.CONTENT_BOX:C.BORDER_BOX},D=function(e){return"padding-box"===e?U.PADDING_BOX:"content-box"===e?U.CONTENT_BOX:U.BORDER_BOX},O=function(e){switch(e.trim()){case"no-repeat":return h.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return h.REPEAT_X;case"repeat-y":case"no-repeat repeat":return h.REPEAT_Y;case"repeat":return h.REPEAT;}return console.error("Invalid background-repeat value \""+e+"\""),h.REPEAT},k=function(e,A){var t=P(e.backgroundImage).map(function(e){if("url"===e.method){var t=A.loadImage(e.args[0]);e.args=t?[t]:[]}return e}),n=e.backgroundPosition.split(","),r=e.backgroundRepeat.split(","),a=e.backgroundSize.split(",");return t.map(function(e,A){var t=(a[A]||E).trim().split(" ").map(K),s=(n[A]||E).trim().split(" ").map(_);return{source:e,repeat:O("string"==typeof r[A]?r[A]:r[0]),size:2>t.length?[t[0],T]:[t[0],t[1]],position:2>s.length?[s[0],s[0]]:[s[0],s[1]]}})},K=function(e){return"auto"===e?T:new F(e)},_=function(e){return"bottom"===e||"right"===e?new c.default("100%"):"left"===e||"top"===e?new c.default("0%"):"auto"===e?new c.default("0"):new c.default(e)},P=A.parseBackgroundImage=function(e){var A=[],t=[],n="",r=null,a="",s=0,d=0,l=function(){var e="";if(n){"\""===a.substr(0,1)&&(a=a.substr(1,a.length-2)),a&&t.push(a.trim());var r=n.indexOf("-",1)+1;"-"===n.substr(0,1)&&0<r&&(e=n.substr(0,r).toLowerCase(),n=n.substr(r)),n=n.toLowerCase(),"none"!==n&&A.push({prefix:e,method:n,args:t})}t=[],n=a=""};return e.split("").forEach(function(e){if(!(0===s&&/^\s$/.test(e))){switch(e){case"\"":r?r===e&&(r=null):r=e;break;case"(":if(r)break;else{if(0===s)return void(s=1);d++}break;case")":if(r)break;else if(1===s){if(0===d)return s=0,void l();d--}break;case",":if(r)break;else{if(0===s)return void l();if(1===s&&0===d&&!n.match(/^url$/i))return t.push(a.trim()),void(a="")}}0===s?n+=e:a+=e}}),l(),A}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=t(0),s=function(e){return e&&e.__esModule?e:{default:e}}(a),d=t(3),l=t(4),c=t(12),B=t(33),g=t(34),u=t(35),m=t(36),p=t(37),w=t(38),h=t(8),Q=t(39),C=t(40),U=t(18),E=t(17),F=t(19),b=t(11),H=t(41),T=t(20),S=t(42),I=t(43),N=t(44),R=t(45),L=t(2),M=t(21),D=t(14),O=["INPUT","TEXTAREA","SELECT"],k=function(){function e(A,t,r,a){var d=this;n(this,e),this.parent=t,this.tagName=A.tagName,this.index=a,this.childNodes=[],this.listItems=[],"number"==typeof A.start&&(this.listStart=A.start);var k=A.ownerDocument.defaultView,_=k.pageXOffset,P=k.pageYOffset,V=k.getComputedStyle(A,null),z=(0,g.parseDisplay)(V.display),X="radio"===A.type||"checkbox"===A.type,G=(0,F.parsePosition)(V.position);if(this.style={background:X?M.INPUT_BACKGROUND:(0,l.parseBackground)(V,r),border:X?M.INPUT_BORDERS:(0,c.parseBorder)(V),borderRadius:(A instanceof k.HTMLInputElement||A instanceof HTMLInputElement)&&X?(0,M.getInputBorderRadius)(A):(0,B.parseBorderRadius)(V),color:X?M.INPUT_COLOR:new s.default(V.color),display:z,float:(0,u.parseCSSFloat)(V.float),font:(0,m.parseFont)(V),letterSpacing:(0,p.parseLetterSpacing)(V.letterSpacing),listStyle:z===g.DISPLAY.LIST_ITEM?(0,h.parseListStyle)(V):null,lineBreak:(0,w.parseLineBreak)(V.lineBreak),margin:(0,Q.parseMargin)(V),opacity:parseFloat(V.opacity),overflow:-1===O.indexOf(A.tagName)?(0,C.parseOverflow)(V.overflow):C.OVERFLOW.HIDDEN,overflowWrap:(0,U.parseOverflowWrap)(V.overflowWrap?V.overflowWrap:V.wordWrap),padding:(0,E.parsePadding)(V),position:G,textDecoration:(0,b.parseTextDecoration)(V),textShadow:(0,H.parseTextShadow)(V.textShadow),textTransform:(0,T.parseTextTransform)(V.textTransform),transform:(0,S.parseTransform)(V),visibility:(0,I.parseVisibility)(V.visibility),wordBreak:(0,N.parseWordBreak)(V.wordBreak),zIndex:(0,R.parseZIndex)(G===F.POSITION.STATIC?"auto":V.zIndex)},this.isTransformed()&&(A.style.transform="matrix(1,0,0,1,0,0)"),z===g.DISPLAY.LIST_ITEM){var J=(0,D.getListOwner)(this);if(J){var Y=J.listItems.length;J.listItems.push(this),this.listIndex=A.hasAttribute("value")&&"number"==typeof A.value?A.value:0===Y?"number"==typeof J.listStart?J.listStart:1:J.listItems[Y-1].listIndex+1}}"IMG"===A.tagName&&A.addEventListener("load",function(){d.bounds=(0,L.parseBounds)(A,_,P),d.curvedBounds=(0,L.parseBoundCurves)(d.bounds,d.style.border,d.style.borderRadius)}),this.image=K(A,r),this.bounds=X?(0,M.reformatInputBounds)((0,L.parseBounds)(A,_,P)):(0,L.parseBounds)(A,_,P),this.curvedBounds=(0,L.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius),this.name=""+A.tagName.toLowerCase()+(A.id?"#"+A.id:"")+A.className.toString().split(" ").map(function(e){return e.length?"."+e:""}).join("")}return r(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[],A=this.style.overflow!==C.OVERFLOW.VISIBLE;return A?e.concat([(0,L.calculatePaddingBoxPath)(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,d.contains)(this.style.display,g.DISPLAY.NONE)&&0<this.style.opacity&&this.style.visibility===I.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==F.POSITION.STATIC&&this.style.position!==F.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==F.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==u.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,d.contains)(this.style.display,g.DISPLAY.INLINE)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_BLOCK)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_FLEX)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_GRID)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_LIST_ITEM)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,d.contains)(this.style.display,g.DISPLAY.INLINE_BLOCK)||(0,d.contains)(this.style.display,g.DISPLAY.INLINE_TABLE)}}]),e}();A.default=k;var K=function(e,A){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var t=new XMLSerializer;return A.loadImage("data:image/svg+xml,"+encodeURIComponent(t.serializeToString(e)))}switch(e.tagName){case"IMG":var n=e;return A.loadImage(n.currentSrc||n.src);case"CANVAS":return A.loadCanvas(e);case"IFRAME":var r=e.getAttribute("data-html2canvas-internal-iframe-key");if(r)return r;}return null}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=t(5);A.default=function e(A,t){n(this,e),this.type=r.PATH.VECTOR,this.x=A,this.y=t,isNaN(A)&&console.error("Invalid x value given for Vector"),isNaN(t)&&console.error("Invalid y value given for Vector")}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseListStyle=A.parseListStyleType=A.LIST_STYLE_TYPE=A.LIST_STYLE_POSITION=void 0;var n=t(4),r=A.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},a=A.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},s=A.parseListStyleType=function(e){switch(e){case"disc":return a.DISC;case"circle":return a.CIRCLE;case"square":return a.SQUARE;case"decimal":return a.DECIMAL;case"cjk-decimal":return a.CJK_DECIMAL;case"decimal-leading-zero":return a.DECIMAL_LEADING_ZERO;case"lower-roman":return a.LOWER_ROMAN;case"upper-roman":return a.UPPER_ROMAN;case"lower-greek":return a.LOWER_GREEK;case"lower-alpha":return a.LOWER_ALPHA;case"upper-alpha":return a.UPPER_ALPHA;case"arabic-indic":return a.ARABIC_INDIC;case"armenian":return a.ARMENIAN;case"bengali":return a.BENGALI;case"cambodian":return a.CAMBODIAN;case"cjk-earthly-branch":return a.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return a.CJK_HEAVENLY_STEM;case"cjk-ideographic":return a.CJK_IDEOGRAPHIC;case"devanagari":return a.DEVANAGARI;case"ethiopic-numeric":return a.ETHIOPIC_NUMERIC;case"georgian":return a.GEORGIAN;case"gujarati":return a.GUJARATI;case"gurmukhi":return a.GURMUKHI;case"hebrew":return a.HEBREW;case"hiragana":return a.HIRAGANA;case"hiragana-iroha":return a.HIRAGANA_IROHA;case"japanese-formal":return a.JAPANESE_FORMAL;case"japanese-informal":return a.JAPANESE_INFORMAL;case"kannada":return a.KANNADA;case"katakana":return a.KATAKANA;case"katakana-iroha":return a.KATAKANA_IROHA;case"khmer":return a.KHMER;case"korean-hangul-formal":return a.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return a.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return a.KOREAN_HANJA_INFORMAL;case"lao":return a.LAO;case"lower-armenian":return a.LOWER_ARMENIAN;case"malayalam":return a.MALAYALAM;case"mongolian":return a.MONGOLIAN;case"myanmar":return a.MYANMAR;case"oriya":return a.ORIYA;case"persian":return a.PERSIAN;case"simp-chinese-formal":return a.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return a.SIMP_CHINESE_INFORMAL;case"tamil":return a.TAMIL;case"telugu":return a.TELUGU;case"thai":return a.THAI;case"tibetan":return a.TIBETAN;case"trad-chinese-formal":return a.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return a.TRAD_CHINESE_INFORMAL;case"upper-armenian":return a.UPPER_ARMENIAN;case"disclosure-open":return a.DISCLOSURE_OPEN;case"disclosure-closed":return a.DISCLOSURE_CLOSED;case"none":default:return a.NONE;}},d=A.parseListStyle=function(e){var A=(0,n.parseBackgroundImage)(e.getPropertyValue("list-style-image"));return{listStyleType:s(e.getPropertyValue("list-style-type")),listStyleImage:A.length?A[0]:null,listStylePosition:l(e.getPropertyValue("list-style-position"))}},l=function(e){switch(e){case"inside":return r.INSIDE;case"outside":default:return r.OUTSIDE;}}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}function r(e,A,t){return 0<e.length?A+t.toUpperCase():e}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),s=t(20),d=t(22),l=function(){function e(A,t,r){n(this,e),this.text=A,this.parent=t,this.bounds=r}return a(e,null,[{key:"fromTextNode",value:function(A,t){var n=c(A.data,t.style.textTransform);return new e(n,t,(0,d.parseTextBounds)(n,t,A))}}]),e}();A.default=l;var c=function(e,A){return A===s.TEXT_TRANSFORM.LOWERCASE?e.toLowerCase():A===s.TEXT_TRANSFORM.CAPITALIZE?e.replace(/(^|\s|:|-|\(|\))([a-z])/g,r):A===s.TEXT_TRANSFORM.UPPERCASE?e.toUpperCase():e}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0});var n=t(23),a=function(e){if(e.createRange){var A=e.createRange();if(A.getBoundingClientRect){var t=e.createElement("boundtest");t.style.height="123px",t.style.display="block",e.body.appendChild(t),A.selectNode(t);var n=A.getBoundingClientRect(),a=r(n.height);if(e.body.removeChild(t),123===a)return!0}}return!1},s=function(e,A){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");return new Promise(function(a){t.src=A;var s=function(){try{r.drawImage(t,0,0),n.toDataURL()}catch(A){return a(!1)}return a(!0)};t.onload=s,t.onerror=function(){return a(!1)},!0===t.complete&&setTimeout(function(){s()},500)})},d=function(){return"undefined"!=typeof new Image().crossOrigin},l=function(){return"string"==typeof new XMLHttpRequest().responseType},c=function(e){var A=new Image,t=e.createElement("canvas"),n=t.getContext("2d");A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(A,0,0),t.toDataURL()}catch(A){return!1}return!0},B=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},g=function(e){var A=e.createElement("canvas"),t=100;A.width=t,A.height=t;var r=A.getContext("2d");r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var a=new Image,s=A.toDataURL();a.src=s;var d=(0,n.createForeignObjectSVG)(t,t,0,0,a);return r.fillStyle="red",r.fillRect(0,0,t,t),(0,n.loadSerializedSVG)(d).then(function(A){r.drawImage(A,0,0);var a=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var d=e.createElement("div");return d.style.backgroundImage="url("+s+")",d.style.height=t+"px",B(a)?(0,n.loadSerializedSVG)((0,n.createForeignObjectSVG)(t,t,0,0,d)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),B(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},u={get SUPPORT_RANGE_BOUNDS(){'';var e=a(document);return Object.defineProperty(u,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){'';var e=c(document);return Object.defineProperty(u,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_BASE64_DRAWING(){'';return function(e){var A=s(document,e);return Object.defineProperty(u,"SUPPORT_BASE64_DRAWING",{value:function(){return A}}),A}},get SUPPORT_FOREIGNOBJECT_DRAWING(){'';var e="function"==typeof Array.from&&"function"==typeof window.fetch?g(document):Promise.resolve(!1);return Object.defineProperty(u,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){'';var e=d();return Object.defineProperty(u,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){'';var e=l();return Object.defineProperty(u,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){'';var e=("withCredentials"in new XMLHttpRequest);return Object.defineProperty(u,"SUPPORT_CORS_XHR",{value:e}),e}};A.default=u},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextDecoration=A.TEXT_DECORATION_LINE=A.TEXT_DECORATION=A.TEXT_DECORATION_STYLE=void 0;var n=t(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=A.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},s=A.TEXT_DECORATION={NONE:null},d=A.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},l=function(e){return"underline"===e?d.UNDERLINE:"overline"===e?d.OVERLINE:"line-through"===e?d.LINE_THROUGH:d.BLINK},c=function(e){return"none"===e?null:e.split(" ").map(l)},B=function(e){return"double"===e?a.DOUBLE:"dotted"===e?a.DOTTED:"dashed"===e?a.DASHED:"wavy"===e?a.WAVY:a.SOLID},g=A.parseTextDecoration=function(e){var A=c(e.textDecorationLine?e.textDecorationLine:e.textDecoration);if(null===A)return s.NONE;var t=e.textDecorationColor?new r.default(e.textDecorationColor):null,n=B(e.textDecorationStyle);return{textDecorationLine:A,textDecorationColor:t,textDecorationStyle:n}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseBorder=A.BORDER_SIDES=A.BORDER_STYLE=void 0;var n=t(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=A.BORDER_STYLE={NONE:0,SOLID:1},s=A.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},d=Object.keys(s).map(function(e){return e.toLowerCase()}),l=function(e){return"none"===e?a.NONE:a.SOLID},c=A.parseBorder=function(e){return d.map(function(A){var t=new r.default(e.getPropertyValue("border-"+A+"-color")),n=l(e.getPropertyValue("border-"+A+"-style")),a=parseFloat(e.getPropertyValue("border-"+A+"-width"));return{borderColor:t,borderStyle:n,borderWidth:isNaN(a)?0:a}})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});for(var t=A.toCodePoints=function(e){for(var A=[],t=0,n=e.length;t<n;){var r=e.charCodeAt(t++);if(55296<=r&&56319>=r&&t<n){var a=e.charCodeAt(t++);56320==(64512&a)?A.push(((1023&r)<<10)+(1023&a)+65536):(A.push(r),t--)}else A.push(r)}return A},n=A.fromCodePoint=function(){var e=String.fromCodePoint;if(e)return e.apply(String,arguments);var A=arguments.length;if(!A)return"";for(var t=[],n=-1,r="";++n<A;){var a=arguments.length<=n?void 0:arguments[n];65535>=a?t.push(a):(a-=65536,t.push((a>>10)+55296,a%1024+56320)),(n+1===A||16384<t.length)&&(r+=String.fromCharCode.apply(String,t),t.length=0)}return r},r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<r.length;s++)a[r.charCodeAt(s)]=s;var d=A.decode=function(e){var A=.75*e.length,t=e.length,n=0,r,s,d,l,c;"="===e[e.length-1]&&(A--,"="===e[e.length-2]&&A--);var B="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint8Array.prototype.slice?new ArrayBuffer(A):Array(A),g=Array.isArray(B)?B:new Uint8Array(B);for(r=0;r<t;r+=4)s=a[e.charCodeAt(r)],d=a[e.charCodeAt(r+1)],l=a[e.charCodeAt(r+2)],c=a[e.charCodeAt(r+3)],g[n++]=s<<2|d>>4,g[n++]=(15&d)<<4|l>>2,g[n++]=(3&l)<<6|63&c;return B},l=A.polyUint16Array=function(e){for(var A=e.length,t=[],n=0;n<A;n+=2)t.push(e[n+1]<<8|e[n]);return t},c=A.polyUint32Array=function(e){for(var A=e.length,t=[],n=0;n<A;n+=4)t.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return t}},function(e,A,r){"";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.createCounterText=A.inlineListItemElement=A.getListOwner=void 0;var s=r(3),d=r(6),l=a(d),c=r(9),B=a(c),g=r(8),u=r(24),m=["OL","UL","MENU"],p=A.getListOwner=function(e){var A=e.parent;if(!A)return null;do{var t=-1!==m.indexOf(A.tagName);if(t)return A;A=A.parent}while(A);return e.parent},w=A.inlineListItemElement=function(e,A,t){var n=A.style.listStyle;if(n){var r=e.ownerDocument.defaultView.getComputedStyle(e,null),a=e.ownerDocument.createElement("html2canvaswrapper");switch((0,s.copyCSSStyles)(r,a),a.style.position="absolute",a.style.bottom="auto",a.style.display="block",a.style.letterSpacing="normal",n.listStylePosition){case g.LIST_STYLE_POSITION.OUTSIDE:a.style.left="auto",a.style.right=e.ownerDocument.defaultView.innerWidth-A.bounds.left-A.style.margin[1].getAbsoluteValue(A.bounds.width)+7+"px",a.style.textAlign="right";break;case g.LIST_STYLE_POSITION.INSIDE:a.style.left=A.bounds.left-A.style.margin[3].getAbsoluteValue(A.bounds.width)+"px",a.style.right="auto",a.style.textAlign="left";}var d=void 0,c=A.style.margin[0].getAbsoluteValue(A.bounds.width),u=n.listStyleImage;if(!u)"number"==typeof A.listIndex&&(d=e.ownerDocument.createTextNode(k(A.listIndex,n.listStyleType,!0)),a.appendChild(d),a.style.top=A.bounds.top-c+"px");else if("url"===u.method){var m=e.ownerDocument.createElement("img");m.src=u.args[0],a.style.top=A.bounds.top-c+"px",a.style.width="auto",a.style.height="auto",a.appendChild(m)}else{var p=.5*parseFloat(A.style.font.fontSize);a.style.top=A.bounds.top-c+A.bounds.height-1.5*p+"px",a.style.width=p+"px",a.style.height=p+"px",a.style.backgroundImage=r.listStyleImage}var w=e.ownerDocument.body;w.appendChild(a),d?(A.childNodes.push(B.default.fromTextNode(d,A)),w.removeChild(a)):A.childNodes.push(new l.default(a,A,t,0))}},h={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Q={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},C={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},U={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},E=function(e,A,t,n,r,a){return e<A||e>t?k(e,r,0<a.length):n.integers.reduce(function(A,t,r){for(;e>=t;)e-=t,A+=n.values[r];return A},"")+a},F=function(e,A,t,n){var r="";do t||e--,r=n(e)+r,e/=A;while(e*A>=A);return r},b=function(e,A,r,a,s){var d=r-A+1;return(0>e?"-":"")+(F(n(e),d,a,function(e){return(0,u.fromCodePoint)(t(e%d)+A)})+s)},H=function(e,A){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:". ",a=A.length;return F(n(e),a,!1,function(e){return A[t(e%a)]})+r},T=1,S=2,I=4,N=8,R=function(e,A,r,a,d,l){if(-9999>e||9999<e)return k(e,g.LIST_STYLE_TYPE.CJK_DECIMAL,0<d.length);var c=n(e),B=d;if(0===c)return A[0]+B;for(var u=0,m;0<c&&4>=u;u++)m=c%10,0===m&&(0,s.contains)(l,T)&&""!==B?B=A[m]+B:1<m||1===m&&0===u||1===m&&1===u&&(0,s.contains)(l,S)||1===m&&1===u&&(0,s.contains)(l,I)&&100<e||1===m&&1<u&&(0,s.contains)(l,N)?B=A[m]+(0<u?r[u-1]:"")+B:1===m&&0<u&&(B=r[u-1]+B),c=t(c/10);return(0>e?a:"")+B},L="\u5341\u767E\u5343\u842C",M="\u62FE\u4F70\u4EDF\u842C",D="\u30DE\u30A4\u30CA\u30B9",O="\uB9C8\uC774\uB108\uC2A4 ",k=A.createCounterText=function(e,A,t){var n=t?". ":"",r=t?"\u3001":"",a=t?", ":"";switch(A){case g.LIST_STYLE_TYPE.DISC:return"\u2022";case g.LIST_STYLE_TYPE.CIRCLE:return"\u25E6";case g.LIST_STYLE_TYPE.SQUARE:return"\u25FE";case g.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var s=b(e,48,57,!0,n);return 4>s.length?"0"+s:s;case g.LIST_STYLE_TYPE.CJK_DECIMAL:return H(e,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",r);case g.LIST_STYLE_TYPE.LOWER_ROMAN:return E(e,1,3999,h,g.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case g.LIST_STYLE_TYPE.UPPER_ROMAN:return E(e,1,3999,h,g.LIST_STYLE_TYPE.DECIMAL,n);case g.LIST_STYLE_TYPE.LOWER_GREEK:return b(e,945,969,!1,n);case g.LIST_STYLE_TYPE.LOWER_ALPHA:return b(e,97,122,!1,n);case g.LIST_STYLE_TYPE.UPPER_ALPHA:return b(e,65,90,!1,n);case g.LIST_STYLE_TYPE.ARABIC_INDIC:return b(e,1632,1641,!0,n);case g.LIST_STYLE_TYPE.ARMENIAN:case g.LIST_STYLE_TYPE.UPPER_ARMENIAN:return E(e,1,9999,Q,g.LIST_STYLE_TYPE.DECIMAL,n);case g.LIST_STYLE_TYPE.LOWER_ARMENIAN:return E(e,1,9999,Q,g.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case g.LIST_STYLE_TYPE.BENGALI:return b(e,2534,2543,!0,n);case g.LIST_STYLE_TYPE.CAMBODIAN:case g.LIST_STYLE_TYPE.KHMER:return b(e,6112,6121,!0,n);case g.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return H(e,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",r);case g.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return H(e,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",r);case g.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case g.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return R(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",L,"\u8CA0",r,S|I|N);case g.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return R(e,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",M,"\u8CA0",r,T|S|I|N);case g.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return R(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",L,"\u8D1F",r,S|I|N);case g.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return R(e,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",M,"\u8D1F",r,T|S|I|N);case g.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return R(e,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",D,r,0);case g.LIST_STYLE_TYPE.JAPANESE_FORMAL:return R(e,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",D,r,T|S|I);case g.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return R(e,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",O,a,T|S|I);case g.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return R(e,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",O,a,0);case g.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return R(e,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",O,a,T|S|I);case g.LIST_STYLE_TYPE.DEVANAGARI:return b(e,2406,2415,!0,n);case g.LIST_STYLE_TYPE.GEORGIAN:return E(e,1,19999,U,g.LIST_STYLE_TYPE.DECIMAL,n);case g.LIST_STYLE_TYPE.GUJARATI:return b(e,2790,2799,!0,n);case g.LIST_STYLE_TYPE.GURMUKHI:return b(e,2662,2671,!0,n);case g.LIST_STYLE_TYPE.HEBREW:return E(e,1,10999,C,g.LIST_STYLE_TYPE.DECIMAL,n);case g.LIST_STYLE_TYPE.HIRAGANA:return H(e,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case g.LIST_STYLE_TYPE.HIRAGANA_IROHA:return H(e,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case g.LIST_STYLE_TYPE.KANNADA:return b(e,3302,3311,!0,n);case g.LIST_STYLE_TYPE.KATAKANA:return H(e,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",r);case g.LIST_STYLE_TYPE.KATAKANA_IROHA:return H(e,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",r);case g.LIST_STYLE_TYPE.LAO:return b(e,3792,3801,!0,n);case g.LIST_STYLE_TYPE.MONGOLIAN:return b(e,6160,6169,!0,n);case g.LIST_STYLE_TYPE.MYANMAR:return b(e,4160,4169,!0,n);case g.LIST_STYLE_TYPE.ORIYA:return b(e,2918,2927,!0,n);case g.LIST_STYLE_TYPE.PERSIAN:return b(e,1776,1785,!0,n);case g.LIST_STYLE_TYPE.TAMIL:return b(e,3046,3055,!0,n);case g.LIST_STYLE_TYPE.TELUGU:return b(e,3174,3183,!0,n);case g.LIST_STYLE_TYPE.THAI:return b(e,3664,3673,!0,n);case g.LIST_STYLE_TYPE.TIBETAN:return b(e,3872,3881,!0,n);case g.LIST_STYLE_TYPE.DECIMAL:default:return b(e,48,57,!0,n);}}},function(n,a,s){"";function l(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var c=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),B=s(5),g=s(11),u=function(e,A){var t=d.apply(null,e.colorStops.map(function(e){return e.stop})),n=1/d(1,t);e.colorStops.forEach(function(e){A.addColorStop(n*e.stop,e.color.toString())})},m=function(){function n(e){l(this,n),this.canvas=e?e:document.createElement("canvas")}return c(n,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=t(e.width*e.scale),this.canvas.height=t(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+this.options.scale)}},{key:"clip",value:function(e,A){var t=this;e.length&&(this.ctx.save(),e.forEach(function(e){t.path(e),t.ctx.clip()})),A(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,A,t){this.ctx.drawImage(e,A.left,A.top,A.width,A.height,t.left,t.top,t.width,t.height)}},{key:"drawShape",value:function(e,A){this.path(e),this.ctx.fillStyle=A.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return this.canvas.getContext("2d").setTransform(1,0,0,1,0,0),Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach(function(e,A){var n=e.type===B.PATH.VECTOR?e:e.start;0===A?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),e.type===B.PATH.BEZIER_CURVE&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*A,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,A,t,n,r){this.ctx.fillStyle=r.toString(),this.ctx.fillRect(e,A,t,n)}},{key:"renderLinearGradient",value:function(e,A){var t=this.ctx.createLinearGradient(e.left+A.direction.x1,e.top+A.direction.y1,e.left+A.direction.x0,e.top+A.direction.y0);u(A,t),this.ctx.fillStyle=t,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,A){var t=this,n=e.left+A.center.x,r=e.top+A.center.y,a=this.ctx.createRadialGradient(n,r,0,n,r,A.radius.x);if(a)if(u(A,a),this.ctx.fillStyle=a,A.radius.x!==A.radius.y){var s=e.left+.5*e.width,d=e.top+.5*e.height,l=A.radius.y/A.radius.x,c=1/l;this.transform(s,d,[1,0,0,l,0,0],function(){return t.ctx.fillRect(e.left,c*(e.top-d)+d,e.width,e.height*c)})}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,A,t,n,r){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(A,t),"repeat"),this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)}},{key:"renderTextNode",value:function(A,t,n,a,s){var d=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" "),A.forEach(function(A){if(d.ctx.fillStyle=t.toString(),s&&A.text.trim().length?s.slice(0).reverse().forEach(function(e){d.ctx.shadowColor=e.color.toString(),d.ctx.shadowOffsetX=e.offsetX*d.options.scale,d.ctx.shadowOffsetY=e.offsetY*d.options.scale,d.ctx.shadowBlur=e.blur,d.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)}):d.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height),null!==a){var l=a.textDecorationColor||t;a.textDecorationLine.forEach(function(t){switch(t){case g.TEXT_DECORATION_LINE.UNDERLINE:var a=d.options.fontMetrics.getMetrics(n),s=a.baseline;d.rectangle(A.bounds.left,r(A.bounds.top+s),A.bounds.width,1,l);break;case g.TEXT_DECORATION_LINE.OVERLINE:d.rectangle(A.bounds.left,r(A.bounds.top),A.bounds.width,1,l);break;case g.TEXT_DECORATION_LINE.LINE_THROUGH:var c=d.options.fontMetrics.getMetrics(n),B=c.middle;d.rectangle(A.bounds.left,e(A.bounds.top+B),A.bounds.width,1,l);}})}})}},{key:"resizeImage",value:function(e,A){if(e.width===A.width&&e.height===A.height)return e;var t=this.canvas.ownerDocument.createElement("canvas");t.width=A.width,t.height=A.height;var n=t.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,A.width,A.height),t}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,A,t,n){this.ctx.save(),this.ctx.translate(e,A),this.ctx.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this.ctx.translate(-e,-A),n(),this.ctx.restore()}}]),n}();a.default=m},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var n=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),r=function(){function e(A,n,r){t(this,e),this.enabled="undefined"!=typeof window&&A,this.start=r?r:Date.now(),this.id=n}return n(e,[{key:"child",value:function(A){return new e(this.enabled,A,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var e=arguments.length,A=Array(e),t=0;t<e;t++)A[t]=arguments[t];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(A,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,A=Array(e),t=0;t<e;t++)A[t]=arguments[t];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(A,0)))}}}]),e}();A.default=r},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parsePadding=A.PADDING_SIDES=void 0;var n=t(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=A.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},s=["top","right","bottom","left"],d=A.parsePadding=function(e){return s.map(function(A){return new r.default(e.getPropertyValue("padding-"+A))})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1},n=A.parseOverflowWrap=function(e){switch(e){case"break-word":return t.BREAK_WORD;case"normal":default:return t.NORMAL;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},n=A.parsePosition=function(e){return"relative"===e?t.RELATIVE:"absolute"===e?t.ABSOLUTE:"fixed"===e?t.FIXED:"sticky"===e?t.STICKY:t.STATIC}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},n=A.parseTextTransform=function(e){return"uppercase"===e?t.UPPERCASE:"lowercase"===e?t.LOWERCASE:"capitalize"===e?t.CAPITALIZE:t.NONE}},function(e,A,t){"";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.reformatInputBounds=A.inlineSelectElement=A.inlineTextAreaElement=A.inlineInputElement=A.getInputBorderRadius=A.INPUT_BACKGROUND=A.INPUT_BORDERS=A.INPUT_COLOR=void 0;var r=t(9),a=n(r),s=t(4),d=t(12),c=t(50),B=n(c),g=t(7),u=n(g),m=t(0),p=n(m),w=t(1),h=n(w),Q=t(2),C=t(22),U=t(3),E=A.INPUT_COLOR=new p.default([42,42,42]),F=new p.default([165,165,165]),b=new p.default([222,222,222]),H={borderWidth:1,borderColor:F,borderStyle:d.BORDER_STYLE.SOLID},T=A.INPUT_BORDERS=[H,H,H,H],S=A.INPUT_BACKGROUND={backgroundColor:b,backgroundImage:[],backgroundClip:s.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:s.BACKGROUND_ORIGIN.PADDING_BOX},I=new h.default("50%"),N=[I,I],R=[N,N,N,N],L=new h.default("3px"),M=[L,L],D=[M,M,M,M],O=A.getInputBorderRadius=function(e){return"radio"===e.type?R:D},k=A.inlineInputElement=function(e,A){if(!("radio"===e.type||"checkbox"===e.type))V(z(e),e,A,!1);else if(e.checked){var t=l(A.bounds.width,A.bounds.height);A.childNodes.push("checkbox"===e.type?[new u.default(A.bounds.left+.39363*t,A.bounds.top+.79*t),new u.default(A.bounds.left+.16*t,A.bounds.top+.5549*t),new u.default(A.bounds.left+.27347*t,A.bounds.top+.44071*t),new u.default(A.bounds.left+.39694*t,A.bounds.top+.5649*t),new u.default(A.bounds.left+.72983*t,A.bounds.top+.23*t),new u.default(A.bounds.left+.84*t,A.bounds.top+.34085*t),new u.default(A.bounds.left+.39363*t,A.bounds.top+.79*t)]:new B.default(A.bounds.left+t/4,A.bounds.top+t/4,t/4))}},K=A.inlineTextAreaElement=function(e,A){V(e.value,e,A,!0)},_=A.inlineSelectElement=function(e,A){var t=e.options[e.selectedIndex||0];V(t?t.text||"":"",e,A,!1)},P=A.reformatInputBounds=function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e},V=function(e,A,t,n){var r=A.ownerDocument.body;if(0<e.length&&r){var s=A.ownerDocument.createElement("html2canvaswrapper");(0,U.copyCSSStyles)(A.ownerDocument.defaultView.getComputedStyle(A,null),s),s.style.position="absolute",s.style.left=t.bounds.left+"px",s.style.top=t.bounds.top+"px",n||(s.style.whiteSpace="nowrap");var d=A.ownerDocument.createTextNode(e);s.appendChild(d),r.appendChild(s),t.childNodes.push(a.default.fromTextNode(d,t)),r.removeChild(s)}},z=function(e){var A="password"===e.type?Array(e.value.length+1).join("\u2022"):e.value;return 0===A.length?e.placeholder||"":A}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextBounds=A.TextBounds=void 0;var r=t(2),a=t(11),s=t(10),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t(24),c=A.TextBounds=function e(A,t){n(this,e),this.text=A,this.bounds=t},B=A.parseTextBounds=function(e,A,t){for(var n=0!==A.style.letterSpacing,r=n?(0,l.toCodePoints)(e).map(function(e){return(0,l.fromCodePoint)(e)}):(0,l.breakWords)(e,A),s=r.length,B=t.parentNode?t.parentNode.ownerDocument.defaultView:null,m=B?B.pageXOffset:0,p=B?B.pageYOffset:0,w=[],h=0,Q=0,C;Q<s;Q++){if(C=r[Q],!(A.style.textDecoration!==a.TEXT_DECORATION.NONE||0<C.trim().length))d.default.SUPPORT_RANGE_BOUNDS||(t=t.splitText(C.length));else if(d.default.SUPPORT_RANGE_BOUNDS)w.push(new c(C,u(t,h,C.length,m,p)));else{var U=t.splitText(C.length);w.push(new c(C,g(t,m,p))),t=U}h+=C.length}return w},g=function(e,A,t){var n=e.ownerDocument.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=(0,r.parseBounds)(n,A,t);return n.firstChild&&a.replaceChild(n.firstChild,n),s}return new r.Bounds(0,0,0,0)},u=function(e,A,t,n,a){var s=e.ownerDocument.createRange();return s.setStart(e,A),s.setEnd(e,A+t),r.Bounds.fromClientRect(s.getBoundingClientRect(),n,a)}},function(e,A){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=function(){function e(A){n(this,e),this.element=A}return r(e,[{key:"render",value:function(e){var A=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t(e.width)*e.scale,this.canvas.height=t(e.height)*e.scale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var n=s(d(e.windowWidth,e.width)*e.scale,d(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return l(n).then(function(t){return e.backgroundColor&&(A.ctx.fillStyle=e.backgroundColor.toString(),A.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),A.ctx.drawImage(t,-e.x*e.scale,-e.y*e.scale),A.canvas})}}]),e}();A.default=a;var s=A.createForeignObjectSVG=function(e,A,t,n,r){var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return a.setAttributeNS(null,"width",e),a.setAttributeNS(null,"height",A),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",t),s.setAttributeNS(null,"y",n),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(r),a},l=A.loadSerializedSVG=function(e){return new Promise(function(A,t){var n=new Image;n.onload=function(){return A(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.breakWords=A.fromCodePoint=A.toCodePoints=void 0;var n=t(46);Object.defineProperty(A,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(A,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var r=t(18),a=A.breakWords=function(e,A){for(var t=(0,n.LineBreaker)(e,{lineBreak:A.style.lineBreak,wordBreak:A.style.overflowWrap===r.OVERFLOW_WRAP.BREAK_WORD?"break-word":A.style.wordBreak}),a=[],s=void 0;!(s=t.next()).done;)a.push(s.value.slice());return a}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.FontMetrics=void 0;var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=t(3),s="Hidden Text",d=A.FontMetrics=function(){function e(A){n(this,e),this._data={},this._document=A}return r(e,[{key:"_parseMetrics",value:function(e){var A=this._document.createElement("div"),t=this._document.createElement("img"),n=this._document.createElement("span"),r=this._document.body;if(!r)throw new Error("No document found for font metrics");A.style.visibility="hidden",A.style.fontFamily=e.fontFamily,A.style.fontSize=e.fontSize,A.style.margin="0",A.style.padding="0",r.appendChild(A),t.src=a.SMALL_IMAGE,t.width=1,t.height=1,t.style.margin="0",t.style.padding="0",t.style.verticalAlign="baseline",n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode(s)),A.appendChild(n),A.appendChild(t);var d=t.offsetTop-n.offsetTop+2;A.removeChild(n),A.appendChild(this._document.createTextNode(s)),A.style.lineHeight="normal",t.style.verticalAlign="super";var l=t.offsetTop-A.offsetTop+2;return r.removeChild(A),{baseline:d,middle:l}}},{key:"getMetrics",value:function(e){var A=e.fontFamily+" "+e.fontSize;return void 0===this._data[A]&&(this._data[A]=this._parseMetrics(e)),this._data[A]}}]),e}()},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.Proxy=void 0;var n=t(10),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=A.Proxy=function(e,A){if(!A.proxy)return Promise.reject("No proxy defined");var t=A.proxy;return new Promise(function(n,a){var s=r.default.SUPPORT_CORS_XHR&&r.default.SUPPORT_RESPONSE_TYPE?"blob":"text",d=r.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(d.onload=function(){if(!(d instanceof XMLHttpRequest))n(d.responseText);else if(200!==d.status)a("Failed to proxy resource "+e.substring(0,256)+" with status code "+d.status);else if("text"===s)n(d.response);else{var A=new FileReader;A.addEventListener("load",function(){return n(A.result)},!1),A.addEventListener("error",function(A){return a(A)},!1),A.readAsDataURL(d.response)}},d.onerror=a,d.open("GET",t+"?url="+encodeURIComponent(e)+"&responseType="+s),"text"!=s&&d instanceof XMLHttpRequest&&(d.responseType=s),A.imageTimeout){var l=A.imageTimeout;d.timeout=l,d.ontimeout=function(){return a("Timed out ("+l+"ms) proxying "+e.substring(0,256))}}d.send()})}},function(e,A,t){"";function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var A=1,t;A<arguments.length;A++)for(var n in t=arguments[A],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a=t(15),s=n(a),d=t(16),l=n(d),c=t(28),B=function(e,A){var t=A||{},n=new l.default("boolean"!=typeof t.logging||t.logging);n.log("html2canvas 1.0.0-alpha.12"),"function"==typeof t.onrendered&&n.error("onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value");var a=e.ownerDocument;if(!a)return Promise.reject("Provided element is not within a Document");var d=a.defaultView,B={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:d.devicePixelRatio||1,target:new s.default(t.canvas),useCORS:!1,windowWidth:d.innerWidth,windowHeight:d.innerHeight,scrollX:d.pageXOffset,scrollY:d.pageYOffset},g=(0,c.renderElement)(e,r({},B,t),n);return g.catch(function(A){throw n.error(A),A})};B.CanvasRenderer=s.default,e.exports=B},function(A,t,n){"";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.renderElement=void 0;var a=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(16),d=r(s),l=n(29),c=n(51),B=r(c),g=n(23),u=r(g),m=n(10),p=r(m),w=n(2),h=n(54),Q=n(25),C=n(0),U=r(C),E=t.renderElement=function A(t,n,r){var s=t.ownerDocument,d=new w.Bounds(n.scrollX,n.scrollY,n.windowWidth,n.windowHeight),c=s.documentElement?new U.default(getComputedStyle(s.documentElement).backgroundColor):C.TRANSPARENT,g=s.body?new U.default(getComputedStyle(s.body).backgroundColor):C.TRANSPARENT,m=t===s.documentElement?c.isTransparent()?g.isTransparent()?n.backgroundColor?new U.default(n.backgroundColor):null:g:c:n.backgroundColor?new U.default(n.backgroundColor):null;return(n.foreignObjectRendering?p.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(c){return c?function(A){return r.log("Document cloned, using foreignObject rendering"),A.inlineFonts(s).then(function(){return A.resourceLoader.ready()}).then(function(){var a=new u.default(A.documentElement),d=s.defaultView,l=d.pageXOffset,c=d.pageYOffset,B="HTML"===t.tagName||"BODY"===t.tagName,g=B?(0,w.parseDocumentSize)(s):(0,w.parseBounds)(t,l,c),p=g.width,h=g.height,Q=g.left,C=g.top;return a.render({backgroundColor:m,logger:r,scale:n.scale,x:"number"==typeof n.x?n.x:Q,y:"number"==typeof n.y?n.y:C,width:"number"==typeof n.width?n.width:e(p),height:"number"==typeof n.height?n.height:e(h),windowWidth:n.windowWidth,windowHeight:n.windowHeight,scrollX:n.scrollX,scrollY:n.scrollY})})}(new h.DocumentCloner(t,n,r,!0,A)):(0,h.cloneWindow)(s,d,t,n,r,A).then(function(A){var t=a(A,3),d=t[0],c=t[1],g=t[2];r.log("Document cloned, using computed rendering");var u=(0,l.NodeParser)(c,g,r),p=c.ownerDocument;return m===u.container.style.background.backgroundColor&&(u.container.style.background.backgroundColor=C.TRANSPARENT),g.ready().then(function(A){var t=new Q.FontMetrics(p);r.log("Starting renderer");var a=p.defaultView,l=a.pageXOffset,g=a.pageYOffset,h="HTML"===c.tagName||"BODY"===c.tagName,C=h?(0,w.parseDocumentSize)(s):(0,w.parseBounds)(c,l,g),U=C.width,E=C.height,F=C.left,b=C.top,H={backgroundColor:m,fontMetrics:t,imageStore:A,logger:r,scale:n.scale,x:"number"==typeof n.x?n.x:F,y:"number"==typeof n.y?n.y:b,width:"number"==typeof n.width?n.width:e(U),height:"number"==typeof n.height?n.height:e(E)};if(Array.isArray(n.target))return Promise.all(n.target.map(function(e){var A=new B.default(e,H);return A.render(u)}));var T=new B.default(n.target,H),S=T.render(u);return!0===n.removeContainer&&(d.parentNode?d.parentNode.removeChild(d):r.log("Cannot detach cloned iframe as it is not in the DOM anymore")),S})})})}},function(e,A,t){"";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(A,"__esModule",{value:!0}),A.NodeParser=void 0;var r=t(30),a=n(r),s=t(6),d=n(s),l=t(9),c=n(l),B=t(21),g=t(14),u=t(8),m=A.NodeParser=function(e,A,t){t.log("Starting node parsing");var n=0,r=new d.default(e,null,A,n++),s=new a.default(r,null,!0);return w(e,r,s,A,n),t.log("Finished parsing node tree"),s},p=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],w=function e(A,t,n,r,s){if(5e4<s)throw new Error("Recursion error while parsing node tree");for(var l=A.firstChild,m;l;l=m){m=l.nextSibling;var w=l.ownerDocument.defaultView;if(l instanceof w.Text||l instanceof Text||w.parent&&l instanceof w.parent.Text)0<l.data.trim().length&&t.childNodes.push(c.default.fromTextNode(l,t));else if(l instanceof w.HTMLElement||l instanceof HTMLElement||w.parent&&l instanceof w.parent.HTMLElement){if(-1===p.indexOf(l.nodeName)){var C=new d.default(l,t,r,s++);if(C.isVisible()){"INPUT"===l.tagName?(0,B.inlineInputElement)(l,C):"TEXTAREA"===l.tagName?(0,B.inlineTextAreaElement)(l,C):"SELECT"===l.tagName?(0,B.inlineSelectElement)(l,C):C.style.listStyle&&C.style.listStyle.listStyleType!==u.LIST_STYLE_TYPE.NONE&&(0,g.inlineListItemElement)(l,C,r);var U="TEXTAREA"!==l.tagName,E=h(C,l);if(E||Q(C)){var F=E||C.isPositioned()?n.getRealParentStackingContext():n,b=new a.default(C,F,E);F.contexts.push(b),U&&e(l,C,b,r,s)}else n.children.push(C),U&&e(l,C,n,r,s)}}}else if(l instanceof w.SVGSVGElement||l instanceof SVGSVGElement||w.parent&&l instanceof w.parent.SVGSVGElement){var H=new d.default(l,t,r,s++),T=h(H,l);if(T||Q(H)){var S=T||H.isPositioned()?n.getRealParentStackingContext():n,I=new a.default(H,S,T);S.contexts.push(I)}else n.children.push(H)}}},h=function(e,A){return e.isRootElement()||e.isPositionedWithZIndex()||1>e.style.opacity||e.isTransformed()||C(e,A)},Q=function(e){return e.isPositioned()||e.isFloating()},C=function(e,A){return"BODY"===A.nodeName&&e.parent instanceof d.default&&e.parent.style.background.backgroundColor.isTransparent()}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=t(6),s=function(e){return e&&e.__esModule?e:{default:e}}(a),d=t(19),l=function(){function e(A,t,r){n(this,e),this.container=A,this.parent=t,this.contexts=[],this.children=[],this.treatAsRealStackingContext=r}return r(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}();A.default=l},function(e,A){"";function t(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});A.default=function e(A,n){t(this,e),this.width=A,this.height=n}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=t(5),s=t(7),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e,A,n){return new d.default(e.x+(A.x-e.x)*n,e.y+(A.y-e.y)*n)},c=function(){function e(A,t,r,s){n(this,e),this.type=a.PATH.BEZIER_CURVE,this.start=A,this.startControl=t,this.endControl=r,this.end=s}return r(e,[{key:"subdivide",value:function(A,t){var n=l(this.start,this.startControl,A),r=l(this.startControl,this.endControl,A),a=l(this.endControl,this.end,A),s=l(n,r,A),d=l(r,a,A),c=l(s,d,A);return t?new e(this.start,n,s,c):new e(c,d,a,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}();A.default=c},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseBorderRadius=void 0;var n=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=["top-left","top-right","bottom-right","bottom-left"],d=A.parseBorderRadius=function(e){return s.map(function(A){var t=e.getPropertyValue("border-"+A+"-radius"),r=t.split(" ").map(a.default.create),s=n(r,2),d=s[0],l=s[1];return"undefined"==typeof l?[d,d]:[d,l]})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:131072,TABLE_COLUMN:262144,TABLE_CAPTION:524288,RUBY_BASE:1048576,RUBY_TEXT:2097152,RUBY_BASE_CONTAINER:4194304,RUBY_TEXT_CONTAINER:8388608,CONTENTS:16777216,INLINE_BLOCK:33554432,INLINE_LIST_ITEM:67108864,INLINE_TABLE:134217728,INLINE_FLEX:268435456,INLINE_GRID:536870912},n=function(e){return"block"===e?t.BLOCK:"inline"===e?t.INLINE:"run-in"===e?t.RUN_IN:"flow"===e?t.FLOW:"flow-root"===e?t.FLOW_ROOT:"table"===e?t.TABLE:"flex"===e?t.FLEX:"grid"===e?t.GRID:"ruby"===e?t.RUBY:"subgrid"===e?t.SUBGRID:"list-item"===e?t.LIST_ITEM:"table-row-group"===e?t.TABLE_ROW_GROUP:"table-header-group"===e?t.TABLE_HEADER_GROUP:"table-footer-group"===e?t.TABLE_FOOTER_GROUP:"table-row"===e?t.TABLE_ROW:"table-cell"===e?t.TABLE_CELL:"table-column-group"===e?t.TABLE_COLUMN_GROUP:"table-column"===e?t.TABLE_COLUMN:"table-caption"===e?t.TABLE_CAPTION:"ruby-base"===e?t.RUBY_BASE:"ruby-text"===e?t.RUBY_TEXT:"ruby-base-container"===e?t.RUBY_BASE_CONTAINER:"ruby-text-container"===e?t.RUBY_TEXT_CONTAINER:"contents"===e?t.CONTENTS:"inline-block"===e?t.INLINE_BLOCK:"inline-list-item"===e?t.INLINE_LIST_ITEM:"inline-table"===e?t.INLINE_TABLE:"inline-flex"===e?t.INLINE_FLEX:"inline-grid"===e?t.INLINE_GRID:t.NONE},r=function(e,A){return e|n(A)},a=A.parseDisplay=function(e){return e.split(" ").reduce(r,0)}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},n=A.parseCSSFloat=function(e){return"left"===e?t.LEFT:"right"===e?t.RIGHT:"inline-start"===e?t.INLINE_START:"inline-end"===e?t.INLINE_END:t.NONE}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=function(e){switch(e){case"normal":return 400;case"bold":return 700;}var A=parseInt(e,10);return isNaN(A)?400:A},n=A.parseFont=function(e){var A=e.fontFamily,n=e.fontSize,r=e.fontStyle,a=e.fontVariant,s=t(e.fontWeight);return{fontFamily:A,fontSize:n,fontStyle:r,fontVariant:a,fontWeight:s}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.parseLetterSpacing=function(e){if("normal"===e)return 0;var A=parseFloat(e);return isNaN(A)?0:A}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.LINE_BREAK={NORMAL:"normal",STRICT:"strict"},n=A.parseLineBreak=function(e){switch(e){case"strict":return t.STRICT;case"normal":default:return t.NORMAL;}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseMargin=void 0;var n=t(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=["top","right","bottom","left"],s=A.parseMargin=function(e){return a.map(function(A){return new r.default(e.getPropertyValue("margin-"+A))})}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},n=A.parseOverflow=function(e){switch(e){case"hidden":return t.HIDDEN;case"scroll":return t.SCROLL;case"auto":return t.AUTO;case"visible":default:return t.VISIBLE;}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTextShadow=void 0;var n=t(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=A.parseTextShadow=function(e){if("none"===e||"string"!=typeof e)return null;for(var A="",t=!1,n=[],a=[],s=0,d=null,l=function(){A.length&&(t?n.push(parseFloat(A)):d=new r.default(A)),t=!1,A=""},B=function(){n.length&&null!==d&&a.push({color:d,offsetX:n[0]||0,offsetY:n[1]||0,blur:n[2]||0}),n.splice(0,n.length),d=null},g=0,u;g<e.length;g++)u=e[g],"("===u?(A+=u,s++):")"===u?(A+=u,s--):","===u?0===s?(l(),B()):A+=u:" "===u?0===s?l():A+=u:(0===A.length&&/^([+-]|\d|\.)$/i.test(u)&&(t=!0),A+=u);return l(),B(),0===a.length?null:a}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseTransform=void 0;var n=t(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){return parseFloat(e.trim())},s=A.parseTransform=function(e){var A=l(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===A?null:{transform:A,transformOrigin:d(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},d=function(e){if("string"!=typeof e){var A=new r.default("0");return[A,A]}var t=e.split(" ").map(r.default.create);return[t[0],t[1]]},l=function(e){if("none"===e||"string"!=typeof e)return null;var A=e.match(/(matrix|matrix3d)\((.+)\)/);if(A){if("matrix"===A[1]){var t=A[2].split(",").map(a);return[t[0],t[1],t[2],t[3],t[4],t[5]]}var n=A[2].split(",").map(a);return[n[0],n[1],n[4],n[5],n[12],n[13]]}return null}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2},n=A.parseVisibility=function(e){switch(e){case"hidden":return t.HIDDEN;case"collapse":return t.COLLAPSE;case"visible":default:return t.VISIBLE;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});var t=A.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"},n=A.parseWordBreak=function(e){switch(e){case"break-all":return t.BREAK_ALL;case"keep-all":return t.KEEP_ALL;case"normal":default:return t.NORMAL;}}},function(e,A){"";Object.defineProperty(A,"__esModule",{value:!0});A.parseZIndex=function(e){var A="auto"===e;return{auto:A,order:A?0:parseInt(e,10)}}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0});var n=t(13);Object.defineProperty(A,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(A,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var r=t(47);Object.defineProperty(A,"LineBreaker",{enumerable:!0,get:function(){return r.LineBreaker}})},function(e,A,t){"";function n(e){if(Array.isArray(e)){for(var A=0,t=Array(e.length);A<e.length;A++)t[A]=e[A];return t}return Array.from(e)}function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.LineBreaker=A.inlineBreakOpportunities=A.lineBreakAtIndex=A.codePointsToCharacterClasses=A.UnicodeTrie=A.BREAK_ALLOWED=A.BREAK_NOT_ALLOWED=A.BREAK_MANDATORY=A.classes=A.LETTER_NUMBER_MODIFIER=void 0;var a=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),s=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=t(48),l=t(49),c=function(e){return e&&e.__esModule?e:{default:e}}(l),B=t(13),g=A.LETTER_NUMBER_MODIFIER=50,u=1,m=2,p=3,w=4,h=5,Q=7,C=8,U=9,E=10,F=11,b=12,H=13,T=14,S=15,I=16,N=17,R=18,L=19,M=20,D=21,O=22,k=23,K=24,_=25,P=26,V=27,z=28,X=29,G=30,J=31,Y=32,W=33,q=34,Z=35,ee=36,Ae=37,te=38,ne=39,re=40,ie=41,ae=42,oe=43,se=A.classes={BK:u,CR:m,LF:p,CM:w,NL:h,SG:6,WJ:Q,ZW:C,GL:U,SP:E,ZWJ:F,B2:b,BA:H,BB:T,HY:S,CB:I,CL:N,CP:R,EX:L,IN:M,NS:D,OP:O,QU:k,IS:K,NU:_,PO:P,PR:V,SY:z,AI:X,AL:G,CJ:J,EB:Y,EM:W,H2:q,H3:Z,HL:ee,ID:Ae,JL:te,JV:ne,JT:re,RI:ie,SA:ae,XX:oe},de=A.BREAK_MANDATORY="!",le=A.BREAK_NOT_ALLOWED="\xD7",ce=A.BREAK_ALLOWED="\xF7",Be=A.UnicodeTrie=(0,d.createTrieFromBase64)(c.default),ge=[G,ee],ue=[u,m,p,h],me=[E,C],pe=[V,P],we=ue.concat(me),he=[te,ne,re,q,Z],fe=[S,H],Qe=A.codePointsToCharacterClasses=function(e){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"strict",t=[],n=[],r=[];return e.forEach(function(e,a){var s=Be.get(e);if(s>g?(r.push(!0),s-=g):r.push(!1),-1!==["normal","auto","loose"].indexOf(A)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(a),t.push(I);if(s===w||s===F){if(0===a)return n.push(a),t.push(G);var d=t[a-1];return-1===we.indexOf(d)?(n.push(n[a-1]),t.push(d)):(n.push(a),t.push(G))}return n.push(a),s===J?t.push("strict"===A?D:Ae):s===ae?t.push(G):s===X?t.push(G):s===oe?131072<=e&&196605>=e||196608<=e&&262141>=e?t.push(Ae):t.push(G):void t.push(s)}),[n,t,r]},Ce=function(e,A,t,r){var a=r[t];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=t;s<=r.length;){s++;var d=r[s];if(d===A)return!0;if(d!==E)break}if(a===E)for(var l=t;0<l;){l--;var c=r[l];if(Array.isArray(e)?-1!==e.indexOf(c):e===c)for(var B=t;B<=r.length;){B++;var g=r[B];if(g===A)return!0;if(g!==E)break}if(c!==E)break}return!1},Ue=function(e,A){for(var t=e;0<=t;){var n=A[t];if(n===E)t--;else return n}return 0},Ee=function(e,A,t,n,r){if(0===t[n])return le;var a=n-1;if(Array.isArray(r)&&!0===r[a])return le;var s=a-1,d=a+1,l=A[a],c=0<=s?A[s]:0,B=A[d];if(l===m&&B===p)return le;if(-1!==ue.indexOf(l))return de;if(-1!==ue.indexOf(B))return le;if(-1!==me.indexOf(B))return le;if(Ue(a,A)===C)return ce;if(Be.get(e[a])===F&&(B===Ae||B===Y||B===W))return le;if(l===Q||B===Q)return le;if(l===U)return le;if(-1===[E,H,S].indexOf(l)&&B===U)return le;if(-1!==[N,R,L,K,z].indexOf(B))return le;if(Ue(a,A)===O)return le;if(Ce(k,O,a,A))return le;if(Ce([N,R],D,a,A))return le;if(Ce(b,b,a,A))return le;if(l===E)return ce;if(l===k||B===k)return le;if(B===I||l===I)return ce;if(-1!==[H,S,D].indexOf(B)||l===T)return le;if(c===ee&&-1!==fe.indexOf(l))return le;if(l===z&&B===ee)return le;if(B===M&&-1!==ge.concat(M,L,_,Ae,Y,W).indexOf(l))return le;if(-1!==ge.indexOf(B)&&l===_||-1!==ge.indexOf(l)&&B===_)return le;if(l===V&&-1!==[Ae,Y,W].indexOf(B)||-1!==[Ae,Y,W].indexOf(l)&&B===P)return le;if(-1!==ge.indexOf(l)&&-1!==pe.indexOf(B)||-1!==pe.indexOf(l)&&-1!==ge.indexOf(B))return le;if(-1!==[V,P].indexOf(l)&&(B===_||-1!==[O,S].indexOf(B)&&A[d+1]===_)||-1!==[O,S].indexOf(l)&&B===_||l===_&&-1!==[_,z,K].indexOf(B))return le;if(-1!==[_,z,K,N,R].indexOf(B))for(var g=a,u;0<=g;){if(u=A[g],u===_)return le;if(-1!==[z,K].indexOf(u))g--;else break}if(-1!==[V,P].indexOf(B))for(var w=-1===[N,R].indexOf(l)?a:s,h;0<=w;){if(h=A[w],h===_)return le;if(-1!==[z,K].indexOf(h))w--;else break}if(te===l&&-1!==[te,ne,q,Z].indexOf(B)||-1!==[ne,q].indexOf(l)&&-1!==[ne,re].indexOf(B)||-1!==[re,Z].indexOf(l)&&B===re)return le;if(-1!==he.indexOf(l)&&-1!==[M,P].indexOf(B)||-1!==he.indexOf(B)&&l===V)return le;if(-1!==ge.indexOf(l)&&-1!==ge.indexOf(B))return le;if(l===K&&-1!==ge.indexOf(B))return le;if(-1!==ge.concat(_).indexOf(l)&&B===O||-1!==ge.concat(_).indexOf(B)&&l===R)return le;if(l===ie&&B===ie){for(var X=t[a],G=1;0<X&&(X--,A[X]===ie);)G++;if(0!=G%2)return le}return l===Y&&B===W?le:ce},Fe=A.lineBreakAtIndex=function(e,A){if(0===A)return le;if(A>=e.length)return de;var t=Qe(e),n=s(t,2),r=n[0],a=n[1];return Ee(e,a,r,A)},be=function(e,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var t=Qe(e,A.lineBreak),n=s(t,3),r=n[0],a=n[1],d=n[2];("break-all"===A.wordBreak||"break-word"===A.wordBreak)&&(a=a.map(function(e){return-1===[_,G,ae].indexOf(e)?e:Ae}));var l="keep-all"===A.wordBreak?d.map(function(A,t){return A&&19968<=e[t]&&40959>=e[t]}):null;return[r,a,l]},He=A.inlineBreakOpportunities=function(e,A){var t=(0,B.toCodePoints)(e),n=le,r=be(t,A),a=s(r,3),d=a[0],l=a[1],c=a[2];return t.forEach(function(e,A){n+=(0,B.fromCodePoint)(e)+(A>=t.length-1?de:Ee(t,l,d,A+1,c))}),n},ye=function(){function e(A,t,n,a){r(this,e),this._codePoints=A,this.required=t===de,this.start=n,this.end=a}return a(e,[{key:"slice",value:function(){return B.fromCodePoint.apply(void 0,n(this._codePoints.slice(this.start,this.end)))}}]),e}(),ve=A.LineBreaker=function(e,A){var t=(0,B.toCodePoints)(e),n=be(t,A),r=s(n,3),a=r[0],d=r[1],l=r[2],c=t.length,g=0,u=0;return{next:function(){if(u>=c)return{done:!0};for(var e=le;u<c&&(e=Ee(t,d,a,++u,l))===le;);if(e!==le||u===c){var A=new ye(t,e,g,u);return g=u,{value:A,done:!1}}return{done:!0}}}}},function(A,t,n){"";function r(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var a=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),s=n(13),d=t.UTRIE2_SHIFT_2=5,l=t.UTRIE2_SHIFT_1=11,c=t.UTRIE2_INDEX_SHIFT=2,B=t.UTRIE2_SHIFT_1_2=l-d,g=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>d,u=t.UTRIE2_DATA_BLOCK_LENGTH=1<<d,m=t.UTRIE2_DATA_MASK=u-1,p=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>d,w=t.UTRIE2_INDEX_2_BMP_LENGTH=g+p,h=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=w,Q=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,C=t.UTRIE2_INDEX_1_OFFSET=h+Q,U=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>l,E=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<B,F=t.UTRIE2_INDEX_2_MASK=E-1,b=t.createTrieFromBase64=function(A){var t=(0,s.decode)(A),n=Array.isArray(t)?(0,s.polyUint32Array)(t):new Uint32Array(t),r=Array.isArray(t)?(0,s.polyUint16Array)(t):new Uint16Array(t),a=24,d=r.slice(a/2,n[4]/2),l=2===n[5]?r.slice((a+n[4])/2):n.slice(e((a+n[4])/4));return new H(n[0],n[1],n[2],n[3],d,l)},H=t.Trie=function(){function e(A,t,n,a,s,d){r(this,e),this.initialValue=A,this.errorValue=t,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=d}return a(e,[{key:"get",value:function(e){var A;if(0<=e){if(55296>e||56319<e&&65535>=e)return A=this.index[e>>d],A=(A<<c)+(e&m),this.data[A];if(65535>=e)return A=this.index[g+(e-55296>>d)],A=(A<<c)+(e&m),this.data[A];if(e<this.highStart)return A=C-U+(e>>l),A=this.index[A],A+=e>>d&F,A=this.index[A],A=(A<<c)+(e&m),this.data[A];if(1114111>=e)return this.data[this.highValueIndex]}return this.errorValue}}]),e}()},function(e){"";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var r=t(5);A.default=function e(A,t,a){n(this,e),this.type=r.PATH.CIRCLE,this.x=A,this.y=t,this.radius=a,isNaN(A)&&console.error("Invalid x value given for Circle"),isNaN(t)&&console.error("Invalid y value given for Circle"),isNaN(a)&&console.error("Invalid radius value given for Circle")}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0});var a=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),d=t(2),l=t(25),c=t(52),B=t(9),g=function(e){return e&&e.__esModule?e:{default:e}}(B),u=t(4),m=t(12),p=function(){function e(A,t){n(this,e),this.target=A,this.options=t,A.render(t)}return s(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var A=this,t=function(){if(e.childNodes.length&&e.childNodes.forEach(function(t){if(t instanceof g.default){var n=t.parent.style;A.target.renderTextNode(t.bounds,n.color,n.font,n.textDecoration,n.textShadow)}else A.target.drawShape(t,e.style.color)}),e.image){var t=A.options.imageStore.get(e.image);if(t){var n=(0,d.calculateContentBox)(e.bounds,e.style.padding,e.style.border),r="number"==typeof t.width&&0<t.width?t.width:n.width,a="number"==typeof t.height&&0<t.height?t.height:n.height;0<r&&0<a&&A.target.clip([(0,d.calculatePaddingBoxPath)(e.curvedBounds)],function(){A.target.drawImage(t,new d.Bounds(0,0,r,a),n)})}}},n=e.getClipPaths();n.length?this.target.clip(n,t):t()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var A=this,t=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,n=e.style.border.some(function(e){return e.borderStyle!==m.BORDER_STYLE.NONE&&!e.borderColor.isTransparent()}),r=function(){var n=(0,u.calculateBackgroungPaintingArea)(e.curvedBounds,e.style.background.backgroundClip);t&&A.target.clip([n],function(){e.style.background.backgroundColor.isTransparent()||A.target.fill(e.style.background.backgroundColor),A.renderBackgroundImage(e)}),e.style.border.forEach(function(t,n){t.borderStyle===m.BORDER_STYLE.NONE||t.borderColor.isTransparent()||A.renderBorder(t,n,e.curvedBounds)})};if(t||n){var a=e.parent?e.parent.getClipPaths():[];a.length?this.target.clip(a,r):r()}}},{key:"renderBackgroundImage",value:function(e){var A=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(t){"url"===t.source.method&&t.source.args.length?A.renderBackgroundRepeat(e,t):/gradient/i.test(t.source.method)&&A.renderBackgroundGradient(e,t)})}},{key:"renderBackgroundRepeat",value:function(e,A){var t=this.options.imageStore.get(A.source.args[0]);if(t){var n=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),a=(0,u.calculateBackgroundSize)(A,t,n),s=(0,u.calculateBackgroundPosition)(A.position,a,n),d=(0,u.calculateBackgroundRepeatPath)(A,s,a,n,e.bounds),l=r(n.left+s.x),c=r(n.top+s.y);this.target.renderRepeat(d,t,a,l,c)}}},{key:"renderBackgroundGradient",value:function(e,A){var t=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),n=(0,u.calculateGradientBackgroundSize)(A,t),a=(0,u.calculateBackgroundPosition)(A.position,n,t),s=new d.Bounds(r(t.left+a.x),r(t.top+a.y),n.width,n.height),l=(0,c.parseGradient)(e,A.source,s);if(l)switch(l.type){case c.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(s,l);break;case c.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(s,l);}}},{key:"renderBorder",value:function(e,A,t){this.target.drawShape((0,d.parsePathForBorder)(t,A),e.borderColor)}},{key:"renderStack",value:function(e){var A=this;if(e.container.isVisible()){var t=e.getOpacity();t!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=t);var n=e.container.style.transform;null===n?this.renderStackContent(e):this.target.transform(e.container.bounds.left+n.transformOrigin[0].value,e.container.bounds.top+n.transformOrigin[1].value,n.transform,function(){return A.renderStackContent(e)})}}},{key:"renderStackContent",value:function(e){var A=h(e),t=a(A,5),n=t[0],r=t[1],s=t[2],d=t[3],l=t[4],c=w(e),B=a(c,2),g=B[0],u=B[1];this.renderNodeBackgroundAndBorders(e.container),n.sort(Q).forEach(this.renderStack,this),this.renderNodeContent(e.container),u.forEach(this.renderNode,this),d.forEach(this.renderStack,this),l.forEach(this.renderStack,this),g.forEach(this.renderNode,this),r.forEach(this.renderStack,this),s.sort(Q).forEach(this.renderStack,this)}},{key:"render",value:function(e){var A=this;this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e);var t=this.target.getTarget();return t.then(function(e){return A.options.logger.log("Render completed"),e})}}]),e}();A.default=p;var w=function(e){for(var A=[],t=[],n=e.children.length,r=0,a;r<n;r++)a=e.children[r],a.isInlineLevel()?A.push(a):t.push(a);return[A,t]},h=function(e){for(var A=[],t=[],n=[],r=[],a=[],s=e.contexts.length,d=0,l;d<s;d++)l=e.contexts[d],l.container.isPositioned()||1>l.container.style.opacity||l.container.isTransformed()?0>l.container.style.zIndex.order?A.push(l):0<l.container.style.zIndex.order?n.push(l):t.push(l):l.container.isFloating()?r.push(l):a.push(l);return[A,t,n,r,a]},Q=function(e,A){if(e.container.style.zIndex.order>A.container.style.zIndex.order)return 1;return e.container.style.zIndex.order<A.container.style.zIndex.order?-1:e.container.index>A.container.index?1:-1}},function(e,t,r){"";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.transformWebkitRadialGradientArgs=t.parseGradient=t.RadialGradient=t.LinearGradient=t.RADIAL_GRADIENT_SHAPE=t.GRADIENT_TYPE=void 0;var c=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),B=r(6),g=a(B),u=r(53),m=r(0),p=a(m),w=r(1),h=a(w),Q=r(3),C=t.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},U=t.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},E={left:new h.default("0%"),top:new h.default("0%"),center:new h.default("50%"),right:new h.default("100%"),bottom:new h.default("100%")},F=t.LinearGradient=function e(A,t){s(this,e),this.type=C.LINEAR_GRADIENT,this.colorStops=A,this.direction=t},b=t.RadialGradient=function e(A,t,n,r){s(this,e),this.type=C.RADIAL_GRADIENT,this.colorStops=A,this.shape=t,this.center=n,this.radius=r},H=t.parseGradient=function(e,A,t){var n=A.args,r=A.method,a=A.prefix;if("linear-gradient"===r)return S(n,t,!!a);return"gradient"===r&&"linear"===n[0]?S(["to bottom"].concat(K(n.slice(3))),t,!!a):"radial-gradient"===r?I(e,"-webkit-"===a?k(n):n,t):"gradient"===r&&"radial"===n[0]?I(e,K(k(n.slice(1))),t):void 0},T=function(e,A,t){for(var r=[],a=A;a<e.length;a++){var s=e[a],d=/(px)|%|( 0)$/i.test(s),l=s.lastIndexOf(" "),c=new p.default(d?s.substring(0,l):s),B=d?new h.default(s.substring(l+1)):a===A?new h.default("0%"):a===e.length-1?new h.default("100%"):null;r.push({color:c,stop:B})}for(var g=r.map(function(e){var A=e.color,n=e.stop,r=0===t?0:n?n.getAbsoluteValue(t)/t:null;return{color:A,stop:r}}),u=g[0].stop,m=0;m<g.length;m++)if(null!==u){var w=g[m].stop;if(null===w){for(var Q=m;null===g[Q].stop;)Q++;for(var C=Q-m+1,U=g[Q].stop,E=(U-u)/C;m<Q;m++)u=g[m].stop=u+E}else u=w}return g},S=function(e,t,r){var a=(0,u.parseAngle)(e[0]),s=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i.test(e[0]),d=s||null!==a||/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i.test(e[0]),c=d?null===a?s?L(e[0],t):M(e[0],t):N(r?a-.5*A:a,t):N(Math.PI,t),B=d?1:0,g=l((0,Q.distance)(n(c.x0)+n(c.x1),n(c.y0)+n(c.y1)),2*t.width,2*t.height);return new F(T(e,B,g),c)},I=function(e,A,t){var n=A[0].match(/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i),r=n&&("circle"===n[1]||n[3]!==void 0&&n[5]===void 0)?U.CIRCLE:U.ELLIPSE,a={},s={};n&&(n[3]!==void 0&&(a.x=(0,w.calculateLengthFromValueWithUnit)(e,n[3],n[4]).getAbsoluteValue(t.width)),n[5]!==void 0&&(a.y=(0,w.calculateLengthFromValueWithUnit)(e,n[5],n[6]).getAbsoluteValue(t.height)),n[7]?s.x=E[n[7].toLowerCase()]:n[8]!==void 0&&(s.x=(0,w.calculateLengthFromValueWithUnit)(e,n[8],n[9])),n[10]?s.y=E[n[10].toLowerCase()]:n[11]!==void 0&&(s.y=(0,w.calculateLengthFromValueWithUnit)(e,n[11],n[12])));var d={x:s.x===void 0?t.width/2:s.x.getAbsoluteValue(t.width),y:s.y===void 0?t.height/2:s.y.getAbsoluteValue(t.height)},c=O(n&&n[2]||"farthest-corner",r,d,a,t);return new b(T(A,n?1:0,l(c.x,c.y)),r,d,c)},N=function(e,A){var t=Math.cos,r=Math.sin,a=A.width,s=A.height,d=n(a*r(e))+n(s*t(e)),l=d/2,c=.5*a+r(e)*l,B=.5*s-t(e)*l;return{x0:c,x1:a-c,y0:B,y1:s-B}},R=function(e){return Math.acos(e.width/2/((0,Q.distance)(e.width,e.height)/2))},L=function(e,t){switch(e){case"bottom":case"to top":return N(0,t);case"left":case"to right":return N(A/2,t);case"right":case"to left":return N(3*A/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return N(A+R(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return N(A-R(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return N(R(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return N(2*A-R(t),t);case"top":case"to bottom":default:return N(Math.PI,t);}},M=function(e,t){var n=e.split(" ").map(parseFloat),r=c(n,2),a=r[0],s=r[1],d=a/100*t.width/(s/100*t.height);return N(Math.atan(isNaN(d)?1:d)+A/2,t)},D=function(e,A,t,n){var r=[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}];return r.reduce(function(e,r){var a=(0,Q.distance)(A-r.x,t-r.y);return(n?a<e.optimumDistance:a>e.optimumDistance)?{optimumCorner:r,optimumDistance:a}:e},{optimumDistance:n?1/0:-Infinity,optimumCorner:null}).optimumCorner},O=function(e,A,t,r,a){var s=t.x,B=t.y,g=0,u=0;switch(e){case"closest-side":A===U.CIRCLE?g=u=l(n(s),n(s-a.width),n(B),n(B-a.height)):A===U.ELLIPSE&&(g=l(n(s),n(s-a.width)),u=l(n(B),n(B-a.height)));break;case"closest-corner":if(A===U.CIRCLE)g=u=l((0,Q.distance)(s,B),(0,Q.distance)(s,B-a.height),(0,Q.distance)(s-a.width,B),(0,Q.distance)(s-a.width,B-a.height));else if(A===U.ELLIPSE){var m=l(n(B),n(B-a.height))/l(n(s),n(s-a.width)),c=D(a,s,B,!0);g=(0,Q.distance)(c.x-s,(c.y-B)/m),u=m*g}break;case"farthest-side":A===U.CIRCLE?g=u=d(n(s),n(s-a.width),n(B),n(B-a.height)):A===U.ELLIPSE&&(g=d(n(s),n(s-a.width)),u=d(n(B),n(B-a.height)));break;case"farthest-corner":if(A===U.CIRCLE)g=u=d((0,Q.distance)(s,B),(0,Q.distance)(s,B-a.height),(0,Q.distance)(s-a.width,B),(0,Q.distance)(s-a.width,B-a.height));else if(A===U.ELLIPSE){var p=d(n(B),n(B-a.height))/d(n(s),n(s-a.width)),w=D(a,s,B,!1);g=(0,Q.distance)(w.x-s,(w.y-B)/p),u=p*g}break;default:g=r.x||0,u=r.y===void 0?g:r.y;}return{x:g,y:u}},k=t.transformWebkitRadialGradientArgs=function(e){var A="",t="",n="",r="",a=0,s=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,d=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,l=e[a].match(s);l&&a++;var c=e[a].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);c&&(A=c[1]||"",n=c[2]||"","contain"===n?n="closest-side":"cover"===n&&(n="farthest-corner"),a++);var B=e[a].match(d);B&&a++;var g=e[a].match(s);g&&a++;var u=e[a].match(d);u&&a++;var m=g||l;m&&m[1]&&(r=m[1]+(/^\d+$/.test(m[1])?"px":""),m[2]&&(r+=" "+m[2]+(/^\d+$/.test(m[2])?"px":"")));var p=u||B;return p&&(t=p[0],!p[1]&&(t+="px")),!r||A||t||n||(t=r,r=""),r&&(r="at "+r),[[A,n,t,r].filter(function(e){return!!e}).join(" ")].concat(e.slice(a))},K=function(e){return e.map(function(e){return e.match(/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i)}).map(function(A,t){if(!A)return e[t];switch(A[1]){case"from":return A[4]+" 0%";case"to":return A[4]+" 100%";case"color-stop":return"%"===A[3]?A[4]+" "+A[2]:A[4]+" "+100*parseFloat(A[2])+"%";}})}},function(e,t){"";Object.defineProperty(t,"__esModule",{value:!0});t.parseAngle=function(e){var t=e.match(/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i);if(t){var n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return A*n/180;case"grad":return A/200*n;case"rad":return n;case"turn":return 2*A*n;}}return null}},function(A,t,n){"";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneWindow=t.DocumentCloner=void 0;var s=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),l=n(2),c=n(26),B=n(55),g=r(B),u=n(3),m=n(4),p=n(15),w=r(p),h=n(56),Q="data-html2canvas-ignore",C=t.DocumentCloner=function(){function e(A,t,n,r,s){a(this,e),this.referenceElement=A,this.scrolledElements=[],this.copyStyles=r,this.inlineImages=r,this.logger=n,this.options=t,this.renderer=s,this.resourceLoader=new g.default(t,n,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(A.ownerDocument.documentElement)}return d(e,[{key:"inlineAllImages",value:function(e){var A=this;if(this.inlineImages&&e){var t=e.style;Promise.all((0,m.parseBackgroundImage)(t.backgroundImage).map(function(e){return"url"===e.method?A.resourceLoader.inlineImage(e.args[0]).then(function(e){return e&&"string"==typeof e.src?"url(\""+e.src+"\")":"none"}).catch(function(t){A.logger.log("Unable to load image",t)}):Promise.resolve(""+e.prefix+e.method+"("+e.args.join(",")+")")})).then(function(e){1<e.length&&(t.backgroundColor=""),t.backgroundImage=e.join(",")}),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then(function(A){if(A&&e instanceof HTMLImageElement&&e.parentNode){var t=e.parentNode,n=(0,u.copyCSSStyles)(e.style,A.cloneNode(!1));t.replaceChild(n,e)}}).catch(function(t){A.logger.log("Unable to load image",t)})}}},{key:"inlineFonts",value:function(e){var A=this;return Promise.all(Array.from(e.styleSheets).map(function(t){return t.href?fetch(t.href).then(function(e){return e.text()}).then(function(e){return E(e,t.href)}).catch(function(t){return A.logger.log("Unable to load stylesheet",t),[]}):U(t,e)})).then(function(e){return e.reduce(function(e,A){return e.concat(A)},[])}).then(function(e){return Promise.all(e.map(function(e){return fetch(e.formats[0].src).then(function(e){return e.blob()}).then(function(e){return new Promise(function(A,t){var n=new FileReader;n.onerror=t,n.onload=function(){var e=n.result;A(e)},n.readAsDataURL(e)})}).then(function(A){return e.fontFace.setProperty("src","url(\""+A+"\")"),"@font-face {"+e.fontFace.cssText+" "})}))}).then(function(t){var n=e.createElement("style");n.textContent=t.join("\n"),A.documentElement.appendChild(n)})}},{key:"createElementClone",value:function(e){var A=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(A){this.logger.log("Unable to clone canvas contents, canvas is tainted")}}if(e instanceof HTMLIFrameElement){var n=e.cloneNode(!1),r=O();n.setAttribute("data-html2canvas-internal-iframe-key",r);var a=(0,l.parseBounds)(e,0,0),s=a.width,d=a.height;return this.resourceLoader.cache[r]=k(e,this.options).then(function(e){return A.renderer(e,{async:A.options.async,allowTaint:A.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:A.options.imageTimeout,logging:A.options.logging,proxy:A.options.proxy,removeContainer:A.options.removeContainer,scale:A.options.scale,foreignObjectRendering:A.options.foreignObjectRendering,useCORS:A.options.useCORS,target:new w.default,width:s,height:d,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},A.logger.child(r))}).then(function(A){return new Promise(function(t,r){var a=document.createElement("img");a.onload=function(){return t(A)},a.onerror=r,a.src=A.toDataURL(),n.parentNode&&n.parentNode.replaceChild((0,u.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e),a),n)})}),n}if(e instanceof HTMLStyleElement&&e.sheet&&e.sheet.cssRules){var c=[].slice.call(e.sheet.cssRules,0).reduce(function(e,t){try{return t&&t.cssText?e+t.cssText:e}catch(n){return A.logger.log("Unable to access cssText property",t.name),e}},""),B=e.cloneNode(!1);return B.textContent=c,B}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var A=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),t=e.ownerDocument.defaultView,n=e instanceof t.HTMLElement?t.getComputedStyle(e):null,r=e instanceof t.HTMLElement?t.getComputedStyle(e,":before"):null,a=e instanceof t.HTMLElement?t.getComputedStyle(e,":after"):null;this.referenceElement===e&&A instanceof t.HTMLElement&&(this.clonedReferenceElement=A),A instanceof t.HTMLBodyElement&&L(A);for(var s=(0,h.parseCounterReset)(n,this.pseudoContentData),d=(0,h.resolvePseudoContent)(e,r,this.pseudoContentData),l=e.firstChild;l;l=l.nextSibling)l.nodeType===Node.ELEMENT_NODE&&("SCRIPT"===l.nodeName||l.hasAttribute(Q)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||(!this.copyStyles||"STYLE"!==l.nodeName)&&A.appendChild(this.cloneNode(l));var c=(0,h.resolvePseudoContent)(e,a,this.pseudoContentData);if((0,h.popCounters)(s,this.pseudoContentData),e instanceof t.HTMLElement&&A instanceof t.HTMLElement)switch(r&&this.inlineAllImages(H(e,A,r,d,T)),a&&this.inlineAllImages(H(e,A,a,c,S)),n&&this.copyStyles&&!(e instanceof HTMLIFrameElement)&&(0,u.copyCSSStyles)(n,A),this.inlineAllImages(A),(0!==e.scrollTop||0!==e.scrollLeft)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||b(e,A);break;case"TEXTAREA":case"SELECT":A.value=e.value;}return A}}]),e}(),U=function(e,A){return(e.cssRules?Array.from(e.cssRules):[]).filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).map(function(e){for(var t=(0,m.parseBackgroundImage)(e.style.getPropertyValue("src")),n=[],r=0;r<t.length;r++)if("url"===t[r].method&&t[r+1]&&"format"===t[r+1].method){var s=A.createElement("a");s.href=t[r].args[0],A.body&&A.body.appendChild(s);var a={src:s.href,format:t[r+1].args[0]};n.push(a)}return{formats:n.filter(function(e){return /^woff/i.test(e.format)}),fontFace:e.style}}).filter(function(e){return e.formats.length})},E=function(e,A){var t=document.implementation.createHTMLDocument(""),n=document.createElement("base");n.href=A;var r=document.createElement("style");return r.textContent=e,t.head&&t.head.appendChild(n),t.body&&t.body.appendChild(r),r.sheet?U(r.sheet,t):[]},F=function(e,A,t){e.defaultView&&(A!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(A,t)},b=function(e,A){try{if(A){A.width=e.width,A.height=e.height;var t=e.getContext("2d"),n=A.getContext("2d");t?n.putImageData(t.getImageData(0,0,e.width,e.height),0,0):n.drawImage(e,0,0)}}catch(A){}},H=function(e,A,t,n,r){if(t&&t.content&&"none"!==t.content&&"-moz-alt-content"!==t.content&&"none"!==t.display){var a=A.ownerDocument.createElement("html2canvaspseudoelement");if((0,u.copyCSSStyles)(t,a),n)for(var s=n.length,d=0,l;d<s;d++)switch(l=n[d],l.type){case h.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var c=A.ownerDocument.createElement("img");c.src=(0,m.parseBackgroundImage)("url("+l.value+")")[0].args[0],c.style.opacity="1",a.appendChild(c);break;case h.PSEUDO_CONTENT_ITEM_TYPE.TEXT:a.appendChild(A.ownerDocument.createTextNode(l.value));}return a.className=I+" "+N,A.className+=r===T?" "+I:" "+N,r===T?A.insertBefore(a,A.firstChild):A.appendChild(a),a}},T=":before",S=":after",I="___html2canvas___pseudoelement_before",N="___html2canvas___pseudoelement_after",R="{\n    content: \"\" !important;\n    display: none !important;\n}",L=function(e){M(e,"."+I+T+R+"\n         ."+N+S+R)},M=function(e,A){var t=e.ownerDocument.createElement("style");t.innerHTML=A,e.appendChild(t)},D=function(e){var A=s(e,3),t=A[0],n=A[1],r=A[2];t.scrollLeft=n,t.scrollTop=r},O=function(){return e(Date.now()+1e7*Math.random()).toString(16)},k=function(A,t){try{return Promise.resolve(A.contentWindow.document.documentElement)}catch(n){return t.proxy?(0,c.Proxy)(A.src,t).then(function(e){var A=e.match(/^data:text\/(.+);(base64)?,(.*)$/i);return A?"base64"===A[2]?window.atob(decodeURIComponent(A[3])):decodeURIComponent(A[3]):Promise.reject()}).then(function(e){return K(A.ownerDocument,(0,l.parseBounds)(A,0,0)).then(function(A){var t=A.contentWindow,n=t.document;n.open(),n.write(e);var r=_(A).then(function(){return n.documentElement});return n.close(),r})}):Promise.reject()}},K=function(e,A){var t=e.createElement("iframe");return(t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling="no",t.setAttribute(Q,"true"),!e.body)?Promise.reject("Body element not found in Document that is getting rendered"):(e.body.appendChild(t),Promise.resolve(t))},_=function(e){var A=e.contentWindow,t=A.document;return new Promise(function(n){A.onload=e.onload=t.onreadystatechange=function(){var A=setInterval(function(){0<t.body.childNodes.length&&"complete"===t.readyState&&(clearInterval(A),n(e))},50)}})},P=t.cloneWindow=function(e,A,t,n,r,a){var s=new C(t,n,r,!1,a),d=e.defaultView.pageXOffset,l=e.defaultView.pageYOffset;return K(e,A).then(function(r){var a=r.contentWindow,c=a.document,B=_(r).then(function(){s.scrolledElements.forEach(D),a.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==A.top||a.scrollX!==A.left)&&(c.documentElement.style.top=-A.top+"px",c.documentElement.style.left=-A.left+"px",c.documentElement.style.position="absolute");var d=Promise.resolve([r,s.clonedReferenceElement,s.resourceLoader]),l=n.onclone;return s.clonedReferenceElement instanceof a.HTMLElement||s.clonedReferenceElement instanceof e.defaultView.HTMLElement||s.clonedReferenceElement instanceof HTMLElement?"function"==typeof l?Promise.resolve().then(function(){return l(c)}).then(function(){return d}):d:Promise.reject("Error finding the "+t.nodeName+" in the cloned document")});return c.open(),c.write(V(document.doctype)+"<html></html>"),F(t.ownerDocument,d,l),c.replaceChild(c.adoptNode(s.documentElement),c.documentElement),c.close(),B})},V=function(e){var A="";return e&&(A+="<!DOCTYPE ",e.name&&(A+=e.name),e.internalSubset&&(A+=e.internalSubset),e.publicId&&(A+="\""+e.publicId+"\""),e.systemId&&(A+="\""+e.systemId+"\""),A+=">"),A}},function(e,A,t){"";function n(e,A){if(!(e instanceof A))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(A,"__esModule",{value:!0}),A.ResourceStore=void 0;var r=function(){function e(e,A){for(var t=0,n;t<A.length;t++)n=A[t],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(A,t,n){return t&&e(A.prototype,t),n&&e(A,n),A}}(),a=t(10),s=function(e){return e&&e.__esModule?e:{default:e}}(a),d=t(26),l=function(){function e(A,t,r){n(this,e),this.options=A,this._window=r,this.origin=this.getOrigin(r.location.href),this.cache={},this.logger=t,this._index=0}return r(e,[{key:"loadImage",value:function(e){var A=this;if(this.hasResourceInCache(e))return e;if(u(e))return this.cache[e]=p(e,this.options.imageTimeout||0),e;if(!m(e)||s.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||B(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=(0,d.Proxy)(e,this.options).then(function(e){return p(e,A.options.imageTimeout||0)}),e;if(!0===this.options.useCORS&&s.default.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var A=this;return B(e)?p(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=(0,d.Proxy)(e,this.options).then(function(e){return p(e,A.options.imageTimeout||0)})}},{key:"xhrImage",value:function(e){var A=this;return this.cache[e]=new Promise(function(t,n){var r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)n("Failed to fetch image "+e.substring(0,256)+" with status code "+r.status);else{var A=new FileReader;A.addEventListener("load",function(){var e=A.result;t(e)},!1),A.addEventListener("error",function(A){return n(A)},!1),A.readAsDataURL(r.response)}},r.responseType="blob",A.options.imageTimeout){var a=A.options.imageTimeout;r.timeout=a,r.ontimeout=function(){return n("Timed out ("+a+"ms) fetching "+e.substring(0,256))}}r.open("GET",e,!0),r.send()}).then(function(e){return p(e,A.options.imageTimeout||0)}),this.cache[e]}},{key:"loadCanvas",value:function(e){var A=this._index++ +"";return this.cache[A]=Promise.resolve(e),A}},{key:"hasResourceInCache",value:function(e){return"undefined"!=typeof this.cache[e]}},{key:"addImage",value:function(e,A,t){var n=this;this.logger.log("Added image "+e.substring(0,256));var r=function(e){return new Promise(function(r,a){var s=new Image;if(s.onload=function(){return r(s)},(!e||t)&&(s.crossOrigin="anonymous"),s.onerror=a,s.src=A,!0===s.complete&&setTimeout(function(){r(s)},500),n.options.imageTimeout){var d=n.options.imageTimeout;setTimeout(function(){return a("Timed out ("+d+"ms) fetching "+A.substring(0,256))},d)}})};return this.cache[e]=g(A)&&!m(A)?s.default.SUPPORT_BASE64_DRAWING(A).then(r):r(!0),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var A=this._link||(this._link=this._window.document.createElement("a"));return A.href=e,A.href=A.href,A.protocol+A.hostname+A.port}},{key:"ready",value:function(){var A=this,t=Object.keys(this.cache),n=t.map(function(e){return A.cache[e].catch(function(t){return A.logger.log("Unable to load image",t),null})});return Promise.all(n).then(function(e){return A.logger.log("Finished loading "+e.length+" images",e),new c(t,e)})}}]),e}();A.default=l;var c=A.ResourceStore=function(){function e(A,t){n(this,e),this._keys=A,this._resources=t}return r(e,[{key:"get",value:function(e){var A=this._keys.indexOf(e);return-1===A?null:this._resources[A]}}]),e}(),B=function(e){return /^data:image\/.*/i.test(e)},g=function(e){return /^data:image\/.*;base64,/i.test(e)},u=function(e){return"blob"===e.substr(0,4)},m=function(e){return"svg"===e.substr(-3).toLowerCase()||/^data:image\/svg\+xml/i.test(e)},p=function(e,A){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src=e,!0===r.complete&&setTimeout(function(){t(r)},500),A&&setTimeout(function(){return n("Timed out ("+A+"ms) loading image")},A)})}},function(e,A,t){"";Object.defineProperty(A,"__esModule",{value:!0}),A.parseContent=A.resolvePseudoContent=A.popCounters=A.parseCounterReset=A.TOKEN_TYPE=A.PSEUDO_CONTENT_ITEM_TYPE=void 0;var n=function(){function e(e,A){var t=[],n=!0,r=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(n=(d=s.next()).done)&&(t.push(d.value),!(A&&t.length===A));n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return t}return function(A,t){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return e(A,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=t(14),a=t(8),d=A.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},l=A.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},c=A.parseCounterReset=function(e,A){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var t=[],r=e.counterReset.split(/\s*,\s*/),a=r.length,s=0;s<a;s++){var d=r[s].split(/\s+/),l=n(d,2),c=l[0],B=l[1];t.push(c);var g=A.counters[c];g||(g=A.counters[c]=[]),g.push(parseInt(B||0,10))}return t},B=A.popCounters=function(e,A){for(var t=e.length,n=0;n<t;n++)A.counters[e[n]].pop()},g=A.resolvePseudoContent=function(e,A,t){if(!A||!A.content||"none"===A.content||"-moz-alt-content"===A.content||"none"===A.display)return null;var r=u(A.content),a=r.length,c=[],B="",g=A.counterIncrement;if(g&&"none"!==g){var m=g.split(/\s+/),h=n(m,2),Q=h[0],C=h[1],U=t.counters[Q];U&&(U[U.length-1]+=void 0===C?1:parseInt(C,10))}for(var E=0,F;E<a;E++)switch(F=r[E],F.type){case l.STRING:B+=F.value||"";break;case l.ATTRIBUTE:e instanceof HTMLElement&&F.value&&(B+=e.getAttribute(F.value)||"");break;case l.COUNTER:var b=t.counters[F.name||""];b&&(B+=w([b[b.length-1]],"",F.format));break;case l.COUNTERS:var H=t.counters[F.name||""];H&&(B+=w(H,F.glue,F.format));break;case l.OPENQUOTE:B+=p(A,!0,t.quoteDepth),t.quoteDepth++;break;case l.CLOSEQUOTE:t.quoteDepth--,B+=p(A,!1,t.quoteDepth);break;case l.URL:B&&(c.push({type:d.TEXT,value:B}),B=""),c.push({type:d.IMAGE,value:F.value||""});}return B&&c.push({type:d.TEXT,value:B}),c},u=A.parseContent=function(e,A){if(A&&A[e])return A[e];for(var t=[],n=e.length,r=!1,a=!1,s=!1,d="",B="",g=[],u=0,p;u<n;u++){switch(p=e.charAt(u),p){case"'":case"\"":a?d+=p:(r=!r,!s&&!r&&(t.push({type:l.STRING,value:d}),d=""));break;case"\\":a?(d+=p,a=!1):a=!0;break;case"(":r?d+=p:(s=!0,B=d,d="",g=[]);break;case")":if(r)d+=p;else if(s){switch(d&&g.push(d),B){case"attr":0<g.length&&t.push({type:l.ATTRIBUTE,value:g[0]});break;case"counter":if(0<g.length){var w={type:l.COUNTER,name:g[0]};1<g.length&&(w.format=g[1]),t.push(w)}break;case"counters":if(0<g.length){var h={type:l.COUNTERS,name:g[0]};1<g.length&&(h.glue=g[1]),2<g.length&&(h.format=g[2]),t.push(h)}break;case"url":0<g.length&&t.push({type:l.URL,value:g[0]});}s=!1,d=""}break;case",":r?d+=p:s&&(g.push(d),d="");break;case" ":case"\t":r?d+=p:d&&(m(t,d),d="");break;default:d+=p;}"\\"!==p&&(a=!1)}return d&&m(t,d),A&&(A[e]=t),t},m=function(e,A){"open-quote"===A?e.push({type:l.OPENQUOTE}):"close-quote"===A?e.push({type:l.CLOSEQUOTE}):void 0},p=function(e,A,t){var n=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],r=2*t;return r>=n.length&&(r=n.length-2),A||++r,n[r].replace(/^["']|["']$/g,"")},w=function(e,A,t){for(var n=e.length,s="",d=0;d<n;d++)0<d&&(s+=A||""),s+=(0,r.createCounterText)(e[d],(0,a.parseListStyleType)(t||"decimal"),!1);return s}}])});var webrtcdevcon=function(){var qA=Math.pow,ZA=Math.log,$A=Math.ceil,et=Math.floor,At=String.fromCharCode,tt=Math.round,nt=Math.sqrt,rt=Math.min;function A(A,e){return A?"<video src=\""+A+"\" autoplay></vide>":"<img src=\""+e+"\">"}function r(A){if(0==A)return"0 Bytes";var e=parseInt(et(ZA(A)/ZA(1024)));return tt(A/qA(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]}function a(e){var A=document.createElement("script");A.src=e,A.async=!0,document.documentElement.appendChild(A)}async function s(){let e=null;try{if(e=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),0<e.getVideoTracks().length)return webrtcdev.log("--------------------------------- Video Permission obtained "),void(St=!0)}catch(e){webrtcdev.error(e.name+": "+e.message)}St=!1}async function d(){let e=null;try{if(e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),0<e.getAudioTracks().length)return webrtcdev.log("--------------------------------- Audio Permission obtained "),void(Tt=!0)}catch(e){webrtcdev.error(e.name+": "+e.message)}Tt=!1}function l(e){try{return document.getElementById(e)}catch(A){return webrtcdev.error(A),""}}function c(e){try{if(document.getElementsByName(e))return document.getElementsByName(e)[0]}catch(A){return webrtcdev.error(A),""}}function B(e){if(!e)return void webrtcdev.error("show elem undefined");try{webrtcdev.log(" [init] show elem",e," , type ",typeof e," , nodetype ",e.nodeType),"object"==typeof e&&e.nodeType!==void 0?(e.removeAttribute("hidden"),e.setAttribute("style","display:block!important")):l(e)?(e=l(e),e.removeAttribute("hidden"),e.setAttribute("style","display:block")):c(e)?(e=c(e),e[0].removeAttribute("hidden"),e[0].setAttribute("style","display:block")):webrtcdev.warn("elem not found ",e)}catch(e){webrtcdev.error("showeleem",e)}}function g(e){try{"object"==typeof e&&e.nodeType!==void 0?(e.setAttribute("hidden",!0),e.setAttribute("style","display:none!important")):l(e)&&(l(e).setAttribute("hidden",!0),l(e).setAttribute("style","display:none"))}catch(A){webrtcdev.error(e,A)}}function u(e){return!!l(e)}function m(e){let A=Zt;switch(webrtcdev.log("[webcallviewmanager] - updateWebCallView start with "," peerinfo",e," peerinfo role ",e.role," | myrole :",A),A){case"inspector":for(var t=0,n=0;n<wt.length;n++)webrtcdev.log(" [webcallviewmanager] Remote Video index array ",n," || ",wt[n],document.getElementsByName(wt[n]),document.getElementsByName(wt[n]).src),wt[n].src&&t++;let r=document.createElement("video");wt[t]=r,document.getElementById(nn.videoContainer).appendChild(r);let a=wt[t];for(let A in webrtcdev.log(" [webcallviewmanager] updateWebCallView role-inspector , attaching stream",a,e.stream),rA(a,e.stream).then(()=>{a.hidden&&(removid.hidden=!1),a.id=e.videoContainer,a.className=nn.videoClass,nn.userDisplay&&e.name&&ee(a,e),nn.userMetaDisplay&&e.userid&&Ae(a,e);var A=document.getElementsByName(mt)[0];for(n in A&&(A.hidden=!0),nn.videoarr){var t=document.getElementsByName(nn.videoarr[n])[0];t&&t.setAttribute("style","display:none")}}),document.getElementsByClassName("timeBox"))document.getElementsByClassName("timeBox")[A].hidden=!0;break;case"participant":case"host":case"guest":if(-1<e.vid.indexOf("videolocal")){if(webrtcdev.info("[webcallviewdevmanager] - role-participant , peerinfo Vid is Local"),mt&&document.getElementsByName(mt)[0]){let A=document.getElementsByName(mt)[0];rA(A,e.stream).then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateWebCallView - Done attaching local stream to element",A),A.muted=!0,A.className=tn.videoClass,tn.userDisplay&&e.name&&ee(A,e),tn.userMetaDisplay&&e.userid&&Ae(A,e)})}else webrtcdev.error("[webcallviewdevmanager] No local video container in localobj -> ",tn);}else if(-1<e.vid.indexOf("videoremote")){if(webrtcdev.info("[webcallviewdevmanager] updateWebCallView-  role-",e.role," peerinfo Vid type - ",e.type),St&&mt&&pt){const e=document.getElementsByName(mt)[0],A=document.getElementsByName(pt)[0];if(0>=A.played.length){let t;0<e.played.length?(webrtcdev.log("[webcallviewdevmanager] updateWebCallView - local video is playing , just reattach stream to add in session"),t=iA(A,e)):(webrtcdev.log("[webcallviewdevmanager] updateWebCallView - local video is not playing ,use webcallpeers for stream to add in  session"),t=rA(A,dt[0].stream)),t.then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateWebCallView - Done attaching remote stream to local element"),tn.userDisplay&&dt[0].name&&ee(A,dt[0]),tn.userMetaDisplay&&dt[0].userid&&Ae(A,dt[0]),A.id=dt[0].videoContainer,A.className=nn.videoClass,A.muted=!0,J(A,dt[0])})}else webrtcdev.log("[webcallviewdevmanager] updateWebCallView - not updating self video as it is already playing ",A.played.length);webrtcdev.info("[webcallviewdevmanager] updateWebCallView - User is joined by a remote peer , hiding local video container","showing users conf video container with attachMediaStream and attachUserDetails ")}else St?webrtcdev.error("[webcallviewdevmanager] updateWebCallView - Local video container not defined "):webrtcdev.error("[webcallviewdevmanager] updateWebCallView - Outgoing Local video is ",St);if(yt&&wt){let A=h(e,wt);w(e,wt,A),webrtcdev.log("[webcallviewdevmanager] updateWebCallView - remote video attachMediaStream"),rA(wt[A],e.stream).then(()=>{webrtcdev.log("[ webcallviewdevmanager ] updateWebCallView - Done attaching remote stream to remote element"),wt[A]&&(B(wt[A].video),nn.userDisplay&&e.name&&ee(wt[A].video,e),nn.userMetaDisplay&&e.userid&&Ae(wt[A].video,peerInfo),wt[A].video.id=e.videoContainer,wt[A].video.className=nn.videoClass,J(wt[A].video,e))})}else webrtcdev.error("[webcallviewdevmanager] updateWebCallView - remote Video containers not defined ",wt),alert("remote Video containers not defined")}else webrtcdev.error("[webcallviewdevmanager] updateWebCallView-  PeerInfo vid didnt match either case ",e.vid);break;default:webrtcdev.error("[webcallviewdevmanager] updateWebCallView -  No role found to update webcall view ",A);}}function p(e){if(alert("destroy left peers resources "),webrtcdev.log("[webcallviewmanager] destroyWebCallView peerInfo",e),e.videoContainer&&document.getElementById(e.videoContainer)){let A=document.getElementById(e.videoContainer);if(!A)return;A.onplay=A.onplaying=function(){aA(A),A.setAttribute("hidden",!0)}}if("single"!=Dt.props.fileList){let e="";for(i in dt)"remote"==dt[i].type&&(e+=dt[i].userid);if(2<=l("fileListingRow").childElementCount){webrtcdev.warn("[filesharing modifier] more than 1 file listing rows prresent , remove the ones for peers that are no longer in session  ");let A=document.getElementById("fileListingRow"),t=A.childNodes;for(x in t){if(webrtcdev.log("[filesharing modifier] check if this dom by id is required .  filelistingboxes[x].id ",t[x]),!t[x].id)break;fid=t[x].id.split("widget-filelisting-box"),e.includes(fid[1])||(webrtcdev.warn("[filesharing modifier] File list boxes belonging to userid ",fid[1]," need to be removed  "),A.removeChild(t[x]))}}if(2<=l("fileSharingRow").childElementCount){webrtcdev.warn("[filesharing modifier] more than 1 file listing rows present , remove the ones for peers that are no longer in session  ");let A=document.getElementById("fileSharingRow"),t=A.childNodes;for(x in t){if(webrtcdev.log("[filesharing modifier] check if this dom by id is required .filelistingboxes[x].id ",t[x]),!t[x].id)break;fid=t[x].id.split("widget-sharing-box"),e.includes(fid[1])||(webrtcdev.warn("[filesharing modifier] File list boxes belonging to userid ",fid[1]," need to be removed  "),A.removeChild(t[x]))}}}}function w(e,A,t){if(t&&(webrtcdev.log("[webcallviewmanager] updateRemoteVideos - current empty video index -",t),A&&e))try{if("unlimited"==nn.maxAllowed){webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remote video is unlimited , creating video for remoteVideos array ");let n=document.createElement("video");A[t]={userid:e.userid,stream:e.stream,video:n},document.getElementById(nn.dynamicVideos.videoContainer).appendChild(n)}else{if(webrtcdev.log("[webcallviewmanager] updateRemoteVideos - Max-capacity is limited to size -",nn.maxAllowed),webrtcdev.log("[webcallviewmanager] updateRemoteVideos - remoteVideos -",A),t>A.length)return void webrtcdev.error("[webcallviewmanager] current index is larger than remote video length ");let n=document.getElementsByName(A[t]);webrtcdev.log("[webcallviewmanager] updateRemoteVideos - update remote video : ",n),n&&0<=n.length?n[0]&&(A[t]={userid:e.userid,stream:e.stream,video:n[0]},webrtcdev.log("[webcallviewmanager] updateRemoteVideos - RemoteVideos["+t+"] updated ",A[t],e.stream)):A[t].userid==e.userid&&""==A[t].stream?(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder already exists with '' stream just overwrite the stream "),A[t].stream=e.stream):(webrtcdev.warn("[webcallviewmanager] updateRemoteVideos - since remvideo holder doesnt exist just overwrite the last remote with the video "),A[A.length-1]={userid:e.userid,stream:e.stream,video:n[0]},webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - RemoteVideos["+A.length-1+"] updated ",A[t]))}webrtcdev.log("[webcallviewmanager ] updateRemoteVideos - remoteVideos after updating ",A[t])}catch(e){webrtcdev.error("[webcallviewmanager ] updateRemoteVideos - ",e)}}function h(e,A){let t=0;for(v in A)if(webrtcdev.log("[webcallviewdevmanager] Remote Video index array ",v," || ",A[v]),A[v].userid!=e.userid||""!=A[v].stream&&A[v].stream||!A[v].video){let e=document.getElementsByName(A[v]);if(!!A[v].video)webrtcdev.log("[webcallviewdevmanager] ] Remote Video has json appended ",A[v]),e=A[v].video;else if(webrtcdev.log("[webcallviewdevmanager] ] Remote Video is not appended by json ",e),0>=e.length){webrtcdev.log("[webcallviewdevmanager] Remote video space is empty "),t=v;break}else webrtcdev.log("[webcallviewdevmanager] Remote video space exists ",e[0]),e=e[0];if(webrtcdev.log("[webcallviewdevmanager] vids.src ",e.src," , vids.srcObject ",e.srcObject," , vids.readyState ",e.readyState," , vids.played.length ",e.played.length),e&&e.srcObject){if(e.srcObject.active)webrtcdev.log("[webcallviewdevmanager] video is already appended and playing ",e," vids.srcObject.active ",e.srcObject.active," move to next iteration"),t++;else{webrtcdev.log("[webcallviewdevmanager] video is already appended , but not playing ",e," vids.srcObject.active ",e.srcObject.active," use this index"),t=v;break}}else if(e&&!e.srcObject){webrtcdev.log("[webcallviewdevmanager] video is not played ",e,"use this index "),t=v;break}else webrtcdev.warn("[webcallviewdevmanager] Not sure whats up with the video ",e," move to next iteration"),t++}else if(webrtcdev.log("[webcallviewdevmanager] Remote Video dom exist already for the userid, checking for srcobject "),!A[v].video.srcObject){webrtcdev.log("[webcallviewdevmanager] Remote Video dom exist already but without stream",A[v].video),t=v;break}return webrtcdev.log("[webcallviewmanager - findEmptyRemoteVideoIndex] emptyvideoindex ",t,A[t]),t}function Q(e){const A=document.createElement("span");A.setAttribute("data-provides","fileinput"),A.className=e.button.class,A.innerHTML=e.button.html,A.onclick=function(){const e=new FileSelector;e.selectSingleFile(function(e){pA(e)})};const t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function C(e){let A=document.getElementById(e.button.id);A.onclick=function(){const e=new FileSelector;e.selectSingleFile(function(e){pA(e)})}}function U(e,A,t,n,r,a,s,d){try{if(!A)return void webrtcdev.error(" [filehsraingJs] Progress helpler cannot be added for one peer as its absent");if(!A.fileList.container||!document.getElementById(A.fileList.container))return void webrtcdev.error(" [filehsraingJs] Progress helpler cannot be added , missing fileListcontainer ");webrtcdev.log(" [filehsraingJs] progress helper attributes  attributes : uuid -",e,"peerinfo - ",A,"filename - ",t,"file size - ",n,"progress helper class - ",a,"file to - ",d,"file from - ",s);let l=e+"_"+s+"_"+d;webrtcdev.log(" [startjs] addProgressHelper - progressid ",l);let c=document.createElement("ul");if(c.id=l,c.title=t+" size - "+r.size+" type - "+r.type+" last modified on -"+r.lastModifiedDate,c.setAttribute("type","progressbar"),c.setAttribute("class","row"),Nt){const e=document.createElement("li");e.innerHTML=t+"size - "+r.size+" type - "+r.type+" last modified on -"+r.lastModifiedDate+" from :"+s+" --> to :"+d+"</br>",c.appendChild(e)}let B=document.createElement("li");B.setAttribute("class",a),B.innerHTML="<label>0%</label><progress></progress>",c.appendChild(B),Sn[l]={div:B,progress:B.querySelector("progress"),label:B.querySelector("label")},Sn[l].progress.max=n;let g=document.createElement("li");g.id="stopuploadButton"+l,g.innerHTML="<i class=\"fa fa-trash-o\"></i>",g.onclick=function(e){webrtcdev.log(" [startjs] addProgressHelper - remove progressid ",l," dom : ",document.getElementById(l)),N(l),wA(l,t,r,d,s),e.target.remove(),R(l),ut==t?ut==t&&(ut=""):(at.send({type:"shareFileStopUpload",_element:l,_filename:t}),ut=t)},c.appendChild(g),parentDom=document.getElementById(A.fileList.container),parentDom.insertBefore(c,parentDom.firstChild)}catch(e){webrtcdev.error(" [filehsraingJs] problem in addProgressHelper  ",e)}}function E(A,e){if(-1!=A.position){const t=+A.position.toFixed(2).split(".")[1]||100;e.innerHTML=t+"%"}}function F(e,A,t,n,r){let a;const s=A.fileShare.container,d=A.fileList.container;try{if(!Dt.active)return;webrtcdev.log("[filesharing dommodifier js] displayList - uuid: ",e," peerinfo :",A,"file url : ",t," file name : ",n," file type :",r);let s=null;"sessionRecording"==r&&(n=n.videoname+"_"+n.audioname,s=n);let l=document.querySelectorAll("ul[id^=\""+e+"\"]");if(0<l.length)for(x in l)webrtcdev.log("[filesharing dommodifier js] displayList remove progress bar index - ",x," file dom - ",l[x]),"object"==typeof l[x]&&("progressbar"==l[x].type||-1<l[x].indexOf("progressbar"))?A.fileList.container&&document.getElementById(A.fileList.container)?(a=document.getElementById(A.fileList.container),webrtcdev.log("[ filesharing js ] displayList, set up parent dom ",a),a.removeChild(l[x])):(webrtcdev.log("[ filesharing dommodifier js] displayList, Not sure what does this do ",l[x]),a=l[x].parentNode.parentNode):webrtcdev.warn("[filesharing dommodifier js] displayList - cannot remove since , elem is not of type progressbar  ",l[x]);else a=document.getElementById(d)||document.body,webrtcdev.warn("[ filesharing dommodifier js] displayList , progress bar area doesnt exist, set parent dom to ",d,document.getElementById(d)," or to document body")}catch(e){webrtcdev.error(" [filesharing dommodifier js] Display list exception ",e)}webrtcdev.log(" c displayList set up parent dom  ",a);let l=document.createElement("ul");l.id=n+e,l.type=A.type,l.innerHTML="",l.className="row";let c=document.createElement("li");c.innerHTML=n,c.title=r+" shared by "+A.name,c.className="filenameClass",c.id="name"+n+e;let B=document.createElement("li");if(B.id="downloadButton"+n+e,B.title="Download",Dt.filelist.saveicon){let e=document.createElement("img");e.src=Dt.filelist.downloadicon,B.appendChild(e)}else B.innerHTML="<i class=\"fa fa-download\"></i>";B.onclick=function(){webrtcdev.log("[filesharing dommodifier js] download  filename ",n),L(e,s,t,n,r)};let u=document.createElement("li");if(u.id="saveButton"+n+e,u.title="Save",u.setAttribute("data-toggle","modal"),u.setAttribute("data-target","#saveModal"),Dt.filelist.saveicon){let e=document.createElement("img");e.src=Dt.filelist.saveicon,u.appendChild(e)}else u.innerHTML="<i class=\"fa fa-floppy-o\"></i>";u.onclick=function(){G(r)};let m=document.createElement("li");if(m.id="showButton"+n+e,m.title="Show",Dt.filelist.saveicon){let e=document.createElement("img");e.src=Dt.filelist.showicon,m.appendChild(e)}else m.innerHTML="<i class=\"fa fa-eye-slash\"></i>";let p=0;Bt=n,ct="",m.onclick=function(){p++,S(e,s,t,n,r,m,p)};let w=document.createElement("li");w.id="removeButton"+n+e,w.title="Remove",w.innerHTML="<i class=\"fa fa-trash-o\"></i>",w.onclick=function(){if(gt!=n){const A=n+e;N(s,n),at.send({type:"shareFileRemove",_element:A,_filename:n}),R(A),gt=n,webrtcdev.log("[filesharing dommodifier js] filedom to be hidden : ",l),l.setAttribute("style","display:none!important")}else gt==n&&(gt="")},A.userid!=st&&g(w),"inspector"==Zt&&((!0).hidden=!0,m.hidden=!0,u.hidden=!0,l.appendChild(c),w.hidden=!0),l.appendChild(c),l.appendChild(B),l.appendChild(m),l.appendChild(u),!0&&l.appendChild(w),webrtcdev.log("[filesharing dom modifier JS ] filedom ",l," | parentdom ",a),a?(a.appendChild(l),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileListed"}}))):webrtcdev.error("[filesharing dom modifier JS ] filedom's parent dom not found ")}function b(e,A,t){webrtcdev.log(" [filehsaring domodifier]  - getFileElementDisplayByType ","file type :",e,"file url : ",A,", file name : ",t);let n;if(-1<e.indexOf("msword")||-1<e.indexOf("officedocument")){let e=document.createElement("div");e.className="alert alert-warning",e.innerHTML="Microsoft and Libra word file cannot be opened in browser. Click bottom DOWNLOAD in UF box . File shows up below the UF box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",n=e}else if(-1<e.indexOf("image")){let e=document.createElement("img");e.src=A,e.title=t,e.id="display"+t,n=e}else if("sessionRecording"==e){let e=e.videoname+"_"+e.audioname;const t=document.createElement("div");t.setAttribute("background-color","black"),t.id="display"+e,t.title=e;let r=document.createElement("video");r.src=A.videofileurl,r.setAttribute("type","audvideo/webm"),r.setAttribute("name","videofile"),r.controls="controls",r.title=e.videoname+".webm";let a=document.createElement("audio");a.src=A.audiofileurl,a.setAttribute("type","audio/wav"),a.controls="controls",a.title=e.videoname+".wav",t.appendChild(r),t.appendChild(a),n=t,r.play(),a.play()}else if(-1<e.indexOf("videoScreenRecording")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoScreenRecording  fileurl ",A);let e=document.createElement("video");e.src=A,e.setAttribute("controls","controls"),e.style.width="100%",e.title=t,e.id="display"+t,n=e}else if(-1<e.indexOf("video")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - videoRecording ",A);let e=document.createElement("video");e.src=A,e.setAttribute("controls","controls"),e.style.width="100%",e.title=t,e.id="display"+t,n=e}else if(-1<e.indexOf("audio")){webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - audio ",A);let e=document.createElement("audio");e.src=A,e.controls="controls",e.title=t,e.id="display"+t,n=e}else{webrtcdev.log("[filehsaring domodifier] getFileElementDisplayByType - iframe ",A);let e=document.createElement("iframe");e.style.width="100%",e.src=A,e.className="viewerIframeClass",e.title=t,e.id="display"+t,n=e}return n}function H(e,A,t,n,r){webrtcdev.log(" [filehsaring dommodifier] displayFile  - uuid: ",e," peerinfo :",A," , file url : ",t," ,  file name : ",n," ,  file type :",r);try{if(!A||!A.fileShare)return;let e=document.getElementById(A.fileShare.container),a=b(r,t,n);if(e)I(A.fileShare.container,t,n,r);else if("inspector"==Zt)for(j in dt){const e=++j,A=document.getElementById(dt[e].fileShare.container);if(A){I(dt[e].fileShare.container,t,n,r);break}}else document.body.appendChild(a)}catch(e){webrtcdev.error("[filehsaring dommodifier ] displayFile  has a problem ",e)}}function T(e){const A=document.getElementById(e);for(let t in dt)if(A.getAttribute("lastClickedBy")===dt[t].userid)return void A.setAttribute("lastClickedBy","");""==A.getAttribute("lastClickedBy")&&(A.setAttribute("lastClickedBy",at.userid),at.send({type:"buttonclick",buttonName:e}))}function S(e,A,t,n,r,a,s){webrtcdev.log(" [filehsaring js]  - show/hide elementDisplay ",A),webrtcdev.log(" [filehsaring js]  - show/hide button ",n," || ",s),1==s%2?(I(A,t,n,r),a.innerHTML="<i class=\"fa fa-eye-slash\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to show the file")):0==s%2&&(N(A,n),a.innerHTML="<i class=\"fa fa-eye\"></i>",webrtcdev.log(" [filehsaring js]  Executed script to hide the file "))}function I(e,A,t,n){webrtcdev.log("[filehsaring js]  showFile container - ",e,document.getElementById(e));const r=b(n,A,t);webrtcdev.log("[filehsaring js]  showFile  filedom - ",r),u(e)?(document.getElementById(e).innerHTML="",B(e),document.getElementById(e).appendChild(r)):webrtcdev.warn(" [filehsaring js] cant show file as parent DOM fir fileDisplay container doesnt exist ")}function N(e){webrtcdev.log("[filehsaring js]  hidefile ",e),u(e)?(document.getElementById(e).innerHTML="",g(e),webrtcdev.log("[filehsaring js] hidefile done")):webrtcdev.warn(" [filehsaring js]  file is not displayed to hide  ")}function R(e){webrtcdev.log("[filehsaring js]  removeFile ",e),document.getElementById(e).remove()}function L(e,A,t,n,r){if(webrtcdev.log(" downloadButton _filename ",n,"  filetype ",r),"sessionRecording"==r){const e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=t.audiofileurl,e.download=peerinfo.filearray[0]+".wav",e.click(),window.URL.revokeObjectURL(t.audiofileurl);const A=document.createElement("a");document.body.appendChild(A),A.style="display: none",A.href=t.videofileurl,A.download=peerinfo.filearray[1]+".webm",A.click(),window.URL.revokeObjectURL(t.videofileurl)}else{const e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.href=t,e.download=n,e.click(),window.URL.revokeObjectURL(t)}}function M(e,A,t){try{if(webrtcdev.log(" [ filehsreing js ]  createFileSharingBox ",e,A),document.getElementById(e.fileShare.outerbox))return;const n=document.createElement("div");n.className="single"==t?"col-md-12 fileviewing-box":"col-md-6 fileviewing-box",n.id=e.fileShare.outerbox;let r=document.createElement("p"),a,s;if(r.id=e.fileShare.container+"controlBar","single"!=t&&r.appendChild(document.createTextNode(e.name)),"none"!=Dt.fileshare.minicon){if(a=document.createElement("span"),Dt.fileshare.minicon){let e=Dt.fileshare.minicon;webrtcdev.log(" [fileShare JS ] creating custom minicon",e);let A=document.createElement("img");A.src=e,a.appendChild(A)}else{"<i class=\"fa fa-minus-square\"></i>".innerHTML="<i class=\"fa fa-minus-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default minicon ","<i class=\"fa fa-minus-square\"></i>")}a.id=e.fileShare.minButton,a.title="Minimize",a.style.display="none",a.setAttribute("lastClickedBy",""),a.onclick=function(){V(e.userid,a.id,e.fileShare.outerbox),g(a),B(s),a.setAttribute("lastClickedBy",e.userid)},r.appendChild(a)}else webrtcdev.warn(" [fileShare JS ] minicon is none");if("none"!=Dt.fileshare.maxicon){if(s=document.createElement("span"),Dt.fileshare.maxicon){let e=Dt.fileshare.maxicon;webrtcdev.log(" [fileShare JS ] creating custom maxicon",e);let A=document.createElement("img");A.src=e,s.appendChild(A)}else{s.innerHTML="<i class=\"fa fa-external-link-square\"></i>",webrtcdev.log(" [fileShare JS ] creating default maxicon","<i class=\"fa fa-external-link-square\"></i>")}s.id=e.fileShare.maxButton,s.title="Maximize",s.style.display="block",s.setAttribute("lastClickedBy",""),s.onclick=function(){for(x in X(e.userid,s.id,e.fileShare.outerbox),dt)dt[x].fileShare.outerbox!=e.fileShare.outerbox&&z(dt[x].userid,s.id,dt[x].fileShare.outerbox);g(s),B(a),s.setAttribute("lastClickedBy",e.userid)},r.appendChild(s)}else webrtcdev.warn(" [fileShare JS ] maxicon is none");let d=document.createElement("span");if(Dt.fileshare.closeicon){let e=document.createElement("img");e.src=Dt.fileshare.closeicon,d.appendChild(e)}else d.innerHTML="<i class=\"fa fa-times-circle\"></i>";d.id=e.fileShare.closeButton,d.title="Close",d.setAttribute("lastClickedBy",""),d.onclick=function(){P(e.userid,d.id,e.fileShare.container)},r.appendChild(d);let l=0;let c=document.createElement("span");if(Dt.fileshare.rotateicon){let e=document.createElement("img");e.src=Dt.fileshare.rotateicon,c.appendChild(e)}else c.innerHTML="<i class=\"fa fa-mail-forward\"></i>";c.id=e.fileShare.rotateButton,c.title="Rotate",c.onclick=function(){let A=document.getElementById(e.fileShare.container),t=A.firstChild;webrtcdev.log(" [filehsraing ] rotateButton dom ",t,t.nodeName,"dom parent ",A),l=(l+90)%360,t.setAttribute("angle",l),t?"VIDEO"==t.nodeName?D(t,A):"IMG"==t.nodeName?k(t,A):"IFRAME"==t.nodeName?O(t,A):t.setAttribute("orientation",""):webrtcdev.error(" [filehsraing ] rotateButton  , dom doesnt exist")},r.appendChild(c);let u=document.createElement("div");if(u.className="filesharingWidget-"+t,u.id=e.fileShare.container,Nt){let e=document.createElement("span");e.innerHTML="<br/>"+u.id+"<br/>",n.appendChild(e)}n.appendChild(r),n.appendChild(u),A.appendChild(n)}catch(A){webrtcdev.error(" createFileSharingBox ",A)}}function D(e,A){const t=e.getAttribute("angle")||0;e.videoWidth>e.videoHeight?(e.setAttribute("style","height:"+A.clientWidth+"px;margin-left: 0px"),orientation="landscape"):orientation="portrait",e.setAttribute("orientation",orientation),e.className="col rotate"+t+e.getAttribute("orientation")}function O(e,A){const t=e.getAttribute("angle")||0;e.setAttribute("style","height:"+A.clientWidth+"px !important;width:100%"),e.setAttribute("orientation","portrait"),e.className="col rotate"+t+e.getAttribute("orientation")}function k(e){let A;const t=e.getAttribute("angle")||0;A=e.width>e.height?"landscape":"portrait",e.setAttribute("orientation",A),e.className="col rotate"+t+e.getAttribute("orientation")}function K(e,A,t){try{if(l(e.fileList.outerbox))return;const n=document.createElement("div");n.className="single"==t?"col-sm-12 filesharing-box":"col-sm-6 filesharing-box",n.id=e.fileList.outerbox;let r=document.createElement("div");r.id="widget-filelisting-container-header",r.setAttribute("style","background-color:"+e.color),"single"!=t&&r.appendChild(document.createTextNode(e.name+"     "));let a,s;"none"!=Dt.filelist.minicon&&(a=document.createElement("span"),a.innerHTML="<i class=\"fa fa-minus\" ></i>",a.id=e.fileShare.minButton,a.setAttribute("lastClickedBy",""),a.onclick=function(){z(e.userid,a.id,e.fileList.container),g(a),B(s)},r.appendChild(a)),"none"!=Dt.filelist.maxicon&&(s=document.createElement("span"),s.innerHTML="<i class=\"fa fa-plus\" ></i>",s.id=e.fileShare.maxButton,s.setAttribute("lastClickedBy",""),s.onclick=function(){X(e.userid,s.id,e.fileList.container),g(s),B(a)},r.appendChild(s),g(s));const d=document.createElement("div");d.id=e.fileList.container;let c=document.createElement("div");if(Nt){let e=document.createElement("span");e.innerHTML=d.id,n.appendChild(e)}n.appendChild(r),n.appendChild(d),n.appendChild(c),A.appendChild(n)}catch(e){webrtcdev.error("[filesharing dom modifier] createFileListingBox ",e)}}function _(e){if(webrtcdev.log("[filesharing dommodifier] createFileSharingDiv for - ",e),"inspector"!=e.role||"inspector"==Zt){if(!l(e.fileShare.outerbox)){let A=l(Dt.fileShareContainer);M(e,A,Dt.props.fileShare)}if(!l(e.fileList.outerbox)){let A=l(Dt.fileListContainer);K(e,A,Dt.props.fileList)}}}function P(e,A,t){l(t).innerHTML=""}function V(){for(x in dt)B(dt[x].fileShare.outerbox),document.getElementById(dt[x].fileShare.outerbox).className="col-md-6 fileviewing-box"}function z(e,A,t){g(t),document.getElementById(t).className="col-md-6 fileviewing-box"}function X(e,A,t){B(t),document.getElementById(t).className="col-md-12 fileviewing-box"}function G(e){webrtcdev.log(" create Modal popup for filetype ",e);const A=l("mainDiv");l("saveModal")&&A.removeChild(document.getElementById("saveModal"));const t=document.createElement("div");t.className="modal fade",t.setAttribute("role","dialog"),t.id="saveModal";const n=document.createElement("div");n.className="modal-dialog";const r=document.createElement("div");r.className="modal-content";const a=document.createElement("div");a.className="modal-header";const s=document.createElement("button");s.className="close",s.setAttribute("data-dismiss","modal"),s.innerHTML="&times;";const d=document.createElement("h4");d.className="modal-title",d.innerHTML="Save File",d.setAttribute("float","left"),a.appendChild(d),a.appendChild(s);const c=document.createElement("div");c.className="modal-body",c.innerHTML="";const B=document.createElement("div");let g;switch(e){case"blobcanvas":d.innerHTML="Save Drawing",g=document.createElement("div"),g.innerHTML="Right Click on Save, pop up window gives following info: Right Click on Draw image, Click Save As when window opens up.",B.appendChild(g);break;case"application/pdf":d.innerHTML="Save PDF",g=document.createElement("div"),g.innerHTML="Click DOWNLOAD on top of the doc . Click SAVE AS when window opens up";const A=document.createElement("img");A.src="images/savefile.PNG",B.appendChild(g),B.appendChild(A);break;case"image/jpeg":case"image/png":case"video/mov":case"video/webm":case"imagesnapshot":d.innerHTML="Save Picture / Video",g=document.createElement("div"),g.innerHTML="Right Click on the FILE . Click SAVE AS when window opens up",B.appendChild(g);break;case"audio/mp3":d.innerHTML="Save Music File",g=document.createElement("div"),g.innerHTML="Right Click on the FILE (play display line). Click SAVE AS when window opens up",B.appendChild(g);break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"video/x-ms-wmv":d.innerHTML="Save Microsoft Office / Libra / Open Office Documents",g=document.createElement("div"),g.innerHTML="Click bottom DOWNLOAD in Uploaded Files box . File shows up below the Uploaded Files box. Click arrow on right, then select OPEN  . File Opens in New Window, then 'Save As'.",B.appendChild(g);break;case"sessionRecording":d.innerHTML="Save Session Recording",g=document.createElement("div"),g.innerHTML="Extract the video and audio recording from the dowloaded compresed file and play together ",B.appendChild(g);break;default:g=document.createElement("div"),g.innerHTML="Document is Unrecognizable, cannot be saved, but can be shared with Remote. Use/Click Screen Share for Remote to view your screen. Then open the document on your screen.",B.appendChild(g);}c.appendChild(B),r.appendChild(a),r.appendChild(c),n.appendChild(r),t.appendChild(n),A.appendChild(t)}function J(A,t){let n=t.stream,r=t.streamid,a=t.controlBarName,s=t.fileSharingContainer;var d=A.parentNode;if(webrtcdev.log(" [media dom modifier] attachControlButtons to the parent Node of video  ",d),d){let e=d.childNodes;for(i in e){let A=e[i];"DIV"==A.nodeName&&A.id&&-1<A.id.indexOf("control")&&(webrtcdev.warn("[media dom modifier] control bar exists already, delete the previous one , before adding new one",A),d.removeChild(A))}}let l=document.createElement("div");if(l.id=a,l.className="local"==t.type?"localVideoControlBarClass":"remoteVideoControlBarClass",Nt){let e=document.createElement("div");e.innerHTML=A.id,l.appendChild(e)}if(Gt.active&&(Gt.audio.active&&l.appendChild(q(Gt,a,t)),Gt.video.active&&l.appendChild(Z(Gt,a,t))),kt.active&&l.appendChild(Je(a,t)),Kt.active&&l.appendChild(oA(Kt,a,t)),Xt.active&&l.appendChild(SA(a,t)),Jt.active){l.appendChild(Y(Jt,a,t,r,n)),nameBoxid="#videoheaders"+t.userid;let A=document.querySelectorAll(nameBoxid);for(e in A)A[e].appendChild&&A[e].appendChild(W(Jt,a,t,r,n))}d.appendChild(l)}function Y(e,A,t){let n=document.createElement("span");return n.id=A+"fullscreeButton",n.setAttribute("title","Full Screen"),n.className=e.max.button.class_off,n.innerHTML=e.max.button.html_off,n.onclick=function(){if(n.className==e.max.button.class_off){let A=document.getElementById(t.videoContainer);A.webkitRequestFullScreen(),n.className=e.max.button.class_on,n.innerHTML=e.max.button.html_on}else n.className=e.max.button.class_off,n.innerHTML=e.max.button.html_off},n}function W(e,A,t){var n=document.createElement("span");n.id=A+"minmizevideoButton",n.setAttribute("title","Minimize Video"),n.className=e.min.button.class_off,n.innerHTML=e.min.button.html_off;var r=document.getElementById(t.videoContainer);return n.onclick=function(){n.className==e.min.button.class_off?(g(r),n.className=e.min.button.class_on,n.innerHTML=e.min.button.html_on):(B(r),n.className=e.min.button.class_off,n.innerHTML=e.min.button.html_off)},webrtcdev.log("[_media_dommodifier ] createMinimizeVideoButton - button",n," vid ",r),n}function q(e,A,t){let n=document.createElement("span");return n.id=A+"audioButton",n.setAttribute("data-val","mute"),n.setAttribute("title","Toggle Audio"),n.className=e.audio.button.class_on,n.innerHTML=e.audio.button.html_on,n.onclick=function(){n.className==e.audio.button.class_on?(t.stream.mute({audio:!0}),n.className=e.audio.button.class_off,n.innerHTML=e.audio.button.html_off):(t.stream.unmute({audio:!0}),n.className=e.audio.button.class_on,n.innerHTML=e.audio.button.html_on),T(n.id)},n}function Z(e,A,t){let n=document.createElement("span");return n.id=A+"videoButton",n.setAttribute("title","Toggle Video"),n.setAttribute("data-container","body"),n.className=e.video.button.class_on,n.innerHTML=e.video.button.html_on,n.onclick=function(){n.className==e.video.button.class_on?(t.stream.mute({video:!0}),n.innerHTML=e.video.button.html_off,n.className=e.video.button.class_off):(t.stream.unmute({video:!0}),n.innerHTML=e.video.button.html_on,n.className=e.video.button.class_on),T(n.id)},n}function ee(e,A){if(webrtcdev.log("[media_dommanager] attachUserDetails - ",A.userid,":",A.type," to video DOM ",e),0<e.parentNode.querySelectorAll(".videoHeaderClass").length)if(webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present ",e.parentNode.querySelectorAll(".videoHeaderClass")),0<e.parentNode.querySelectorAll("videoheaders"+A.userid).length)return void webrtcdev.warn("[media_dommanager] user's video header already present ","videoheaders"+A.userid);else{webrtcdev.warn("[media_dommanager] attachUserDetails - video header already present for diff user , overwrite with ","videoheaders"+A.userid);let t=e.parentNode.querySelectorAll(".videoHeaderClass")[0];t.remove()}let t=document.createElement("div");t.setAttribute("style","background-color:"+A.color),t.className="videoHeaderClass",t.innerHTML=A.name,t.id="videoheaders"+A.userid,e.parentNode.insertBefore(t,e.parentNode.firstChild)}function Ae(e,A){webrtcdev.log("[media_dommanager] attachMetaUserDetails - ",A.userid,":",A.type);let t=document.createElement("span");t.setAttribute("style","background-color:"+A.color),t.innerHTML=A.userid+":"+A.type+"<br/>",e.parentNode.insertBefore(t,e.parentNode.firstChild)}function te(e,A){if(e&&"undefined"!=e)if(document.getElementById("alertBox")){var t=document.createElement("div");t.className="warning"==A?"alert alert-warning fade in":"crtical"==A?"alert alert-crtical":"alert alert-success fade in",t.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+e,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").appendChild(t),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(e)}function ne(e){if(e&&"undefined"!=e&&Nt)if(document.getElementById("alertBox")){var A=document.createElement("div");A.className="alert alert-warning fade in",A.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>"+e,document.getElementById("alertBox").hidden=!1,document.getElementById("alertBox").innerHTML="",document.getElementById("alertBox").appendChild(A),setTimeout(function(){document.getElementById("alertBox").hidden=!0},3e3)}else alert(e)}function re(){if(typeof Notification!=null)try{Notification.requestPermission().then(function(e){webrtcdev.log("[notify.js] notification requestPermission ",e)})}catch(e){webrtcdev.error("[notify.js] notification requestPermission ",e)}}function ie(e){webrtcdev.log("[screenshare dommodifier] create ScreenshareButton ",e),on=document.createElement("span"),on.className=e.button.shareButton.class_off,on.innerHTML=e.button.shareButton.html_off,on.id="screenShareButton",on.onclick=function(){if(on.className==e.button.shareButton.class_off){let A=new Date().getUTCMilliseconds();gn="screenshare_"+Et+"_"+A,ve(gn),on.className=e.button.shareButton.class_on,on.innerHTML=e.button.shareButton.html_on}else on.className==e.button.shareButton.class_on?(on.className=e.button.shareButton.class_off,on.innerHTML=e.button.shareButton.html_off,Se()):webrtcdev.log("[screenshare js] createScreenshareButton , classname is neither on nor off",on.className)};let A=document.createElement("li");return A.appendChild(on),l("topIconHolder_ul").appendChild(A),on}function ae(e){webrtcdev.log("assignScreenShareButton",e);let A=l(e.id);return A.onclick=function(){if(A.className==e.class_off){let t=new Date().getUTCMilliseconds();gn="screenshare_"+Et+"_"+t,ve(gn),A.className=e.class_on,A.innerHTML=e.html_on}else A.className==e.class_on?(A.className=e.class_off,A.innerHTML=e.html_off,Se()):webrtcdev.warn("[screenshare js] createScreenshareButton,classname neither on nor off",e.className)},A}function oe(e,A){if(!l("alertBox"))alert(e);else if(l("alertBox").innerHTML="","screenshareBegin"==A){let e=document.createElement("div");Ne(),e.className="alert alert-info",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>You have begun sharing screen , waiting for peer to view",l("alertBox").appendChild(e),setTimeout(function(){let e=document.createElement("div");Ne(),e.className="alert alert-danger",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>Peer was not able to view screen , please retry",l("alertBox").appendChild(e)},2e4)}else if("screclass_offenshareStartedViewing"==A);else if("screenshareError"==A){let e=document.createElement("div");Ne(),e.className="alert alert-danger",e.innerHTML="<a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>There was a error while sharing screen , please contact support ",l("alertBox").appendChild(e)}else;}function se(e){let A=document.getElementById(e.button.id);A.onclick=function(){A.className==e.button.class_on?(A.className=e.button.class_off,A.innerHTML=e.button.html_off,lA()):A.className==e.button.class_off&&(A.className=e.button.class_on,A.innerHTML=e.button.html_on,cA())}}function de(e){if(webrtcdev.log("[chat dom modifier] create Chat Box ",e),!e)return;let A=document.createElement("div"),t=document.createElement("input");t.setAttribute("type","text"),t.className="form-control chatInputClass",t.id="chatInput",t.onkeypress=function(A){13==A.keyCode&&(je(t.value),t.value="")};let n=document.createElement("span");n.className="btn btn-primary",n.innerHTML="Enter",n.onclick=function(){let e=document.getElementById("chatInput");je(e.value),e.value=""};let r=document.createElement("div");r.className="whoTypingClass",r.id="whoTyping",A.appendChild(t),A.appendChild(n),A.appendChild(r),document.getElementById(e.container.id).appendChild(A);let a=document.createElement("div");a.className="chatMessagesClass",a.setAttribute("contenteditable",!0),a.id=e.chatBox.id,document.getElementById(e.container.id).appendChild(a)}function le(e){var A=document.getElementById(e.inputBox.text_id);if(webrtcdev.log(" chchatInputat ",A),!A||null==A)return void webrtcdev.warn("[chatdom modifier ] chatinput not defiend - ",e.inputBox.text_id);if(A.onkeypress=function(t){if(13==t.keyCode){var e=Pn(st);webrtcdev.log(" chat ",st,e),je(A.value,e),A.value=""}},document.getElementById(e.inputBox.sendbutton_id)){let A=document.getElementById(e.inputBox.sendbutton_id);A.onclick=function(){var A=Pn(st),t=document.getElementById(e.inputBox.text_id);je(t.value,A),t.value=""}}if(document.getElementById(e.inputBox.minbutton_id)){var t=document.getElementById(e.inputBox.minbutton_id);t.onclick=function(){document.getElementById(e.container.id).hidden?B(e.container.id):g(e.container.id)}}}function ce(e){document.getElementById("whoTyping").innerHTML=e}function Be(e){document.getElementById(e.button.id)?document.getElementById(e.button.id).click():webrtcdev.error("[draw dom modifier] Received sync board event but no button id found")}function ge(e){let A=document.createElement("span");A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=()=>{if(A.className==e.button.class_off){A.className=e.button.class_on,A.innerHTML=e.button.html_on,B(e.drawCanvasContainer);let t={event:"open",from:"remote",board:e.drawCanvasContainer,button:e.button};at.send({type:"canvas",board:t}),UA(e)}else A.className==e.button.class_on&&(A.className=e.button.class_off,A.innerHTML=e.button.html_off,g(e.drawCanvasContainer))};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function ue(e){webrtcdev.log("[draw] dom modifier] drawCanvasobj ",e);let A=document.getElementById(e.button.id);A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=function(){A.className==e.button.class_off?(B(e.drawCanvasContainer),webrtcdev.log("[draw dom modifier] Draw Board Opened "),A.className=e.button.class_on,A.innerHTML=e.button.html_on,QA()):A.className==e.button.class_on&&(webrtcdev.log("[draw dom modifier] Draw Board Closed "),g(e.drawCanvasContainer),A.className=e.button.class_off,A.innerHTML=e.button.html_off,CA())}}function me(e){if(e.container.minbutton_id&&l(e.container.minbutton_id)){var A=l(e.container.minbutton_id);A.onclick=function(){l(e.container.id).hidden=!l(e.container.id).hidden}}}function pe(){webrtcdev.log("[timerjs] startForwardTimer");var e=xn,A=Kn,t=parseInt(e.innerHTML,10),n=parseInt(A.innerHTML,10);he(e,t,A,n)}function we(){webrtcdev.log("[timerjs] startBackwardTimer",kn,Kn,xn);let e=xn,A=Kn,t=parseInt(e.innerHTML,10),n=parseInt(A.innerHTML,10);fe(e,t,A,n)}function he(e,A,t,n){setInterval(function(){A++,xn.innerHTML=A,60==A&&(A=0,n++,Kn.innerHTML=n)},1e3)}function fe(e,A,t,n){var r=setInterval(function(){A--,xn.innerHTML=A,0==A&&(A=60,n--,Kn.innerHTML=n,0>n&&clearInterval(r))},1e3)}function Qe(){if(Rt.span.currentTimeZone&&c(Rt.span.currentTimeZone)){let e=c(Rt.span.currentTimeZone);e.innerHTML=VA()}else webrtcdev.error(" [timer js ] timerobj.span.currentTimeZone DOM doesnt exist ")}function Ce(e){if(0>=Rt.span.remoteTimeZone.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");if(l("remoteTimeZone_"+e.userid))return void webrtcdev.warn("[timer js] showRemoteTimeZone - remoteTimeZone_"+e.userid," already exists , do not append Time zone");for(x in Rt.span.remoteTimeZone){let A=x+1;if(A>dt.length)return;let t;Rt.span.remoteTimeZone[x]?(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone",Rt.span.remoteTimeZone[x]," exist for remote"),t=c(Rt.span.remoteTimeZone[x])):(webrtcdev.info("[timer js] showRemoteTimeZone - timerobj.span.remoteTimeZone getting created for local and remotes"),t=document.createElement("li")),t.id="remoteTimeZone_"+e.userid,t.innerHTML=e.zone+" , "}}function Ue(){try{if(Rt.span.currentTime&&c(Rt.span.currentTime)){let e=c(Rt.span.currentTime);e.innerHTML=new Date().toLocaleTimeString();setTimeout(Ue,1e3)}else webrtcdev.error("[timer js ] startTime - No place for timerobj.span.currentTime_id")}catch(e){webrtcdev.error("[timer js ]",e)}}function Ee(e){let A=document.createElement("ul");A.id="remoteTimerArea_"+e;let t=Pn(e);if(l(t.videoContainer)){let e=l(t.videoContainer).parentNode;return e.appendChild(A),A}return null}function Fe(e){if(0>=Rt.span.remoteTime.length)return void webrtcdev.warn("[timer js] showRemoteTimeZone - no remoteTimeZone span found ");let A={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:e.zone},t;if(Rt.span.remoteTime[x])webrtcdev.info(" [timer js] startPeersTime - timerobj.span.remoteTime dom ",Rt.span.remoteTime[x]," exist for remotes"),t=c(Rt.span.remoteTime[x]),t.id="remoteTime_"+e.userid,t.innerHTML=new Date().toLocaleString("en-US",A);else{if(webrtcdev.info(" timerobj.span.remoteTime - timerobj.span.remoteTime dom  ",Rt.span.remoteTime[x]," does not exist, creating it"),l("remoteTimeDate_"+e.userid))return;t=document.createElement("span"),t.id="remoteTime_"+e.userid,t.innerHTML=new Date().toLocaleString("en-US",A);var n;n=l("remoteTimerArea_"+e.userid)?l("remoteTimerArea_"+e.userid):Ee(e.userid),n.appendChild(t)}}function be(){getWebrtcdevStats.then(e=>{at.send({type:"stats",message:e})})}function He(e,A){webrtcdev.info("[stats] getWebrtcdevStats - remote userid ",e,A)}function ye(e){return localStorage.setItem("screenRoomid ",e),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - screenRoomid : ",e),webrtcdev.log("[screenshare JS] webrtcdevPrepareScreenShare - filling up iceServers : ",bt),ot=new RTCMultiConnection,ot.channel=e,ot.socketURL=location.hostname+":8085/",ot.session={screen:!0,oneway:!0},ot.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},ot.onMediaError=function(e,A){webrtcdev.error("[screenshareJS] on stream in _screenshare :",e,A),ne(e.name)},ot.onstream=function(A){if(webrtcdev.log("[screenshareJS] on stream in _screenshare :",A),Nt){let A=document.createElement("span");A.innerHTML="<br/>"+e+"<br/>",l(Wt.screenshareContainer).appendChild(A)}if("remote"==A.type&&"local"!=A.type){ne("started streaming remote's screen"),webrtcdev.log("[screensharejs] on stream remote "),A.stream.streamid?(webrtcdev.log("[screensharejs] remote screen event.stream.streamId "+A.stream.streamId),Bn=A.stream.streamid):A.streamid&&(webrtcdev.log("[screensharejs] remote screen event.streamid "+A.streamid),Bn=A.streamid);let t=document.createElement("video"),n=A.stream;rA(t,n),l(Wt.screenshareContainer).appendChild(t),B(Wt.screenshareContainer),at.send({type:"screenshare",screenid:e,message:"screenshareStartedViewing"})}else ne("started streaming local screen"),webrtcdev.log("[screenshareJS] on stream local "),at.send({type:"screenshare",screenid:e,screenStreamid:Bn,message:"startscreenshare"});window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareStarted"}}))},ot.onstreamended=function(e){e&&webrtcdev.log("[screenshare JS] onstreamended -",e);let A=Wt.button.shareButton.id;A&&document.getElementById(A)&&(document.getElementById(A).className=Wt.button.shareButton.class_off,document.getElementById(A).innerHTML=Wt.button.shareButton.html_off),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"screenshare",action:"onScreenShareEnded"}}))},ot.onopen=function(){webrtcdev.log("[screensharejs] scrConn onopen - ",ot.connectionType)},ot.onerror=function(e){webrtcdev.error("[screensharejs] scrConn error - ",e)},ot.onEntireSessionClosed=function(e){webrtcdev.log("[screensharejs] scrConn onEntireSessionClosed - ",e)},ot.socketMessageEvent="scrRTCMultiConnection-Message",ot.socketCustomEvent="scrRTCMultiConnection-Custom-Message",ot}function ve(e){return webrtcdev.log("[screenshareJS] webrtcdevSharescreen, preparing screenshare by initiating ScrConn , scrroomid - ",e),new Promise(A=>{ot=ye(e),A(e)}).then(function(e){socket?(webrtcdev.log("[screenshare JS] open-channel-screenshare on - ",socket.io.uri),socket.emit("open-channel-screenshare",{channel:e,sender:st,maxAllowed:6}),te("Making a new session for screenshare"+e)):webrtcdev.error("[screenshare JS] parent socket doesnt exist "),socket.on("open-channel-screenshare-resp",function(A){webrtcdev.log("[screenshare JS] open-channel-screenshare-response -",A),A.status&&A.channel==e&&ot.open(e,function(){webrtcdev.log("[screenshare JS] webrtcdevSharescreen, opened up room for screen share ")})})})}function Te(e,A){return webrtcdev.log("[screenshareJS] connectScrWebRTC, first preparing screenshare by initiating ScrConn , scrroomid - ",A),new Promise(e=>{ye(A),e(A)}).then(function(A){webrtcdev.log("[screenshare JS] connectScrWebRTC -> ",e,A),"join"==e?(ot.join(A),te("Connected with existing Screenshare channel "+A)):(te("Connection type not found for Screenshare "),webrtcdev.error("[screenshare JS] connectScrWebRTC - Connection type not found for Screenshare "))})}function Se(){try{at.send({type:"screenshare",message:"stoppedscreenshare"}),ot.closeEntireSession(),webrtcdev.log("[screenshare JS] Sender stopped: screenRoomid ",gn,"| Screen stopped ",ot,"| container ",l(Wt.screenshareContainer)),cn&&(cn.stop(),cn=null);let e=ot.streamEvents.selectFirst();e&&(webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - stoppping the stream"),e.stream.getTracks().forEach(e=>e.stop())),Ie()}catch(e){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",e)}}function Ie(e){try{ot.onstreamended(),ot.removeStream(e),ot.close(),ot=null,Wt.screenshareContainer&&l(Wt.screenshareContainer)&&(l(Wt.screenshareContainer).innerHTML="")}catch(e){webrtcdev.error("[screensharejs] webrtcdevStopShareScreen - ",e)}}function Ne(){l("alertBox").hidden=!1,l("alertBox").innerHTML=""}function Re(e){if(!e)throw"MediaStream is mandatory.";this.start=function(t){var n=un?window.StereoRecorder:window.MediaRecorderWrapper;-1!=this.mimeType.indexOf("video")&&(n=un?window.WhammyRecorder:window.MediaRecorderWrapper),"image/gif"===this.mimeType&&(n=window.GifRecorder),A=new n(e),A.ondataavailable=this.ondataavailable,A.onstop=this.onstop,A.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,A=Le(A,this),A.start(t)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){A&&A.clearOldRecordedFrames()},this.stop=function(){A&&A.stop()},this.ondataavailable=function(e){webrtcdev.log("ondataavailable..",e)},this.onstop=function(e){webrtcdev.warn("stopped..",e)};var A}function a(e,A){var t=window.MediaStreamRecorderScriptsDir,n=document.createElement("script");n.src=t+e,n.onload=A||function(){},document.documentElement.appendChild(n)}function Le(e,A){for(var n in A=Me(A),A)"function"!=typeof A[n]&&(e[n]=A[n]);return e}function Me(e){var A={};for(var t in e)if(-1!=t.indexOf("-")){var n=t.split("-"),r=n[0]+n[1].split("")[0].toUpperCase()+n[1].substr(1);A[r]=e[t]}else A[t]=e[t];return A}function De(e,A){function t(e,A){for(var t=e.length+A.length,n=new Float32Array(t),r=0,a=0;a<t;)n[a++]=e[r],n[a++]=A[r],r++;return n}function n(e,A){for(var t=new Float32Array(A),n=0,r=e.length,a=0,s;a<r;a++)s=e[a],t.set(s,n),n+=s.length;return t}function a(e,A,t){for(var n=t.length,r=0;r<n;r++)e.setUint8(A+r,t.charCodeAt(r))}var s=[],d=[],l=!1,c=0,B=44100,g=A.mono?1:2,u,m,p,w,h;this.record=function(){l=!0,s.length=d.length=0,c=0},this.requestData=function(){if(0==c)return void(C=!1);C=!0;var e=s.slice(0),l=d.slice(0),u=c;s.length=d.length=[],c=0,C=!1;var m=n(e,u),p=n(e,u);if(2===g)var w=t(m,p);else var w=m;var h=new ArrayBuffer(44+2*w.length),Q=new DataView(h);a(Q,0,"RIFF"),Q.setUint32(4,44+2*w.length,!0),a(Q,8,"WAVE"),a(Q,12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,g,!0),Q.setUint32(24,B,!0),Q.setUint32(28,4*B,!0),Q.setUint16(32,2*g,!0),Q.setUint16(34,16,!0),a(Q,36,"data"),Q.setUint32(40,2*w.length,!0);for(var U=w.length,E=44,F=0;F<U;F++)Q.setInt16(E,w[F]*(32767*1),!0),E+=2;var b=new Blob([Q],{type:"audio/wav"});webrtcdev.debug("audio recorded blob size:",r(b.size)),A.ondataavailable(b)},this.stop=function(){l=!1,this.requestData()};var w=mn.AudioContext;mn.AudioContextConstructor||(mn.AudioContextConstructor=new w);var h=mn.AudioContextConstructor;mn.VolumeGainNode||(mn.VolumeGainNode=h.createGain());var m=mn.VolumeGainNode;mn.AudioInput||(mn.AudioInput=h.createMediaStreamSource(e));var p=mn.AudioInput;p.connect(m);var Q=A.bufferSize||2048;if(0==A.bufferSize&&(Q=0),h.createJavaScriptNode)u=h.createJavaScriptNode(Q,g,g);else if(h.createScriptProcessor)u=h.createScriptProcessor(Q,g,g);else throw"WebAudio API has no support on this browser.";Q=u.bufferSize,webrtcdev.debug("using audio buffer-size:",Q);var C=!1;window.scriptprocessornode=u,1==g&&webrtcdev.debug("It seems mono audio. All right-channels are skipped."),u.onaudioprocess=function(A){if(l&&!C){var e=A.inputBuffer.getChannelData(0);if(s.push(new Float32Array(e)),2==g){var t=A.inputBuffer.getChannelData(1);d.push(new Float32Array(t))}c+=Q}},m.connect(u),u.connect(h.destination)}function Oe(e,A){function t(){if(!c){if(s)return setTimeout(t,100);var e=new Date().getTime()-p;return e?void(p=new Date().getTime(),g.drawImage(m,0,0,B.width,B.height),!c&&d.push({duration:e,image:B.toDataURL("image/webp")}),!l&&!n(d[d.length-1])&&(l=!0,A.onStartedDrawingNonBlankFrames()),setTimeout(t,10)):t()}}function n(e,A,t){var n=document.createElement("canvas");n.width=B.width,n.height=B.height;var r=n.getContext("2d"),a={r:0,g:0,b:0},s=nt(qA(255,2)+qA(255,2)+qA(255,2)),d=A&&0<=A&&1>=A?A:0,l=t&&0<=t&&1>=t?t:0,c=new Image,g,u,m;c.src=e.image,r.drawImage(c,0,0,B.width,B.height);var p=r.getImageData(0,0,B.width,B.height);g=0,u=p.data.length,m=p.data.length/4;for(var w=0;w<u;w+=4){var h={r:p.data[w],g:p.data[w+1],b:p.data[w+2]},Q=nt(qA(h.r-a.r,2)+qA(h.g-a.g,2)+qA(h.b-a.b,2));Q<=s*d&&g++}return!(m-g<=m*l)}function a(e,A,t,n){var r=document.createElement("canvas");r.width=B.width,r.height=B.height;for(var a=r.getContext("2d"),s=[],d=A&&0<A&&A<=e.length?A:e.length,l={r:0,g:0,b:0},c=nt(qA(255,2)+qA(255,2)+qA(255,2)),g=t&&0<=t&&1>=t?t:0,u=n&&0<=n&&1>=n?n:0,m=!1,p=0;p<d;p++){var w,h,Q;if(!m){var C=new Image;C.src=e[p].image,a.drawImage(C,0,0,B.width,B.height);var U=a.getImageData(0,0,B.width,B.height);w=0,h=U.data.length,Q=U.data.length/4;for(var E=0;E<h;E+=4){var F={r:U.data[E],g:U.data[E+1],b:U.data[E+2]},b=nt(qA(F.r-l.r,2)+qA(F.g-l.g,2)+qA(F.b-l.b,2));b<=c*g&&w++}}!m&&Q-w<=Q*u||(-1===A&&(m=!0),s.push(e[p]))}return s=s.concat(e.slice(d)),0>=s.length&&s.push(e[e.length-1]),s}this.record=function(){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(!this.width&&(this.width=m.videoWidth||320),!this.height&&(this.height=m.videoHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas||(this.canvas={width:this.width,height:this.height}),B.width=this.canvas.width,B.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?m=this.video.cloneNode():(m=document.createElement("video"),m.src=Qn.createObjectURL(e),m.width=this.video.width,m.height=this.video.height),m.muted=!0,m.play(),p=new Date().getTime(),w=new pn.Video,webrtcdev.log("canvas resolutions",B.width,"*",B.height),webrtcdev.log("video width/height",m.width||B.width,"*",m.height||B.height),t()},this.clearOldRecordedFrames=function(){d=[]};var s=!1;this.requestData=function(){if(!d.length)return void(s=!1);s=!0;var e=d.slice(0);d=[],w.frames=a(e,-1);var t=w.compile();A.ondataavailable(t),webrtcdev.debug("video recorded blob size:",r(t.size)),s=!1};var d=[],l=!1,c=!1;this.stop=function(){c=!0,this.requestData()};var B=document.createElement("canvas"),g=B.getContext("2d"),u=this,m,p,w}function ke(e){this.start=function(n){for(var r in n=n||1e3,A=new Oe(e,this),this)"function"!=typeof this[r]&&(A[r]=this[r]);A.record(),t=setInterval(function(){A.requestData()},n)},this.stop=function(){A&&(A.stop(),clearTimeout(t))},this.clearOldRecordedFrames=function(){A&&A.clearOldRecordedFrames()},this.ondataavailable=function(){};var A,t}function Ke(e){function A(){Date.now();var e=new Blob([new Uint8Array(c.stream().bin)],{type:"image/gif"});t.ondataavailable(e),c.stream().bin=[]}if(!window.GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(e){function t(e){s=wn(t),typeof l===void 0&&(l=e);90>e-l||(r.drawImage(a,0,0,g,u),c.addFrame(r),l=e)}e=e||1e3;var g=this.videoWidth||320,u=this.videoHeight||240;n.width=a.width=g,n.height=a.height=u,c=new GIFEncoder,c.setRepeat(0),c.setDelay(this.frameRate||200),c.setQuality(this.quality||1),c.start(),d=Date.now(),s=wn(t),B=setTimeout(A,e)};this.stop=function(){s&&(hn(s),clearTimeout(B),A())},this.ondataavailable=function(){},this.onstop=function(){};var t=this,n=document.createElement("canvas"),r=n.getContext("2d"),a=document.createElement("video");a.muted=!0,a.autoplay=!0,a.src=Qn.createObjectURL(e),a.play();var s=null,d,l,c,B}function r(e){if(0===e)return"0 Bytes";var A=parseInt(et(ZA(e)/ZA(1000)),10);return(e/qA(1000,A)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][A]}function xe(e,A){function t(){return(A.disableLogs||webrtcdev.debug("started recording "+A.type+" stream."),p)?(p.clearRecordedData(),p.resume(),g.recordingDuration&&B(),g):(n(function(){g.recordingDuration&&B()}),g)}function n(t){t&&(A.initCallback=function(){t(),t=A.initCallback=null});var n=new Pe(e,A);p=new n(e,A),p.record(),A.disableLogs||webrtcdev.debug("Initialized recorderType:",p.constructor.name,"for output-type:",A.type)}function a(e){function t(t){for(var a in p)g&&(g[a]=p[a]),n&&(n[a]=p[a]);var s=p.blob;if(!s)if(t)p.blob=s=t;else throw"Recording failed.";if(e){var d=Qn.createObjectURL(s);e(d)}s&&!A.disableLogs&&webrtcdev.debug(s.type,"->",r(s.size)),A.autoWriteToDisk&&c(function(e){var t={};t[A.type+"Blob"]=e,Fn.Store(t)})}if(!p)return webrtcdev.warn(u);var n=this;A.disableLogs||webrtcdev.warn("Stopped recording "+A.type+" stream."),"gif"===A.type?(p.stop(),t()):p.stop(t)}function s(){return p?void(p.pause(),!A.disableLogs&&webrtcdev.debug("Paused recording.")):webrtcdev.warn(u)}function d(){return p?void(p.resume(),!A.disableLogs&&webrtcdev.debug("Resumed recording.")):webrtcdev.warn(u)}function l(e){postMessage(new FileReaderSync().readAsDataURL(e))}function c(e,t){function n(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return Qn.revokeObjectURL(A),t}if(!e)throw"Pass a callback function over getDataURL.";var r=t?t.blob:(p||{}).blob;if(!r)return A.disableLogs||webrtcdev.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){c(e,t)},1e3);if("undefined"!=typeof Worker&&!navigator.mozGetUserMedia){var a=n(l);a.onmessage=function(A){e(A.data)},a.postMessage(r)}else{var s=new FileReader;s.readAsDataURL(r),s.onload=function(A){e(A.target.result)}}}function B(){setTimeout(function(){a(g.onRecordingStopped)},g.recordingDuration)}if(!e)throw"MediaStream is mandatory.";A=A||{type:"video"},A=new _e(e,A);var g=this,u="It seems that \"startRecording\" is not invoked for "+A.type+" recorder.",m={startRecording:t,stopRecording:a,pauseRecording:s,resumeRecording:d,initRecorder:n,setRecordingDuration:function(e,A){if("undefined"==typeof e)throw"milliseconds is required.";if("number"!=typeof e)throw"milliseconds must be a number.";return g.recordingDuration=e,g.onRecordingStopped=A||function(){},{onRecordingStopped:function(e){g.onRecordingStopped=e}}},clearRecordedData:function(){return p?void(p.clearRecordedData(),!A.disableLogs&&webrtcdev.debug("Cleared old recorded data.")):webrtcdev.warn(u)},getBlob:function(){return p?p.blob:webrtcdev.warn(u)},getDataURL:c,toURL:function(){return p?Qn.createObjectURL(p.blob):webrtcdev.warn(u)},save:function(e){return p?void ze(p.blob,e):webrtcdev.warn(u)},getFromDisk:function(e){return p?void xe.getFromDisk(A.type,e):webrtcdev.warn(u)},setAdvertisementArray:function(e){A.advertisement=[];for(var t=e.length,n=0;n<t;n++)A.advertisement.push({duration:n,image:e[n]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,view:null},p;if(!this)return g=m,m;for(var w in m)this[w]=m[w];return g=this,m}function _e(e,A){return A.recorderType&&!A.type&&(A.recorderType===ke||A.recorderType===Ge?A.type="video":A.recorderType===Ke?A.type="gif":A.recorderType===De?A.type="audio":A.recorderType===Re&&(e.getAudioTracks().length&&e.getVideoTracks().length?A.type="video":e.getAudioTracks().length&&!e.getVideoTracks().length?A.type="audio":!e.getAudioTracks().length&&e.getVideoTracks().length&&(A.type="audio"))),"undefined"!=typeof Re&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(!A.mimeType&&(A.mimeType="video/webm"),!A.type&&(A.type=A.mimeType.split("/")[0]),!A.bitsPerSecond),A.type||(A.mimeType&&(A.type=A.mimeType.split("/")[0]),!A.type&&(A.type="audio")),A}function Pe(e,A){var t;return(ln||Cn||dn)&&(t=De),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!ln&&(t=Re),"video"===A.type&&(ln||dn)&&(t=ke),"gif"===A.type&&(t=Ke),"canvas"===A.type&&(t=Ge),Xe()&&t!==Ge&&t!==Ke&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&e.getVideoTracks().length&&(t=Re),A.recorderType&&(t=A.recorderType),A.disableLogs||!t||!t.name||webrtcdev.debug("Using recorderType:",t.name||t.constructor.name),t}function Ve(e){this.addStream=function(A){A&&(e=A)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var A=this.mediaType,t=this.mimeType||{audio:null,video:null,gif:null},n;if("function"!=typeof A.audio&&Xe()&&e.getAudioTracks&&!e.getAudioTracks().length&&(A.audio=!1),"function"!=typeof A.video&&Xe()&&e.getVideoTracks&&!e.getVideoTracks().length&&(A.video=!1),!A.audio&&!A.video)throw"MediaStream must have either audio or video tracks.";if(!A.audio||(n=null,"function"==typeof A.audio&&(n=A.audio),this.audioRecorder=new xe(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:n,mimeType:t.audio}),!A.video&&this.audioRecorder.startRecording()),!!A.video){n=null,"function"==typeof A.video&&(n=A.video);var r=e;if(Xe()&&!!A.audio&&"function"==typeof A.audio){var a=e.getVideoTracks()[0];navigator.mozGetUserMedia?(r=new Un,r.addTrack(a),n&&n===ke&&(n=Re)):r=new Un([a])}this.videoRecorder=new xe(r,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:n,mimeType:t.video}),A.audio||this.videoRecorder.startRecording()}if(!!A.audio&&!!A.video){var s=this;Xe()?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder(function(){s.audioRecorder.initRecorder(function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()})})}!A.gif||(n=null,"function"==typeof A.gif&&(n=A.gif),this.gifRecorder=new xe(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:n,mimeType:t.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(A){e(A,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(A){e(A,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(A){e(A,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var A={};return this.audioRecorder&&(A.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(A.video=this.videoRecorder.getBlob()),this.gifRecorder&&(A.gif=this.gifRecorder.getBlob()),e&&e(A),A},this.getDataURL=function(e){function A(e,A){if("undefined"!=typeof Worker){var n=t(function(e){postMessage(new FileReaderSync().readAsDataURL(e))});n.onmessage=function(e){A(e.data)},n.postMessage(e)}else{var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){A(e.target.result)}}}function t(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A),n;if("undefined"!=typeof Qn)n=Qn;else if("undefined"!=typeof webkitURL)n=webkitURL;else throw"Neither URL nor webkitURL detected.";return n.revokeObjectURL(A),t}this.getBlob(function(t){t.audio&&t.video?A(t.audio,function(n){A(t.video,function(A){e({audio:n,video:A})})}):t.audio?A(t.audio,function(A){e({audio:A})}):t.video&&A(t.video,function(A){e({video:A})})})},this.writeToDisk=function(){xe.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){e=e||{audio:!0,video:!0,gif:!0},!!e.audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),!!e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),!!e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}function r(e){if(0===e)return"0 Bytes";var A=parseInt(et(ZA(e)/ZA(1000)),10);return(e/qA(1000,A)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][A]}function ze(e,A){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(A){}var t=(e.type||"video/webm").split("/")[1];if(A&&-1!==A.indexOf(".")){var n=A.split(".");A=n[0],t=n[1]}var r=(A||tt(9999999999*Math.random())+888888888)+"."+t;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,r);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,r);var a=document.createElement("a");a.href=Qn.createObjectURL(e),a.target="_blank",a.download=r,!navigator.mozGetUserMedia||(a.onclick=function(){(document.body||document.documentElement).removeChild(a)},(document.body||document.documentElement).appendChild(a));var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(s),navigator.mozGetUserMedia||Qn.revokeObjectURL(a.href)}function Xe(){var e=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),A=!!window.chrome&&!e,t="undefined"!=typeof window.InstallTrigger;if(t)return!0;var n=navigator.appVersion,r=navigator.userAgent,a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10),d,l;return(A||e)&&(d=r.indexOf("Chrome"),a=r.substring(d+7)),-1!==(l=a.indexOf(";"))&&(a=a.substring(0,l)),-1!==(l=a.indexOf(" "))&&(a=a.substring(0,l)),s=parseInt(""+a,10),isNaN(s)&&(a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),49<=s}function Re(A,t){function n(){if("active"in A){if(!A.active)return!1;}else if("ended"in A&&A.ended)return!1;return!0}var r=this;if(t=t||{mimeType:"video/webm"},"audio"===t.type){if(A.getVideoTracks().length&&A.getAudioTracks().length){var a;navigator.mozGetUserMedia?(a=new Un,a.addTrack(A.getAudioTracks()[0])):a=new Un(A.getAudioTracks()),A=a}t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=ln?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&!!navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}this.record=function(){r.blob=null;var e=t;t.disableLogs||webrtcdev.log("Passing following config over MediaRecorder API.",e),s&&(s=null),ln&&!Xe()&&(e="video/vp8");try{s=new MediaRecorder(A,e)}catch(t){s=new MediaRecorder(A)}"canRecordMimeType"in s&&!1===s.canRecordMimeType(t.mimeType)&&!t.disableLogs&&webrtcdev.warn("MediaRecorder API seems unable to record mimeType:",t.mimeType),s.ignoreMutedMedia=t.ignoreMutedMedia||!1,s.ondataavailable=function(A){r.dontFireOnDataAvailableEvent||!A.data||!A.data.size||100>A.data.size||r.blob||(r.blob=t.getNativeBlob?A.data:new Blob([A.data],{type:t.mimeType||"video/webm"}),r.recordingCallback&&(r.recordingCallback(r.blob),r.recordingCallback=null))},s.onerror=function(e){t.disableLogs||("InvalidState"===e.name?webrtcdev.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===e.name?webrtcdev.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===e.name?webrtcdev.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===e.name?webrtcdev.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===e.name?webrtcdev.error("The UA cannot provide the codec or recording option that has been requested.",e):webrtcdev.error("MediaRecorder Error",e)),"inactive"!==s.state&&"stopped"!==s.state&&s.stop()},s.start(36e5),t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback()},this.stop=function(e){s&&(this.recordingCallback=function(A){s=null,e&&e(A)},"recording"===s.state&&s.stop())},this.pause=function(){s&&("recording"!==s.state||s.pause())},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var e=t.disableLogs;return t.disableLogs=!0,this.record(),void(t.disableLogs=e)}s&&("paused"!==s.state||s.resume())},this.clearRecordedData=function(){s&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var r=this,s;(function e(){return s?!1===n()?(t.disableLogs||webrtcdev.log("MediaStream seems stopped."),void r.stop()):void setTimeout(e,1e3):void 0})()}function De(e,A){function t(){if("active"in e){if(!e.active)return!1;}else if("ended"in e&&e.ended)return!1;return!0}function n(e,A){function t(e,A){function t(e,A){for(var t=new Float64Array(A),n=0,r=e.length,a=0,s;a<r;a++)s=e[a],t.set(s,n),n+=s.length;return t}function n(e,A){for(var t=e.length+A.length,n=new Float64Array(t),r=0,a=0;a<t;)n[a++]=e[r],n[a++]=A[r],r++;return n}function r(e,A,t){for(var n=t.length,r=0;r<n;r++)e.setUint8(A+r,t.charCodeAt(r))}var a=e.numberOfAudioChannels,s=e.leftBuffers.slice(0),d=e.rightBuffers.slice(0),l=e.sampleRate,c=e.internalInterleavedLength;2===a&&(s=t(s,c),d=t(d,c)),1===a&&(s=t(s,c));var B;2===a&&(B=n(s,d)),1===a&&(B=s);var g=B.length,u=new ArrayBuffer(44+2*g),m=new DataView(u);r(m,0,"RIFF"),m.setUint32(4,44+2*g,!0),r(m,8,"WAVE"),r(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,a,!0),m.setUint32(24,l,!0),m.setUint32(28,2*l,!0),m.setUint16(32,2*a,!0),m.setUint16(34,16,!0),r(m,36,"data"),m.setUint32(40,2*g,!0);for(var p=44,w=0;w<g;w++)m.setInt16(p,B[w]*(32767*1),!0),p+=2;return A?A({buffer:u,view:m}):void postMessage({buffer:u,view:m})}if(!ln)return void t(e,function(e){A(e.buffer,e.view)});var n=r(t);n.onmessage=function(e){A(e.data.buffer,e.data.view),Qn.revokeObjectURL(n.workerURL)},n.postMessage(e)}function r(e){var A=Qn.createObjectURL(new Blob([e.toString(),";this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return t.workerURL=A,t}function a(n){if(!C){if(!1===t()&&(!A.disableLogs&&webrtcdev.log("MediaStream seems stopped."),u.disconnect(),c=!1),!c)return void p.disconnect();U||(U=!0,A.onAudioProcessStarted&&A.onAudioProcessStarted(),A.initCallback&&A.initCallback());var e=n.inputBuffer.getChannelData(0);if(d.push(new Float32Array(e)),2===g){var r=n.inputBuffer.getChannelData(1);l.push(new Float32Array(r))}B+=h}}if(!e.getAudioTracks().length)throw"Your stream has no audio tracks.";A=A||{};var s=this,d=[],l=[],c=!1,B=0,g=2,u;!0===A.leftChannel&&(g=1),1===A.numberOfAudioChannels&&(g=1),A.disableLogs||webrtcdev.debug("StereoAudioRecorder is set to record number of channels: ",g),this.record=function(){if(!1===t())throw"Please make sure MediaStream is active.";d.length=l.length=0,B=0,p&&p.connect(u),U=C=!1,c=!0},this.stop=function(e){c=!1,n({sampleRate:Q,numberOfAudioChannels:g,internalInterleavedLength:B,leftBuffers:d,rightBuffers:1===g?[]:l},function(A,t){s.blob=new Blob([t],{type:"audio/wav"}),s.buffer=new ArrayBuffer(t.buffer.byteLength),s.view=t,s.sampleRate=Q,s.bufferSize=h,s.length=B,e&&e(),U=!1})},En.AudioContextConstructor||(En.AudioContextConstructor=new En.AudioContext);var m=En.AudioContextConstructor,p=m.createMediaStreamSource(e),w=[0,256,512,1024,2048,4096,8192,16384],h="undefined"==typeof A.bufferSize?4096:A.bufferSize;if(-1!==w.indexOf(h)||A.disableLogs||webrtcdev.warn("Legal values for buffer-size are "+JSON.stringify(w,null,"\t")),m.createJavaScriptNode)u=m.createJavaScriptNode(h,g,g);else if(m.createScriptProcessor)u=m.createScriptProcessor(h,g,g);else throw"WebAudio API has no support on this browser.";p.connect(u),A.bufferSize||(h=u.bufferSize);var Q="undefined"==typeof A.sampleRate?m.sampleRate||44100:A.sampleRate;(22050>Q||96e3<Q)&&!A.disableLogs&&webrtcdev.warn("sample-rate must be under range 22050 and 96000."),A.disableLogs||(webrtcdev.log("sample-rate",Q),webrtcdev.log("buffer-size",h));var C=!1;this.pause=function(){C=!0},this.resume=function(){if(!1===t())throw"Please make sure MediaStream is active.";return c?void(C=!1):(A.disableLogs||webrtcdev.info("Seems recording has been restarted."),void this.record())},this.clearRecordedData=function(){this.pause(),d.length=l.length=0,B=0};var U=!1;u.onaudioprocess=a,u.connect(m.destination)}function Ge(e,A){function t(){var A=document.createElement("canvas"),t=A.getContext("2d");return A.width=e.width,A.height=e.height,t.drawImage(e,0,0),A}function n(){if(g)return u=new Date().getTime(),setTimeout(n,500);if("canvas"===e.nodeName.toLowerCase()){var r=new Date().getTime()-u;return u=new Date().getTime(),m.frames.push({image:t(),duration:r}),void(B&&setTimeout(n,A.frameInterval))}html2canvas(e,{grabMouse:"undefined"==typeof A.showMousePointer||A.showMousePointer,onrendered:function(e){var t=new Date().getTime()-u;return t?void(u=new Date().getTime(),m.frames.push({image:e.toDataURL("image/webp",1),duration:t}),B&&setTimeout(n,A.frameInterval)):setTimeout(n,A.frameInterval)}})}if("undefined"==typeof html2canvas&&"canvas"!==e.nodeName.toLowerCase())throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";A=A||{},A.frameInterval||(A.frameInterval=10);var r=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){e in document.createElement("canvas")&&(r=!0)});var a=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,s=50,d=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);a&&d&&d[2]&&(s=parseInt(d[2],10)),a&&52>s&&(r=!1);var l,c;if(!r)!navigator.mozGetUserMedia||A.disableLogs||webrtcdev.error("Canvas recording is NOT supported in Firefox.");else if(A.disableLogs||webrtcdev.debug("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)l=e;else if(e instanceof CanvasRenderingContext2D)l=e.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";var B;this.record=function(){if(B=!0,r){var e;"captureStream"in l?e=l.captureStream(25):"mozCaptureStream"in l?e=l.mozCaptureStream(25):"webkitCaptureStream"in l&&(e=l.webkitCaptureStream(25));try{var t=new Un;t.addTrack(e.getVideoTracks()[0]),e=t}catch(A){}if(!e)throw"captureStream API are NOT available.";c=new Re(e,{mimeType:"video/webm"}),c.record()}else m.frames=[],u=new Date().getTime(),n();A.initCallback&&A.initCallback()},this.getWebPImages=function(t){if("canvas"!==e.nodeName.toLowerCase())return void t();var n=m.frames.length;m.frames.forEach(function(e,t){var r=n-t;A.disableLogs||webrtcdev.debug(r+"/"+n+" frames remaining"),A.onEncodingCallback&&A.onEncodingCallback(r,n);var a=e.image.toDataURL("image/webp",1);m.frames[t].image=a}),A.disableLogs||webrtcdev.debug("Generating WebM"),t()},this.stop=function(e){B=!1;var t=this;return r&&c?void c.stop(e):void this.getWebPImages(function(){m.compile(function(n){A.disableLogs||webrtcdev.debug("Recording finished!"),t.blob=n,t.blob.forEach&&(t.blob=new Blob([],{type:"video/webm"})),e&&e(t.blob),m.frames=[]})})};var g=!1;this.pause=function(){g=!0},this.resume=function(){g=!1,B||this.record()},this.clearRecordedData=function(){this.pause(),m.frames=[]};var u=new Date().getTime(),m=new pn.Video(100)}function ke(e,A){function t(e){e="undefined"==typeof e?10:e;var A=new Date().getTime()-B;return A?s?(B=new Date().getTime(),setTimeout(t,100)):void(B=new Date().getTime(),c.paused&&c.play(),l.drawImage(c,0,0,d.width,d.height),g.frames.push({duration:A,image:d.toDataURL("image/webp")}),!a&&setTimeout(t,e,e)):setTimeout(t,e,e)}function n(e){var A=-1,t=e.length,n=function(){return A++,A===t?void e.callback():void e.functionToLoop(n,A)};n()}function r(e,A,t,r,a){var s=document.createElement("canvas");s.width=d.width,s.height=d.height;var l=s.getContext("2d"),c=[],B=A&&0<A&&A<=e.length?A:e.length,g={r:0,g:0,b:0},u=nt(qA(255,2)+qA(255,2)+qA(255,2)),m=t&&0<=t&&1>=t?t:0,p=r&&0<=r&&1>=r?r:0,w=!1;n({length:B,functionToLoop:function(t,n){var r=function(){!w&&B-a<=B*p||(-1===A&&(w=!0),c.push(e[n])),t()},a,s,B;if(!w){var h=new Image;h.onload=function(){l.drawImage(h,0,0,d.width,d.height);var e=l.getImageData(0,0,d.width,d.height);a=0,s=e.data.length,B=e.data.length/4;for(var A=0;A<s;A+=4){var t={r:e.data[A],g:e.data[A+1],b:e.data[A+2]},n=nt(qA(t.r-g.r,2)+qA(t.g-g.g,2)+qA(t.b-g.b,2));n<=u*m&&a++}r()},h.src=e[n].image}else r()},callback:function(){c=c.concat(e.slice(B)),0>=c.length&&c.push(e[e.length-1]),a(c)}})}A=A||{},A.frameInterval||(A.frameInterval=10),A.disableLogs||webrtcdev.log("Using frames-interval:",A.frameInterval),this.record=function(){A.width||(A.width=320),A.height||(A.height=240),A.video||(A.video={width:A.width,height:A.height}),A.canvas||(A.canvas={width:A.width,height:A.height}),d.width=A.canvas.width,d.height=A.canvas.height,l=d.getContext("2d"),A.video&&A.video instanceof HTMLVideoElement?(c=A.video.cloneNode(),A.initCallback&&A.initCallback()):(c=document.createElement("video"),"undefined"==typeof c.srcObject?c.src=Qn.createObjectURL(e):c.srcObject=e,c.onloadedmetadata=function(){A.initCallback&&A.initCallback()},c.width=A.video.width,c.height=A.video.height),c.muted=!0,c.play(),B=new Date().getTime(),g=new pn.Video,A.disableLogs||(webrtcdev.log("canvas resolutions",d.width,"*",d.height),webrtcdev.log("video width/height",c.width||d.width,"*",c.height||d.height)),t(A.frameInterval)};var a=!1;this.stop=function(e){a=!0;var t=this;setTimeout(function(){r(g.frames,-1,null,null,function(n){g.frames=n,A.advertisement&&A.advertisement.length&&(g.frames=A.advertisement.concat(g.frames)),g.compile(function(A){t.blob=A,t.blob.forEach&&(t.blob=new Blob([],{type:"video/webm"})),e&&e(t.blob)})})},10)};var s=!1;this.pause=function(){s=!0},this.resume=function(){s=!1,a&&this.record()},this.clearRecordedData=function(){this.pause(),g.frames=[]};var d=document.createElement("canvas"),l=d.getContext("2d"),c,B,g}function Ke(e,A){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";A=A||{};var t=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){function e(l){return n?setTimeout(function(){e(l)},100):void(d=wn(e),void 0===typeof B&&(B=l),90>l-B||(!t&&s.paused&&s.play(),!t&&a.drawImage(s,0,0,r.width,r.height),A.onGifPreview&&A.onGifPreview(r.toDataURL("image/png")),g.addFrame(a),B=l))}t||(!A.width&&(A.width=s.offsetWidth||320),!this.height&&(A.height=s.offsetHeight||240),!A.video&&(A.video={width:A.width,height:A.height}),!A.canvas&&(A.canvas={width:A.width,height:A.height}),r.width=A.canvas.width,r.height=A.canvas.height,s.width=A.video.width,s.height=A.video.height),g=new GIFEncoder,g.setRepeat(0),g.setDelay(A.frameRate||200),g.setQuality(A.quality||10),g.start(),l=Date.now();this;d=wn(e),A.initCallback&&A.initCallback()},this.stop=function(){d&&hn(d),c=Date.now(),this.blob=new Blob([new Uint8Array(g.stream().bin)],{type:"image/gif"}),g.stream().bin=[]};var n=!1;this.pause=function(){n=!0},this.resume=function(){n=!1},this.clearRecordedData=function(){g&&(this.pause(),g.stream().bin=[])};var r=document.createElement("canvas"),a=r.getContext("2d");if(t&&(e instanceof CanvasRenderingContext2D?(a=e,r=a.canvas):e instanceof HTMLCanvasElement&&(a=e.getContext("2d"),r=e)),!t){var s=document.createElement("video");s.muted=!0,s.autoplay=!0,"undefined"==typeof s.srcObject?s.src=Qn.createObjectURL(e):s.srcObject=e,s.play()}var d=null,l,c,B,g}function Je(e,A){var t=document.createElement("div");return t.id=e+"snapshotButton",t.setAttribute("title","Snapshot"),t.className=kt.button.class_on,t.innerHTML=kt.button.html_on,t.onclick=function(){Ye(A,function(e){var A="snapshot"+new Date().getTime(),t;t=st?Pn(st):Pn(at.userid),t.filearray.push(A);var n=document.createElement("div");n.value=t.filearray.length,Dt.active?(We(e,"imagesnapshot",A),F(t.uuid,t,e,A,"imagesnapshot"),H(t.uuid,t,e,A,"imagesnapshot")):H(t.uuid,t,e,A,"imagesnapshot")})},t}function Ye(e,A){try{return e.videoContainer?function(e){if(e){var t=document.createElement("canvas");t.width=e.videoWidth||e.clientWidth,t.height=e.videoHeight||e.clientHeight;var n=t.getContext("2d");n.drawImage(e,0,0,t.width,t.height),A(t.toDataURL("image/png"))}else A("")}(document.getElementById(e.videoContainer)):"empty"}catch(A){webrtcdev.error(" [Snapshot - take snapshot] ",A)}}function We(e,A,t){at.send({type:A,message:e,name:t})}function je(e,A){Ze({header:at.extra.username,message:e,userinfo:A,color:at.extra.color}),at.send({type:"chat",userinfo:A,message:e})}function qe(e){return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>")}function Ze(A){""!=A.message&&" "!=A.message&&eA("chat-message self msg-avatar",A.userinfo,A.message,Mt.chatBox.id)}function $e(A){""!=A.message&&" "!=A.message&&eA("chat-message user msg-avatar",A.userinfo,A.message,Mt.chatBox.id)}function eA(e,A,r,a){var s=document.createElement("div");s.id=" chat-msg-"+bn++,webrtcdev.log(" userinfo  on chat ------------------- ",A,st),s.className=e+" chat-msg ",webrtcdev.log("addNewMessagelocal",A),Ye(A,function(e){let A=document.createElement("img");A.src=e;let n=document.createElement("span");n.className="msg-avatar",n.appendChild(A);let a=document.createElement("span");a.className="cm-msg-text ",a.innerHTML=qe(r),s.appendChild(n),s.appendChild(a)}),document.getElementById(a).insertBefore(s,document.getElementById(a).firstChild)}function AA(){return new Promise(function(e){let A=navigator.mediaDevices;A&&A.enumerateDevices||(webrtcdev.warn(" detectwebcam cant detect devices "),e(!1)),webrtcdev.log(" detectwebcam mediaDevices object - ",A),A.enumerateDevices().then(A=>{webrtcdev.log(" detectwebcam individual devices - ",A),e(A.some(e=>"videoinput"===e.kind))})})}function tA(){return new Promise(function(e){let A=navigator.mediaDevices;A&&A.enumerateDevices||e(!1),A.enumerateDevices().then(A=>{e(A.some(e=>"audioinput"===e.kind))})})}function nA(e,A,t){webrtcdev.log("[startJS] getCamMedia - role :",Zt),webrtcdev.log("[startJS] getCamMedia   - outgoingVideo "+A+" outgoingAudio "+t),"inspector"==Zt?(e.dontCaptureUserMedia=!0,webrtcdev.log("[_mediacontrol.js] getCamMedia  - Joining as inspector without camera Video")):A&&t?(webrtcdev.log("[_mediacontrol.js] getCamMedia  - Capture Media "),e.getUserMedia()):!A&&t?(webrtcdev.warn("[_mediacontrol.js] getCamMedia  - Dont Capture Webcam only Mic "),e.getUserMedia()):(e.dontCaptureUserMedia=!0,webrtcdev.error(" [_mediacontrol.js] getCamMedia - dont Capture outgoing video ",A),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onNoCameraCard"}})))}function rA(e,A){try{var t="";if(webrtcdev.log("[ Mediacontrol - attachMediaStream ] element ",e),0<document.getElementsByName(e).length)t=document.getElementsByName(e)[0];else if(e.video)t=e.video;else if("VIDEO"==e.nodeName)t=e;else return new Promise(function(e,A){A(1)});if(webrtcdev.log("[ Mediacontrol - attachMediaStream ] stream ",A),A&&(A.isVideo||A.isScreen)){let e=new Promise(function(e){if("srcObject"in t)try{t.srcObject=A}catch(e){if("TypeError"!=e.name)throw e;t.src=Qn.createObjectURL(A)}else t.src=Qn.createObjectURL(A);webrtcdev.log("[Mediacontrol ] attachMediaStream - added src object for valid stream ");var n=t.play();void 0!==n&&n.then(()=>{webrtcdev.log("[Mediacontrol] attachMediaStream  - element started playing ",t),e(1)}).catch(A=>{webrtcdev.error("[Mediacontrol] attachMediaStream - error ",A),"NotAllowedError"==A.name&&A.message.includes("play() failed")?alert(" play failed due to auto play policy, please wait "):"NotAllowedError"==A.name&&A.message.includes("The play() request was interrupted by a call to pause()")&&alert(" play failed, video was pause  "),e(1)})});return e}else{let e=new Promise(function(e){t.srcObject=null,webrtcdev.warn("[ Mediacontrol - attachMediaStream ] Media Stream empty '' attached to ",t," as stream is not valid ",A),e()});return e}}catch(e){let A=new Promise(function(A,t){webrtcdev.error(" [ Mediacontrol - attachMediaStream ]  error",e),t()});return A}}function iA(e,A){try{let t=new Promise(function(t,n){e.srcObject=A.srcObject,webrtcdev.log("[ Mediacontrol] reattachMediaStream - added src object for valid stream ",e);var r=e.play();r!==void 0&&r.then(()=>{t(1)}).catch(e=>{webrtcdev.error("[ Mediacontrol ] attachMediaStream - error ",e),n(1)})});return t}catch(e){webrtcdev.error("[media control] reattachMediaStream err ",e)}}function aA(e){if("srcObject"in e){const A=e.srcObject,t=A.getTracks();t.forEach(function(e){e.stop()}),e.stream="",e.srcObject=null}else e.src=""}function oA(e,A,t){let n=document.createElement("div");return n.id=A+"recordButton",n.setAttribute("title","Record"),n.className=e.button.class_off,n.innerHTML=e.button.html_off,n.onclick=function(){n.className==e.button.class_on?(n.className=e.button.class_off,n.innerHTML=e.button.html_off,dA(t)):n.className==e.button.class_off&&(n.className=e.button.class_on,n.innerHTML=e.button.html_on,sA(t))},n}function sA(e){let A=e.streamid,t=e.stream;t||webrtcdev.error("[recordjs] startRecord - stream is missing for peer ",e),webrtcdev.log("[recordjs] stop - stream",t);let n=xe(t,{type:"video",recorderType:Re});n.startRecording(),Hn[A]=n}function dA(e){let A=e.streamid,t=e.stream;t||webrtcdev.error("[recordjs] stopRecord - stream is missing for peer ",e),webrtcdev.log("[recordjs] stop - stream",t),Hn[A]||webrtcdev.log("wrong stream id ");let n=Hn[A];n.stopRecording(function(A){webrtcdev.log(" url ",A);let t=n.getBlob();e||(st?e=Pn(st):e=Pn(at.userid));let r="recordedvideo"+new Date().getTime();e.filearray.push(r);let a=document.createElement("div");a.value=e.filearray.length;let s=Qn.createObjectURL(t);F(e.uuid,e,s,r,"videoRecording"),H(e.uuid,e,s,r,"videoRecording")})}async function lA(){webrtcdev.log("[screenrecord js] webrtcdevRecordScreen");try{yn=await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{mediaSource:"screen",mandatory:{maxWidth:1920<window.screen.width?window.screen.width:1920,maxHeight:1080<window.screen.height?window.screen.height:1080},optional:[]}}),webrtcdev.log("[screenrecord js] stream",yn)}catch(e){webrtcdev.error("[screenrecord js] Error in webrtcdevRecordScreen ",e)}yn.addEventListener("inactive",A=>{webrtcdev.log("Capture stream inactive - stop recording!"),cA(A)});try{vn=new MediaRecorder(yn,{mimeType:"video/webm"}),vn.addEventListener("dataavailable",e=>{e.data&&0<e.data.size&&Tn.push(e.data)}),vn.start(10),webrtcdev.log("[screenrecord js] mediaRecorder",vn)}catch(e){webrtcdev.error("[screenrecord js] Error in mediaRecorder ",e)}}function cA(e){webrtcdev.log("webrtcdevStopRecordScreen",e),vn.stop(),vn=null,yn.getTracks().forEach(e=>e.stop()),yn=null;let A=window.URL.createObjectURL(new Blob(Tn,{type:"video/webm"}));BA(A)}function BA(e){var A=null;A=e instanceof Blob?Qn.createObjectURL(blob):e;var t=st?Pn(st):Pn(at.userid);var n="recordedvideo"+new Date().getTime();t.filearray.push(n);var r=document.createElement("div");r.value=t.filearray.length,F(t.uuid,t,A,n,"videoScreenRecording"),H(t.uuid,t,A,n,"videoScreenRecording")}function gA(e){webrtcdev.log("[flesharing JS] on File start ",e),webrtcdev.log("[flesharing JS] on File start description  , name :",e.name," from -> ",e.userid," to ->",e.remoteUserId);let A=e.uuid+"_"+e.userid+"_"+e.remoteUserId,t=Pn(e.userid);t.filearray.includes("name : file.name")||(t.filearray.push({pid:A,name:e.name,status:"progress",from:e.userid,to:e.remoteUserId}),U(e.uuid,t,e.name,e.maxChunks,e,"fileBoxClass",e.userid,e.remoteUserId)),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareStart"}}))}function uA(A){try{if(A.currentPosition>A.maxChunks)return;let e=A.uuid+"_"+A.userid+"_"+A.remoteUserId,t=Sn[e];t&&(t.progress.value=A.currentPosition||A.maxChunks||t.progress.max,E(t.progress,t.label))}catch(e){webrtcdev.error("[flesharing JS] Problem in onFileProgress ",e)}}function mA(e){webrtcdev.log("[flesharing JS] On file End description , file :",e," from -> ",e.userid," to ->",e.remoteUserId),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}}));let A=e.uuid+"_"+e.userid+"_"+e.remoteUserId,t=e.name;var n=Pn(e.userid);if(null!=n)for(x in n.filearray)n.filearray[x].name==t&&n.filearray[x].pid==A&&(n.filearray[x].status="finished",g("stopuploadButton"+A));webrtcdev.log("[flesharing JS] onFileEnd - Display on File Viewer and List -",e.url,t,e.type),H(e.uuid,n,e.url,t,e.type),webrtcdev.log("[flesharing JS] onFileEnd - Display List -",t+e.uuid,document.getElementById(t+e.uuid));st==e.userid&&document.getElementById(t+e.uuid)||(F(e.uuid,n,e.url,t,e.type),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"file",action:"onFileShareEnded"}})))}function pA(e){webrtcdev.log(" [filehsraing js] Send file - ",e),at.send(e)}function wA(e,A,t){webrtcdev.log(" [filehsraing js] Stop Sending file - ",t);var n=Pn(t.userid);for(y in n.filearray)n.filearray[y].pid==e&&(n.filearray[y].status="stop",webrtcdev.log(" [filesharing js ] stopSendFile - filename ",n.filearray[y].name," | status ",n.filearray[y].status))}function hA(){try{at.send({type:"syncOldFiles"})}catch(A){webrtcdev.error("[filesharing js ] syncOldFiles",A)}}function fA(){var e=[];for(x in dt){webrtcdev.log("[flesharing JS] Checking Old Files in index ",x);var A=dt[x];if(A.filearray&&0<A.filearray.length)for(y in A.filearray){for(o in e)if(e[o].name==A.filearray[y].name)break;webrtcdev.log("[filehsraing js] user.filearray[y]",A.filearray[y]),e.push(A.filearray[y])}}setTimeout(function(){if(0<e.length)for(f in webrtcdev.log("[filehsraing js] sendOldFiles ",e),e)pA(e[f])},2e4)}function QA(){In=!0;let e={event:"open",from:"remote",board:xt.drawCanvasContainer,button:xt.button};at.send({type:"canvas",board:e}),webrtcdev.log("[drawJS] send canvas data on rtc"),UA(xt),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardActive"}})),webrtcdev.log("[drawJS] send ondrawboard active data on webrtcdev")}function CA(){In=!1;let e={event:"close",from:"remote",board:xt.drawCanvasContainer,button:xt.button};at.send({type:"canvas",board:e}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"drawboard",action:"onDrawBoardTerminate"}}))}function UA(e){if(webrtcdev.log("[drawjs] drawCanvasobj.drawCanvasContainer ",e.drawCanvasContainer),0>document.getElementById(e.drawCanvasContainer).innerHTML.indexOf("iframe"))try{Nn.addSyncListener(function(e){at.send({type:"canvas",draw:e})}),Nn.setSelected("pencil"),Nn.setTools({pencil:!0,eraser:!0}),Nn.appendTo(document.getElementById(e.drawCanvasContainer))}catch(A){webrtcdev.error(" Canvas drawing not supported ",A)}else webrtcdev.log("[drawjs] CanvasDesigner already started iframe is attached ")}function EA(e){let A=document.createElement("span");A.className=e.button.class,A.innerHTML=e.button.html,A.onclick=function(){let A=confirm("Do you want to reconnet ?");!0==A&&($(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){$(this).html(e.button.html)},3e3))};let t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function FA(e,A){document.getElementById(e).onclick=function(){var t=confirm("Do you want to reconnect ?");if(!0==t){if(!at.peers[at.connectionDescription.remoteUserId])return;at.peers[at.connectionDescription.remoteUserId].peer.close(),at.rejoin(at.connectionDescription),$(this).html("<img src=\"http://www.bba-reman.com/images/fbloader.gif\" />"),setTimeout(function(){document.getElementById(e).innerHTML=A.button.html},3e3)}else;}}function bA(){document.body.setAttribute("style","pointer-events: none;")}function HA(e,A,t){e.style.position="absolute",e.style.left=A+"px",e.style.top=t+"px"}function yA(){document.getElementById("cursor1").setAttribute("style","display:block"),document.onmousemove=function(A){Mn=A.pageX+10,Dn=A.pageY},On=setInterval(TA,500)}function vA(){document.getElementById("cursor1").setAttribute("style","display:none"),at.send({type:"pointer",action:"stopCursor"}),clearInterval(On)}function TA(){var e=document.getElementById("cursor1");e.hidden=!1,HA(e,Mn,Dn),at.send({type:"pointer",action:"startCursor",corX:Mn,corY:Dn})}function SA(e){var A=document.createElement("span");return A.id=e+"cursorButton",A.setAttribute("data-val","mute"),A.setAttribute("title","Cursor"),A.className=Xt.button.class_on,A.innerHTML=Xt.button.html_on,A.onclick=function(){var e=A.id,t;t=st?Pn(st):Pn(at.userid),-1<e.indexOf(t.controlBarName)?A.className==Xt.button.class_on?(yA(),A.className=Xt.button.class_off,A.innerHTML=Xt.button.html_off):A.className==Xt.button.class_off&&(vA(),A.className=Xt.button.class_on,A.innerHTML=Xt.button.html_on):alert(" Use Local Pointer button ")},A}function IA(){var e=document.createElement("span");for(x in e.className=Pt.button.class_off,e.innerHTML=Pt.button.html_off,Pt.languages)document.getElementById("CodeStyles").innerHTML=document.getElementById("CodeStyles").innerHTML+Pt.languages[x];document.getElementById("codeArea").value;Vt=CodeMirror.fromTextArea(document.getElementById("codeArea"),{mode:"text/javascript",styleActiveLine:!0,lineNumbers:!1,lineWrapping:!0}),Vt.setOption("theme","mdn-like"),e.onclick=function(){e.className==Pt.button.class_off?(e.className=Pt.button.class_on,e.innerHTML=Pt.button.html_on,MA(),document.getElementById(Pt.codeeditorContainer).hidden=!1):e.className==Pt.button.class_on&&(e.className=Pt.button.class_off,e.innerHTML=Pt.button.html_off,DA(),document.getElementById(Pt.codeeditorContainer).hidden=!0)};var A=document.createElement("li");A.appendChild(e),document.getElementById("topIconHolder_ul").appendChild(A)}function NA(e){if(37==e.which||38==e.which||39==e.which||40==e.which||17==e.which||18==e.which||16==e.which)return!0;var A={option:"text",codeContent:Vt.getValue()};webrtcdev.log(" sending ",A),rtcMultiConnection.send({type:"codeeditor",data:A})}function RA(){$("#CodeStyles option:selected").each(function(){var e=CodeMirror.findModeByMIME($(this).attr("mime"));e&&(mode=e.mode,spec=$(this).attr("mime"),Vt.setOption("mode",spec),CodeMirror.autoLoadMode(Vt,mode))});var e={option:"menu",codeMode:mode,codeSpec:spec};webrtcdev.log(" sending ",e),rtcMultiConnection.send({type:"codeeditor",data:e})}function LA(e){if(webrtcdev.log("codeeditor ",e),"text"==e.option){var A=Vt.getCursor();Vt.setValue(e.codeContent),Vt.setCursor(A)}else"menu"==e.option&&(Vt.setOption("mode",evt.data.codeSpec),CodeMirror.autoLoadMode(Vt,evt.data.codeMode))}function MA(){document.getElementById(Pt.codeeditorContainer).addEventListener("keyup",NA,!1),document.getElementById("CodeStyles").addEventListener("change",RA,!1)}function DA(){document.getElementById(Pt.codeeditorContainer).removeEventListener("keyup",NA,!1)}function OA(e){var A=document.createElement("span");A.className=e.button.class_off,A.innerHTML=e.button.html_off,A.onclick=function(){A.className==e.button.class_off?(A.className=e.button.class_on,A.innerHTML=e.button.html_on,xA(),document.getElementById(e.texteditorContainer).hidden=!1):A.className==e.button.class_on&&(A.className=e.button.class_off,A.innerHTML=e.button.html_off,_A(),document.getElementById(e.texteditorContainer).hidden=!0)};var t=document.createElement("li");t.appendChild(A),document.getElementById("topIconHolder_ul").appendChild(t)}function kA(e){if(37==e.which||38==e.which||39==e.which||40==e.which||17==e.which||18==e.which||16==e.which)return!0;var A={option:"text",content:document.getElementById(_t.texteditorContainer).value};webrtcdev.log(" sending ",document.getElementById(_t.texteditorContainer).value),rtcMultiConnection.send({type:"texteditor",data:A})}function KA(e){webrtcdev.log("texteditor ",e),"text"==e.option&&(document.getElementById(_t.texteditorContainer).value=e.content)}function xA(){document.getElementById(_t.texteditorContainer).addEventListener("keyup",kA,!1)}function _A(){document.getElementById(_t.texteditorContainer).removeEventListener("keyup",kA,!1)}function PA(e){webrtcdev.log("[ timerobj] startsessionTimer ",e),e.counter.hours&&e.counter.minutes&&e.counter.seconds?(kn=l(e.counter.hours),Kn=l(e.counter.minutes),xn=l(e.counter.seconds),"forward"==e.type?(pe(),kn.innerHTML=0,Kn.innerHTML=0,xn.innerHTML=0):"backward"==e.type&&(kn.innerHTML=0,Kn.innerHTML=3,xn.innerHTML=0,we())):webrtcdev.error(" [timerobj] counter DOM elemnents not found ")}function VA(){try{return Rn=Intl.DateTimeFormat().resolvedOptions().timeZone,dt[0].zone=Rn,Rn}catch(e){webrtcdev.error("[timer js ]",e)}}function zA(){try{var e={type:"timer",userid:dt[0].userid,time:new Date().toJSON(),zone:dt[0].zone};webrtcdev.log("[timerjs] shareTimePeer ",e),at.send(e)}catch(A){webrtcdev.error(A)}}function XA(e,A){try{webrtcdev.log("[timerjs] peerTimeZone - ",e,A);let t=Pn(A);if(!t)return;JA(A,"zone",e),Ce(t),webrtcdev.log("[timerjs] peerTimeZone , updated peerinfo with zone -  ",t)}catch(e){webrtcdev.error("[timerjs] ",e)}}function GA(){return at.peers.getAllParticipants()}function JA(e,A,t){try{for(x in webrtcdev.log("[peerinfomanager] appendToPeerValue - update peer - ",e," by key ",A," with value ",t),dt)if(dt[x].userid==e){dt[x][A]=t,webrtcdev.log("[peerinfomanager]  appendToPeerValue - updated peerValue ",dt[x]);break}}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue errorr - ",A)}}function YA(e){try{for(x in webrtcdev.log("[peerinfomanager] removePeerInfo - remove userid: ",e),dt)if(dt[x].userid==e)return void dt.splice(x,1)}catch(A){webrtcdev.error("[peerinfomanager] appendToPeerValue errorr - ",A)}}function WA(e,A,t,n,r,a){if(webrtcdev.log("[peerinfomanager] updatePeerInfo-  ",e,A,t,n,r,a),!e)return void webrtcdev.error("[peerinfomanager] updatePeerInfo - userid is null / undefined, cannot create PeerInfo");let s=Pn(e);s?(webrtcdev.log("[peerinfomanager] updatePeerInfo - UserID is already existing in webcallpeers, update the fields only "),s.videoContainer=s.videoContainer||"video"+e,s.videoHeight=s.videoHeight||null,s.videoClassName=s.videoClassName||null,s.userid=s.userid||e,s.name=s.name||A,s.color=s.color||t,s.email=s.email||n,s.role=s.role||r||"participant",s.type=s.type||a,s.controlBarName=s.controlBarName||"control-video"+e,s.filearray=s.filearray||[],s.vid=s.vid||"video"+a+"_"+e):(s={videoContainer:"video"+e,videoHeight:null,videoClassName:null,userid:e,name:A,color:t,email:n,role:r||"participant",type:a,controlBarName:"control-video"+e,filearray:[],vid:"video"+a+"_"+e},dt.push(s),webrtcdev.log("[peerinfomanager] updatedPeerInfo -  newly created peerinfo",s)),Dt.active&&(s.fileShare="single"==Dt.props.fileShare?{outerbox:"widget-filesharing-box",container:"widget-filesharing-container",minButton:"widget-filesharing-minbutton",maxButton:"widget-filesharing-maxbutton",rotateButton:"widget-filesharing-rotatebutton",closeButton:"widget-filesharing-closebutton"}:{outerbox:"widget-filesharing-box"+e,container:"widget-filesharing-container"+e,minButton:"widget-filesharing-minbutton"+e,maxButton:"widget-filesharing-maxbutton"+e,rotateButton:"widget-filesharing-rotatebutton"+e,closeButton:"widget-filesharing-closebutton"+e},s.fileList="single"==Dt.props.fileList?{outerbox:"widget-filelisting-box",container:"widget-filelisting-container"}:{outerbox:"widget-filelisting-box"+e,container:"widget-filelisting-container"+e});let d=Vn(e);dt[d]=s}function jA(e,A,t){webrtcdev.log("[sessionmanager] startSocketSession , set selfuserid ",e.userid),st||(st=e.userid);try{let e="/";"/"!=A&&(e=A),webrtcdev.log("[sessionmanager] StartSession"+t," on address ",e),socket=io.connect(e)}catch(e){throw webrtcdev.error(" problem in socket connnection",e)," problem in socket connection"}return t?void(socket.on("connect",function(){webrtcdev.log("[sessionmanager] connected to signaller "),socket.emit("presence",{channel:t}),socket.on("disconnected",function(){webrtcdev.error("[sessionmanager] Disconnected from signaller  "),te("Disconnected from signaller "),"io server disconnect"===reason&&(webrtcdev.error("[sessionmanager] Disconnected initiated by signaller , attempt to re-connect "),socket.connect())})}),socket.on("connect_error",()=>{webrtcdev.error("[sessionmanager] connect_error from signaller  ")}),socket.on("connect_timeout",()=>{webrtcdev.error("[sessionmanager] connect_timeout from signaller  ")}),socket.on("error",()=>{webrtcdev.error("[sessionmanager] error from signaller  ")}),socket.on("reconnect",()=>{webrtcdev.log("[sessionmanager] Reconnect from signaller  ")}),socket.on("reconnect_attempt",()=>{webrtcdev.log("[sessionmanager] Reconnect attempt from signaller  ")}),socket.on("reconnecting",()=>{webrtcdev.log("[sessionmanager] Reconnecting from signaller  ")}),socket.on("reconnect_error",()=>{webrtcdev.error("[sessionmanager] reconnect_error from signaller  ")}),socket.on("reconnect_failed",()=>{webrtcdev.error("[sessionmanager] Reconnect failed from signaller  ")}),socket.on("presence",function(e){Nt&&showUserStats(),webrtcdev.log("[sessionmanager] ======================= presence for sessionid ==================",e),e?Yn(t,st):Gn(t,st,nn.maxAllowed||10)}),socket.on("open-channel-resp",function(A){if(webrtcdev.log("[sessionmanager] --------------open-channel-resp---------------------  ",A),A.status&&A.channel==t){let t=new Promise(function(t){webrtcdev.log("[sessionmanager] open-channel-resp - "," Session video:",St," audio: ",Tt," data: ",It," OfferToReceiveAudio: ",Ht," OfferToReceiveVideo: ",yt),e.connectionType="open";A.channel;e.open(A.channel,function(e){webrtcdev.log(" [sessionmanager] offer/answer webrtc with role ",Zt," responese ",e),t("ok")})});t.then(()=>{WA(st,ht,Qt,ft,Zt,"local")}).then(()=>{nA(e,St,Tt)}).catch(e=>{webrtcdev.error(" [sessionmanager] Handle rejected promise ("+e+")")})}else alert("Could not open this channel, Server refused"),webrtcdev.error(" [sessionmanager] Could not open this channel, Server refused");A.message&&te(A.msgtype+" : "+A.message)}),socket.on("join-channel-resp",function(A){if(webrtcdev.log("[sessionmanager] --------------join-channel-resp---------------------  ",A),A.status&&A.channel==t){webrtcdev.log(" [ join-channel-resp ] "," Session video:",St," audio: ",Tt," data: ",It," OfferToReceiveAudio: ",Ht," OfferToReceiveVideo: ",yt);let t=new Promise(function(t){e.connectionType="join",e.remoteUsers=A.users;let n=A.channel;e.openOrJoin(n,function(e){webrtcdev.log(" [sessionmanager] open-channel-resp - openOrJoin offer/answer webrtc with role ",Zt," responese ",e),t("ok")})});t.then(()=>{webrtcdev.info(" [sessionmanager] rtcConn.connectionDescription  ",e.connectionDescription),webrtcdev.info(" [sessionmanager] offer/answer webrtc  ",st," with role ",Zt),WA(st,ht,Qt,ft,Zt,"local")}).then(()=>{nA(e,St,Tt)}).catch(e=>{webrtcdev.error("[sessionmanager] join channel response -  Handle rejected promise ("+e+")")}),A.message&&te(A.msgtype+" : "+A.message)}else webrtcdev.error(" [sessionmanager] Could not join this channel, Server refused"),alert("Could not join this channel, Server refused. Please end this session and create another session")}),socket.on("channel-event",function(e){if(webrtcdev.log("[sessionmanager] --------------channel-event---------------------  ",e),"new-join"!=e.type||"error"==e.msgtype)webrtcdev.warn("unhandled channel event ");else if(webrtcdev.log("[session manager ] - new-join-channel "),"unlimited"!=nn.maxAllowed&&dt.length<=nn.maxAllowed){webrtcdev.log("[sessionmanager] channel-event : peer length "+dt.length+" is less than max capacity of session  of the session "+nn.maxAllowed);let A=e.data.sender;A||(webrtcdev.error("[sessionmanager] channel-event : userid not present in channel-event:"+e.type),reject("userid not found"));let t=Pn(A),n=e.data.extra.name,r=e.data.extra.color,a=e.data.extra.email,s=e.data.extra.role;t?(webrtcdev.log("[sessionmanager] channel-event : PeerInfo was already present, this is s rejoin, update the peerinfo "),WA(A,n,r,a,s,"remote"),te(e.data.extra.role+" "+e.type)):(webrtcdev.log("[sessionmanager] channel-event : PeerInfo not already present, create new peerinfo"),"LOCAL"==n&&(n="REMOTE"),WA(A,n,r,a,s,"remote"),te(e.data.extra.role+"  "+e.type)),t||(t=Pn(A)),t.type="remote",t.stream="",t.streamid="",m(t)}else webrtcdev.error("[sessionmanager] channel-event : max capacity of session is reached ",nn.maxAllowed),ne("Another user is trying to join this channel but max count [ "+nn.maxAllowed+" ] is reached")})):(te("Invalid session"),void webrtcdev.error("[sessionmanager] Session id undefined "))}var it="",e="",at=null,ot=null,st=null,dt=[],lt={},ct=null,Bt=null,gt=null,ut=null,mt=null,pt=null,wt=[],lt={},ht="",ft="",Qt="",Ct="",Ut="",Et=null,Ft="/",bt=[],Ht=!0,yt=!0,vt=!0,Tt=!0,St=!0,It=!0,Nt=!1,Rt=!1,Lt=!1,Mt=!1,Dt=!1,Ot=!1,kt=!1,Kt=!1,xt=!1,_t=!1,Pt=!1,Vt=null,zt=!1,Xt=!1,Gt=!1,Jt=!1,Yt=!1,Wt=!1,jt=!1,qt=!1,Zt="participant",$t;this.sessionid="";var en=null,An="none",tn={},nn={},rn=[];this.connectionStatus=null,this.makesessionid=function(e){let A="";return(webrtcdev.log(" Existing charecters after # ",location.href.replace("#","").length),location.href.replace("#","").length&&(A=-1<location.href.indexOf("?")?location.hash.substring(0,location.hash.indexOf("?")).replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""):location.hash.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""),A))?A:(webrtcdev.log("Session id not Found in URL ,  Check for auto - reload if  ",e),"reload"!=e||location.hash.replace("#","").length?(A=prompt("Enter session ",""),A):void(location.href=location.href.split("#")[0]+"#"+(100*Math.random()).toString().replace(".",""),location.reload()))},this.issafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.setsession=function(e,A,t,n,r,a){return this.sessionid=Et=r.sessionid,Ft=r.socketAddr,tn=e,nn=A,An=r.turn,a&&(a.debug&&(Nt=a.debug||!1),a.chat&&(Mt=a.chat||null),a.fileShare&&(Dt=a.fileShare||null),a.screenrecord&&(Ot=a.screenrecord||null),a.screenshare&&(Wt=a.screenshare||null),a.snapshot&&(kt=a.snapshot||null),a.videoRecord&&(Kt=a.videoRecord||null),a.reconnect&&(zt=a.reconnect||null),a.drawCanvas&&(xt=a.drawCanvas||null),a.texteditor&&(_t=a.texteditor||null),a.codeeditor&&(Pt=a.codeeditor||null),a.mute&&(Gt=a.mute||null),a.timer&&(Rt=a.timer||null),a.listenin&&(Yt=a.listenin||null),a.cursor&&(Xt=a.cursor||null),a.minmax&&(Jt=a.minmax||null),a.help&&(jt=a.help||null),a.statistics&&(qt=a.statistics||null)),{sessionid:Et,outgoing:n,incoming:t,socketAddr:Ft,localobj:tn,remoteobj:nn,turn:An,widgets:a}},this.startCall=function(e){return e?(webrtcdev.log("[ initjs ] startwebrtcdev begin processing with ",e),webrtcdev.log("[ initjs ] : incoming ",e.incoming),webrtcdev.log("[ initjs ] : outgoing ",e.outgoing),e.incoming&&(Ht=e.incoming.audio,yt=e.incoming.video,vt=e.incoming.data),e.outgoing&&(Tt=e.outgoing.audio,St=e.outgoing.video,It=e.outgoing.data),webrtcdev.log(" [ initjs  ] : role ",Zt),new Promise(A=>{let t=e.sessionid;webrtcdev.log(" [ initjs ] : sessionid : "+t+" and localStorage  ",localStorage),1<=localStorage.length&&localStorage.getItem("channel")!==t?(webrtcdev.log("[ intijs ] : Current Session ID "+t+" doesnt match cached channel id "+localStorage.getItem("channel")+"-> clearCaches()"),clearCaches()):webrtcdev.log(" [ initjs ] : no action taken on localStorage"),webrtcdev.log(" [ initjs ] : localobj ",tn),webrtcdev.log(" [ initjs ] : remoteobj ",nn),mt=tn.video;let n=nn.videoarr;if(St&&(pt=n[0]),!nn.dynamicVideos)for(let e=1;e<n.length;e++)wt.push(n[e]);if(tn.hasOwnProperty("userdetails")){let e=tn.userdetails;webrtcdev.info("localobj userdetails ",e),ht=e.username||"LOCAL",Qt=e.usercolor||"",ft=e.useremail||"",Zt=e.role||"participant"}else webrtcdev.warn("localobj has no userdetails ");"inspector"==Zt&&A("done"),AA().then(e=>{webrtcdev.log("Has Webcam: "+(e?"yes":"no")),e||(webrtcdev.error(" dont have access to webcam  "),alert(" you dont have access to webcam "),St=!1),St&&(webrtcdev.log(" get permission for video Access "),s())}).catch(e=>{webrtcdev.error(" dont have access to webcam  ",e)}),tA().then(e=>{webrtcdev.log("Has Mic: "+(e?"yes":"no")),e||(webrtcdev.error(" dont have access to mic  "),alert(" you dont have access to Mic "),Tt=!1),Tt&&(webrtcdev.log(" get permission for audio access "),d())}).catch(e=>{webrtcdev.error(" dont have access to mic  ",e)}),re(),A(t)}).then(A=>{Xn(A,e)}).then(()=>{zn(at,e.widgets)}).then(()=>{jA(at,e.socketAddr,e.sessionid)}).catch(e=>{webrtcdev.error(" [ initjs ] : Promise rejected ",e)})):void webrtcdev.error(" [ initjs ] : Cannot initiate startcall without session object ")},this.stopCall=stopCall=function(){webrtcdev.log(" stopCall "),at.closeEntireSession(),localStorage.getItem("channel")||localStorage.removeItem("channel"),localStorage.getItem("userid")||localStorage.removeItem("userid"),localStorage.getItem("remoteUsers")||localStorage.removeItem("remoteUsers"),this.connectionStatus="closed"},Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=this.length-1;0<=e;e--)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},this.showdesktopnotification=showdesktopnotification=function(e,A){if(!("Notification"in window))alert("This browser does not support desktop notification");else if("granted"===Notification.permission){new Notification(e,{body:A})}else"denied"!==Notification.permission&&webrtcdev.warn(" [notify.js] notification denied")};var an=document.createElement("div"),on;an.id="saveButtonCanvasDraw",an.setAttribute("data-toggle","modal"),an.setAttribute("data-target","#saveModal"),an.onclick=function(){G("blobcanvas")},document.body.appendChild(an),this.getWebrtcdevStats=getWebrtcdevStats=function(){for(let e in webrtcdev.info(" Browser  : ",at.DetectRTC.browser),webrtcdev.info(" Network connection downlink : ",navigator.connection.downlink),webrtcdev.info(" Network connection effectiveType : ",navigator.connection.effectiveType),webrtcdev.info(" Network connection rtt : ",navigator.connection.rtt),webrtcdev.info(" Bandwidth  : ",at.bandwidth),webrtcdev.info(" All active participants  : ",GA()),dt)webrtcdev.info(" Peer   : ",e," - ",dt[e]);return new Promise(function(e){for(let A in at.peers)if(at.peers[A].userid){let t=at.peers[A].peer;webrtcdev.log(t),t.getStats(null).then(A=>{let t="";A.forEach(e=>{t+="Report:"+e.type+" <br/> ID:"+e.id+" <br/>Timestamp:"+e.timestamp+" <br/> ",Object.keys(e).forEach(A=>{"id"!==A&&"timestamp"!==A&&"type"!==A&&(t+=A+" : "+e[A]+" <br/> ")})}),webrtcdev.info("[stats] getWebrtcdevStats - self  ",st,t),e(t)})}})},this.oldgetStats=function(e,A,t){function n(A){webrtcdev.log("peer ",r);r.getStats()&&(!navigator.mozGetUserMedia?r.getStats(function(e){var t=[];e.result().forEach(function(e){var A={};e.names().forEach(function(t){A[t]=e.stat(t)}),A.id=e.id,A.type=e.type,A.timestamp=e.timestamp,t.push(A)}),A(t)}):r.getStats(e,function(e){var t=[];e.forEach(function(e){t.push(e)}),A(t)},A))}var r=this;if(arguments[0]instanceof RTCMultiConnection){if(r=arguments[0],!navigator.mozGetUserMedia||(e=arguments[1],A=arguments[2],t=arguments[3]),!(e instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"2nd argument is not instance of MediaStreamTrack.";}else if(!(e instanceof MediaStreamTrack)&&!!navigator.mozGetUserMedia)throw"1st argument is not instance of MediaStreamTrack.";var a={audio:{},video:{}},s=!1;(function e(){n(function(n){for(var d={audio:{},video:{},results:n,nomore:function(){s=!0}},l=0,c;l<n.length;++l){if(c=n[l],c.datachannelid&&"datachannel"===c.type&&(d.datachannel={state:c.state}),"googLibjingleSession"===c.type&&(d.isOfferer=c.googInitiator),"googCertificate"==c.type&&(d.encryption=c.googFingerprintAlgorithm),"opus"==c.googCodecName&&c.bytesSent){var B=0;if(!!c.bytesSent){a.audio.prevBytesSent||(a.audio.prevBytesSent=c.bytesSent);var g=c.bytesSent-a.audio.prevBytesSent;a.audio.prevBytesSent=c.bytesSent,B=g/1024}d.audio||(d.audio=c),d.audio.availableBandwidth=B.toFixed(1)}if("VP8"==c.googCodecName){var B=0;if(!!c.bytesSent){a.video.prevBytesSent||(a.video.prevBytesSent=c.bytesSent);var g=c.bytesSent-a.video.prevBytesSent;a.video.prevBytesSent=c.bytesSent,B=g/1024}d.video||(d.video=c),d.video.availableBandwidth=B.toFixed(1),c.googFrameHeightReceived&&c.googFrameWidthReceived&&(d.resolutions={width:c.googFrameWidthReceived,height:c.googFrameHeightReceived})}"VideoBwe"==c.type&&(d.video.bandwidth={googActualEncBitrate:c.googActualEncBitrate,googAvailableSendBandwidth:c.googAvailableSendBandwidth,googAvailableReceiveBandwidth:c.googAvailableReceiveBandwidth,googRetransmitBitrate:c.googRetransmitBitrate,googTargetEncBitrate:c.googTargetEncBitrate,googBucketDelay:c.googBucketDelay,googTransmitBitrate:c.googTransmitBitrate}),"googCandidatePair"==c.type&&"true"==c.googActiveConnection&&(d.connectionType={local:{candidateType:c.googLocalCandidateType,ipAddress:c.googLocalAddress},remote:{candidateType:c.googRemoteCandidateType,ipAddress:c.googRemoteAddress},transport:c.googTransportType});var u=((navigator.connection||{}).type||"unknown").toString().toLowerCase();"localcandidate"===c.type&&(!d.connectionType&&(d.connectionType={}),d.connectionType.local={candidateType:c.candidateType,ipAddress:c.ipAddress+":"+c.portNumber,networkType:c.networkType||"unknown",transport:c.transport}),"remotecandidate"===c.type&&(!d.connectionType&&(d.connectionType={}),d.connectionType.local={candidateType:c.candidateType,ipAddress:c.ipAddress+":"+c.portNumber,networkType:c.networkType||u,transport:c.transport})}try{-1!==r.iceConnectionState.search(/failed|closed/gi)&&(s=!0)}catch(A){s=!0}!0===s&&(d.datachannel&&(d.datachannel.state="close"),d.ended=!0),A(d),!s&&typeof t!=null&&t&&setTimeout(e,t||1e3)})})()},"undefined"!=typeof module&&(module.exports=getStats),this.showRtcConn=function(){return at?(webrtcdev.info(" ========================================================================="),webrtcdev.info("[stats] rtcConn : ",at),webrtcdev.info(" =========================================================================")):webrtcdev.warn(" rtcConn doesnt exist "),at},this.updateStats=function(){webrtcdev.info(" ============================ get Stats  =========================================="),qt&&qt.active&&(getStats(event.stream.getVideoTracks(),function(e){document.getElementById("network-stats-body").innerHTML=e},2e4),document.getElementById(qt.statsConainer).innerHTML+=JSON.stringify(qt),document.getElementById(qt.statsConainer).innerHTML+=JSON.stringify(qt.bandwidth),document.getElementById(qt.statsConainer).innerHTML+=JSON.stringify(qt.codecs))};var sn="undefined"!=typeof window.InstallTrigger,dn=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),ln=!!window.chrome&&!dn,cn=null,Bn,$t,gn;this.showScrConn=function(){ot?(webrtcdev.info(" ========================================================================="),webrtcdev.info(" srcConn : ",ot),webrtcdev.info(" srcConn.peers.getAllParticipants() : ",ot.peers.getAllParticipants()),webrtcdev.info(" =========================================================================")):webrtcdev.debug(" Screen share is not active ")},"",function(){function e(){function e(e,A){function t(e,t,a){u=$A(t.byteLength/r);for(var s=0,d;s<u;s++)d=s*r,g[B]=t.slice(d,rt(d+r,t.byteLength)),A({uuid:n.uuid,buffer:g[B],currentPosition:B,maxChunks:c,size:n.size,name:n.name,lastModifiedDate:n.lastModifiedDate.toString(),type:n.type}),B++;B==c&&(m=!0),a()}A=A||function(e){postMessage(e)};var n=e.file;n.uuid||(n.uuid=(100*Math.random()).toString().replace(/\./g,""));var r=e.chunkSize||15000;e.extra&&e.extra.chunkSize&&(r=e.extra.chunkSize);var a=0,s=r,d=et(rt(1e8,s)/r),l=d*r,c=$A(n.size/r);n.maxChunks=c;var B=0,g=[],u,m;A({currentPosition:B,uuid:n.uuid,maxChunks:c,size:n.size,name:n.name,type:n.type,lastModifiedDate:n.lastModifiedDate.toString(),start:!0});var p=new FileReader,w;p.onloadend=function(e){e.target.readyState==FileReader.DONE&&t(n.name,e.target.result,function(){a++,(a+1)*l<n.size?(w=n.slice(a*l,(a+1)*l),p.readAsArrayBuffer(w)):a*l<n.size?(w=n.slice(a*l,n.size),p.readAsArrayBuffer(w)):(n.url=Qn.createObjectURL(n),A({currentPosition:B,uuid:n.uuid,maxChunks:c,size:n.size,name:n.name,lastModifiedDate:n.lastModifiedDate.toString(),url:Qn.createObjectURL(n),type:n.type,end:!0}))})},B+=1,w=n.slice(a*l,(a+1)*l),p.readAsArrayBuffer(w)}var A=this;A.readAsArrayBuffer=function(A,t){function n(e){A.chunks[e.uuid]||(A.chunks[e.uuid]={currentPosition:-1}),t.extra=t.extra||{userid:0},e.userid=t.userid||t.extra.userid||0,e.extra=t.extra,A.chunks[e.uuid][e.currentPosition]=e,e.end&&r&&(r(e.uuid),r=null),200<e.maxChunks&&200==e.currentPosition&&r&&(r(e.uuid),r=null)}var r=t.earlyCallback;delete t.earlyCallback;e(t,n)}}function A(e){function A(r,a){if(!r.uuid)return void e.convertToObject(r,function(e){A(e)});if(r.start&&!n.chunks[r.uuid]&&(n.chunks[r.uuid]={},e.onBegin&&e.onBegin(r)),!r.end&&r.buffer&&(n.chunks[r.uuid][r.currentPosition]=r.buffer),r.end){var s=n.chunks[r.uuid],d=[];Object.keys(s).forEach(function(e){d.push(s[e])});var l=new Blob(d,{type:r.type});l=t(l,r),l.url=Qn.createObjectURL(l),l.uuid=r.uuid,l.size||webrtcdev.error("Something went wrong. Blob Size is 0."),e.onEnd&&e.onEnd(l),delete n.chunks[r.uuid],delete n.chunksWaiters[r.uuid]}r.buffer&&e.onProgress&&e.onProgress(r),r.end||(a(r),n.chunksWaiters[r.uuid]=function(){function e(){r.buffer&&n.chunks[r.uuid]&&(r.currentPosition==r.maxChunks||n.chunks[r.uuid][r.currentPosition]||(a(r),setTimeout(e,5e3)))}setTimeout(e,5e3)},n.chunksWaiters[r.uuid]())}var n=this;n.chunks={},n.chunksWaiters={},n.receive=A}function t(e,A){if(e||(e={}),!A)return e;for(var t in A)try{e[t]=A[t]}catch(A){}return e}var n={ConvertToArrayBuffer:function(e,A){U.pack(e,function(e){A(e.buffer)})},ConvertToObject:function(e,A){U.unpack(e,A)}},r=!1,a=!1,s=Uint8Array.BYTES_PER_ELEMENT,d=Uint16Array.BYTES_PER_ELEMENT,l=Uint32Array.BYTES_PER_ELEMENT,c={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17};if(r)var B=["NULL","UNDEFINED","STRING","NUMBER","BOOLEAN","ARRAY","OBJECT","INT8ARRAY","INT16ARRAY","INT32ARRAY","UINT8ARRAY","UINT16ARRAY","UINT32ARRAY","FLOAT32ARRAY","FLOAT64ARRAY","ARRAYBUFFER","BLOB","BUFFER"];var g=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],u=function(e,A,t){var n=[];n[0]=[];for(var r=0;r<40;r++)n[0][r]=10>r?"0"+r.toString(10):r.toString(10);for(r=0;r<t;r++){var s=e.getUint8(A+r,a),d=~~(r/40)+1;"undefined"==typeof n[d]&&(n[d]=[]),n[d][r%40]=16>s?"0"+s.toString(16):s.toString(16)}for(webrtcdev.log("%c"+n[0].join(" "),"font-weight: bold;"),r=1;r<n.length;r++)webrtcdev.log(n[r].join(" "))},m=function(e){var A;if(e===void 0)A=c.UNDEFINED;else if(null===e)A=c.NULL;else{var t=e.constructor.name;if(t!==void 0)A=c[t.toUpperCase()];else switch(typeof e){case"string":A=c.STRING;break;case"number":A=c.NUMBER;break;case"boolean":A=c.BOOLEAN;break;case"object":e instanceof Array?A=c.ARRAY:e instanceof Int8Array?A=c.INT8ARRAY:e instanceof Int16Array?A=c.INT16ARRAY:e instanceof Int32Array?A=c.INT32ARRAY:e instanceof Uint8Array?A=c.UINT8ARRAY:e instanceof Uint16Array?A=c.UINT16ARRAY:e instanceof Uint32Array?A=c.UINT32ARRAY:e instanceof Float32Array?A=c.FLOAT32ARRAY:e instanceof Float64Array?A=c.FLOAT64ARRAY:e instanceof ArrayBuffer?A=c.ARRAYBUFFER:e instanceof Blob?A=c.BLOB:e instanceof Buffer?A=c.BUFFER:e instanceof Object&&(A=c.OBJECT);break;default:}}return A},p=function(e){var A=0,t=0,n=0,m=a,p=new ArrayBuffer(e[0].byte_length+e[0].header_size),w=new DataView(p);for(t=0;t<e.length;t++){var h=A,Q=e[t].header_size,C=e[t].type,U=e[t].length,E=e[t].value,F=e[t].byte_length,b=g[C],H=null===b?0:window[b+"Array"].BYTES_PER_ELEMENT;switch(C===c.BUFFER?w.setUint8(A,c.BLOB,m):w.setUint8(A,C,m),A+=s,r&&webrtcdev.info("Packing",C,B[C]),(C===c.ARRAY||C===c.OBJECT)&&(w.setUint16(A,U,m),A+=d,r&&webrtcdev.info("Content Length",U)),w.setUint32(A,F,m),A+=l,r&&(webrtcdev.info("Header Size",Q,"bytes"),webrtcdev.info("Byte Length",F,"bytes")),C){case c.NULL:case c.UNDEFINED:break;case c.STRING:for(r&&webrtcdev.info("Actual Content %c\""+E+"\"","font-weight:bold;"),n=0;n<U;n++,A+=H)w.setUint16(A,E.charCodeAt(n),m);break;case c.NUMBER:case c.BOOLEAN:r&&webrtcdev.info("%c"+E.toString(),"font-weight:bold;"),w["set"+b](A,E,m),A+=H;break;case c.INT8ARRAY:case c.INT16ARRAY:case c.INT32ARRAY:case c.UINT8ARRAY:case c.UINT16ARRAY:case c.UINT32ARRAY:case c.FLOAT32ARRAY:case c.FLOAT64ARRAY:var T=new Uint8Array(w.buffer,A,F);T.set(new Uint8Array(E.buffer)),A+=F;break;case c.ARRAYBUFFER:case c.BUFFER:var T=new Uint8Array(w.buffer,A,F);T.set(new Uint8Array(E)),A+=F;break;case c.BLOB:case c.ARRAY:case c.OBJECT:break;default:throw"TypeError: Unexpected type found.";}r&&u(w,h,A-h)}return w},w=function(e,A){var t=0,n=a,m=A,p,h,Q,C,U;p=e.getUint8(A,n),A+=s,r&&webrtcdev.info("Unpacking",p,B[p]),(p===c.ARRAY||p===c.OBJECT)&&(h=e.getUint16(A,n),A+=d,r&&webrtcdev.info("Content Length",h)),Q=e.getUint32(A,n),A+=l,r&&webrtcdev.info("Byte Length",Q,"bytes");var E=g[p],F=null===E?0:window[E+"Array"].BYTES_PER_ELEMENT;switch(p){case c.NULL:case c.UNDEFINED:r&&u(e,m,A-m),C=null;break;case c.STRING:h=Q/F;var b=[];for(t=0;t<h;t++){var H=e.getUint16(A,n);A+=F,b.push(At(H))}C=b.join(""),r&&(webrtcdev.info("Actual Content %c\""+C+"\"","font-weight:bold;"),u(e,m,A-m));break;case c.NUMBER:C=e.getFloat64(A,n),A+=F,r&&(webrtcdev.info("Actual Content %c\""+C.toString()+"\"","font-weight:bold;"),u(e,m,A-m));break;case c.BOOLEAN:C=1===e.getUint8(A,n),A+=F,r&&(webrtcdev.info("Actual Content %c\""+C.toString()+"\"","font-weight:bold;"),u(e,m,A-m));break;case c.INT8ARRAY:case c.INT16ARRAY:case c.INT32ARRAY:case c.UINT8ARRAY:case c.UINT16ARRAY:case c.UINT32ARRAY:case c.FLOAT32ARRAY:case c.FLOAT64ARRAY:case c.ARRAYBUFFER:U=e.buffer.slice(A,A+Q),A+=Q,C=p===c.ARRAYBUFFER?U:new window[E+"Array"](U),r&&u(e,m,A-m);break;case c.BLOB:if(r&&u(e,m,A-m),window.Blob){var T=w(e,A),S=w(e,T.cursor);A=S.cursor,C=new Blob([S.value],{type:T.value})}else U=e.buffer.slice(A,A+Q),A+=Q,C=new Buffer(U);break;case c.ARRAY:for(r&&u(e,m,A-m),C=[],t=0;t<h;t++)U=w(e,A),A=U.cursor,C.push(U.value);break;case c.OBJECT:for(r&&u(e,m,A-m),C={},t=0;t<h;t++){var I=w(e,A),N=w(e,I.cursor);A=N.cursor,C[I.value]=N.value}break;default:throw"TypeError: Type not supported.";}return{value:C,cursor:A}},h=function(e,A){for(var t=e.length,n=[],r=0,a=0,s=0;s<e.length;s++)(function(s){Q(e[s],function(e){if(n[s]=e,a+=e[0].header_size+e[0].byte_length,++r===t){for(var d=[],l=0;l<n.length;l++)d=d.concat(n[l]);A(d,a)}})})(s)},Q=function(e,A){var t=1,n=s+l,r=0,a=0,B;switch(B=m(e),t=void 0===g[B]||null===g[B]?0:window[g[B]+"Array"].BYTES_PER_ELEMENT,B){case c.UNDEFINED:case c.NULL:break;case c.NUMBER:case c.BOOLEAN:r=t;break;case c.STRING:a=e.length,r+=a*t;break;case c.INT8ARRAY:case c.INT16ARRAY:case c.INT32ARRAY:case c.UINT8ARRAY:case c.UINT16ARRAY:case c.UINT32ARRAY:case c.FLOAT32ARRAY:case c.FLOAT64ARRAY:a=e.length,r+=a*t;break;case c.ARRAY:return void h(e,function(t,r){A([{type:B,length:e.length,header_size:n+d,byte_length:r,value:null}].concat(t))});case c.OBJECT:var u=[];for(var p in e)e.hasOwnProperty(p)&&(u.push(p),u.push(e[p]),a++);return void h(u,function(e,t){A([{type:B,length:a,header_size:n+d,byte_length:t,value:null}].concat(e))});case c.ARRAYBUFFER:r+=e.byteLength;break;case c.BLOB:var w=e.type,Q=new FileReader;return Q.onload=function(t){h([w,t.target.result],function(e,t){A([{type:B,length:a,header_size:n,byte_length:t,value:null}].concat(e))})},Q.onerror=function(A){throw"FileReader Error: "+A},void Q.readAsArrayBuffer(e);case c.BUFFER:r+=e.length;break;default:throw"TypeError: Type \""+e.constructor.name+"\" not supported.";}A([{type:B,length:a,header_size:n,byte_length:r,value:e}].concat([]))},C=function(e){var A=e instanceof DataView?e:new DataView(e),t=w(A,0);return t.value};r&&(window.Test={BIG_ENDIAN:a,LITTLE_ENDIAN:!0,Types:c,pack:p,unpack:w,serialize:Q,deserialize:C});var U={pack:function(e,A){try{r&&webrtcdev.info("%cPacking Start","font-weight: bold; color: red;",e),Q(e,function(e){r&&webrtcdev.info("Serialized Object",e),A(p(e))})}catch(A){throw A}},unpack:function(e,A){try{r&&webrtcdev.info("%cUnpacking Start","font-weight: bold; color: red;",e);var t=C(e);r&&webrtcdev.info("Deserialized Object",t),A(t)}catch(A){throw A}}};window.FileConverter=n,window.FileSelector=function(){function e(e,n){var r=document.createElement("input");r.type="file",n&&(r.multiple=!0),r.accept=t.accept,r.onchange=function(){return n?r.files.length?void e(r.files):void webrtcdev.error("No file selected."):r.files[0]?void(e(r.files[0]),r.parentNode.removeChild(r)):void webrtcdev.error("No file selected.")},r.style.display="none",(document.body||document.documentElement).appendChild(r),A(r)}function A(e){var A=new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,button:0,buttons:0,mozInputSource:1}),t=e.dispatchEvent(A)}var t=this;t.selectSingleFile=e,t.selectMultipleFiles=function(A){e(A,!0)},t.accept="*.*"},window.FileBufferReader=function(){function t(e,A){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var n in A=A||new e.constructor,e)A[n]="undefined"==typeof A[n]?t(e[n],null):A[n];return A}var r=this,a=new e;r.chunks={},r.users={},r.readAsArrayBuffer=function(e,A,n){a.readAsArrayBuffer(r,{file:e,earlyCallback:function(e){A(t(e,{currentPosition:-1}))},extra:n||{userid:0}})},r.getNextChunk=function(e,A,n){try{for(x in dt)if(dt[x].userid==st)for(y in dt[x].filearray)dt[x].filearray[y].pid||console.warn("[ fbr.getNextChunk ] pid does mot exist "),dt[x].filearray[y].pid.includes(e)&&"stop"==dt[x].filearray[y].status&&(dt[x].filearray[y].status="stopped")}catch(A){webrtcdev.log(A)}var a;"undefined"!=typeof e.currentPosition&&(a=e.currentPosition,e=e.uuid);var s=r.chunks[e];if(s){"undefined"==typeof n?("undefined"!=typeof a&&(r.chunks[e].currentPosition=a),r.chunks[e].currentPosition++,a=r.chunks[e].currentPosition):(!r.users[n+""]&&(r.users[n+""]={fileUUID:e,userid:n,currentPosition:-1}),"undefined"!=typeof a&&(r.users[n+""].currentPosition=a),r.users[n+""].currentPosition++,a=r.users[n+""].currentPosition);var d=s[a];return d?void(d=t(d),"undefined"!=typeof n&&(d.remoteUserId=n+""),!!d.start&&r.onBegin(d),!!d.end&&r.onEnd(d),r.onProgress(d),r.convertToArrayBuffer(d,function(e){return d.currentPosition==d.maxChunks?void A(e,!0):void A(e,!1)})):(delete r.chunks[e],void r.convertToArrayBuffer({chunkMissing:!0,currentPosition:a,uuid:e},A))}};var s=new A(r);r.addChunk=function(e,A){e&&s.receive(e,function(e){r.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:e.currentPosition,uuid:e.uuid},A)})},r.chunkMissing=function(e){delete s.chunks[e.uuid],delete s.chunksWaiters[e.uuid]},r.onBegin=function(){},r.onEnd=function(){},r.onProgress=function(){},r.convertToObject=n.ConvertToObject,r.convertToArrayBuffer=n.ConvertToArrayBuffer,r.setMultipleUsers=function(){}}}(),window.requestAnimationFrame||(wn=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),window.cancelAnimationFrame||(hn=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame),window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext),Qn=window.URL||window.webkitURL,navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.webkitMediaStream&&(window.MediaStream=window.webkitMediaStream);var un=!!navigator.webkitGetUserMedia,mn={AudioContext:window.AudioContext||window.webkitAudioContext},pn=function(){function e(e){for(var t=A(e),n=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:c(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],r=0,d=0;r<e.length;){var l=[],B=0;do l.push(e[r]),B+=e[r].duration,r++;while(r<e.length&&B<3e4);var g=0,u={id:524531317,data:[{data:d,id:231}].concat(l.map(function(e){var A=s({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:tt(g)});return g+=e.duration,{data:A,id:163}}))};n[1].data.push(u),d+=B}return a(n)}function A(e){if(!e[0])return void webrtcdev.warn("Something went wrong. Maybe WebP format is not supported in the current browser.");for(var A=e[0].width,t=e[0].height,n=e[0].duration,r=1;r<e.length;r++)n+=e[r].duration;return{duration:n,width:A,height:t}}function t(e){for(var A=[];0<e;)A.push(255&e),e>>=8;return new Uint8Array(A.reverse())}function n(e){return new Uint8Array(e.split("").map(function(A){return A.charCodeAt(0)}))}function r(e){var A=[],t=e.length%8?Array(9-e.length%8).join("0"):"";e=t+e;for(var n=0;n<e.length;n+=8)A.push(parseInt(e.substr(n,8),2));return new Uint8Array(A)}function a(e){for(var A=[],s=0,d;s<e.length;s++){d=e[s].data,"object"==typeof d&&(d=a(d)),"number"==typeof d&&(d=r(d.toString(2))),"string"==typeof d&&(d=n(d));var l=d.size||d.byteLength||d.length,c=$A($A(ZA(l)/ZA(2))/8),B=l.toString(2),g=Array(7*c+7+1-B.length).join("0")+B,u=Array(c).join("0")+"1"+g;A.push(t(e[s].id)),A.push(r(u)),A.push(d)}return new Blob(A,{type:"video/webm"})}function s(e){var A=0;if(e.keyframe&&(A|=128),e.invisible&&(A|=8),e.lacing&&(A|=e.lacing<<1),e.discardable&&(A|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";var t=[128|e.trackNum,e.timecode>>8,255&e.timecode,A].map(function(A){return At(A)}).join("")+e.frame;return t}function d(e){for(var A=e.RIFF[0].WEBP[0],t=A.indexOf("\x9D\x01*"),n=0,r=[];4>n;n++)r[n]=A.charCodeAt(t+3+n);var a,s,d;return d=r[1]<<8|r[0],a=16383&d,d=r[3]<<8|r[2],s=16383&d,{width:a,height:s,data:A,riff:e}}function l(e){for(var A=0,t={};A<e.length;){var n=e.substr(A,4),r=parseInt(e.substr(A+4,4).split("").map(function(e){var A=e.charCodeAt(0).toString(2);return Array(8-A.length+1).join("0")+A}).join(""),2),a=e.substr(A+4+4,r);A+=8+r,t[n]=t[n]||[],"RIFF"==n||"LIST"==n?t[n].push(l(a)):t[n].push(a)}return t}function c(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(A){return At(A)}).reverse().join("")}function B(e){this.frames=[],this.duration=e||1,this.quality=100}return B.prototype.add=function(e,A){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:A||this.duration})},B.prototype.compile=function(){return new e(this.frames.map(function(e){var A=d(l(atob(e.image.slice(23))));return A.duration=e.duration,A}))},{Video:B,toWebM:e}}();"",xe.getFromDisk=function(e,A){if(!A)throw"callback is mandatory.";webrtcdev.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),Fn.Fetch(function(t,n){"all"!==e&&n===e+"Blob"&&A&&A(t),"all"===e&&A&&A(t,n.replace("Blob",""))})},xe.writeToDisk=function(e){webrtcdev.log("Writing recorded blob(s) to disk!"),e=e||{},e.audio&&e.video&&e.gif?e.audio.getDataURL(function(A){e.video.getDataURL(function(t){e.gif.getDataURL(function(e){Fn.Store({audioBlob:A,videoBlob:t,gifBlob:e})})})}):e.audio&&e.video?e.audio.getDataURL(function(A){e.video.getDataURL(function(e){Fn.Store({audioBlob:A,videoBlob:e})})}):e.audio&&e.gif?e.audio.getDataURL(function(A){e.gif.getDataURL(function(e){Fn.Store({audioBlob:A,gifBlob:e})})}):e.video&&e.gif?e.video.getDataURL(function(A){e.gif.getDataURL(function(e){Fn.Store({videoBlob:A,gifBlob:e})})}):e.audio?e.audio.getDataURL(function(e){Fn.Store({audioBlob:e})}):e.video?e.video.getDataURL(function(e){Fn.Store({videoBlob:e})}):e.gif&&e.gif.getDataURL(function(e){Fn.Store({gifBlob:e})})},"undefined"!=typeof module&&(module.exports=xe),"function"==typeof define&&define.amd&&define("RecordRTC",[],function(){return xe}),Ve.getFromDisk=xe.getFromDisk,Ve.writeToDisk=xe.writeToDisk,"undefined"!=typeof xe&&(xe.MRecordRTC=Ve);(function(e){e&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},!global.webrtcdev&&(global.webrtcdev={}),"undefined"==typeof global.webrtcdev.debug&&(global.webrtcdev.debug=global.webrtcdev.info=global.webrtcdev.error=global.webrtcdev.log=global.webrtcdev.log||function(){webrtcdev.log(arguments)}),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},e.HTMLVideoElement=function(){}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof $t&&(e.screen={width:0,height:0}),"undefined"==typeof Qn&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=global)})("undefined"==typeof global?null:global);var wn=window.requestAnimationFrame;"undefined"==typeof wn&&("undefined"!=typeof webkitRequestAnimationFrame&&(wn=webkitRequestAnimationFrame),"undefined"!=typeof mozRequestAnimationFrame&&(wn=mozRequestAnimationFrame));var hn=window.cancelAnimationFrame;"undefined"==typeof hn&&("undefined"!=typeof webkitCancelAnimationFrame&&(hn=webkitCancelAnimationFrame),"undefined"!=typeof mozCancelAnimationFrame&&(hn=mozCancelAnimationFrame));var fn=window.AudioContext;"undefined"==typeof fn&&("undefined"!=typeof webkitAudioContext&&(fn=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(fn=mozAudioContext));var Qn=window.URL;"undefined"==typeof Qn&&"undefined"!=typeof webkitURL&&(Qn=webkitURL),"undefined"!=typeof navigator&&"undefined"==typeof navigator.getUserMedia&&("undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var Cn=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),dn=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),ln=!dn&&!Cn&&!!navigator.webkitGetUserMedia,Un=window.MediaStream;"undefined"==typeof Un&&"undefined"!=typeof webkitMediaStream&&(Un=webkitMediaStream),"undefined"!=typeof Un&&(!("getVideoTracks"in Un.prototype)&&(Un.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(A){-1!==A.kind.toString().indexOf("video")&&e.push(A)}),e},Un.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(A){-1!==A.kind.toString().indexOf("audio")&&e.push(A)}),e}),!("stop"in Un.prototype)&&(Un.prototype.stop=function(){this.getAudioTracks().forEach(function(e){!e.stop||e.stop()}),this.getVideoTracks().forEach(function(e){!e.stop||e.stop()})}));var En={};"undefined"==typeof fn?"undefined"!=typeof webkitAudioContext&&(En.AudioContext=webkitAudioContext):En.AudioContext=fn,"undefined"!=typeof xe&&(xe.Storage=En),"undefined"!=typeof xe&&(xe.MediaStreamRecorder=Re),"undefined"!=typeof xe&&(xe.StereoAudioRecorder=De),"undefined"!=typeof xe&&(xe.CanvasRecorder=Ge),"undefined"!=typeof xe&&(xe.WhammyRecorder=ke);var pn=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function A(e){var A=Qn.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),t=new Worker(A);return Qn.revokeObjectURL(A),t}function t(e){function A(e,A,t){return[{data:e,id:231}].concat(t.map(function(e){var t=d({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:tt(A)});return A+=e.duration,{data:t,id:163}}))}function t(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var A=e[0].width,t=e[0].height,n=e[0].duration,r=1;r<e.length;r++)n+=e[r].duration;return{duration:n,width:A,height:t}}function n(e){for(var A=[];0<e;)A.push(255&e),e>>=8;return new Uint8Array(A.reverse())}function r(e){return new Uint8Array(e.split("").map(function(A){return A.charCodeAt(0)}))}function a(e){var A=[],t=e.length%8?Array(9-e.length%8).join("0"):"";e=t+e;for(var n=0;n<e.length;n+=8)A.push(parseInt(e.substr(n,8),2));return new Uint8Array(A)}function s(e){for(var A=[],t=0,d;t<e.length;t++){d=e[t].data,"object"==typeof d&&(d=s(d)),"number"==typeof d&&(d=a(d.toString(2))),"string"==typeof d&&(d=r(d));var l=d.size||d.byteLength||d.length,c=$A($A(ZA(l)/ZA(2))/8),B=l.toString(2),g=Array(7*c+7+1-B.length).join("0")+B,u=Array(c).join("0")+"1"+g;A.push(n(e[t].id)),A.push(a(u)),A.push(d)}return new Blob(A,{type:"video/webm"})}function d(e){var A=0;if(e.keyframe&&(A|=128),e.invisible&&(A|=8),e.lacing&&(A|=e.lacing<<1),e.discardable&&(A|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";var t=[128|e.trackNum,e.timecode>>8,255&e.timecode,A].map(function(A){return At(A)}).join("")+e.frame;return t}function l(e){for(var A=e.RIFF[0].WEBP[0],t=A.indexOf("\x9D\x01*"),n=0,r=[];4>n;n++)r[n]=A.charCodeAt(t+3+n);var a,s,d;return d=r[1]<<8|r[0],a=16383&d,d=r[3]<<8|r[2],s=16383&d,{width:a,height:s,data:A,riff:e}}function c(e,A){return parseInt(e.substr(A+4,4).split("").map(function(e){var A=e.charCodeAt(0).toString(2);return Array(8-A.length+1).join("0")+A}).join(""),2)}function B(e){for(var A=0,t={};A<e.length;){var n=e.substr(A,4),r=c(e,A),a=e.substr(A+4+4,r);A+=8+r,t[n]=t[n]||[],"RIFF"===n||"LIST"===n?t[n].push(B(a)):t[n].push(a)}return t}function g(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(A){return At(A)}).reverse().join("")}var u=new function(e){var n=t(e);if(!n)return[];for(var r=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:g(n.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],a=0,d=0;a<e.length;){var l=[],c=0;do l.push(e[a]),c+=e[a].duration,a++;while(a<e.length&&c<3e4);var B={id:524531317,data:A(d,0,l)};r[1].data.push(B),d+=c}return s(r)}(e.map(function(e){var A=l(B(atob(e.image.slice(23))));return A.duration=e.duration,A}));postMessage(u)}return e.prototype.add=function(e,A){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:A||this.duration})},e.prototype.compile=function(e){var n=A(t);n.onmessage=function(A){return A.data.error?void webrtcdev.error(A.data.error):void e(A.data)},n.postMessage(this.frames)},{Video:e}}();"undefined"!=typeof xe&&(xe.Whammy=pn);var Fn={init:function(){function e(e){e.createObjectStore(t.dataStoreName)}function A(){function e(e){A.objectStore(t.dataStoreName).get(e).onsuccess=function(A){t.callback&&t.callback(A.target.result,e)}}var A=a.transaction([t.dataStoreName],"readwrite");t.videoBlob&&A.objectStore(t.dataStoreName).put(t.videoBlob,"videoBlob"),t.gifBlob&&A.objectStore(t.dataStoreName).put(t.gifBlob,"gifBlob"),t.audioBlob&&A.objectStore(t.dataStoreName).put(t.audioBlob,"audioBlob"),e("audioBlob"),e("videoBlob"),e("gifBlob")}var t=this;if("undefined"==typeof indexedDB||"undefined"==typeof indexedDB.open)return void webrtcdev.error("IndexedDB API are not available in this browser.");var n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),r=indexedDB.open(n,1),a;r.onerror=t.onError,r.onsuccess=function(){if(a=r.result,a.onerror=t.onError,!a.setVersion)A();else if(1!==a.version){var n=a.setVersion(1);n.onsuccess=function(){e(a),A()}}else A()},r.onupgradeneeded=function(A){e(A.target.result)}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){webrtcdev.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};"undefined"!=typeof xe&&(xe.DiskStorage=Fn),"undefined"!=typeof xe&&(xe.GifRecorder=Ke);var bn=0,Hn={},yn=null,vn=null,Tn=[],Sn={},In=!1,Nn;this.getlisteninlink=function(){Et||console.error("cant generate listenin link , no session id found ");try{webrtcdev.log(" Current Session ",window.origin);let e=window.origin+"/#"+Et+"?appname=webrtcwebcall&role=inspector&audio=0&video=0";return e}catch(A){return webrtcdev.error("ListenIn :",A),!1}},this.sendlisteninlink=function(e,A,t,n){var r={apikey:A,senderuseremail:t,receiveruseremail:n,webrtcsessionid:webrtcdevobj.sessionid,connectiontype:1};return fetch(e,{method:"post",crossDomain:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:A,"Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(r)}).then(e=>e.json()).then(e=>console.log("Listenin API response ",e)).catch(e=>console.error("Listenin API response ",e))};var Rn="",Ln=null,Mn,Dn,On,kn,Kn,xn,it;try{Ln=new Worker("js/timekeeper.js"),Ln.addEventListener("message",function(A){let e=l(A.data.remotetime);A.data.remotetime&&e&&(e.innerHTML=A.data.time)},!1)}catch(e){webrtcdev.error("[timerjs]",e)}var _n=function(){try{var e=[];for(x in dt){let A=dt[+x+1];if(!A)break;webrtcdev.debug(" [timer js] startPeersTime for ",A.userid),Fe(A),e.push({zone:A.zone,userid:A.userid,remotetime:"remoteTime_"+A.userid}),Lt=!0}webrtcdev.info("[timerjs] Final tobj ",e),0<e.length&&Ln.postMessage(e)}catch(A){webrtcdev.error(A)}};this.getwebrtcdevlogs=function(){return webrtcdevlogs?webrtcdevlogs:null},this.sendwebrtcdevLogs=function(e,A,t){const n=new FormData;n.append("name",username||"no name"),document.getElementById(jt.screenshotContainer)&&n.append("scimage",document.getElementById(jt.screenshotContainer).src),document.getElementById(jt.logsContainer)&&(document.getElementById(jt.logsContainer).innerText=webrtcdevlogs),n.append("apikey",A),n.append("useremail",ft),n.append("sessionid",Et),n.append("message",t);{n.append("logfileContent",webrtcdevlogs)}return fetch(e,{method:"POST",body:n})},this.showUserStats=showUserStats=function(){var e=" userid-"+st+" Email-"+ft+" Audio-"+outgoing.audio+" Video-"+outgoing.video+" Role- "+Zt;document.getElementById("userstatus")?document.getElementById("userstatus").innerHTML=e:document.getElementById("mainDiv").prepend(e)},this.getscreenshot=function(e){var A=document.querySelector(e);html2canvas(A).then(e=>e.toDataURL())};var Pn=function(e){for(x in dt)if(dt[x].userid==e)return dt[x];return null},Vn=function(e){for(x in dt)if(dt[x].userid==e)return x;return null};this.getwebcallpeers=function(){return dt};var zn=function(e,A){return webrtcdev.log(" [widgets] widgetsobj ",A),new Promise(function(A){if(Mt.active?(webrtcdev.log(" chat objs ",Mt.inputBox,Mt.inputBox.text_id,document.getElementById(Mt.inputBox.text_id)),Mt.inputBox&&Mt.inputBox.text_id?(webrtcdev.log("[sessionmanager] chatObj - Assign chat Box "),le(Mt)):(webrtcdev.log("[sessionmanager] chatobj - Create chat Box "),de(Mt)),webrtcdev.log("[sessionmanager] chat widget loaded ")):webrtcdev.log("[sessionmanager] chat widget deactivated  "),Ot&&Ot.active&&"inspector"!=Zt?(Ot.button.id&&document.getElementById(Ot.button.id)?(webrtcdev.log("[sessionmanager] Assign Screen Record Button "),se(Ot)):(webrtcdev.log("[sessionmanager] Create Screen Record Button "),createScreenRecordButton(Ot)),webrtcdev.log(" [sessionmanager] Screen record widget loaded ")):Ot&&!Ot.active&&(Ot.button&&Ot.button.id&&document.getElementById(Ot.button.id)&&(document.getElementById(Ot.button.id).className="inactiveButton"),webrtcdev.warn("[sessionmanager] Screen record widget deactivated")),Wt.active?(Wt.button.shareButton.id&&l(Wt.button.shareButton.id)?(webrtcdev.log("[sessionmanager] Assign screenshare Button "),ae(Wt.button.shareButton)):(webrtcdev.log("[sessionmanager] Create screenshare Button "),ie(Wt)),webrtcdev.log(" [sessionmanager]screen share widget loaded ")):webrtcdev.warn("[sessionmanager] screen share widget deactivated "),zt&&zt.active?(zt.button.id&&document.getElementById(zt.button.id)?(webrtcdev.log("[sessionmanager] Reconnect Button Assigned"),FA(zt.button.id)):(webrtcdev.log("[sessionmanager]Rconnect Button created"),EA(zt)),webrtcdev.log(" [sessionmanager]reconnect widget loaded ")):zt&&!zt.active&&(zt.button&&zt.button.id&&document.getElementById(zt.button.id)&&(document.getElementById(zt.button.id).className="inactiveButton"),webrtcdev.warn(" [sessionmanager] reconnect widget deactivated ")),Xt&&Xt.active?(g("cursor1"),g("cursor2"),webrtcdev.log(" [sessionmanager] cursor widget not loaded ")):webrtcdev.warn(" [sessionmanager] cursor widget deactivated "),Yt&&Yt.active?(Yt.button.id&&document.getElementById(Yt.button.id),webrtcdev.log("[widget js] listenin widget loaded ")):Yt&&!Yt.active&&(Yt.button&&Yt.button.id&&document.getElementById(Yt.button.id)&&(document.getElementById(Yt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] listenin widget deactivated ")),Rt&&Rt.active?(me(Rt),g(Rt.container.id)):Rt&&!Rt.active&&webrtcdev.warn("[widget js] timer widget deactivated "),xt&&xt.active?(xt.container&&xt.container.id&&document.getElementById(xt.container.id)&&(document.getElementById(xt.container.id).hidden=!0),xt.button&&xt.button.id&&document.getElementById(xt.button.id)?ue(xt):ge(xt),Nn=function(){function e(e){t&&t.contentWindow.postMessage({canvasDesignerSyncData:e},"*")}function A(){event.data&&event.data.canvasDesignerSyncData&&a(event.data.canvasDesignerSyncData)}var t;let n={line:!0,pencil:!0,dragSingle:!0,dragMultiple:!0,eraser:!0,rectangle:!0,arc:!0,bezier:!0,quadratic:!0,text:!0};var r="pencil",a=function(e){webrtcdev.log("[widget js] syncDataListener",e)},s=window.addEventListener?"addEventListener":"attachEvent",d=window[s],l="attachEvent"==s?"onmessage":"message";return d(l,function(A){webrtcdev.log(" [widget js] CanvasDesigner parent received message : ",A.data),A.data.modalpopup?an.click():A.data||A.data.canvasDesignerSyncData?a(A.data.canvasDesignerSyncData):(!A.data||!A.data.canvasDesignerSyncData)&&webrtcdev.log("[widget js] parent received unexpected message")},!1),{appendTo:function(e){t=document.createElement("iframe"),t.id="drawboard",t.src="widget.html?tools="+JSON.stringify(n)+"&selectedIcon="+r,t.style.width="100%",t.style.height="100%",t.allowtransparency=!0,t.style.border=0,e.appendChild(t)},destroy:function(){t&&t.parentNode.removeChild(t),window.removeEventListener("message",A)},addSyncListener:function(e){a=e},syncData:e,setTools:function(e){n=e},setSelected:function(e){"undefined"!=typeof n[e]&&(r=e)}}}(),webrtcdev.log("[widget js] draw widget loaded ")):xt&&!xt.active&&(xt.button&&xt.button.id&&document.getElementById(xt.button.id)&&(document.getElementById(xt.button.id).className="inactiveButton"),webrtcdev.warn("[widget js] draw widget deactivated ")),_t.active&&OA(),Pt.active&&IA(),Dt.active?(webrtcdev.log("[widget js] fileshareobj ",Dt),e.enableFileSharing=!0,e.filesContainer=document.getElementById(Dt.fileShareContainer),Dt.button.id&&document.getElementById(Dt.button.id)?C(Dt):Q(Dt),webrtcdev.log(" [widget js] File sharing widget loaded ")):webrtcdev.warn("[widget js] File sharing widget not loaded "),qt&&qt.active)try{webrtcdev.log("[widget js]statisticsobj ",qt),document.getElementById(qt.statsConainer).innerHTML=""}catch(A){webrtcdev.error("[widget js] statisticsobj statsConainer not found",A)}if(jt&&jt.active)try{webrtcdev.log("[widget js] helpobj ",jt,document.getElementById(jt.helpContainer)),document.getElementById(jt.helpContainer).innerHTML=""}catch(e){webrtcdev.error("[widget js] helpobj helpContainer not found",e)}A("success")})},Xn=function(e){return webrtcdev.log("[sessionmanager] setRtcConn - initiating RtcConn"),at=new RTCMultiConnection,at.channel=this.sessionid,at.socketURL=location.hostname+":8085/",webrtcdev.log("[sessionmanager] set dontAttachStream , dontCaptureUserMedia , dontGetRemoteStream as true "),at.session={video:St||!0,audio:Tt||!0,data:It||!0},at.sdpConstraints.mandatory={OfferToReceiveAudio:Ht||!0,OfferToReceiveVideo:yt||!0},at.dontCaptureUserMedia=!St||!1,at.dontGetRemoteStream=!St||!1,at.dontAttachStream=!St||!1,at.onNewParticipant=function(e,A){webrtcdev.log("[sartjs] rtcconn onNewParticipant, participantId -  ",e," , userPreferences - ",A),at.acceptParticipationRequest(e,A)},at.onopen=function(A){webrtcdev.log("[sessionmanager] rtconn onopen - by ",A.userid,A);try{if(te(A.extra.name+" joined session ","info"),showdesktopnotification(document.title,A.extra.name+" joined session "),A.userid==st)webrtcdev.log("[sessionmanager] onopen selfuserid ",st," joined the session "),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onLocalConnect"}}));else{for(x in remoteUsers=at.peers.getAllParticipants(),webrtcdev.log(" [sessionmanager] onopen- Collecting remote peers",remoteUsers),remoteUsers){if(webrtcdev.log(" [sessionmanager] join-channel. Adding remote peer ",remoteUsers[x]),remoteUsers[x]==A.userid){let e=A.extra.role||"participant",t=A.extra.color,n=A.extra.email,r="LOCAL"==A.extra.name?"REMOTE":A.extra.name;WA(remoteUsers[x],r,t,n,e,"remote"),"inspector"==e&&ne("This session is being inspected ");break}webrtcdev.log(" [sessionmanager onopen] created/updated local peerinfo for open-channel ")}window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"session",action:"onSessionConnect"}}))}webrtcdev.log(" [sessionmanager onopen] setting cache - channel "+e+" with self-userid "+st+" and remoteUsers "+remoteUsers),qt&&qt.active&&showRtpstats(),"open"==at.connectionType?Jn("open",e,st,[]):"join"==at.connectionType?Jn("join",e,st,remoteUsers):te("Connection type is neither open nor join","warning"),Rt&&Rt.active&&(PA(Rt),zA())}catch(e){te("problem in session open ","warning"),webrtcdev.error("[sessionmanager] onopen - problem in session open",e)}},at.onMediaError=function(e,A){webrtcdev.error("[sessionmanager] onMediaError - ",e," constraints ",A),webrtcdev.warn("[sessionmanager] onMediaError- Joining without camera Stream"),te(e.name+" Joining without camera Stream ","warning"),en=!1;let t=dt[0];t.type="Local",t.stream="",t.streamid="",m(t)},at.onstream=function(e){webrtcdev.log("[sessionmanager] onstream - event ",e),"local"==e.type&&(en=!0);var A=Pn(e.userid);A?"inspector"==Zt&&"local"==e.type?(webrtcdev.info("[sessionmanager] onstream - ignore any incoming stream from inspector"),m(A)):(A.type=e.type,A.stream=e.stream,A.streamid=e.stream.streamid,m(A)):(webrtcdev.error("[sessionmanager] onstream - PeerInfo not present in webcallpeers ",e.userid," creating it now "),WA(e.userid,e.extra.name,e.extra.color,e.extra.email,e.extra.role,e.type),webrtcdev.log(" [sessionmanager] onstream - updated local peerinfo for open-channel "),JA(e.userid,"stream",e.stream),JA(e.userid,"streamid",e.streamid),m(Pn(e.userid)))},at.onstreamended=function(e){webrtcdev.warn("[sessionmanager] On streamEnded event ",e);let A=document.getElementById(e.streamid);A&&A.parentNode.removeChild(A)},at.chunkSize=50000,at.onmessage=function(t){if(webrtcdev.log("[sessionmanager] on message ",t),t.data.typing)ce(t.extra.name+" is typing ...");else if(t.data.stoppedTyping)ce("");else{let d=Pn(t.userid);switch(t.data.type){case"screenshare":if("startscreenshare"==t.data.message){let e=t.data.screenid;te("Starting screen share ",e);let A=document.getElementById(Wt.button.shareButton.id);A.className=Wt.button.shareButton.class_busy,A.innerHTML=Wt.button.shareButton.html_busy,A.disabled=!0,Te("join",e)}else if("screenshareStartedViewing"==t.data.message)oe("","screenshareStartedViewing");else if("stoppedscreenshare"==t.data.message){te("Screenshare has stopped : "+t.data.screenStreamid);let e=document.getElementById(Wt.button.shareButton.id);e.className=Wt.button.shareButton.class_off,e.innerHTML=Wt.button.shareButton.html_off,e.disabled=!1,Ie(t.data.screenStreamid)}else webrtcdev.warn(" unrecognized screenshare message ",t.data.message);break;case"chat":ce(t.extra.name+" has send message"),$e({header:t.extra.name,message:t.data.message,userinfo:t.data.userinfo,color:t.extra.color}),window.dispatchEvent(new CustomEvent("webrtcdev",{detail:{servicetype:"chat",action:"onchat"}}));break;case"imagesnapshot":F(null,d,t.data.message,t.data.name,"imagesnapshot"),H(null,d,t.data.message,t.data.name,"imagesnapshot");break;case"videoRecording":F(null,d,t.data.message,t.data.name,"videoRecording"),H(null,d,t.data.message,t.data.name,"videoRecording");break;case"videoScreenRecording":F(null,d,t.data.message,t.data.name,"videoScreenRecording"),H(null,d,t.data.message,t.data.name,"videoScreenRecording");break;case"file":$e({header:t.extra.name,message:t.data.message,userinfo:A(at.blobURLs[t.userid],"chat-message.png"),color:t.extra.color});break;case"canvas":t.data.draw?Nn.syncData(t.data.draw):t.data.board?(webrtcdev.log(" Canvas : ",t.data),"remote"==t.data.board.from&&("open"==t.data.board.event&&!0!=In?Be(t.data.board):"close"==t.data.board.event&&!0==In&&Be(t.data.board))):webrtcdev.warn(" Board data mismatch",t.data);break;case"texteditor":KA(t.data.data);break;case"codeeditor":LA(t.data.data);break;case"pointer":var e=document.getElementById("cursor2");e?"startCursor"==t.data.action?(e.setAttribute("style","display:block"),HA(e,t.data.corX,t.data.corY)):"stopCursor"==t.data.action&&e.setAttribute("style","display:none"):alert(" Cursor for remote is not present ");break;case"timer":d&&(!d.time&&(d.time=t.data.time),!d.zone&&(d.zone=t.data.zone),webrtcdev.log("[sessionmanager] webcallpeers appended with zone and datetime ",d)),webrtcdev.log("[sessionmanager] peerTimerStarted, start peerTimeZone and startPeersTime"),XA(t.data.zone,t.userid),_n(t.data.time,t.data.zone,t.userid);break;case"buttonclick":var n=l(t.data.buttonName);n.getAttribute("lastClickedBy")!=at.userid&&(n.setAttribute("lastClickedBy",t.userid),n.click());break;case"syncOldFiles":fA();break;case"shareFileRemove":webrtcdev.log(" [sessionmanager] shareFileRemove - remove file : ",t.data._filename);var r=t.data._element,a=t.data._filename;let c="removeButton"+r;if(document.getElementById("display"+a)&&g("display"+a),document.getElementById(r))g(r),R(r),webrtcdev.log(" [sessionmanager] shareFileRemove done");else return void webrtcdev.log(" [sessionmanager] shareFileRemove already done since ",r,"element doesnt exist ");document.getElementById(c).click(),g(c);break;case"shareFileStopUpload":var s=t.data._element;for(x in webrtcdev.log(" [sessionmanager] shareFileStopUpload",s),dt)for(y in dt[x].filearray)if(dt[x].filearray[y].pid==s)return webrtcdev.log("[ sessionmanager ] shareFileStopUpload -  filepid ",dt[x].filearray[y].pid," | status ",dt[x].filearray[y].status),dt[x].filearray[y].status="stopped",N(s),void R(s);break;case"sendstats":be();break;case"receivedstats":He(t.userid,t.data.message);break;default:webrtcdev.warn(" unrecognizable message from peer  ",t);}}},at.sendMessage=function(e){webrtcdev.log(" sendMessage ",e),e.userid=at.userid,e.extra=at.extra,at.sendCustomMessage(e)},at.onleave=function(A){webrtcdev.warn(" [ session manager ] on leave - ",A.userid,A.extra.name),alert(A.extra.userid+A.extra.name+"has left the session "),A.extra.name&&te(A.extra.name+"  left the conversation.");var e=Pn(A.userid);webrtcdev.warn(" [ session manager ] remove peerinfo ",e," from webcallpeers ",dt),e&&(p(e),YA(A.userid))},at.onclose=function(A){webrtcdev.warn("[session manager] RTCConn on close  ",A)},at.onEntireSessionClosed=function(){webrtcdev.warn("[session manager]  on sesion  closed ",null),at.attachStreams.forEach(function(e){e.stop()}),te("Session Disconnected")},at.onFileStart=function(e){webrtcdev.log("onFileStart",e),gA(e)},at.onFileProgress=function(e){uA(e)},at.onFileEnd=function(e){mA(e)},at.takeSnapshot=function(e,A){Ye({userid:e,connection:connection,callback:A})},at.connectionType=null,at.remoteUsers=[],at.extra={uuid:at.userid,name:ht||"",color:"undefined"==typeof nn.userdetails?"":nn.userdetails.usercolor,email:ft||"",role:Zt||"participant"},at.socketMessageEvent="RTCMultiConnection-Message",at.socketCustomEvent="RTCMultiConnection-Custom-Message",at.enableFileSharing=!0,at.filesContainer=document.body||document.documentElement,at.onSocketDisconnect=function(A){webrtcdev.error("[sesionmanager ] on Socket Disconnected ",A),webrtcdev.log("[sesionmanager ] re-establish socket connection  with SDP "),at.rejoin(at.connectionDescription)},at.onSocketError=function(A){webrtcdev.error("[sesionmanager ] on Socket Error ",A)},webrtcdev.log("[sessionmanager] rtcConn : ",at),at},Gn=function(e,A,t){webrtcdev.info("[sessionmanager] - openWebRTC channel: ",e),socket.emit("open-channel",{channel:e,sender:A,maxAllowed:t}),te(" Making a new session ")},Jn=function(e,A,t,n){if(webrtcdev.info(" [sessionmanager] ConnectWebRTC type : ",e," , Channel :",A," , self-Userid : ",t," , and remote users : ",n),Nt&&showUserStats(),Yt.active&&"inspector"==Zt&&(webrtcdev.info(" [sessionmanage] freezing screen for role inspector "),bA()),Dt.active)try{var r=Pn(t);if(!r)throw"self peerinfo missing in webcallpeers for "+t;if("single"==Dt.props.fileShare)_(r),l(r.fileShare.outerbox).style.width="100%";else if("divided"==Dt.props.fileShare){for(x in"inspector"==Zt?webrtcdev.log("[sessionmanager] Since it is an inspector's own session , not creating local File viewer and list"):(webrtcdev.log(" [sessionmanager] creating local file sharing"),_(r)),dt)dt[x].userid!=t&&"inspector"!=dt[x].role&&(webrtcdev.log(" [start connectWebRTC] creating remote file sharing "),_(dt[x]));Dt.sendOldFiles&&hA()}else webrtcdev.error("[sessionmanager] fileshareobj.props.fileShare undefined ");"single"==Dt.props.fileList?document.getElementById(r.fileList.outerbox).style.width="100%":"single"==Dt.props.fileShare?webrtcdev.error("fileshareobj.props.fileShare undefined "):webrtcdev.log("No Seprate div created for this peer since fileshare container is single")}catch(e){webrtcdev.error("[sessionmanager] connectwebrtc -",e)}Rt&&Rt.active&&(Ue(),Qe())},Yn=function(e,A){te("Joining an existing session "+e),webrtcdev.info(" [sessionmanager] joinWebRTC channel: ",e),Nt&&showUserStats(),socket.emit("join-channel",{channel:e,sender:A,extra:{userid:A,name:ht||"",color:Qt||"",email:ft||"",role:Zt||"participant"}})};window.onunload=function(){webrtcdev.log("[startjs] onunload ",localStorage.getItem("channel")),alert(" Refreshing the Page will loose the session data")},this.clearCaches=clearCaches=function(){localStorage.clear()}};"undefined"!=typeof module&&(module.exports=exports=webrtcdevcon);